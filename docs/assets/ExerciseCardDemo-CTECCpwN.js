import{j as e,B as t,m as $,e as h,I as u,a5 as K,z as ee,A as re,P as r,u as be,at as te,r as je,aZ as Se,a_ as ve,a$ as ye,a0 as we,bX as ke,a4 as Ce,b0 as ze,aN as E,aM as se,g as S,k as ne,a1 as ie,b1 as oe,bU as H,bY as Ie}from"./mui-D40dqk12.js";import{r as a}from"./vendor-B0qVADJY.js";import{G as Ae}from"./index-BDi-38df.js";import{D as ae,a as Te,g as We}from"./avatarUtils-WOXNzkwt.js";import{g as Re}from"./exerciseDemoImages-dFZ_3ZkE.js";import"./firebase-CJLtoEJQ.js";const M=a.memo(a.forwardRef(({weight:i="",reps:v="",lastWeight:m=null,lastReps:g=null,onWeightChange:f,onRepsChange:n,weightIncrement:p=2.5,repsIncrement:z=1,disabled:c=!1},b)=>{const o=x=>{const w=parseFloat(i)||0,I=Math.max(0,w+x);f(I)},l=x=>{const w=parseInt(v)||0,I=Math.max(0,w+x);n(I)},y=(()=>{if(m===null||g===null)return null;const x=parseFloat(i)||0,w=parseInt(v)||0;return x>m?"weight":x===m&&w>g?"reps":null})();return e.jsxs(t,{sx:{width:"100%"},children:[e.jsxs($,{direction:"row",spacing:2,sx:{mb:1},children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:.5,flex:1},children:[e.jsx(h,{variant:"caption",sx:{minWidth:"50px",fontWeight:600,color:"text.secondary"},children:"Weight:"}),e.jsx(u,{size:"small",onClick:()=>o(-p),disabled:c,sx:{border:"1px solid",borderColor:"divider",width:"32px",height:"32px"},children:e.jsx(K,{fontSize:"small"})}),e.jsx(ee,{type:"number",value:i,onChange:x=>f(x.target.value),disabled:c,inputMode:"decimal",inputRef:b,size:"small",sx:{width:"70px","& input":{textAlign:"center",padding:"8px 4px",fontSize:"1rem",fontWeight:600}}}),e.jsx(u,{size:"small",onClick:()=>o(p),disabled:c,sx:{border:"1px solid",borderColor:"divider",width:"32px",height:"32px"},children:e.jsx(re,{fontSize:"small"})}),e.jsx(h,{variant:"caption",sx:{color:"text.secondary"},children:"lbs"})]}),e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:.5,flex:1},children:[e.jsx(h,{variant:"caption",sx:{minWidth:"40px",fontWeight:600,color:"text.secondary"},children:"Reps:"}),e.jsx(u,{size:"small",onClick:()=>l(-z),disabled:c,sx:{border:"1px solid",borderColor:"divider",width:"32px",height:"32px"},children:e.jsx(K,{fontSize:"small"})}),e.jsx(ee,{type:"number",value:v,onChange:x=>n(x.target.value),disabled:c,inputMode:"numeric",size:"small",sx:{width:"60px","& input":{textAlign:"center",padding:"8px 4px",fontSize:"1rem",fontWeight:600}}}),e.jsx(u,{size:"small",onClick:()=>l(z),disabled:c,sx:{border:"1px solid",borderColor:"divider",width:"32px",height:"32px"},children:e.jsx(re,{fontSize:"small"})})]})]}),(m!==null||g!==null)&&e.jsxs(h,{variant:"caption",sx:{color:"text.secondary",display:"flex",alignItems:"center",gap:.5},children:["Last: ",m??"â€“"," Ã— ",g??"â€“",y==="weight"&&e.jsx("span",{style:{color:"green",fontWeight:600},children:"â†‘ Weight"}),y==="reps"&&e.jsx("span",{style:{color:"green",fontWeight:600},children:"â†‘ Reps"})]})]})}));M.displayName="ExerciseInputs";M.propTypes={weight:r.oneOfType([r.string,r.number]),reps:r.oneOfType([r.string,r.number]),lastWeight:r.number,lastReps:r.number,onWeightChange:r.func.isRequired,onRepsChange:r.func.isRequired,weightIncrement:r.number,repsIncrement:r.number,disabled:r.bool};const G=a.memo(({exerciseName:i,setNumber:v,totalSets:m,videoUrl:g,demoImage:f=null,lastWeight:n=null,lastReps:p=null,onSubmit:z,onBack:c,showBack:b=!1,suggestedWeight:o=null,suggestedReps:l=null,showSuggestions:j=!0,elapsedTime:y=null,currentStep:x=1,totalSteps:w=1,isFavorite:I=!1,onToggleFavorite:U=null,onSkip:L=null,onSwap:O=null,onPartialComplete:q=null,onExit:N=null,showPartialComplete:le=!1})=>{const A=be(),{profile:T,getInitials:xe}=Ae(),[D,F]=a.useState(n||""),[P,B]=a.useState(p||""),[d,_]=a.useState(!1),[ce,R]=a.useState(!1),[Q,V]=a.useState(f),[de,X]=a.useState(!1),me=te(A.breakpoints.up("sm")),pe=te("(orientation: landscape)"),k=me&&pe;a.useEffect(()=>{V(f),X(!1)},[f]);const he=()=>{de||(X(!0),V(null))},ue=a.useMemo(()=>{let s=0;for(let W=0;W<i.length;W++)s=(s<<5)-s+i.charCodeAt(W),s=s&s;const C=Math.abs(s)%ae.length;return ae[C].url},[i]),ge=()=>{let s=null;if(T.avatar)if(T.avatar.startsWith("preset-")){const C=Te(T.avatar);s=e.jsx(H,{sx:{width:"100%",height:"100%",maxWidth:300,maxHeight:300,bgcolor:C,fontSize:{xs:"3rem",sm:"5rem",md:"6rem"},fontWeight:700},children:xe()})}else if(T.avatar.startsWith("doggo-")){const C=We(T.avatar);s=e.jsx(H,{src:C,alt:"User avatar",sx:{width:"100%",height:"100%",maxWidth:300,maxHeight:300}})}else s=e.jsx(H,{src:T.avatar,alt:"User avatar",sx:{width:"100%",height:"100%",maxWidth:300,maxHeight:300}});else s=e.jsx(H,{src:ue,alt:"Guest avatar",sx:{width:"100%",height:"100%",maxWidth:300,maxHeight:300}});return e.jsxs(t,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",gap:1},children:[s,e.jsx(h,{variant:"caption",sx:{color:"text.secondary",fontSize:{xs:"0.7rem",sm:"0.8rem"},fontStyle:"italic"},children:"no demo image available"})]})},Y=s=>{s.preventDefault(),_(!0),setTimeout(()=>{z({weight:parseFloat(D)||0,reps:parseInt(P)||0}),_(!1),R(!1)},800)},Z=()=>{o!==null&&F(o),l!==null&&B(l),R(!0)},J=()=>j&&!d&&!ce&&(o!==null||l!==null),fe=s=>{const C=Math.floor(s/60),W=s%60;return`${C}:${W.toString().padStart(2,"0")}`};return e.jsxs(t,{className:"exercise-card",sx:{display:"flex",flexDirection:"column",height:{xs:"calc(100dvh - 140px)",sm:"calc(100dvh - 140px)",md:"calc(100dvh - 140px)"},p:{xs:2,sm:3},overflow:"hidden",containerType:"inline-size"},children:[e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.3,flexShrink:0},children:[y!==null&&e.jsx(h,{variant:"body1",sx:{fontWeight:600,fontSize:{xs:"0.9rem",sm:"1.25rem"}},children:fe(y)}),e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(je,{label:`Set ${v} of ${m}`,color:"primary",size:"small",sx:{fontWeight:600,fontSize:{xs:"0.7rem",sm:"0.85rem"}}}),e.jsxs(h,{variant:"body1",sx:{fontWeight:600,fontSize:{xs:"0.9rem",sm:"1.25rem"}},children:[x,"/",w]}),U&&e.jsx(u,{onClick:U,size:"small",sx:{color:I?"warning.main":"action.active","&:hover":{color:"warning.main"},p:{xs:.5,sm:1}},"aria-label":"Toggle favorite",children:I?e.jsx(Se,{sx:{fontSize:{xs:20,sm:24}}}):e.jsx(ve,{sx:{fontSize:{xs:20,sm:24}}})})]})]}),e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:1,mb:.3,flexShrink:0},children:[e.jsxs(t,{sx:{display:"flex",gap:1},children:[e.jsx(u,{component:"a",href:`https://www.google.com/search?q=${encodeURIComponent(i+" form")}`,target:"_blank",rel:"noopener noreferrer",sx:{minWidth:{xs:"36px",sm:"44px"},minHeight:{xs:"36px",sm:"44px"},color:"primary.main",border:"2px solid",borderColor:"primary.main",borderRadius:"8px","&:hover":{backgroundColor:A.palette.mode==="dark"?"rgba(29, 181, 132, 0.08)":"rgba(24, 160, 113, 0.08)"}},"aria-label":`Search for ${i} form guide`,children:e.jsx(ye,{sx:{fontSize:{xs:20,sm:24}}})}),L&&e.jsx(u,{onClick:L,sx:{minWidth:{xs:"36px",sm:"44px"},minHeight:{xs:"36px",sm:"44px"},color:"primary.main",border:"2px solid",borderColor:"primary.main",borderRadius:"8px","&:hover":{backgroundColor:A.palette.mode==="dark"?"rgba(29, 181, 132, 0.08)":"rgba(24, 160, 113, 0.08)"}},"aria-label":"Skip exercise",children:e.jsx(we,{sx:{fontSize:{xs:20,sm:24}}})}),O&&e.jsx(u,{onClick:O,sx:{minWidth:{xs:"36px",sm:"44px"},minHeight:{xs:"36px",sm:"44px"},color:"primary.main",border:"2px solid",borderColor:"primary.main",borderRadius:"8px","&:hover":{backgroundColor:A.palette.mode==="dark"?"rgba(29, 181, 132, 0.08)":"rgba(24, 160, 113, 0.08)"}},"aria-label":"Swap exercise",children:e.jsx(ke,{sx:{fontSize:{xs:20,sm:24}}})})]}),e.jsxs(t,{sx:{display:"flex",gap:1},children:[le&&q&&e.jsx(u,{onClick:q,sx:{minWidth:{xs:"36px",sm:"44px"},minHeight:{xs:"36px",sm:"44px"},color:"warning.main",border:"2px solid",borderColor:"warning.main",borderRadius:"8px","&:hover":{backgroundColor:(A.palette.mode==="dark","rgba(255, 140, 0, 0.08)")}},"aria-label":"End and save workout",children:e.jsx(Ce,{sx:{fontSize:{xs:20,sm:24}}})}),N&&e.jsx(u,{onClick:N,sx:{minWidth:{xs:"36px",sm:"44px"},minHeight:{xs:"36px",sm:"44px"},color:"error.main",border:"2px solid",borderColor:"error.main",borderRadius:"8px","&:hover":{backgroundColor:(A.palette.mode==="dark","rgba(239, 83, 80, 0.08)")}},"aria-label":"End workout without saving",children:e.jsx(ze,{sx:{fontSize:{xs:20,sm:24}}})})]})]}),e.jsxs(t,{sx:{flexGrow:1,flexShrink:1,minHeight:0,display:"flex",flexDirection:k?"row":"column",gap:k?2:.3,mb:.3},children:[e.jsxs(t,{sx:{flex:k?"1 1 50%":"1 1 auto",display:"flex",flexDirection:"column",minHeight:0,gap:.3},children:[e.jsx(t,{sx:{flexShrink:0},children:e.jsx(h,{component:"div",sx:{fontWeight:"700 !important",color:"primary.main",textAlign:k?"left":"center",lineHeight:"1.2 !important",fontFamily:"'Montserrat', sans-serif !important",fontSize:k?{sm:"1.5rem !important",md:"2rem !important"}:{xs:"1.25rem !important",sm:"1.75rem !important",md:"2.5rem !important"},display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-word"},children:i})}),e.jsx(t,{sx:{flexGrow:1,flexShrink:1,position:"relative",minHeight:0,display:"flex",alignItems:"center",justifyContent:"center"},children:Q?e.jsx(t,{component:"img",src:Q,alt:`${i} demonstration`,onError:he,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:2,objectFit:"contain"},loading:"lazy"}):g?e.jsx("iframe",{src:g,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",border:"none",borderRadius:"8px"},frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:`${i} video`}):ge()})]}),!k&&e.jsxs(t,{sx:{flexShrink:0},children:[d&&e.jsx(E,{icon:e.jsx(se,{}),severity:"success",sx:{mb:.3},children:"Set logged! Moving to next..."}),J()&&e.jsx(E,{icon:e.jsx(ne,{}),severity:"info",sx:{mb:.3,"& .MuiAlert-message":{width:"100%"}},children:e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[e.jsxs(h,{variant:"body2",sx:{mr:1,flexGrow:1},children:["ðŸ’¡ Try: ",o," lbs Ã— ",l," reps",n!=null&&o>n&&" (â†‘w)",n!=null&&o===n&&l>p&&" (â†‘r)"]}),e.jsxs(t,{sx:{display:"flex",gap:1,flexShrink:0},children:[e.jsx(S,{size:"small",onClick:Z,variant:"contained",children:"Accept"}),e.jsx(S,{size:"small",onClick:()=>R(!0),variant:"outlined",children:"Skip"})]})]})}),e.jsxs(t,{component:"form",onSubmit:Y,children:[e.jsx(t,{sx:{mb:2},children:e.jsx(M,{weight:D,reps:P,lastWeight:n,lastReps:p,onWeightChange:F,onRepsChange:B,disabled:d})}),e.jsxs($,{direction:"row",spacing:2,children:[b&&e.jsx(S,{type:"button",variant:"outlined",onClick:c,disabled:d,startIcon:e.jsx(ie,{}),sx:{minHeight:"44px"},children:"Back"}),e.jsx(S,{type:"submit",variant:"contained",fullWidth:!b,disabled:d,endIcon:e.jsx(oe,{}),sx:{minHeight:"44px"},children:d?"Logging...":"Next"})]})]})]})]}),k&&e.jsxs(t,{sx:{flexShrink:0},children:[d&&e.jsx(E,{icon:e.jsx(se,{}),severity:"success",sx:{mb:.3},children:"Set logged! Moving to next..."}),J()&&e.jsx(E,{icon:e.jsx(ne,{}),severity:"info",sx:{mb:.3,"& .MuiAlert-message":{width:"100%"}},children:e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[e.jsxs(h,{variant:"body2",sx:{mr:1,flexGrow:1},children:["ðŸ’¡ Try: ",o," lbs Ã— ",l," reps",n!=null&&o>n&&" (â†‘w)",n!=null&&o===n&&l>p&&" (â†‘r)"]}),e.jsxs(t,{sx:{display:"flex",gap:1,flexShrink:0},children:[e.jsx(S,{size:"small",onClick:Z,variant:"contained",children:"Accept"}),e.jsx(S,{size:"small",onClick:()=>R(!0),variant:"outlined",children:"Skip"})]})]})}),e.jsxs(t,{component:"form",onSubmit:Y,children:[e.jsx(t,{sx:{mb:2},children:e.jsx(M,{weight:D,reps:P,lastWeight:n,lastReps:p,onWeightChange:F,onRepsChange:B,disabled:d})}),e.jsxs($,{direction:"row",spacing:2,children:[b&&e.jsx(S,{type:"button",variant:"outlined",onClick:c,disabled:d,startIcon:e.jsx(ie,{}),sx:{minHeight:"44px"},children:"Back"}),e.jsx(S,{type:"submit",variant:"contained",fullWidth:!b,disabled:d,endIcon:e.jsx(oe,{}),sx:{minHeight:"44px"},children:d?"Logging...":"Next"})]})]})]})]})});G.displayName="ExerciseCard";G.propTypes={exerciseName:r.string.isRequired,setNumber:r.number.isRequired,totalSets:r.number.isRequired,videoUrl:r.string,demoImage:r.string,lastWeight:r.number,lastReps:r.number,onSubmit:r.func.isRequired,onBack:r.func,showBack:r.bool,suggestedWeight:r.number,suggestedReps:r.number,showSuggestions:r.bool,elapsedTime:r.number,currentStep:r.number,totalSteps:r.number,isFavorite:r.bool,onToggleFavorite:r.func,onSkip:r.func,onSwap:r.func,onPartialComplete:r.func,onExit:r.func,showPartialComplete:r.bool};const Be=()=>{const[i,v]=a.useState(0),[m,g]=a.useState(!1),f="Dumbbell Incline Bench Press",n=Re(f);a.useState(()=>{const j=setInterval(()=>{v(y=>y+1)},1e3);return()=>clearInterval(j)},[]);const p=j=>{console.log("Set logged:",j),alert(`Set logged: ${j.weight} lbs Ã— ${j.reps} reps`)},z=()=>{alert("Skip exercise clicked")},c=()=>{alert("Swap exercise clicked")},b=()=>{alert("Partial complete clicked")},o=()=>{alert("Exit clicked")},l=()=>{g(!m)};return e.jsx(Ie,{maxWidth:!1,disableGutters:!0,sx:{height:"100vh",overflow:"hidden"},children:e.jsxs(t,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(t,{sx:{position:"fixed",bottom:0,left:0,right:0,height:"60px",bgcolor:"primary.main",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:600},children:"Bottom Navigation (60px)"}),e.jsx(t,{sx:{flex:1,overflow:"auto",pb:"60px"},children:e.jsx(G,{exerciseName:f,demoImage:n,setNumber:2,totalSets:3,lastWeight:65,lastReps:8,suggestedWeight:67.5,suggestedReps:8,showSuggestions:!0,onSubmit:p,showBack:!0,elapsedTime:i,currentStep:5,totalSteps:24,isFavorite:m,onToggleFavorite:l,onSkip:z,onSwap:c,onPartialComplete:b,onExit:o,showPartialComplete:!0})})]})})};export{Be as default};
