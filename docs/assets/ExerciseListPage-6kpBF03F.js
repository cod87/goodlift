import{j as e,B as p,e as m,ar as z,m as E,z as w,G as H,H as G,a as M,I as W,bh as O,a7 as D,J as y,K as f,N as v,v as o,br as se,bs as te,bt as re,bu as N,bv as c,bw as ae,bx as le,by as ie,r as ne}from"./mui-DHtKCVyI.js";import{r as i}from"./vendor-B0qVADJY.js";import{C as oe}from"./CompactHeader-BaA1YDi8.js";import{U as ce,V,m as de,W as xe,g as pe,b as he,X as me,e as $,d as J}from"./index-Bme_WGpp.js";import"./firebase-CJLtoEJQ.js";const fe=()=>{const{allExercises:n,loading:K}=ce(),[h,k]=i.useState(""),[u,A]=i.useState("all"),[g,I]=i.useState("all"),[j,R]=i.useState("all"),[U,F]=i.useState(new Set),[X,S]=i.useState({}),[Q,T]=i.useState({}),[l,q]=i.useState(!1);i.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"}),(async()=>{const a=new Set,t={},r={};await Promise.all(n.map(async b=>{const d=b["Exercise Name"];xe(d)&&a.add(d);const[x,ee]=await Promise.all([pe(d),he(d)]);t[d]=x??"",r[d]=ee??""})),F(a),S(t),T(r)})()},[n]);const P=i.useMemo(()=>{const s=new Set;return n.forEach(a=>{const t=V(a["Primary Muscle"]);s.add(t)}),["all",...Array.from(s).sort()]},[n]),L=i.useMemo(()=>{const s=new Set;return n.forEach(a=>{s.add(a.Equipment)}),["all",...Array.from(s).sort()]},[n]),B=i.useMemo(()=>{const s=new Set;return n.forEach(a=>{s.add(a["Exercise Type"])}),["all",...Array.from(s).sort()]},[n]),C=i.useMemo(()=>n.filter(s=>{const a=h===""||s["Exercise Name"].toLowerCase().includes(h.toLowerCase())||s["Primary Muscle"].toLowerCase().includes(h.toLowerCase())||s.Equipment.toLowerCase().includes(h.toLowerCase()),t=V(s["Primary Muscle"]),r=u==="all"||t===u,b=g==="all"||s.Equipment===g,d=j==="all"||s["Exercise Type"]===j;return a&&r&&b&&d}),[n,h,u,g,j]),Y=s=>{const a=me(s);F(t=>{const r=new Set(t);return a?r.add(s):r.delete(s),r})},Z=async(s,a)=>{if(a==="")S(t=>({...t,[s]:""})),await $(s,null);else{const t=Math.max(0,Number(a));S(r=>({...r,[s]:t})),await $(s,t)}},_=async(s,a)=>{if(a==="")T(t=>({...t,[s]:""})),await J(s,null);else{const t=Math.max(1,Number(a));T(r=>({...r,[s]:t})),await J(s,t)}};return K?e.jsx(p,{sx:{p:4,textAlign:"center"},children:e.jsx(m,{variant:"h5",color:"text.secondary",children:"Loading exercises..."})}):e.jsxs(p,{sx:{width:"100%",minHeight:"100vh"},children:[e.jsx(oe,{title:"Exercise Database"}),e.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},style:{padding:"1rem",maxWidth:"1400px",margin:"0 auto"},children:C.length>0||h||u!=="all"||g!=="all"||j!=="all"?e.jsxs(p,{children:[e.jsxs(z,{sx:{position:"sticky",top:0,zIndex:10,borderRadius:"8px 8px 0 0",boxShadow:"0 2px 8px rgba(19, 70, 134, 0.08)"},children:[e.jsx(p,{sx:{p:1.5,borderBottom:"1px solid",borderColor:"divider",bgcolor:"background.paper"},children:e.jsxs(E,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(w,{size:"small",placeholder:"Search exercises...",value:h,onChange:s=>k(s.target.value),InputProps:{startAdornment:e.jsx(H,{position:"start",children:e.jsx(G,{fontSize:"small"})})},sx:{flex:1,"& .MuiOutlinedInput-root":{borderRadius:1,bgcolor:"background.default"},"& .MuiInputBase-input":{fontSize:"0.875rem"}}}),e.jsx(M,{title:l?"Hide filters":"Show filters",children:e.jsx(W,{onClick:()=>q(!l),sx:{bgcolor:l?"primary.main":"background.default",color:l?"white":"text.primary","&:hover":{bgcolor:l?"primary.dark":"action.hover"}},children:e.jsx(O,{})})}),e.jsxs(m,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",whiteSpace:"nowrap",minWidth:"fit-content"},children:[C.length," of ",n.length]})]})}),e.jsx(D,{in:l,children:e.jsx(p,{sx:{p:1.5,pt:1,bgcolor:"background.paper"},children:e.jsxs(E,{direction:{xs:"column",sm:"row"},spacing:1,children:[e.jsxs(y,{size:"small",sx:{minWidth:{xs:"100%",sm:150}},children:[e.jsx(f,{children:"Muscle Group"}),e.jsxs(v,{value:u,onChange:s=>A(s.target.value),label:"Muscle Group",sx:{fontSize:"0.875rem",bgcolor:"background.default"},children:[e.jsx(o,{value:"all",children:"All Muscles"}),P.filter(s=>s!=="all").map(s=>e.jsx(o,{value:s,children:s},s))]})]}),e.jsxs(y,{size:"small",sx:{minWidth:{xs:"100%",sm:150}},children:[e.jsx(f,{children:"Equipment"}),e.jsxs(v,{value:g,onChange:s=>I(s.target.value),label:"Equipment",sx:{fontSize:"0.875rem",bgcolor:"background.default"},children:[e.jsx(o,{value:"all",children:"All Equipment"}),L.filter(s=>s!=="all").map(s=>e.jsx(o,{value:s,children:s},s))]})]}),e.jsxs(y,{size:"small",sx:{minWidth:{xs:"100%",sm:150}},children:[e.jsx(f,{children:"Exercise Type"}),e.jsxs(v,{value:j,onChange:s=>R(s.target.value),label:"Exercise Type",sx:{fontSize:"0.875rem",bgcolor:"background.default"},children:[e.jsx(o,{value:"all",children:"All Types"}),B.filter(s=>s!=="all").map(s=>e.jsx(o,{value:s,children:s},s))]})]})]})})})]}),e.jsx(se,{component:z,sx:{borderRadius:"0 0 8px 8px",boxShadow:"0 2px 8px rgba(19, 70, 134, 0.08)",maxHeight:"calc(100vh - 250px)",overflow:"auto"},children:e.jsxs(te,{stickyHeader:!0,size:"small",sx:{minWidth:{xs:300,sm:650}},children:[e.jsx(re,{children:e.jsxs(N,{children:[e.jsx(c,{sx:{fontWeight:600,bgcolor:"primary.main",color:"white",py:1.5},children:e.jsx(p,{sx:{display:"flex",alignItems:"center",gap:.5},children:e.jsx("span",{children:"★"})})}),e.jsx(c,{sx:{fontWeight:600,bgcolor:"primary.main",color:"white",py:1.5},children:"Exercise Name"}),e.jsx(c,{sx:{fontWeight:600,bgcolor:"primary.main",color:"white",py:1.5,display:{xs:"none",sm:"table-cell"}},children:"Type"}),e.jsx(c,{sx:{fontWeight:600,bgcolor:"primary.main",color:"white",py:1.5,display:{xs:"none",md:"table-cell"}},children:"Equipment"}),e.jsx(c,{sx:{fontWeight:600,bgcolor:"primary.main",color:"white",py:1.5,textAlign:"center"},children:"Target Weight (lbs)"}),e.jsx(c,{sx:{fontWeight:600,bgcolor:"primary.main",color:"white",py:1.5,textAlign:"center"},children:"Target Reps"})]})}),e.jsx(ae,{children:C.map((s,a)=>{const t=U.has(s["Exercise Name"]),r=s["Exercise Name"],b=X[r],d=Q[r];return e.jsxs(N,{sx:{"&:hover":{bgcolor:"rgba(138, 190, 185, 0.05)"},bgcolor:a%2===0?"background.paper":"rgba(0, 0, 0, 0.02)"},children:[e.jsx(c,{sx:{py:1},children:e.jsx(M,{title:t?"Remove from favorites":"Add to favorites",children:e.jsx(W,{size:"small",onClick:()=>Y(r),sx:{color:t?"rgb(237, 63, 39)":"action.disabled",p:.5},children:t?e.jsx(le,{fontSize:"small"}):e.jsx(ie,{fontSize:"small"})})})}),e.jsx(c,{sx:{py:1},children:e.jsxs(p,{children:[e.jsx(m,{variant:"body2",sx:{fontWeight:600,fontSize:{xs:"0.75rem",sm:"0.875rem"},color:"primary.main"},children:r}),e.jsxs(m,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.65rem",sm:"0.75rem"},display:{xs:"block",sm:"none"}},children:[s["Exercise Type"]," • ",s.Equipment]})]})}),e.jsx(c,{sx:{py:1,display:{xs:"none",sm:"table-cell"}},children:e.jsx(ne,{label:s["Exercise Type"],size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:22,borderColor:s["Exercise Type"]==="Compound"?"primary.main":"text.secondary",color:s["Exercise Type"]==="Compound"?"primary.main":"text.secondary"}})}),e.jsx(c,{sx:{py:1,display:{xs:"none",md:"table-cell"}},children:e.jsx(m,{variant:"body2",sx:{fontSize:"0.8rem"},children:s.Equipment})}),e.jsx(c,{sx:{py:1},children:e.jsx(w,{type:"tel",inputMode:"decimal",size:"small",value:b===""?"":b,onChange:x=>Z(r,x.target.value),onFocus:x=>x.target.select(),placeholder:"–",inputProps:{min:0,step:5,pattern:"[0-9]*([.,][0-9]+)?","aria-label":`Target weight in pounds for ${r}`,style:{textAlign:"center",fontSize:"0.875rem",padding:"4px 8px"}},sx:{width:{xs:60,sm:70},"& .MuiOutlinedInput-root":{"& input":{textAlign:"center"}}}})}),e.jsx(c,{sx:{py:1},children:e.jsx(w,{type:"tel",inputMode:"numeric",size:"small",value:d===""?"":d,onChange:x=>_(r,x.target.value),onFocus:x=>x.target.select(),placeholder:"–",inputProps:{min:1,step:1,pattern:"\\d*","aria-label":`Target repetitions for ${r}`,style:{textAlign:"center",fontSize:"0.875rem",padding:"4px 8px"}},sx:{width:{xs:60,sm:70},"& .MuiOutlinedInput-root":{"& input":{textAlign:"center"}}}})})]},r)})})]})})]}):e.jsxs(z,{sx:{borderRadius:2,boxShadow:"0 2px 8px rgba(19, 70, 134, 0.08)"},children:[e.jsxs(p,{sx:{p:2,borderBottom:"1px solid",borderColor:"divider"},children:[e.jsxs(E,{direction:"row",spacing:1,alignItems:"center",sx:{mb:l?2:0},children:[e.jsx(w,{size:"small",placeholder:"Search exercises...",value:h,onChange:s=>k(s.target.value),InputProps:{startAdornment:e.jsx(H,{position:"start",children:e.jsx(G,{fontSize:"small"})})},sx:{flex:1,"& .MuiOutlinedInput-root":{borderRadius:1,bgcolor:"background.default"},"& .MuiInputBase-input":{fontSize:"0.875rem"}}}),e.jsx(M,{title:l?"Hide filters":"Show filters",children:e.jsx(W,{onClick:()=>q(!l),sx:{bgcolor:l?"primary.main":"background.default",color:l?"white":"text.primary","&:hover":{bgcolor:l?"primary.dark":"action.hover"}},children:e.jsx(O,{})})}),e.jsxs(m,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",whiteSpace:"nowrap"},children:["0 of ",n.length]})]}),e.jsx(D,{in:l,children:e.jsxs(E,{direction:{xs:"column",sm:"row"},spacing:1,children:[e.jsxs(y,{size:"small",sx:{minWidth:{xs:"100%",sm:150}},children:[e.jsx(f,{children:"Muscle Group"}),e.jsxs(v,{value:u,onChange:s=>A(s.target.value),label:"Muscle Group",sx:{fontSize:"0.875rem",bgcolor:"background.default"},children:[e.jsx(o,{value:"all",children:"All Muscles"}),P.filter(s=>s!=="all").map(s=>e.jsx(o,{value:s,children:s},s))]})]}),e.jsxs(y,{size:"small",sx:{minWidth:{xs:"100%",sm:150}},children:[e.jsx(f,{children:"Equipment"}),e.jsxs(v,{value:g,onChange:s=>I(s.target.value),label:"Equipment",sx:{fontSize:"0.875rem",bgcolor:"background.default"},children:[e.jsx(o,{value:"all",children:"All Equipment"}),L.filter(s=>s!=="all").map(s=>e.jsx(o,{value:s,children:s},s))]})]}),e.jsxs(y,{size:"small",sx:{minWidth:{xs:"100%",sm:150}},children:[e.jsx(f,{children:"Exercise Type"}),e.jsxs(v,{value:j,onChange:s=>R(s.target.value),label:"Exercise Type",sx:{fontSize:"0.875rem",bgcolor:"background.default"},children:[e.jsx(o,{value:"all",children:"All Types"}),B.filter(s=>s!=="all").map(s=>e.jsx(o,{value:s,children:s},s))]})]})]})})]}),e.jsxs(p,{sx:{textAlign:"center",py:8},children:[e.jsx(m,{variant:"h6",color:"text.secondary",children:"No exercises found"}),e.jsx(m,{variant:"body2",color:"text.secondary",children:"Try adjusting your search or filters"})]})]})})]})};export{fe as default};
