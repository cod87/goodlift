import{j as e,B as y,e as l,b9 as v,C as j,n as A,h as R,bo as z,bp as ee,bm as te,bq as se,m as ne,g as L,X as N,P as f,aW as G,r as U,br as re,a as E,I,Y as ie,Z as ae,a0 as oe,b as ce,V as le,_ as ue,aM as de}from"./mui-D40dqk12.js";import{r as m}from"./vendor-B0qVADJY.js";import{m as b,w as O,a as W,A as he,T as me}from"./index-BDi-38df.js";import"./firebase-CJLtoEJQ.js";const C=[{name:"Neck Side Stretch",primaryMuscles:"Neck",secondaryMuscles:"Upper Back, Traps",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=v5I0J_6w6jw"},{name:"Neck Rotation",primaryMuscles:"Neck",secondaryMuscles:"Traps",type:"Dynamic",duration:60,youtubeLink:"https://www.youtube.com/watch?v=xfGKhRo5bpI"},{name:"Shoulder Cross-Body Stretch",primaryMuscles:"Delts, Rear Delts",secondaryMuscles:"Upper Back",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=b6H9SHC0H9Y"},{name:"Overhead Triceps Stretch",primaryMuscles:"Triceps",secondaryMuscles:"Delts, Lats",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=EQO_8NRkljo"},{name:"Arm Circles",primaryMuscles:"Delts",secondaryMuscles:"Upper Back, Chest",type:"Dynamic",duration:60,youtubeLink:"https://www.youtube.com/watch?v=Ue_PRcVBdm8"},{name:"Doorway Chest Stretch",primaryMuscles:"Chest",secondaryMuscles:"Front Delts",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=qGJABe9R2zQ"},{name:"Standing Chest Expansion",primaryMuscles:"Chest",secondaryMuscles:"Front Delts, Biceps",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=mvh5zHB-xkc"},{name:"Child's Pose",primaryMuscles:"Lower Back",secondaryMuscles:"Lats, Glutes",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=2MTIlxJ82vY",difficulty:"Beginner"},{name:"Cat-Cow Stretch",primaryMuscles:"Back, Core",secondaryMuscles:"Abs",type:"Dynamic",duration:60,youtubeLink:"https://www.youtube.com/watch?v=kqnua4rHVVA",difficulty:"Beginner"},{name:"Seated Spinal Twist",primaryMuscles:"Back, Obliques",secondaryMuscles:"Lower Back, Glutes",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=DGd7kJyPZjU",difficulty:"Beginner"},{name:"Hip Flexor Stretch (Lunge)",primaryMuscles:"Hip Flexors",secondaryMuscles:"Quads",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=hdW4IXXCzKE"},{name:"Pigeon Pose",primaryMuscles:"Glutes, Hip Flexors",secondaryMuscles:"Lower Back",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=0_zDd6kQ",difficulty:"Intermediate"},{name:"Figure 4 Stretch",primaryMuscles:"Glutes",secondaryMuscles:"Lower Back, Hip Flexors",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=JbyjNymZP8M"},{name:"Butterfly Stretch",primaryMuscles:"Inner Thighs, Groin",secondaryMuscles:"Hip Flexors",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=mJiSzM1X7m0"},{name:"Standing Quad Stretch",primaryMuscles:"Quads",secondaryMuscles:"Hip Flexors",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=kRHQDSuhYKE"},{name:"Lying Quad Stretch",primaryMuscles:"Quads",secondaryMuscles:"Hip Flexors",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=5Mn5g6W-BZk"},{name:"Standing Hamstring Stretch",primaryMuscles:"Hamstrings",secondaryMuscles:"Lower Back, Calves",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=BPmv-3EQk2c"},{name:"Seated Forward Fold",primaryMuscles:"Hamstrings, Lower Back",secondaryMuscles:"Calves",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=U21floGmwDs",difficulty:"Beginner"},{name:"Downward Dog",primaryMuscles:"Hamstrings, Calves",secondaryMuscles:"Back, Delts",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=gZJWYonQKxY",difficulty:"Beginner"},{name:"Wall Calf Stretch",primaryMuscles:"Calves",secondaryMuscles:"Hamstrings",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=hjCRc2jYKyY"},{name:"Standing Calf Raise Stretch",primaryMuscles:"Calves",secondaryMuscles:"",type:"Dynamic",duration:60,youtubeLink:"https://www.youtube.com/watch?v=V3E_fFrLZmE"},{name:"Cobra Stretch",primaryMuscles:"Abs",secondaryMuscles:"Hip Flexors, Chest",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=JDcdhTuycOI",difficulty:"Beginner"},{name:"Side Bend Stretch",primaryMuscles:"Obliques",secondaryMuscles:"Lats, Side Delts",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=y1bKLSIvR1A"},{name:"World's Greatest Stretch",primaryMuscles:"Hip Flexors, Hamstrings",secondaryMuscles:"Glutes, Back, Chest",type:"Dynamic",duration:60,youtubeLink:"https://www.youtube.com/watch?v=a25W3YHBXP4",difficulty:"Intermediate"},{name:"Thread the Needle",primaryMuscles:"Upper Back, Delts",secondaryMuscles:"Obliques, Lower Back",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=lVGgLfg3wQ8",difficulty:"Beginner"},{name:"Warrior I Pose",primaryMuscles:"Hip Flexors, Quads",secondaryMuscles:"Glutes, Core",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=VC4s_PmJBkA",difficulty:"Beginner"},{name:"Triangle Pose",primaryMuscles:"Hamstrings, Obliques",secondaryMuscles:"Inner Thighs, Back",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=2S-ozXfUL9g",difficulty:"Intermediate"},{name:"Happy Baby Pose",primaryMuscles:"Hip Flexors, Glutes",secondaryMuscles:"Lower Back, Inner Thighs",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=p28vdRmDuLg",difficulty:"Beginner"},{name:"Supine Spinal Twist",primaryMuscles:"Lower Back, Obliques",secondaryMuscles:"Glutes, Chest",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=DQBT3u-x7TE",difficulty:"Beginner"}],q=a=>a.split(",").map(t=>t.trim()).filter(t=>t.length>0),B=a=>{const t=q(a.primaryMuscles),s=q(a.secondaryMuscles||"");return[...t,...s]},P={NECK:["Neck","Traps"],SHOULDERS:["Delts","Front Delts","Rear Delts","Side Delts"],CHEST:["Chest","Upper Chest","Lower Chest"],BACK:["Back","Upper Back","Lower Back","Lats"],CORE:["Core","Abs","Obliques"],ARMS:["Biceps","Triceps","Forearms"],HIPS:["Hip Flexors","Glutes","Groin","Inner Thighs"],LEGS_UPPER:["Quads","Hamstrings"],LEGS_LOWER:["Calves"]},Q=(a,t)=>B(a).some(r=>t.some(u=>r.includes(u)||u.includes(r))),D=(a=10)=>{const t=[],s=new Set,r=Object.keys(P);for(const u of r){if(t.length>=a)break;const i=P[u],o=C.filter(n=>Q(n,i)&&!t.includes(n));if(o.length>0){const n=Math.floor(Math.random()*o.length);t.push(o[n]),s.add(u)}}for(;t.length<a;){const u=r.filter(i=>!s.has(i));if(u.length>0){const i=u[Math.floor(Math.random()*u.length)],o=P[i],n=C.filter(c=>Q(c,o)&&!t.includes(c));if(n.length>0){const c=Math.floor(Math.random()*n.length);t.push(n[c]),s.add(i)}else s.add(i)}else{const i=C.filter(n=>!t.includes(n));if(i.length===0)break;const o=Math.floor(Math.random()*i.length);t.push(i[o])}}return F(t)},pe=(a,t=10)=>{if(!a||a.length===0)return D(t);const s=C.filter(i=>{const o=B(i);return a.some(n=>o.some(c=>c.includes(n)||n.includes(c)))});if(s.length===0)return console.warn("No stretches found for specified muscles, using full body selection"),D(t);if(s.length<=t)return F(s);const r=[],u=new Set;for(const i of a){if(r.length>=t)break;const o=s.filter(n=>r.includes(n)?!1:B(n).some(x=>x.includes(i)||i.includes(x)));if(o.length>0){const n=Math.floor(Math.random()*o.length);r.push(o[n]),B(o[n]).forEach(c=>u.add(c))}}for(;r.length<t;){const i=s.filter(n=>!r.includes(n));if(i.length===0)break;const o=Math.floor(Math.random()*i.length);r.push(i[o])}return F(r)},F=a=>{const t=[...a];for(let s=t.length-1;s>0;s--){const r=Math.floor(Math.random()*(s+1));[t[s],t[r]]=[t[r],t[s]]}return t},ye=()=>{const a=new Set;return C.forEach(t=>{B(t).forEach(s=>a.add(s))}),Array.from(a).sort()},V=({onStartStretchSession:a})=>{const[t,s]=m.useState(null),[r,u]=m.useState([]),i=ye(),o=()=>{s("full")},n=()=>{s("custom")},c=d=>{u(p=>p.includes(d)?p.filter(w=>w!==d):[...p,d])},x=()=>{t==="full"?a("full",[]):t==="custom"&&a("custom",r)},k=()=>{s(null),u([])},g=t==="custom"&&r.length===0;return e.jsx(y,{sx:{maxWidth:"1200px",margin:"0 auto"},children:e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx(l,{variant:"h3",sx:{fontFamily:"'Montserrat', sans-serif",fontWeight:800,color:"primary.main",marginBottom:"0.5rem",textAlign:"center"},children:"Stretching"}),e.jsx(l,{variant:"body1",sx:{color:"text.secondary",marginBottom:"2rem",textAlign:"center"},children:"Improve flexibility and recovery with guided stretches"}),!t&&e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:e.jsxs(v,{container:!0,spacing:3,sx:{marginTop:2},children:[e.jsx(v,{item:!0,xs:12,md:6,children:e.jsx(j,{onClick:o,sx:{cursor:"pointer",height:"100%",transition:"border-color 0.2s ease, opacity 0.15s ease","&:hover":{borderColor:"primary.main"},"&:active":{opacity:.8},border:"2px solid",borderColor:"divider"},children:e.jsxs(A,{sx:{padding:4},children:[e.jsx(y,{sx:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:2},children:e.jsx(R,{sx:{fontSize:60,color:"primary.main"}})}),e.jsx(l,{variant:"h5",sx:{fontWeight:700,textAlign:"center",marginBottom:2,color:"primary.main"},children:"Full Body Stretch"}),e.jsx(l,{variant:"body2",sx:{textAlign:"center",marginBottom:2,color:"text.secondary"},children:"A balanced routine covering all major muscle groups for complete flexibility and recovery."}),e.jsxs(y,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1,marginTop:2},children:[e.jsx(z,{sx:{color:"secondary.main"}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:"secondary.main"},children:"~10 minutes"})]})]})})}),e.jsx(v,{item:!0,xs:12,md:6,children:e.jsx(j,{onClick:n,sx:{cursor:"pointer",height:"100%",transition:"border-color 0.2s ease, opacity 0.15s ease","&:hover":{borderColor:"info.main"},"&:active":{opacity:.8},border:"2px solid",borderColor:"divider"},children:e.jsxs(A,{sx:{padding:4},children:[e.jsx(y,{sx:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:2},children:e.jsx(R,{sx:{fontSize:60,color:"info.main"}})}),e.jsx(l,{variant:"h5",sx:{fontWeight:700,textAlign:"center",marginBottom:2,color:"info.main"},children:"Custom Stretch"}),e.jsx(l,{variant:"body2",sx:{textAlign:"center",marginBottom:2,color:"text.secondary"},children:"Target specific muscle groups that need attention."}),e.jsxs(y,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1,marginTop:2},children:[e.jsx(z,{sx:{color:"secondary.main"}}),e.jsx(l,{variant:"h6",sx:{fontWeight:600,color:"secondary.main"},children:"~10 minutes"})]})]})})})]})}),t==="custom"&&e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:e.jsxs(j,{sx:{marginTop:3,padding:3},children:[e.jsx(l,{variant:"h5",sx:{fontWeight:700,marginBottom:2,textAlign:"center",color:"primary.main"},children:"Select Muscle Groups"}),e.jsx(l,{variant:"body2",sx:{marginBottom:3,textAlign:"center",color:"text.secondary"},children:"Choose one or more muscle groups to focus on"}),e.jsx(ee,{children:e.jsx(v,{container:!0,spacing:2,children:i.map(d=>e.jsx(v,{item:!0,xs:6,sm:4,md:3,children:e.jsx(te,{control:e.jsx(se,{checked:r.includes(d),onChange:()=>c(d),color:"primary"}),label:d})},d))})})]})}),t==="full"&&e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:e.jsxs(j,{sx:{marginTop:3,padding:3},children:[e.jsx(l,{variant:"h5",sx:{fontWeight:700,marginBottom:2,textAlign:"center",color:"primary.main"},children:"Full Body Stretch Session"}),e.jsxs(ne,{spacing:1,sx:{marginTop:2},children:[e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Duration:"})," ~10 minutes"]}),e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Focus:"})," All major muscle groups"]}),e.jsxs(l,{variant:"body1",children:[e.jsx("strong",{children:"Stretches:"})," 10 carefully selected stretches"]})]})]})}),t&&e.jsxs(y,{sx:{marginTop:4,display:"flex",justifyContent:"center",gap:2},children:[e.jsx(L,{variant:"outlined",size:"large",onClick:k,sx:{minWidth:"150px",padding:"12px 32px",fontSize:"1.1rem"},children:"Back"}),e.jsx(L,{variant:"contained",size:"large",startIcon:e.jsx(N,{}),onClick:x,disabled:g,sx:{minWidth:"200px",padding:"12px 32px",fontSize:"1.1rem",fontWeight:600},children:"Start Session"})]})]})})};V.propTypes={onStartStretchSession:f.func.isRequired};class xe{constructor(){this.isSupported="speechSynthesis"in window,this.isEnabled=this.loadTTSPreference(),this.currentUtterance=null}isTTSSupported(){return this.isSupported}loadTTSPreference(){try{const t=localStorage.getItem("ttsEnabled");return t===null?!0:t==="true"}catch{return!0}}saveTTSPreference(){try{localStorage.setItem("ttsEnabled",this.isEnabled.toString())}catch(t){console.warn("Could not save TTS preference",t)}}toggleTTS(){return this.isEnabled=!this.isEnabled,this.saveTTSPreference(),!this.isEnabled&&this.isSupported&&window.speechSynthesis.cancel(),this.isEnabled}setEnabled(t){this.isEnabled=t,this.saveTTSPreference(),!t&&this.isSupported&&window.speechSynthesis.cancel()}isEnabledState(){return this.isEnabled}speak(t,s={}){return new Promise((r,u)=>{if(!this.isSupported){console.warn("Speech Synthesis not supported in this browser"),u(new Error("Speech Synthesis not supported"));return}if(!this.isEnabled){r();return}window.speechSynthesis.cancel();const i=new SpeechSynthesisUtterance(t);i.rate=s.rate||1,i.pitch=s.pitch||1,i.volume=s.volume||1,i.lang=s.lang||"en-US";const o=window.speechSynthesis.getVoices();if(o.length>0){let n=o.find(c=>c.lang.startsWith("en")&&(c.name.toLowerCase().includes("female")||c.name.toLowerCase().includes("natural")||c.name.toLowerCase().includes("premium")||c.name.toLowerCase().includes("neural")));n||(n=o.find(c=>c.lang.startsWith("en")&&c.localService===!1)),n||(n=o.find(c=>c.lang.startsWith("en"))),n&&(i.voice=n)}i.onend=()=>{this.currentUtterance=null,r()},i.onerror=n=>{console.error("Speech synthesis error:",n),this.currentUtterance=null,u(n)},this.currentUtterance=i,window.speechSynthesis.speak(i)})}async announceExercise(t){try{await this.speak(t,{rate:.85,pitch:.95})}catch(s){console.warn("Could not announce exercise:",s)}}async announceMessage(t){try{await this.speak(t,{rate:1})}catch(s){console.warn("Could not announce message:",s)}}stop(){this.isSupported&&(window.speechSynthesis.cancel(),this.currentUtterance=null)}pause(){this.isSupported&&window.speechSynthesis.speaking&&window.speechSynthesis.pause()}resume(){this.isSupported&&window.speechSynthesis.paused&&window.speechSynthesis.resume()}isSpeaking(){return this.isSupported&&window.speechSynthesis.speaking}}const M=new xe,_=({stretches:a,onComplete:t,onExit:s})=>{const[r,u]=m.useState(0),[i,o]=m.useState(60),[n,c]=m.useState(!1),[x,k]=m.useState(M.isEnabledState()),g=m.useRef(null),d=m.useRef(!1),p=a[r],w=(60-i)/60*100,H=(r*60+(60-i))/(a.length*60)*100;m.useEffect(()=>(O.requestWakeLock(),()=>{O.releaseWakeLock(),M.stop()}),[]),m.useEffect(()=>{!d.current&&x&&(M.announceExercise(p.name),d.current=!0)},[r,p.name,x]),m.useEffect(()=>(n?g.current&&clearInterval(g.current):g.current=setInterval(()=>{o(h=>h<=1?r<a.length-1?(u(S=>S+1),d.current=!1,W.playTransitionBeep(),60):(clearInterval(g.current),W.playCompletionFanfare(),setTimeout(()=>{t()},500),0):h-1)},1e3),()=>{g.current&&clearInterval(g.current)}),[n,r,a.length,t]);const Y=()=>{c(h=>!h)},K=m.useCallback(()=>{r<a.length-1&&(u(h=>h+1),o(60),d.current=!1,W.playTransitionBeep())},[r,a.length]),J=m.useCallback(()=>{r>0&&(u(h=>h-1),o(60),d.current=!1,W.playTransitionBeep())},[r]),X=()=>{const h=M.toggleTTS();k(h)},Z=()=>{g.current&&clearInterval(g.current),M.stop(),s()},$=h=>{const S=Math.floor(h/60),T=h%60;return`${S}:${T.toString().padStart(2,"0")}`};return e.jsxs(y,{sx:{maxWidth:"900px",margin:"0 auto",width:"100%",boxSizing:"border-box"},children:[e.jsxs(y,{sx:{marginBottom:3},children:[e.jsxs(y,{sx:{display:"flex",justifyContent:"space-between",marginBottom:1},children:[e.jsxs(l,{variant:"body2",sx:{fontWeight:600},children:["Stretch ",r+1," of ",a.length]}),e.jsxs(l,{variant:"body2",sx:{fontWeight:600},children:[Math.round(H),"% Complete"]})]}),e.jsx(G,{variant:"determinate",value:H,sx:{height:8,borderRadius:4,backgroundColor:"rgba(19, 70, 134, 0.1)","& .MuiLinearProgress-bar":{backgroundColor:"primary.main"}}})]}),e.jsx(he,{mode:"wait",children:e.jsx(b.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},children:e.jsx(j,{sx:{background:"linear-gradient(135deg, rgba(19, 70, 134, 0.05) 0%, rgba(237, 63, 39, 0.05) 100%)",boxShadow:4},children:e.jsxs(A,{sx:{padding:{xs:2,sm:3},width:"100%",boxSizing:"border-box"},children:[e.jsx(l,{variant:"h4",sx:{fontFamily:"'Montserrat', sans-serif",fontWeight:800,color:"primary.main",marginBottom:{xs:1,sm:2},textAlign:"center",fontSize:{xs:"1.5rem",sm:"2rem"}},children:p.name}),e.jsxs(y,{sx:{marginBottom:{xs:2,sm:3},textAlign:"center"},children:[e.jsx(l,{variant:"h1",sx:{fontFamily:"'Montserrat', sans-serif",fontWeight:800,color:n?"grey.500":"secondary.main",fontSize:{xs:"3rem",sm:"4rem",md:"5rem"},marginBottom:1,lineHeight:1},children:$(i)}),e.jsx(G,{variant:"determinate",value:w,sx:{height:{xs:8,sm:12},borderRadius:6,backgroundColor:"rgba(237, 63, 39, 0.1)","& .MuiLinearProgress-bar":{backgroundColor:"secondary.main"}}})]}),e.jsxs(y,{sx:{marginBottom:{xs:2,sm:3}},children:[e.jsx(l,{variant:"subtitle2",sx:{fontWeight:600,marginBottom:.5,color:"primary.main",fontSize:{xs:"0.875rem",sm:"1rem"}},children:"Primary Muscles:"}),e.jsx(y,{sx:{display:"flex",flexWrap:"wrap",gap:.5,marginBottom:{xs:1,sm:2}},children:p.primaryMuscles.split(",").map((h,S)=>e.jsx(U,{label:h.trim(),color:"primary",size:"medium"},S))}),p.secondaryMuscles&&e.jsxs(e.Fragment,{children:[e.jsx(l,{variant:"subtitle2",sx:{fontWeight:600,marginBottom:.5,color:"text.secondary",fontSize:{xs:"0.875rem",sm:"1rem"}},children:"Secondary Muscles:"}),e.jsx(y,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:p.secondaryMuscles.split(",").map((h,S)=>{const T=h.trim();return T?e.jsx(U,{label:T,variant:"outlined",size:"small"},S):null})})]})]}),p.youtubeLink&&e.jsx(L,{variant:"outlined",startIcon:e.jsx(re,{}),onClick:()=>window.open(p.youtubeLink,"_blank"),fullWidth:!0,sx:{marginBottom:{xs:2,sm:3},fontSize:{xs:"0.875rem",sm:"1rem"}},children:"Watch Demonstration"}),e.jsxs(y,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:{xs:1,sm:2},marginBottom:{xs:1,sm:2},flexWrap:"wrap"},children:[e.jsx(E,{title:"Previous stretch",children:e.jsx("span",{children:e.jsx(I,{onClick:J,disabled:r===0,sx:{backgroundColor:"primary.main",color:"white","&:hover":{backgroundColor:"primary.dark"},"&:disabled":{backgroundColor:"grey.300",color:"grey.500"}},children:e.jsx(ie,{})})})}),e.jsx(E,{title:n?"Resume":"Pause",children:e.jsx(I,{onClick:Y,sx:{backgroundColor:"secondary.main",color:"white",width:{xs:56,sm:64},height:{xs:56,sm:64},"&:hover":{backgroundColor:"secondary.dark"}},children:n?e.jsx(N,{sx:{fontSize:{xs:32,sm:40}}}):e.jsx(ae,{sx:{fontSize:{xs:32,sm:40}}})})}),e.jsx(E,{title:"Next stretch",children:e.jsx("span",{children:e.jsx(I,{onClick:K,disabled:r===a.length-1,sx:{backgroundColor:"primary.main",color:"white","&:hover":{backgroundColor:"primary.dark"},"&:disabled":{backgroundColor:"grey.300",color:"grey.500"}},children:e.jsx(oe,{})})})})]}),e.jsxs(y,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2},children:[e.jsx(E,{title:x?"Voice announcements on":"Voice announcements off",children:e.jsx(I,{onClick:X,color:x?"primary":"default",children:x?e.jsx(ce,{}):e.jsx(le,{})})}),e.jsx(L,{variant:"outlined",color:"error",startIcon:e.jsx(ue,{}),onClick:Z,sx:{minWidth:"120px"},children:"End Session"})]})]})})},r)})]})};_.propTypes={stretches:f.arrayOf(f.shape({name:f.string.isRequired,primaryMuscles:f.string.isRequired,secondaryMuscles:f.string,youtubeLink:f.string})).isRequired,onComplete:f.func.isRequired,onExit:f.func.isRequired};const be=()=>{const[a,t]=m.useState("selection"),[s,r]=m.useState([]),[u,i]=m.useState(""),[o,n]=m.useState(null),c=(d,p)=>{let w;d==="full"?w=D(10):w=pe(p,10),r(w),i(d),t("stretch-session")},x=async()=>{try{const d={id:`stretch_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,date:new Date().toISOString(),type:u,stretchesCompleted:s.length,stretches:s.map(p=>p.name),duration:s.length*60};await me(d)}catch(d){console.error("Failed to save stretch session:",d)}n("stretch"),t("complete")},k=()=>{t("selection"),r([])},g=()=>{t("selection"),r([]),n(null)};return e.jsxs(e.Fragment,{children:[a==="selection"&&e.jsx(V,{onStartStretchSession:c}),a==="stretch-session"&&s.length>0&&e.jsx(_,{stretches:s,onComplete:x,onExit:k}),a==="complete"&&e.jsx(y,{sx:{padding:{xs:"2rem 1rem",sm:"2rem",md:"3rem"},maxWidth:"700px",margin:"0 auto",minHeight:"calc(100vh - 60px)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(b.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},style:{width:"100%"},children:e.jsx(j,{sx:{background:o==="stretch"?"linear-gradient(135deg, rgba(19, 70, 134, 0.05) 0%, rgba(76, 175, 80, 0.05) 100%)":"linear-gradient(135deg, rgba(19, 70, 134, 0.05) 0%, rgba(156, 39, 176, 0.05) 100%)",boxShadow:6},children:e.jsxs(A,{sx:{padding:{xs:3,sm:5},textAlign:"center"},children:[e.jsx(b.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},children:e.jsx(de,{sx:{fontSize:100,color:o==="stretch"?"success.main":"#9c27b0",marginBottom:2}})}),e.jsx(l,{variant:"h3",sx:{fontFamily:"'Montserrat', sans-serif",fontWeight:800,color:"primary.main",marginBottom:2},children:"Session Complete!"}),e.jsx(l,{variant:"h6",sx:{color:"text.secondary",marginBottom:3},children:o==="stretch"?"Great job! You've completed your stretch session.":"Great job! You've completed your mobility session."}),o==="stretch"&&e.jsxs(e.Fragment,{children:[e.jsxs(l,{variant:"body1",sx:{marginBottom:1},children:[s.length," stretches completed"]}),e.jsxs(l,{variant:"body1",sx:{marginBottom:4},children:["~",s.length," minutes of stretching"]})]}),e.jsx(L,{variant:"contained",size:"large",onClick:g,sx:{minWidth:"200px",padding:"12px 32px",fontSize:"1.1rem",fontWeight:600},children:"Done"})]})})})})]})};export{be as default};
