import{j as e,B as a,e as r,m as S,r as z,b5 as je,aV as fe,b8 as V,h as ce,b9 as Ge,k as Q,x as qe,y as ke,C as L,n as F,ba as Ve,D as ie,c as ae,I as J,U as Ye,d as oe,f as le,g as P,bb as Wt,P as c,A as We,aN as De,z as Y,J as we,K as Ee,N as Ae,v as N,T as _e,bc as Dt,u as wt,at as Et,bd as At,be as Pt,L as Pe,o as Re,bf as Rt,a6 as It,a7 as Lt,E as Mt,w as zt,aU as Ke,aP as Ie,a as Ft,aM as Nt,bg as He,bh as Ot,a5 as Ht,O as Ce,p as $t,q as Ut,a2 as Bt,a3 as X,aO as Gt}from"./mui-DHtKCVyI.js";import{r as m}from"./vendor-B0qVADJY.js";import{C as qt}from"./CompactHeader-BaA1YDi8.js";import{j as Xe,k as B,l as Te,n as Vt,o as pe,p as Yt,q as Me,m as Qe,r as $e,t as _t,v as Ue,x as Kt,y as Xt,z as Qt,B as Jt,C as Zt,L as Je,D as Ze,F as Le,G as es,H as re,i as ts,I as ss,J as rs,K as ns,N as is,E as as,O as os,P as ls}from"./index-Bme_WGpp.js";import{L as cs,C as ds,a as xs,b as hs,P as us,c as gs,p as ps,d as ms,e as js,i as fs}from"./charts-DeSAwVmm.js";import{a as ys,b as bs}from"./helpers-CCWTPML7.js";import{getStreakMilestones as vs}from"./trackingMetrics-i_WWAY_P.js";import"./firebase-CJLtoEJQ.js";function Ss(t,i,s){return Xe(t,-1,s)}const et=({achievement:t,unlocked:i,onClick:s})=>{const o=Me[t.tier];return e.jsx(Qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsx(L,{onClick:s,sx:{height:"100%",cursor:"pointer",position:"relative",background:i?o.gradient:"linear-gradient(135deg, #424242 0%, #303030 100%)",color:i?o.textColor:"#888",transition:"opacity 0.15s ease","&:hover":{opacity:.9},"&:active":{opacity:.8}},children:e.jsxs(F,{sx:{textAlign:"center",p:2},children:[!i&&e.jsx(a,{sx:{position:"absolute",top:8,right:8,color:"rgba(255, 255, 255, 0.5)"},children:e.jsx(Ve,{fontSize:"small"})}),e.jsx(r,{variant:"h2",sx:{fontSize:"3rem",mb:1,filter:i?"none":"grayscale(100%)",opacity:i?1:.4},children:t.icon}),e.jsx(r,{variant:"subtitle1",sx:{fontWeight:700,mb:.5,fontSize:"0.95rem"},children:t.name}),e.jsx(z,{label:t.tier.toUpperCase(),size:"small",sx:{fontSize:"0.65rem",height:20,fontWeight:600,bgcolor:i?"rgba(255, 255, 255, 0.3)":"rgba(255, 255, 255, 0.1)"}})]})})})};et.propTypes={achievement:c.object.isRequired,unlocked:c.bool.isRequired,onClick:c.func.isRequired};const tt=({achievement:t,unlocked:i,onClose:s,onShare:o})=>{if(!t)return null;const n=Me[t.tier];return e.jsxs(ie,{open:!!t,onClose:s,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3}},children:[e.jsx(ae,{sx:{textAlign:"center",pb:1},children:e.jsx(J,{onClick:s,sx:{position:"absolute",right:8,top:8},children:e.jsx(Ye,{})})}),e.jsxs(oe,{sx:{textAlign:"center",pt:0},children:[e.jsx(a,{sx:{width:120,height:120,borderRadius:"50%",background:i?n.gradient:"linear-gradient(135deg, #424242 0%, #303030 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",filter:i?"none":"grayscale(100%)",opacity:i?1:.6},children:e.jsx(r,{variant:"h1",sx:{fontSize:"4rem"},children:t.icon})}),!i&&e.jsx(z,{icon:e.jsx(Ve,{}),label:"LOCKED",color:"default",sx:{mb:2}}),i&&e.jsx(z,{icon:e.jsx(je,{}),label:"UNLOCKED",color:"success",sx:{mb:2}}),e.jsx(r,{variant:"h5",sx:{fontWeight:700,mb:1},children:t.name}),e.jsx(z,{label:t.tier.toUpperCase(),size:"small",sx:{mb:2,fontWeight:600,background:n.gradient,color:n.textColor}}),e.jsx(r,{variant:"body1",color:"text.secondary",sx:{mb:2},children:t.description}),e.jsx(a,{sx:{p:2,borderRadius:2,bgcolor:"action.hover"},children:e.jsx(r,{variant:"body2",color:"text.secondary",children:Cs(t.condition)})})]}),e.jsxs(le,{sx:{justifyContent:"center",pb:3,px:3},children:[i&&o&&e.jsx(P,{variant:"contained",startIcon:e.jsx(Wt,{}),onClick:()=>o(t),fullWidth:!0,children:"Share Achievement"}),!i&&e.jsx(P,{variant:"outlined",onClick:s,fullWidth:!0,children:"Close"})]})]})};tt.propTypes={achievement:c.object,unlocked:c.bool,onClose:c.func.isRequired,onShare:c.func};const ne=({title:t,icon:i,progressInfo:s})=>{if(!s)return e.jsx(L,{sx:{height:"100%"},children:e.jsx(F,{children:e.jsxs(S,{spacing:1,children:[e.jsxs(S,{direction:"row",alignItems:"center",spacing:1,children:[i,e.jsx(r,{variant:"h6",sx:{fontWeight:600,fontSize:"1rem"},children:t})]}),e.jsx(r,{variant:"body2",color:"text.secondary",children:"All achievements unlocked! ðŸŽ‰"})]})})});const{achievement:o,current:n,target:j,progress:u}=s;return e.jsx(L,{sx:{height:"100%"},children:e.jsx(F,{children:e.jsxs(S,{spacing:2,children:[e.jsxs(S,{direction:"row",alignItems:"center",spacing:1,children:[i,e.jsx(r,{variant:"h6",sx:{fontWeight:600,fontSize:"1rem"},children:t})]}),e.jsxs(a,{children:[e.jsxs(S,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:1},children:[e.jsx(r,{variant:"body2",sx:{fontWeight:600},children:o.name}),e.jsxs(r,{variant:"body2",color:"text.secondary",children:[Be(n,o.condition.type)," / ",Be(j,o.condition.type)]})]}),e.jsx(fe,{variant:"determinate",value:u,sx:{height:8,borderRadius:4,bgcolor:"action.hover","& .MuiLinearProgress-bar":{background:Me[o.tier].gradient,borderRadius:4}}}),e.jsxs(r,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:[Math.round(u),"% complete"]})]})]})})})};ne.propTypes={title:c.string.isRequired,icon:c.element.isRequired,progressInfo:c.object};const st=({userStats:t,workoutHistory:i=[]})=>{const[s,o]=m.useState(null),[n,j]=m.useState(!1),[u,g]=m.useState(0),b=B.filter(p=>Te(p,t,i)),l=Vt(b),v=Yt(l),W={workout:B.filter(p=>p.condition.type==="workoutCount"),streak:B.filter(p=>p.condition.type==="streak"),pr:B.filter(p=>p.condition.type==="prCount"),volume:B.filter(p=>p.condition.type==="totalVolume"),time:B.filter(p=>p.condition.type==="totalTime"),special:B.filter(p=>p.condition.type==="special")},D=[{label:"All",key:"all"},{label:"Workouts",key:"workout"},{label:"Streaks",key:"streak"},{label:"PRs",key:"pr"},{label:"Volume",key:"volume"},{label:"Time",key:"time"},{label:"Special",key:"special"}],H=D[u].key,h=H==="all"?B:W[H],d=pe(W.workout,t,i),f=pe(W.streak,t,i),A=pe(W.pr,t,i),E=pe(W.volume,t,i),k=p=>{o(p),j(Te(p,t,i))},w=async p=>{const U=`I just unlocked the "${p.name}" achievement in GoodLift! ${p.icon}

${p.description}`;if(navigator.share)try{await navigator.share({title:"GoodLift Achievement",text:U})}catch(Z){Z.name!=="AbortError"&&(console.error("Error sharing:",Z),C(U))}else C(U)},C=p=>{navigator.clipboard.writeText(p).then(()=>{alert("Achievement text copied to clipboard!")})};return e.jsxs(a,{sx:{p:{xs:1,sm:2,md:3}},children:[e.jsxs(a,{sx:{mb:4,textAlign:"center"},children:[e.jsx(r,{variant:"h4",sx:{fontWeight:700,mb:1},children:"Achievements"}),e.jsxs(S,{direction:"row",spacing:2,justifyContent:"center",alignItems:"center",sx:{mb:2},children:[e.jsx(z,{icon:e.jsx(je,{}),label:`Level ${v.level}`,color:"primary",sx:{fontSize:"1rem",fontWeight:600,height:36}}),e.jsx(z,{label:`${b.length} / ${B.length} Unlocked`,variant:"outlined",sx:{fontSize:"0.9rem",height:36}})]}),e.jsxs(a,{sx:{maxWidth:400,margin:"0 auto"},children:[e.jsxs(S,{direction:"row",justifyContent:"space-between",sx:{mb:1},children:[e.jsxs(r,{variant:"caption",color:"text.secondary",children:[v.currentPoints," / 100 points"]}),e.jsxs(r,{variant:"caption",color:"text.secondary",children:[v.pointsToNext," to Level ",v.level+1]})]}),e.jsx(fe,{variant:"determinate",value:v.currentPoints/100*100,sx:{height:10,borderRadius:5,bgcolor:"action.hover","& .MuiLinearProgress-bar":{borderRadius:5}}})]})]}),e.jsxs(V,{container:!0,spacing:{xs:1,sm:2},sx:{mb:4},children:[e.jsx(V,{item:!0,xs:6,sm:6,md:3,children:e.jsx(ne,{title:"Workouts",icon:e.jsx(ce,{color:"primary"}),progressInfo:d})}),e.jsx(V,{item:!0,xs:6,sm:6,md:3,children:e.jsx(ne,{title:"Streak",icon:e.jsx(Ge,{sx:{color:"#FF6B35"}}),progressInfo:f})}),e.jsx(V,{item:!0,xs:6,sm:6,md:3,children:e.jsx(ne,{title:"Personal Records",icon:e.jsx(Q,{color:"success"}),progressInfo:A})}),e.jsx(V,{item:!0,xs:6,sm:6,md:3,children:e.jsx(ne,{title:"Volume",icon:e.jsx(je,{sx:{color:"#FFD700"}}),progressInfo:E})})]}),e.jsx(a,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:e.jsx(qe,{value:u,onChange:(p,U)=>g(U),variant:"scrollable",scrollButtons:"auto",children:D.map(p=>e.jsx(ke,{label:p.label},p.key))})}),e.jsx(V,{container:!0,spacing:{xs:1,sm:2},children:h.map(p=>{const U=Te(p,t,i);return e.jsx(V,{item:!0,xs:6,sm:4,md:3,lg:2,children:e.jsx(et,{achievement:p,unlocked:U,onClick:()=>k(p)})},p.id)})}),e.jsx(tt,{achievement:s,unlocked:n,onClose:()=>o(null),onShare:w})]})};st.propTypes={userStats:c.shape({totalWorkouts:c.number,currentStreak:c.number,totalPRs:c.number,totalVolume:c.number,totalTime:c.number}).isRequired,workoutHistory:c.array};const Cs=t=>{switch(t.type){case"workoutCount":return`Complete ${t.value} workout${t.value!==1?"s":""}`;case"streak":return`Maintain a ${t.value}-day workout streak`;case"prCount":return`Achieve ${t.value} personal record${t.value!==1?"s":""}`;case"totalVolume":return`Lift ${t.value.toLocaleString()} lbs total volume`;case"totalTime":{const i=Math.floor(t.value/3600);return`Complete ${i} hour${i!==1?"s":""} of total workout time`}case"special":return t.value;default:return""}},Be=(t,i)=>{switch(i){case"totalVolume":return`${t.toLocaleString()} lbs`;case"totalTime":{const s=Math.floor(t/3600),o=Math.floor(t%3600/60);return s>0?`${s}h ${o}m`:`${o}m`}default:return t}},ze=(t,i,s)=>!t||i===s?t:i==="lbs"&&s==="kg"?Math.round(t*.453592*10)/10:i==="kg"&&s==="lbs"?Math.round(t*2.20462*10)/10:t,rt=(t,i=30)=>{if(!t||t.length===0)return[];const s=new Date;return s.setDate(s.getDate()-i),t.filter(o=>new Date(o.date)>=s).sort((o,n)=>new Date(o.date)-new Date(n.date))},Ts=(t,i=30)=>{if(!t||t.length<2)return{change:0,percentage:0,direction:"stable"};const s=rt(t,i);if(s.length<2)return{change:0,percentage:0,direction:"stable"};const o=s[0],n=s[s.length-1],j=ze(o.weight,o.unit,n.unit),g=n.weight-j,b=j!==0?g/j*100:0;let l="stable";return Math.abs(g)>.5&&(l=g>0?"up":"down"),{change:Math.round(g*10)/10,percentage:Math.round(b*10)/10,direction:l}},me=(t,i="lbs")=>t?`${Math.round(t*10)/10} ${i}`:`0 ${i}`,ks=(t,i="lbs")=>{if(!t||isNaN(t))return{valid:!1,error:"Please enter a valid weight"};const s=parseFloat(t);if(s<=0)return{valid:!1,error:"Weight must be greater than 0"};const o=i==="lbs"?50:20,n=i==="lbs"?1e3:450;return s<o||s>n?{valid:!1,error:`Weight must be between ${o} and ${n} ${i}`}:{valid:!0}},Ws=(t,i=30,s="lbs")=>{const o=rt(t,i);if(o.length===0)return{labels:[],data:[]};const n=o.map(u=>new Date(u.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),j=o.map(u=>ze(u.weight,u.unit,s));return{labels:n,data:j}},Ds=(t,i="lbs")=>{if(!t||t.length===0)return{min:0,max:0,average:0,current:0,entries:0};const s=t.map(b=>ze(b.weight,b.unit,i)),o=Math.min(...s),n=Math.max(...s),u=s.reduce((b,l)=>b+l,0)/s.length,g=s[s.length-1];return{min:Math.round(o*10)/10,max:Math.round(n*10)/10,average:Math.round(u*10)/10,current:Math.round(g*10)/10,entries:s.length}};ds.register(xs,hs,us,gs,ps,ms,js,fs);const nt=({weightHistory:t,currentWeight:i,currentUnit:s,targetWeight:o,onAddWeight:n})=>{const[j,u]=m.useState(""),[g,b]=m.useState(s||"lbs"),[l,v]=m.useState(null),[W,D]=m.useState(!1);m.useEffect(()=>{b(s||"lbs")},[s]);const H=()=>{v(null);const C=ks(j,g);if(!C.valid){v(C.error);return}n(parseFloat(j),g),u(""),D(!1)},h=Ts(t,30),d=Ds(t,g),f=Ws(t,30,g);let A;if(o&&f.data.length>0){const C=Math.min(...f.data);A=Math.min(o,C)-5}const E={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:C=>`${C.parsed.y} ${g}`}}},scales:{y:{beginAtZero:!1,min:A,ticks:{callback:C=>`${C} ${g}`}}}},k={labels:f.labels,datasets:[{label:"Weight",data:f.data,borderColor:"rgb(25, 118, 210)",backgroundColor:"rgba(25, 118, 210, 0.1)",fill:!0,tension:.4}]},w=()=>h.direction==="up"?e.jsx(Q,{color:"warning"}):h.direction==="down"?e.jsx(_e,{color:"success"}):e.jsx(Dt,{color:"info"});return e.jsx(L,{sx:{borderRadius:2},children:e.jsxs(F,{children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(r,{variant:"h6",fontWeight:600,children:"Weight Tracking"}),e.jsx(J,{color:"primary",onClick:()=>D(!W),size:"small",children:e.jsx(We,{})})]}),i&&e.jsxs(a,{sx:{mb:3},children:[e.jsx(r,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Current Weight"}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(r,{variant:"h4",fontWeight:700,children:me(i,g)}),h.direction!=="stable"&&e.jsx(z,{icon:w(),label:`${h.change>0?"+":""}${h.change} ${g}`,size:"small",color:h.direction==="up"?"warning":"success"})]}),e.jsx(r,{variant:"caption",color:"text.secondary",children:h.direction!=="stable"?`${Math.abs(h.percentage)}% ${h.direction==="up"?"increase":"decrease"} in last 30 days`:"No significant change in last 30 days"})]}),W&&e.jsxs(a,{sx:{mb:3,p:2,bgcolor:"action.hover",borderRadius:2},children:[e.jsx(r,{variant:"body2",fontWeight:600,gutterBottom:!0,children:"Add Weight Entry"}),l&&e.jsx(De,{severity:"error",sx:{mb:2},children:l}),e.jsxs(S,{direction:"row",spacing:2,alignItems:"flex-start",children:[e.jsx(Y,{label:"Weight",type:"number",value:j,onChange:C=>{u(C.target.value),v(null)},size:"small",sx:{flex:1},inputProps:{step:.1,min:0}}),e.jsxs(we,{size:"small",sx:{minWidth:80},children:[e.jsx(Ee,{children:"Unit"}),e.jsxs(Ae,{value:g,onChange:C=>b(C.target.value),label:"Unit",children:[e.jsx(N,{value:"lbs",children:"lbs"}),e.jsx(N,{value:"kg",children:"kg"})]})]}),e.jsx(P,{variant:"contained",onClick:H,disabled:!j,size:"small",sx:{minWidth:80},children:"Add"})]})]}),f.data.length>0?e.jsxs(a,{sx:{height:250,mb:2},children:[e.jsx(r,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Last 30 Days"}),e.jsx(cs,{data:k,options:E})]}):e.jsx(De,{severity:"info",sx:{mb:2},children:"No weight history yet. Add your first weight entry to start tracking!"}),d.entries>0&&e.jsxs(a,{sx:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:2,pt:2,borderTop:1,borderColor:"divider"},children:[e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",children:"Minimum"}),e.jsx(r,{variant:"body2",fontWeight:600,children:me(d.min,g)})]}),e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",children:"Average"}),e.jsx(r,{variant:"body2",fontWeight:600,children:me(d.average,g)})]}),e.jsxs(a,{children:[e.jsx(r,{variant:"caption",color:"text.secondary",children:"Maximum"}),e.jsx(r,{variant:"body2",fontWeight:600,children:me(d.max,g)})]})]})]})})};nt.propTypes={weightHistory:c.arrayOf(c.shape({weight:c.number.isRequired,unit:c.string.isRequired,date:c.string.isRequired})).isRequired,currentWeight:c.number,currentUnit:c.string,targetWeight:c.number,onAddWeight:c.func.isRequired};const it=({workoutHistory:t=[],onDayClick:i})=>{const s=wt(),o=Et(s.breakpoints.down("sm")),[n,j]=m.useState(new Date),u=()=>{const h=Kt(n),d=Xt(n),f=Qt(h),A=Jt(d),E=[];let k=f;for(;k<=A;)E.push(k),k=Zt(k,1);return E},g=h=>t.filter(d=>{const f=new Date(d.date);return Ue(f,h)}),b=h=>{if(!h||h.length===0)return null;const d=h[0];return d.type?.toLowerCase()||d.workoutType?.toLowerCase()||"strength"},l=h=>{if(!h)return"X";const d=h.toLowerCase();return{upper:"UP",lower:"LO",full:"FL",push:"PS",pull:"PL",legs:"LG",yoga:"Y",hiit:"H",cardio:"C"}[d]||"X"},v=h=>h?h==="cardio"||h==="hiit"?"error.main":h==="stretch"||h==="active_recovery"||h==="yoga"||h==="mobility"?"secondary.main":h==="rest"?"action.disabled":"primary.main":"primary.main",W=u(),D=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],H=new Date;return e.jsx(L,{sx:{borderRadius:3,overflow:"hidden"},children:e.jsxs(F,{sx:{p:{xs:2,sm:3},width:"100%",maxWidth:"100%",boxSizing:"border-box"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[e.jsx(J,{onClick:()=>j(Ss(n)),size:o?"small":"medium",children:e.jsx(At,{})}),e.jsx(r,{variant:"h6",sx:{fontWeight:600,fontSize:{xs:"1.1rem",sm:"1.25rem"}},children:$e(n,"MMMM yyyy")}),e.jsx(J,{onClick:()=>j(Xe(n,1)),size:o?"small":"medium",children:e.jsx(Pt,{})})]}),e.jsx(a,{sx:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:{xs:.25,sm:.5},mb:.5},children:D.map(h=>e.jsx(a,{sx:{textAlign:"center",py:{xs:.5,sm:1},fontWeight:700,color:"text.primary",fontSize:{xs:"0.7rem",sm:"0.875rem"},opacity:.8},children:o?h.charAt(0):h},h))}),e.jsx(a,{sx:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:{xs:.25,sm:.5}},children:W.map((h,d)=>{const f=_t(h,n),A=Ue(h,H),E=g(h),k=E.length>0,w=b(E);return e.jsxs(a,{onClick:()=>k&&i?.(h,E[0]),sx:{aspectRatio:"1",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:1,cursor:k?"pointer":"default",bgcolor:A?"action.selected":"transparent",opacity:f?1:.3,border:A?2:1,borderColor:A?"primary.main":"transparent",transition:"all 0.2s ease",minHeight:{xs:40,sm:52},maxHeight:{xs:44,sm:60},position:"relative",padding:{xs:"3px 2px",sm:"6px 4px"},"&:hover":k?{bgcolor:"action.hover",transform:"scale(1.05)",boxShadow:1}:{}},children:[e.jsx(r,{variant:"body2",sx:{fontWeight:A?700:500,color:"text.primary",fontSize:{xs:"0.7rem",sm:"0.875rem"},position:"absolute",top:{xs:3,sm:6},left:"50%",transform:"translateX(-50%)"},children:$e(h,"d")}),k&&e.jsx(r,{sx:{fontSize:{xs:"0.65rem",sm:"0.75rem"},fontWeight:900,color:v(w),lineHeight:1,textShadow:"0 1px 2px rgba(0,0,0,0.1)",marginTop:"auto",marginBottom:{xs:"1px",sm:"4px"},letterSpacing:"0.5px"},children:l(w)})]},d)})}),e.jsxs(a,{sx:{display:"flex",gap:{xs:1,sm:2},mt:3,flexWrap:"nowrap",justifyContent:"center",overflowX:"auto"},children:[e.jsx(z,{label:"Strength",size:"small",sx:{bgcolor:"primary.light",fontSize:{xs:"0.7rem",sm:"0.8125rem"},height:{xs:24,sm:32}}}),e.jsx(z,{label:"Yoga",size:"small",sx:{bgcolor:"secondary.light",fontSize:{xs:"0.7rem",sm:"0.8125rem"},height:{xs:24,sm:32}}}),e.jsx(z,{label:"Cardio",size:"small",sx:{bgcolor:"error.light",fontSize:{xs:"0.7rem",sm:"0.8125rem"},height:{xs:24,sm:32}}}),e.jsx(z,{label:"Rest",size:"small",sx:{bgcolor:"action.disabledBackground",fontSize:{xs:"0.7rem",sm:"0.8125rem"},height:{xs:24,sm:32}}})]})]})})};it.propTypes={workoutHistory:c.array,onDayClick:c.func};const Fe=m.memo(({activities:t=[],onDelete:i,onEdit:s,maxVisible:o=10,showLoadMore:n=!0})=>{const[j,u]=m.useState(null),[g,b]=m.useState(o),l=d=>{u(j===d?null:d)},v=d=>({strength:e.jsx(ce,{fontSize:"small"}),cardio:e.jsx(Ie,{fontSize:"small"}),hiit:e.jsx(Ie,{fontSize:"small"}),stretch:e.jsx(Ke,{fontSize:"small"})})[d]||e.jsx(ce,{fontSize:"small"}),W=d=>({strength:"primary",cardio:"info",hiit:"error",stretch:"warning"})[d]||"default",D=d=>d.charAt(0).toUpperCase()+d.slice(1),H=d=>{if(d.exercises){if(Array.isArray(d.exercises))return d.exercises.length;if(typeof d.exercises=="object")return Object.keys(d.exercises).length}return 0},h=t.slice(0,g);return t.length===0?e.jsx(L,{sx:{width:"100%",borderRadius:3},children:e.jsx(F,{children:e.jsx(r,{variant:"body2",color:"text.secondary",align:"center",children:"No activities yet. Start your first workout!"})})}):e.jsxs(a,{sx:{width:"100%"},children:[e.jsx(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:1,px:2,borderBottom:"1px solid",borderColor:"divider",mb:2},children:e.jsxs(a,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[e.jsx(r,{variant:"h6",sx:{fontSize:"1.1rem",fontWeight:700},children:"Activity Log"}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.875rem"},children:"Your workout history"})]})}),e.jsx(Pe,{sx:{p:0},children:h.map((d,f)=>{const A=j===f,E=H(d),k=d.type||"strength";return e.jsx(L,{sx:{mb:1,borderRadius:2,boxShadow:"0 2px 8px rgba(19, 70, 134, 0.06)",transition:"box-shadow 0.2s","&:hover":{boxShadow:"0 4px 16px rgba(19, 70, 134, 0.12)"}},children:e.jsxs(Re,{sx:{display:"flex",flexDirection:"column",alignItems:"stretch",p:1.5,cursor:"pointer"},onClick:()=>l(f),children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1,flex:1},children:[e.jsx(a,{sx:{color:`${W(k)}.main`},children:v(k)}),e.jsxs(a,{sx:{flex:1},children:[e.jsxs(r,{variant:"body2",sx:{fontWeight:600,color:"text.primary"},children:[d.sessionName||D(k),d.isPartial&&e.jsx(z,{label:"Partial",size:"small",sx:{ml:1,height:"18px",fontSize:"0.7rem"}})]}),d.sessionName&&e.jsx(r,{variant:"caption",sx:{color:"text.secondary",fontSize:"0.65rem"},children:D(k)}),e.jsxs(S,{direction:"row",spacing:1,sx:{mt:.5},children:[e.jsx(r,{variant:"caption",sx:{color:"text.secondary",fontSize:"0.7rem"},children:ys(d.date)}),e.jsx(r,{variant:"caption",sx:{color:"text.secondary",fontSize:"0.7rem"},children:"â€¢"}),e.jsx(r,{variant:"caption",sx:{color:"text.secondary",fontSize:"0.7rem"},children:bs(d.duration)}),E>0&&e.jsxs(e.Fragment,{children:[e.jsx(r,{variant:"caption",sx:{color:"text.secondary",fontSize:"0.7rem"},children:"â€¢"}),e.jsxs(r,{variant:"caption",sx:{color:"text.secondary",fontSize:"0.7rem"},children:[E," exercises"]})]})]})]})]}),e.jsx(J,{size:"small",onClick:w=>{w.stopPropagation(),l(f)},children:A?e.jsx(Rt,{}):e.jsx(It,{})})]}),e.jsx(Lt,{in:A,timeout:"auto",unmountOnExit:!0,children:e.jsxs(a,{sx:{mt:2,pt:2,borderTop:"1px solid",borderColor:"divider"},children:[d.exercises&&typeof d.exercises=="object"&&e.jsxs(a,{sx:{mb:2},children:[e.jsx(r,{variant:"caption",sx:{fontWeight:600,color:"text.secondary"},children:"Exercises:"}),e.jsx(Pe,{dense:!0,sx:{mt:.5},children:Object.entries(d.exercises).map(([w,C],p)=>e.jsxs(Re,{sx:{py:.5,px:1,flexDirection:"column",alignItems:"flex-start"},children:[e.jsxs(r,{variant:"caption",sx:{color:"text.primary"},children:[w,": ",C.sets?.length||0," sets"]}),C.formNotes&&e.jsxs(r,{variant:"caption",sx:{color:"text.secondary",fontStyle:"italic",mt:.5},children:["Form: ",C.formNotes]})]},p))})]}),d.notes&&e.jsxs(a,{sx:{mb:2,p:1.5,bgcolor:"action.hover",borderRadius:1},children:[e.jsx(r,{variant:"caption",sx:{fontWeight:600,color:"text.secondary",display:"block",mb:.5},children:"Notes:"}),e.jsx(r,{variant:"caption",sx:{color:"text.primary"},children:d.notes})]}),e.jsxs(S,{direction:"row",spacing:1,children:[s&&e.jsx(P,{size:"small",startIcon:e.jsx(Mt,{}),onClick:w=>{w.stopPropagation(),s(f)},variant:"outlined",children:"Edit"}),i&&e.jsx(P,{size:"small",startIcon:e.jsx(zt,{}),onClick:w=>{w.stopPropagation(),i(f)},variant:"outlined",color:"error",children:"Delete"})]})]})})]})},f)})}),n&&g<t.length&&e.jsx(a,{sx:{display:"flex",justifyContent:"center",mt:2},children:e.jsxs(P,{variant:"outlined",onClick:()=>b(d=>d+o),children:["Load More (",t.length-g," remaining)"]})})]})});Fe.displayName="ActivitiesList";Fe.propTypes={activities:c.arrayOf(c.shape({date:c.string,type:c.string,duration:c.number,sessionName:c.string,exercises:c.oneOfType([c.array,c.object]),isPartial:c.bool})).isRequired,onDelete:c.func,onEdit:c.func,maxVisible:c.number,showLoadMore:c.bool};const I={STRENGTH:"strength",CARDIO:"cardio",YOGA:"yoga",REST:"rest"},G={FULL:"full",UPPER:"upper",PUSH:"push",PULL:"pull",LEGS:"legs",CORE:"core"},at=({open:t,onClose:i,activity:s,onSave:o})=>{const[n,j]=m.useState({date:new Date,duration:"",notes:"",sessionName:"",sessionType:I.STRENGTH,workoutType:G.FULL,numExercises:"",setsPerExercise:""});m.useEffect(()=>{if(s&&t){const l=s.duration?Math.round(s.duration/60):"";j({date:new Date(s.date),duration:l,notes:s.notes||"",sessionName:s.sessionName||"",sessionType:s.sessionType||I.STRENGTH,workoutType:s.type||G.FULL,numExercises:s.numExercises||"",setsPerExercise:s.setsPerExercise||""})}},[s,t]);const u=(l,v)=>{j(W=>({...W,[l]:v}))},g=()=>{const l=n.duration?parseFloat(n.duration)*60:0,v={...s,date:n.date.getTime(),duration:l,notes:n.notes.trim(),sessionName:n.sessionName.trim(),sessionType:n.sessionType,type:n.sessionType===I.STRENGTH?n.workoutType:n.sessionType,numExercises:n.sessionType===I.STRENGTH&&parseInt(n.numExercises)||void 0,setsPerExercise:n.sessionType===I.STRENGTH&&parseInt(n.setsPerExercise)||void 0};o(v),i()},b=()=>!(!n.date||n.sessionType!==I.REST&&(!n.duration||parseFloat(n.duration)<=0)||n.sessionType===I.STRENGTH&&(!n.numExercises||parseInt(n.numExercises)<=0||!n.setsPerExercise||parseInt(n.setsPerExercise)<=0));return e.jsx(Je,{dateAdapter:Ze,children:e.jsxs(ie,{open:t,onClose:i,maxWidth:"sm",fullWidth:!0,children:[e.jsx(ae,{children:"Edit Activity"}),e.jsx(oe,{children:e.jsxs(S,{spacing:2,sx:{mt:1},children:[e.jsx(Le,{label:"Date",value:n.date,onChange:l=>u("date",l),slotProps:{textField:{fullWidth:!0}}}),e.jsxs(we,{fullWidth:!0,children:[e.jsx(Ee,{children:"Session Type"}),e.jsxs(Ae,{value:n.sessionType,label:"Session Type",onChange:l=>u("sessionType",l.target.value),children:[e.jsx(N,{value:I.STRENGTH,children:"Strength"}),e.jsx(N,{value:I.CARDIO,children:"Cardio"}),e.jsx(N,{value:I.YOGA,children:"Yoga"}),e.jsx(N,{value:I.REST,children:"Rest Day"})]})]}),n.sessionType===I.STRENGTH&&e.jsxs(we,{fullWidth:!0,children:[e.jsx(Ee,{children:"Workout Type"}),e.jsxs(Ae,{value:n.workoutType,label:"Workout Type",onChange:l=>u("workoutType",l.target.value),children:[e.jsx(N,{value:G.FULL,children:"Full Body"}),e.jsx(N,{value:G.UPPER,children:"Upper Body"}),e.jsx(N,{value:G.PUSH,children:"Push"}),e.jsx(N,{value:G.PULL,children:"Pull"}),e.jsx(N,{value:G.LEGS,children:"Legs"}),e.jsx(N,{value:G.CORE,children:"Core"})]})]}),n.sessionType!==I.REST&&e.jsx(Y,{fullWidth:!0,type:"number",label:"Duration (minutes)",placeholder:"e.g., 45",value:n.duration,onChange:l=>u("duration",l.target.value),variant:"outlined",inputProps:{min:0,step:1}}),n.sessionType===I.STRENGTH&&e.jsxs(e.Fragment,{children:[e.jsx(Y,{fullWidth:!0,type:"number",label:"Number of Exercises",placeholder:"e.g., 6",value:n.numExercises,onChange:l=>u("numExercises",l.target.value),variant:"outlined",inputProps:{min:1,step:1}}),e.jsx(Y,{fullWidth:!0,type:"number",label:"Sets per Exercise",placeholder:"e.g., 3",value:n.setsPerExercise,onChange:l=>u("setsPerExercise",l.target.value),variant:"outlined",inputProps:{min:1,step:1}})]}),e.jsx(Y,{fullWidth:!0,label:"Session Name (optional)",placeholder:"e.g., Morning workout, Leg day, etc.",value:n.sessionName,onChange:l=>u("sessionName",l.target.value),variant:"outlined"}),e.jsx(Y,{fullWidth:!0,multiline:!0,rows:4,label:"Notes (optional)",placeholder:"Add any notes about your session...",value:n.notes,onChange:l=>u("notes",l.target.value),variant:"outlined"})]})}),e.jsxs(le,{children:[e.jsx(P,{onClick:i,children:"Cancel"}),e.jsx(P,{onClick:g,variant:"contained",disabled:!b(),children:"Save"})]})]})})};at.propTypes={open:c.bool.isRequired,onClose:c.func.isRequired,activity:c.object,onSave:c.func.isRequired};const ot=m.memo(({currentStreak:t=0,longestStreak:i=0})=>{const s=vs(t),o=s.length>0?s[s.length-1]:null;return e.jsx(L,{sx:{borderRadius:3,boxShadow:"0 4px 16px rgba(19, 70, 134, 0.08)",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:e.jsx(F,{sx:{p:2.5},children:e.jsxs(S,{spacing:2,children:[e.jsxs(a,{sx:{textAlign:"center"},children:[e.jsx(a,{sx:{fontSize:"3rem",mb:1},children:"ðŸ”¥"}),e.jsx(r,{variant:"h3",sx:{fontWeight:700,mb:.5},children:t}),e.jsx(r,{variant:"body2",sx:{opacity:.9},children:"Day Streak"})]}),s.length>0&&e.jsxs(a,{children:[e.jsx(r,{variant:"caption",sx:{opacity:.8,display:"block",textAlign:"center",mb:1},children:"Milestones Achieved"}),e.jsx(S,{direction:"row",spacing:1,sx:{justifyContent:"center",flexWrap:"wrap",gap:1},children:s.map((n,j)=>e.jsx(Ft,{title:n.description,children:e.jsx(z,{label:`${n.days} days`,size:"small",sx:{bgcolor:"rgba(255, 255, 255, 0.2)",color:"white",fontWeight:600,"&:hover":{bgcolor:"rgba(255, 255, 255, 0.3)"}},icon:e.jsx(a,{component:"span",sx:{fontSize:"1rem",ml:.5},children:n.badge.split(" ")[0]})})},j))})]}),o&&e.jsx(a,{sx:{p:1.5,borderRadius:2,bgcolor:"rgba(255, 255, 255, 0.15)",textAlign:"center"},children:e.jsx(r,{variant:"body2",sx:{opacity:.9},children:o.badge})}),i>t&&e.jsx(a,{sx:{textAlign:"center",pt:1,borderTop:"1px solid rgba(255, 255, 255, 0.2)"},children:e.jsxs(r,{variant:"caption",sx:{opacity:.8},children:["Personal Best: ",i," days"]})})]})})})});ot.displayName="StreakDisplay";ot.propTypes={currentStreak:c.number,longestStreak:c.number};const lt=m.memo(({adherence:t=0,completedWorkouts:i=0,plannedWorkouts:s=0})=>{const o=()=>t>=80?"success.main":t>=60?"warning.main":"error.main",n=()=>t>=80?"Excellent! ðŸŽ‰":t>=60?"Good progress! ðŸ’ª":"Keep going! ðŸŒŸ";return e.jsx(L,{sx:{borderRadius:3,boxShadow:"0 4px 16px rgba(19, 70, 134, 0.08)"},children:e.jsx(F,{sx:{p:2.5},children:e.jsxs(S,{spacing:2,children:[e.jsxs(S,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Nt,{sx:{color:o()}}),e.jsx(r,{variant:"h6",sx:{fontWeight:600},children:"Adherence"})]}),e.jsxs(r,{variant:"h4",sx:{fontWeight:700,color:o()},children:[t,"%"]})]}),e.jsx(a,{children:e.jsx(fe,{variant:"determinate",value:t,sx:{height:12,borderRadius:6,bgcolor:"action.hover","& .MuiLinearProgress-bar":{bgcolor:o(),borderRadius:6}}})}),e.jsxs(S,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(r,{variant:"body2",color:"text.secondary",children:[i," of ",s," workouts completed"]}),e.jsx(r,{variant:"body2",sx:{fontWeight:600,color:o()},children:n()})]})]})})})});lt.displayName="AdherenceDisplay";lt.propTypes={adherence:c.number,completedWorkouts:c.number,plannedWorkouts:c.number};const ct=m.memo(({totalVolume:t=0,volumeChange:i=0})=>{const s=i>=0;return e.jsx(L,{sx:{borderRadius:3,boxShadow:"0 4px 16px rgba(19, 70, 134, 0.08)"},children:e.jsx(F,{sx:{p:2.5},children:e.jsxs(S,{spacing:2,children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Q,{sx:{color:"primary.main"}}),e.jsx(r,{variant:"h6",sx:{fontWeight:600},children:"Total Volume"})]}),e.jsxs(a,{children:[e.jsx(r,{variant:"h3",sx:{fontWeight:700,color:"primary.main"},children:t.toLocaleString()}),e.jsx(r,{variant:"body2",color:"text.secondary",children:"lbs lifted (last 30 days)"})]}),i!==0&&e.jsxs(a,{sx:{p:1.5,borderRadius:2,bgcolor:s?"success.light":"error.light",display:"flex",alignItems:"center",justifyContent:"center",gap:.5},children:[e.jsxs(r,{variant:"body2",sx:{fontWeight:600,color:s?"success.dark":"error.dark"},children:[s?"â†‘":"â†“"," ",Math.abs(i),"%"]}),e.jsx(r,{variant:"caption",sx:{color:s?"success.dark":"error.dark"},children:"vs. previous 30 days"})]})]})})})});ct.displayName="VolumeTrendDisplay";ct.propTypes={totalVolume:c.number,volumeChange:c.number};const ws=(t=[])=>{if(!t||t.length===0)return{currentStreak:0,longestStreak:0};const i=[...t].sort((l,v)=>new Date(v.date)-new Date(l.date)),s=new Set(i.map(l=>{const v=new Date(l.date);return v.setHours(0,0,0,0),v.getTime()})),o=new Date;o.setHours(0,0,0,0);let n=0,j=0,u=0,g=new Date(o),b=0;for(let l=0;l<365;l++){const v=g.getTime();if(Math.floor((o.getTime()-g.getTime())/(1e3*60*60*24))%7===0&&l>0&&(b=0),s.has(v))u++,n===0&&l<2&&(n=u),j=Math.max(j,u);else if(b++,b>1){const D=new Date(g);if(D.setDate(D.getDate()-1),!s.has(D.getTime())&&l>0){if(n===0&&u>0)break;u=0,b=0}}g.setDate(g.getDate()-1)}return{currentStreak:n,longestStreak:j}},Es=(t=[],i=30)=>{const s=new Date;s.setDate(s.getDate()-i),s.setHours(0,0,0,0);const n=t.filter(b=>{const l=new Date(b.date);return l.setHours(0,0,0,0),l>=s}).length,j=i/7,u=Math.ceil(j*6);return u===0?0:Math.min(100,Math.round(n/u*100))},As=()=>{const[t,i]=m.useState(!0),[s,o]=m.useState([]),[n,j]=m.useState([]),[u,g]=m.useState([]),[b,l]=m.useState(!1),[v,W]=m.useState(""),[D,H]=m.useState(0),[h,d]=m.useState(!1),[f,A]=m.useState("all"),[E,k]=m.useState(null),[w,C]=m.useState(null),{profile:p,addWeightEntry:U}=es(),[Z,dt]=m.useState({currentStreak:0,longestStreak:0}),[Ne,xt]=m.useState(0),[ht,ut]=m.useState({}),[de,gt]=m.useState({personalRecords:0,totalWorkouts:0,averageDuration:0,strengthSessions:0,cardioSessions:0,yogaSessions:0}),[pt,ye]=m.useState(!1),[mt,xe]=m.useState(!1),[he,q]=m.useState(null),[ee,_]=m.useState({open:!1,message:"",severity:"success"}),jt=()=>{switch(f){case"7days":return 7;case"30days":return 30;case"3months":return 90;case"year":return 365;case"custom":return null;case"all":return null;default:return null}},ft=()=>{const x=jt();if(f==="custom"&&E&&w){const M=new Date(E);M.setHours(0,0,0,0);const R=new Date(w);return R.setHours(23,59,59,999),s.filter($=>{const O=new Date($.date);return O>=M&&O<=R})}if(!x)return s;const y=new Date;return y.setDate(y.getDate()-x),y.setHours(0,0,0,0),s.filter(M=>{const R=new Date(M.date);return R.setHours(0,0,0,0),R>=y})},yt=x=>{let y=0,M=0,R=0,$=0;const O={};x.forEach(T=>{T.type==="cardio"||T.type==="hiit"||T.cardioType?M++:T.type==="yoga"||T.type==="stretch"||T.type==="mobility"||T.yogaType?R++:(T.type==="strength"||T.type==="full"||T.type==="upper"||T.type==="lower"||T.type==="push"||T.type==="pull"||T.type==="legs"||T.exercises&&Object.keys(T.exercises).length>0)&&y++;const ue=T.duration||0;$+=ue,T.exercises&&Object.entries(T.exercises).forEach(([K,se])=>{!se.sets||se.sets.length===0||se.sets.forEach(ge=>{const Se=ge.weight||0,Oe=ge.reps||0;Se===0&&Oe===0||(!O[K]||Se>O[K].weight)&&(O[K]={weight:Se,reps:Oe,date:T.date})})})});const te=x.length,ve=te>0?Math.round($/te):0;return{personalRecords:Object.keys(O).length,totalWorkouts:te,averageDuration:ve,strengthSessions:y,cardioSessions:M,yogaSessions:R}},be=async()=>{i(!0);try{const[x,y,M,R,$]=await Promise.all([ts(),ss(),rs(),ns(),is()]),O=[...x,...y,...M,...R];o(O),ut($);const te=ws(O);dt(te);const ve=Es(O,30);xt(ve);const T=re.getPinnedExercises();j(T);try{const se=(await(await fetch(as)).json()).map(ge=>ge["Exercise Name"]).sort();g(se)}catch(ue){console.error("Error loading exercises:",ue);const K=re.getUniqueExercises(x);g(K)}}catch(x){console.error("Error loading progress data:",x)}finally{i(!1)}};m.useEffect(()=>{be()},[]),m.useEffect(()=>{if(s.length>0||f||E||w){const x=ft(),y=yt(x);gt(y)}},[s,f,E,w]);const bt=x=>{re.removePinnedExercise(x),j(n.filter(y=>y.exerciseName!==x))},vt=x=>{re.addPinnedExercise(x,"weight")&&(j([...n,{exerciseName:x,trackingMode:"weight"}]),l(!1),W(""))},St=x=>{q(x),ye(!0)},Ct=x=>{q(x),xe(!0)},Tt=async()=>{try{await ls(he),_({open:!0,message:"Activity deleted successfully",severity:"success"}),xe(!1),q(null),await be()}catch(x){console.error("Error deleting activity:",x),_({open:!0,message:"Failed to delete activity",severity:"error"})}},kt=async x=>{try{await os(he,x),_({open:!0,message:"Activity updated successfully",severity:"success"}),ye(!1),q(null),await be()}catch(y){console.error("Error updating activity:",y),_({open:!0,message:"Failed to update activity",severity:"error"})}};return t?e.jsx(a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:e.jsxs(r,{variant:"h5",color:"text.secondary",children:["Loading",e.jsx(Qe.span,{initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:"..."})]})}):e.jsxs(a,{sx:{width:"100%",minHeight:"100vh",overflowX:"hidden"},children:[e.jsx(qt,{title:"Progress",subtitle:"Track your fitness journey"}),e.jsxs(a,{sx:{maxWidth:"1400px",margin:"0 auto",p:{xs:1,sm:2,md:3},pb:{xs:"80px",md:3},width:"100%",boxSizing:"border-box"},children:[e.jsx(a,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:e.jsxs(qe,{value:D,onChange:(x,y)=>H(y),variant:"fullWidth",sx:{maxWidth:{xs:"100%",sm:600},margin:"0 auto","& .MuiTab-root":{transition:"color 0.3s ease","&.Mui-selected":{color:D===0?"primary.main":"warning.main"}},"& .MuiTabs-indicator":{height:3,borderRadius:"3px 3px 0 0",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",backgroundColor:D===0?"primary.main":"warning.main"}},children:[e.jsx(ke,{icon:e.jsx(He,{}),iconPosition:"start",label:"Statistics",sx:{minHeight:48}}),e.jsx(ke,{icon:e.jsx(je,{}),iconPosition:"start",label:"Achievements",sx:{minHeight:48}})]})}),D===0&&e.jsxs(S,{spacing:3,children:[e.jsx(a,{children:e.jsx(it,{workoutHistory:s})}),e.jsx(a,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{startIcon:e.jsx(Ot,{}),onClick:()=>d(!0),variant:"outlined",size:"small",sx:{textTransform:"none",borderRadius:2},children:f==="all"?"All Time":f==="7days"?"7 Days":f==="30days"?"30 Days":f==="3months"?"3 Months":f==="year"?"Year":f==="custom"?"Custom":"Filter"})}),e.jsx(L,{sx:{bgcolor:"background.paper",boxShadow:3,border:"2px solid #FF6B35"},children:e.jsx(F,{sx:{p:2.5},children:e.jsxs(S,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Ge,{sx:{fontSize:48,color:"#FF6B35"}}),e.jsxs(a,{children:[e.jsx(r,{variant:"h2",sx:{fontWeight:700,color:"#FF6B35",lineHeight:1},children:Z.currentStreak}),e.jsx(r,{variant:"body1",color:"text.secondary",sx:{fontWeight:600},children:"Day Streak"})]})]}),e.jsxs(a,{sx:{textAlign:"right"},children:[e.jsx(r,{variant:"caption",color:"text.secondary",children:"Longest"}),e.jsx(r,{variant:"h5",sx:{fontWeight:700,color:"primary.main"},children:Z.longestStreak})]})]})})}),e.jsx(L,{sx:{bgcolor:"background.paper"},children:e.jsx(F,{sx:{p:2},children:e.jsxs(S,{spacing:1.5,children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(He,{sx:{color:"secondary.main"}}),e.jsx(r,{variant:"body1",sx:{fontWeight:600},children:"Adherence"})]}),e.jsxs(r,{variant:"h4",sx:{fontWeight:700,color:"secondary.main"},children:[Ne,"%"]})]}),e.jsx(fe,{variant:"determinate",value:Ne,sx:{height:12,borderRadius:6,bgcolor:"action.hover","& .MuiLinearProgress-bar":{borderRadius:6,background:"linear-gradient(90deg, #4CAF50 0%, #8BC34A 100%)"}}}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"Last 30 days â€¢ 6 workouts/week target"})]})})}),s.length>0&&e.jsx(L,{sx:{bgcolor:"background.paper"},children:e.jsxs(F,{children:[e.jsxs(S,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:2},children:[e.jsxs(r,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Q,{})," Progressive Overload"]}),n.length<10&&e.jsx(P,{size:"small",startIcon:e.jsx(We,{}),onClick:()=>l(!0),sx:{color:"secondary.main"},children:"Track Exercise"})]}),n.length===0?e.jsxs(a,{sx:{textAlign:"center",py:4},children:[e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Track your favorite exercises to see your progress over time"}),e.jsx(P,{variant:"contained",startIcon:e.jsx(We,{}),onClick:()=>l(!0),children:"Add Exercise"})]}):e.jsx(S,{spacing:2,children:n.map(x=>{const y=re.getExerciseProgression(s,x.exerciseName,"weight"),M=y.length>0?y[0].value:0,R=y.length>0?y[y.length-1].value:0,$=R>M?"up":R<M?"down":"same";return e.jsxs(a,{sx:{p:2,borderRadius:2,border:"1px solid",borderColor:"divider",bgcolor:"background.default"},children:[e.jsxs(S,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",sx:{mb:1.5},children:[e.jsx(r,{variant:"body1",sx:{fontWeight:600,flex:1},children:x.exerciseName}),e.jsx(J,{onClick:()=>bt(x.exerciseName),size:"small",sx:{color:"text.secondary"},children:e.jsx(Ye,{sx:{fontSize:18}})})]}),y.length>0?e.jsxs(S,{direction:"row",alignItems:"center",spacing:2,sx:{justifyContent:"center",py:1},children:[e.jsxs(a,{sx:{textAlign:"center"},children:[e.jsx(r,{variant:"caption",color:"text.secondary",children:"Starting"}),e.jsxs(r,{variant:"h5",sx:{fontWeight:700,color:"primary.main"},children:[M," lbs"]})]}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",px:2},children:[$==="up"&&e.jsx(Q,{sx:{fontSize:40,color:"success.main"}}),$==="down"&&e.jsx(_e,{sx:{fontSize:40,color:"error.main"}}),$==="same"&&e.jsx(Ht,{sx:{fontSize:40,color:"text.secondary"}})]}),e.jsxs(a,{sx:{textAlign:"center"},children:[e.jsx(r,{variant:"caption",color:"text.secondary",children:"Current"}),e.jsxs(r,{variant:"h5",sx:{fontWeight:700,color:"secondary.main"},children:[R," lbs"]})]})]}):e.jsx(r,{variant:"caption",color:"text.secondary",sx:{display:"block",textAlign:"center",py:2},children:"No data available"})]},x.exerciseName)})})]})}),e.jsx(L,{sx:{bgcolor:"background.paper"},children:e.jsxs(F,{sx:{p:3},children:[e.jsx(r,{variant:"h6",sx:{mb:3,fontWeight:600},children:"Workout Summary"}),e.jsxs(S,{spacing:2.5,children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(ce,{sx:{fontSize:28,color:"primary.main"}}),e.jsx(r,{variant:"body1",sx:{fontWeight:500},children:"Total Workouts"})]}),e.jsx(r,{variant:"h5",sx:{fontWeight:700,color:"primary.main"},children:de.totalWorkouts})]}),e.jsx(Ce,{}),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(ce,{sx:{fontSize:28,color:"error.main"}}),e.jsx(r,{variant:"body1",sx:{fontWeight:500},children:"Total Strength"})]}),e.jsx(r,{variant:"h5",sx:{fontWeight:700,color:"error.main"},children:de.strengthSessions})]}),e.jsx(Ce,{}),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(Ie,{sx:{fontSize:28,color:"success.main"}}),e.jsx(r,{variant:"body1",sx:{fontWeight:500},children:"Total Cardio"})]}),e.jsx(r,{variant:"h5",sx:{fontWeight:700,color:"success.main"},children:de.cardioSessions})]}),e.jsx(Ce,{}),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(Ke,{sx:{fontSize:28,color:"secondary.main"}}),e.jsx(r,{variant:"body1",sx:{fontWeight:500},children:"Total Yoga"})]}),e.jsx(r,{variant:"h5",sx:{fontWeight:700,color:"secondary.main"},children:de.yogaSessions})]})]})]})}),e.jsx(nt,{weightHistory:p.weightHistory||[],currentWeight:p.currentWeight,currentUnit:p.weightUnit||"lbs",targetWeight:p.targetWeight,onAddWeight:U}),s.length>0&&e.jsxs(a,{children:[e.jsxs(r,{variant:"h6",sx:{fontWeight:600,color:"text.primary",display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(Q,{})," Recent Activity"]}),e.jsx(Fe,{activities:s,onEdit:St,onDelete:Ct,maxVisible:10,showLoadMore:!0})]})]}),D===1&&e.jsx(st,{userStats:ht,workoutHistory:s}),e.jsxs(ie,{open:b,onClose:()=>{l(!1),W("")},maxWidth:"xs",fullWidth:!0,children:[e.jsx(ae,{children:"Add Exercise to Track"}),e.jsxs(oe,{children:[e.jsx(Y,{fullWidth:!0,placeholder:"Search exercises...",value:v,onChange:x=>W(x.target.value),variant:"outlined",size:"small",sx:{mb:2,mt:1}}),e.jsx(Pe,{sx:{maxHeight:400,overflow:"auto"},children:u.filter(x=>!n.some(y=>y.exerciseName===x)).filter(x=>x.toLowerCase().includes(v.toLowerCase())).map(x=>e.jsx(Re,{disablePadding:!0,children:e.jsx($t,{onClick:()=>vt(x),children:e.jsx(Ut,{primary:x})})},x))})]}),e.jsx(le,{children:e.jsx(P,{onClick:()=>{l(!1),W("")},children:"Cancel"})})]}),e.jsxs(ie,{open:h,onClose:()=>d(!1),maxWidth:"xs",fullWidth:!0,children:[e.jsx(ae,{children:"Time Frame Filter"}),e.jsx(oe,{children:e.jsxs(S,{spacing:2,sx:{mt:1},children:[e.jsxs(Bt,{value:f,exclusive:!0,onChange:(x,y)=>{y!==null&&A(y)},orientation:"vertical",fullWidth:!0,children:[e.jsx(X,{value:"all",children:"All Time"}),e.jsx(X,{value:"7days",children:"Last 7 Days"}),e.jsx(X,{value:"30days",children:"Last 30 Days"}),e.jsx(X,{value:"3months",children:"Last 3 Months"}),e.jsx(X,{value:"year",children:"Last Year"}),e.jsx(X,{value:"custom",children:"Custom Range"})]}),f==="custom"&&e.jsx(Je,{dateAdapter:Ze,children:e.jsxs(S,{spacing:2,children:[e.jsx(Le,{label:"Start Date",value:E,onChange:x=>k(x),slotProps:{textField:{fullWidth:!0}}}),e.jsx(Le,{label:"End Date",value:w,onChange:x=>C(x),slotProps:{textField:{fullWidth:!0}}})]})})]})}),e.jsxs(le,{children:[e.jsx(P,{onClick:()=>{A("all"),k(null),C(null)},children:"Clear Filters"}),e.jsx(P,{onClick:()=>d(!1),variant:"contained",children:"Apply"})]})]}),e.jsx(at,{open:pt,onClose:()=>{ye(!1),q(null)},activity:he!==null?s[he]:null,onSave:kt}),e.jsxs(ie,{open:mt,onClose:()=>{xe(!1),q(null)},children:[e.jsx(ae,{children:"Delete Activity?"}),e.jsx(oe,{children:e.jsx(r,{children:"Are you sure you want to delete this activity? This action cannot be undone."})}),e.jsxs(le,{children:[e.jsx(P,{onClick:()=>{xe(!1),q(null)},children:"Cancel"}),e.jsx(P,{onClick:Tt,color:"error",variant:"contained",children:"Delete"})]})]}),e.jsx(Gt,{open:ee.open,autoHideDuration:6e3,onClose:()=>_({...ee,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(De,{onClose:()=>_({...ee,open:!1}),severity:ee.severity,sx:{width:"100%"},children:ee.message})})]})]})};As.propTypes={};export{As as default};
