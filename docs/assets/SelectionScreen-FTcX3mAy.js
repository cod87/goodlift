import{j as e,B as i,e as o,C as L,n as q,m,J as Y,K as X,N as Z,v as d,bi as b,bj as y,a6 as S,bk as C,bl as N,bm as T,aY as _,r as M,I as P,E as ee,w as se,L as ne,o as ie,q as ae,g as c,D as le,c as te,d as re,z as oe,f as de,P as l}from"./mui-DHtKCVyI.js";import{r}from"./vendor-B0qVADJY.js";import{Q as w,m as ce,R as xe,S as he}from"./index-Bme_WGpp.js";import{C as me}from"./CompactHeader-BaA1YDi8.js";import"./firebase-CJLtoEJQ.js";const B=r.memo(({workoutType:t,selectedEquipment:a,equipmentOptions:v,onWorkoutTypeChange:W,onEquipmentChange:k,onStartWorkout:z,onCustomize:E,loading:H})=>{const[p,u]=r.useState([]),[$,j]=r.useState(!1),[F,g]=r.useState(null),[x,h]=r.useState(""),[A,O]=r.useState(null);r.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"}),w().then(u)},[]);const U=()=>{if(t){const s=a.has("all")?"all":Array.from(a);z(t,s)}},G=()=>{if(t&&E){const s=a.has("all")?"all":Array.from(a);E(t,s)}},K=async s=>{await xe(s);const n=await w();u(n)},J=s=>{g(s),h(s.name),j(!0)},R=async()=>{if(F&&x.trim()){await he(F.id,x.trim());const s=await w();u(s),j(!1),g(null),h("")}},D=()=>{j(!1),g(null),h("")},Q=s=>{W(s.type),k(s.equipment||"all");const n=s.equipment==="all"?"all":[s.equipment];z(s.type,n,s.exercises)},I=s=>{const n=new Set(a);s==="all"?(n.clear(),n.add("all")):(n.has("all")&&n.delete("all"),n.has(s)?n.delete(s):n.add(s),n.size===0&&n.add("all")),k(n)},V=()=>{if(a.has("all"))return"All Equipment";const s=Array.from(a);return s.length===0?"All Equipment":s.length===1?v.find(f=>f.toLowerCase()===s[0])||s[0]:`${s.length} selected`};return e.jsxs(i,{sx:{width:"100%"},children:[e.jsx(me,{title:"Workouts",icon:"⚡"}),e.jsxs(ce.div,{className:"screen selection-screen",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1rem",overflow:"auto"},children:[H?e.jsx(i,{sx:{textAlign:"center"},children:e.jsx(o,{variant:"h5",sx:{mb:2},children:"Generating workout..."})}):e.jsx(i,{sx:{width:"100%",maxWidth:800},children:e.jsx(L,{sx:{maxWidth:800,width:"100%",borderRadius:3,boxShadow:"0 8px 32px rgba(19, 70, 134, 0.12)"},children:e.jsxs(q,{sx:{p:{xs:2,sm:4}},children:[e.jsx(i,{sx:{mb:3},children:e.jsxs(m,{direction:{xs:"column",sm:"row"},spacing:2,sx:{width:"100%"},children:[e.jsxs(Y,{fullWidth:!0,children:[e.jsx(X,{id:"workout-type-label",children:"Workout Type"}),e.jsxs(Z,{labelId:"workout-type-label",id:"workout-type-select",value:t||"full",label:"Workout Type",onChange:s=>W(s.target.value),children:[e.jsx(d,{value:"full",children:"Full Body"}),e.jsx(d,{value:"upper",children:"Upper Body"}),e.jsx(d,{value:"lower",children:"Lower Body"}),e.jsx(d,{value:"push",children:"Push"}),e.jsx(d,{value:"pull",children:"Pull"}),e.jsx(d,{value:"legs",children:"Legs"})]})]}),e.jsx(i,{sx:{width:"100%"},children:e.jsxs(b,{sx:{boxShadow:"none",border:"1px solid rgba(0, 0, 0, 0.23)",borderRadius:"4px","&:before":{display:"none"},"&.Mui-expanded":{margin:0}},children:[e.jsx(y,{expandIcon:e.jsx(S,{}),sx:{minHeight:"56px","&.Mui-expanded":{minHeight:"56px"},"& .MuiAccordionSummary-content":{margin:"16px 0","&.Mui-expanded":{margin:"16px 0"}}},children:e.jsxs(i,{sx:{display:"flex",flexDirection:"column",width:"100%"},children:[e.jsx(o,{variant:"caption",sx:{color:"rgba(0, 0, 0, 0.6)",fontSize:"0.75rem",lineHeight:1,mb:.5},children:"Equipment"}),e.jsx(o,{sx:{color:"rgba(0, 0, 0, 0.87)",fontSize:"1rem"},children:V()})]})}),e.jsx(C,{sx:{pt:0,pb:2},children:e.jsxs(i,{component:"div",role:"group","aria-label":"Equipment selection",children:[e.jsx(N,{control:e.jsx(T,{checked:a.has("all"),onChange:()=>I("all")}),label:"All Equipment",sx:{mb:1,display:"flex"}}),v.map(s=>e.jsx(N,{control:e.jsx(T,{checked:a.has(s.toLowerCase()),onChange:()=>I(s.toLowerCase())}),label:s,sx:{mb:1,display:"flex"}},s))]})})]})})]})}),p.length>0&&e.jsx(i,{sx:{mb:3},children:e.jsxs(b,{sx:{boxShadow:"none","&:before":{display:"none"}},children:[e.jsx(y,{expandIcon:e.jsx(S,{}),children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(_,{sx:{color:"warning.main"}}),e.jsxs(o,{variant:"h6",sx:{fontWeight:600,color:"text.primary",fontSize:{xs:"1rem",sm:"1.25rem"}},children:["Favorite Workouts (",p.length,")"]})]})}),e.jsx(C,{children:e.jsx(m,{spacing:1.5,children:p.map(s=>e.jsx(L,{sx:{border:"1px solid",borderColor:"divider",boxShadow:"none","&:hover":{boxShadow:"0 2px 8px rgba(19, 70, 134, 0.1)"}},children:e.jsxs(q,{sx:{p:2,"&:last-child":{pb:2}},children:[e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"start",mb:1},children:[e.jsxs(i,{sx:{flex:1},children:[e.jsx(o,{variant:"body1",sx:{fontWeight:600,mb:.5},children:s.name}),e.jsxs(m,{direction:"row",spacing:1,sx:{mb:1},children:[e.jsx(M,{label:s.type.charAt(0).toUpperCase()+s.type.slice(1),size:"small",sx:{fontSize:"0.7rem"}}),e.jsx(M,{label:`${s.exercises.length} exercises`,size:"small",variant:"outlined",sx:{fontSize:"0.7rem"}})]})]}),e.jsxs(i,{sx:{display:"flex",gap:.5},children:[e.jsx(P,{size:"small",onClick:()=>J(s),sx:{color:"primary.main"},children:e.jsx(ee,{fontSize:"small"})}),e.jsx(P,{size:"small",onClick:()=>K(s.id),sx:{color:"error.main"},children:e.jsx(se,{fontSize:"small"})})]})]}),e.jsxs(b,{expanded:A===s.id,onChange:()=>O(A===s.id?null:s.id),sx:{boxShadow:"none","&:before":{display:"none"},bgcolor:"transparent"},children:[e.jsx(y,{expandIcon:e.jsx(S,{}),sx:{minHeight:"auto","& .MuiAccordionSummary-content":{margin:"8px 0"}},children:e.jsx(o,{variant:"caption",sx:{fontWeight:600,color:"primary.main"},children:"View Exercises"})}),e.jsx(C,{sx:{pt:0},children:e.jsx(ne,{dense:!0,sx:{py:0},children:s.exercises.map((n,f)=>e.jsx(ie,{sx:{px:0},children:e.jsx(ae,{primary:n["Exercise Name"]||n.name||"Unknown Exercise",secondary:`${n.Equipment||n.equipment||"N/A"} • ${n["Primary Muscle"]||n.primaryMuscle||"N/A"}`,primaryTypographyProps:{variant:"body2",fontWeight:500},secondaryTypographyProps:{variant:"caption"}})},f))})})]}),e.jsx(c,{size:"small",variant:"contained",onClick:()=>Q(s),sx:{fontSize:"0.8rem",textTransform:"none",mt:1},fullWidth:!0,children:"Load Workout"})]})},s.id))})})]})}),e.jsxs(m,{direction:"row",spacing:2,sx:{width:"100%"},children:[e.jsx(c,{variant:"outlined",size:"large",fullWidth:!0,disabled:!t,onClick:G,sx:{py:2,fontSize:"1.1rem",fontWeight:600,borderRadius:2,textTransform:"none",borderWidth:2,"&:hover":{borderWidth:2}},children:"Customize"}),e.jsx(c,{variant:"contained",size:"large",fullWidth:!0,disabled:!t,onClick:U,sx:{py:2,fontSize:"1.1rem",fontWeight:600,borderRadius:2,textTransform:"none"},children:"Generate"})]})]})})}),e.jsxs(le,{open:$,onClose:D,maxWidth:"sm",fullWidth:!0,children:[e.jsx(te,{children:"Edit Workout Name"}),e.jsx(re,{children:e.jsx(oe,{autoFocus:!0,margin:"dense",label:"Workout Name",type:"text",fullWidth:!0,variant:"outlined",value:x,onChange:s=>h(s.target.value),onKeyPress:s=>{s.key==="Enter"&&R()}})}),e.jsxs(de,{children:[e.jsx(c,{onClick:D,color:"inherit",children:"Cancel"}),e.jsx(c,{onClick:R,variant:"contained",disabled:!x.trim(),children:"Save"})]})]})]})]})});B.displayName="SelectionScreen";B.propTypes={workoutType:l.string.isRequired,selectedEquipment:l.instanceOf(Set).isRequired,equipmentOptions:l.array.isRequired,onWorkoutTypeChange:l.func.isRequired,onEquipmentChange:l.func.isRequired,onStartWorkout:l.func.isRequired,onCustomize:l.func,onNavigate:l.func,loading:l.bool.isRequired};export{B as default};
