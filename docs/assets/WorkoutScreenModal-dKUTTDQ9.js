import{j as e,C as lt,n as dt,B as x,h as pt,aV as xt,e as b,m as pe,r as Ne,aW as De,g as G,X as mt,Z as ut,I as k,aX as ht,a0 as He,P as u,aY as gt,aZ as ft,a_ as bt,a$ as wt,a4 as yt,b0 as vt,aN as Te,k as St,a5 as Ie,A as ze,a1 as jt,b1 as kt,aO as Wt,b2 as Ct,D as Rt,a as Tt,d as It}from"./mui-D40dqk12.js";import{r}from"./vendor-B0qVADJY.js";import{m as O,a as te,A as xe,g as zt,b as Et,s as Nt,c as Dt,d as Ht,e as Mt,w as Z,M as Bt,f as Ft}from"./index-BDi-38df.js";import{d as Ee,f as At}from"./helpers-CCWTPML7.js";import{g as qt}from"./exerciseDemoImages-dFZ_3ZkE.js";import"./firebase-CJLtoEJQ.js";const me=({type:d,workoutType:B,defaultDuration:P=5,onComplete:L,onSkip:$})=>{const[i,w]=r.useState("ready"),[f,W]=r.useState(P),[F,C]=r.useState(P*60),m=r.useRef(null),I=r.useRef(null),S=r.useRef(null);r.useEffect(()=>()=>{m.current&&clearInterval(m.current)},[]);const _=(()=>{if(d==="warmup"){const p="Recommended: 5-10 minutes of dynamic stretching",h={upper:"Focus on shoulder circles, arm swings, chest openers, and back rotations",lower:"Focus on leg swings, hip circles, knee lifts, and ankle rotations",full:"Focus on full body movement - jumping jacks, arm circles, leg swings, and torso twists"};return{main:p,specific:h[B]||h.full}}else{const p="Recommended: 5-10 minutes of static stretching",h={upper:"Hold stretches for 20-30 seconds - focus on shoulders, chest, back, and triceps",lower:"Hold stretches for 20-30 seconds - focus on quads, hamstrings, glutes, and calves",full:"Hold stretches for 20-30 seconds - focus on all major muscle groups you trained"};return{main:p,specific:h[B]||h.full}}})(),se=()=>{if(i==="ready"||i==="completed"){const p=f*60;C(p),w("running"),I.current=Date.now(),m.current=setInterval(()=>{const h=Math.floor((Date.now()-I.current)/1e3),R=p-h;R<=0?(clearInterval(m.current),C(0),w("completed"),te.playBeep(880,300),setTimeout(()=>te.playBeep(1046,300),350)):C(R)},1e3)}else if(i==="paused"){w("running");const p=Date.now()-S.current;I.current=I.current+p;const h=f*60;m.current=setInterval(()=>{const R=Math.floor((Date.now()-I.current)/1e3),A=h-R;A<=0?(clearInterval(m.current),C(0),w("completed"),te.playBeep(880,300),setTimeout(()=>te.playBeep(1046,300),350)):C(A)},1e3)}},re=()=>{i==="running"&&(w("paused"),S.current=Date.now(),m.current&&clearInterval(m.current))},V=()=>{m.current&&clearInterval(m.current),w("ready"),C(f*60)},U=()=>{m.current&&clearInterval(m.current),L()},oe=()=>{m.current&&clearInterval(m.current),$()},D=p=>{const h=Math.floor(p/60),R=p%60;return`${h}:${R.toString().padStart(2,"0")}`},Y=(f*60-F)/(f*60)*100;return e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},style:{width:"100%",maxWidth:"600px",margin:"0 auto",padding:"0.5rem"},children:e.jsx(lt,{sx:{borderRadius:2,boxShadow:3,bgcolor:"background.paper"},children:e.jsxs(dt,{sx:{p:3},children:[e.jsxs(x,{sx:{textAlign:"center",mb:3},children:[e.jsx(x,{sx:{display:"flex",justifyContent:"center",mb:2},children:d==="warmup"?e.jsx(pt,{sx:{fontSize:48,color:"warning.main"}}):e.jsx(xt,{sx:{fontSize:48,color:"info.main"}})}),e.jsx(b,{variant:"h5",sx:{fontWeight:600,mb:1},children:d==="warmup"?"Warm-Up Time":"Cool-Down Time"}),e.jsx(b,{variant:"body2",color:"text.secondary",sx:{mb:1},children:_.main}),e.jsx(b,{variant:"body2",color:"text.secondary",sx:{fontStyle:"italic"},children:_.specific})]}),i==="ready"&&e.jsxs(x,{sx:{mb:3},children:[e.jsx(b,{variant:"body2",color:"text.secondary",sx:{mb:1,textAlign:"center"},children:"Select Duration"}),e.jsx(pe,{direction:"row",spacing:1,justifyContent:"center",children:[5,7,10].map(p=>e.jsx(Ne,{label:`${p} min`,onClick:()=>{W(p),C(p*60)},color:f===p?"primary":"default",variant:f===p?"filled":"outlined",sx:{minWidth:70,cursor:"pointer"}},p))})]}),e.jsxs(x,{sx:{textAlign:"center",mb:3},children:[e.jsx(b,{variant:"h1",sx:{fontWeight:700,fontSize:{xs:"3rem",sm:"4rem"},color:i==="completed"?"success.main":"text.primary"},children:D(F)}),i==="completed"&&e.jsx(b,{variant:"body1",color:"success.main",sx:{mt:1,fontWeight:600},children:"âœ“ Time Complete!"})]}),(i==="running"||i==="paused"||i==="completed")&&e.jsxs(x,{sx:{mb:3},children:[e.jsx(De,{variant:"determinate",value:Y,sx:{height:10,borderRadius:5,bgcolor:"rgba(0, 0, 0, 0.1)","& .MuiLinearProgress-bar":{bgcolor:d==="warmup"?"warning.main":"info.main",borderRadius:5}}}),e.jsxs(b,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5,textAlign:"center"},children:[Math.round(Y),"% complete"]})]}),e.jsxs(pe,{direction:"row",spacing:1,justifyContent:"center",sx:{mb:2},children:[(i==="ready"||i==="paused")&&e.jsx(G,{variant:"contained",size:"large",startIcon:e.jsx(mt,{}),onClick:se,sx:{minWidth:140},children:i==="paused"?"Resume":"Start Timer"}),i==="running"&&e.jsx(G,{variant:"contained",size:"large",startIcon:e.jsx(ut,{}),onClick:re,sx:{minWidth:140},children:"Pause"}),(i==="running"||i==="paused")&&e.jsx(k,{onClick:V,color:"primary",size:"large",sx:{border:"1px solid",borderColor:"primary.main"},children:e.jsx(ht,{})})]}),e.jsxs(pe,{direction:"row",spacing:2,sx:{mt:3},children:[e.jsxs(G,{variant:"outlined",fullWidth:!0,onClick:oe,startIcon:e.jsx(He,{}),children:["Skip ",d==="warmup"?"Warm-Up":"Cool-Down"]}),(i==="completed"||i==="running"||i==="paused")&&e.jsx(G,{variant:"contained",fullWidth:!0,onClick:U,color:"success",children:"Mark Complete"})]})]})})})};me.propTypes={type:u.oneOf(["warmup","cooldown"]).isRequired,workoutType:u.oneOf(["upper","lower","full"]).isRequired,defaultDuration:u.number,onComplete:u.func.isRequired,onSkip:u.func.isRequired};const Me=({workoutPlan:d,onComplete:B,onExit:P,supersetConfig:L=[2,2,2,2],setsPerSuperset:$=3})=>{const[i,w]=r.useState(0),[f,W]=r.useState([]),[F,C]=r.useState(0),[m,I]=r.useState(null),[S,J]=r.useState(null),[_,se]=r.useState(!1),[re,V]=r.useState(!1),[U,oe]=r.useState({}),[D,Y]=r.useState(null),[p,h]=r.useState(!1),[R,A]=r.useState(""),[ue,ne]=r.useState(""),[Be,Fe]=r.useState(new Set),[ie,Ae]=r.useState({}),K=r.useRef(null),z=r.useRef(null),he=r.useRef(null),[qe,Oe]=r.useState("48px"),[ge,fe]=r.useState(null),[Pe,be]=r.useState(!1),[Q,H]=r.useState("warmup"),[Le,$e]=r.useState(!1),[ae,we]=r.useState(!1),[_e,Ue]=r.useState(!1),[ce,ye]=r.useState(!1),[ve,Ge]=r.useState("full"),E=r.useMemo(()=>{const t=[];let s=0;for(const n of L){const o=[];for(let l=0;l<n&&s<d.length;l++)d[s]&&o.push(d[s]),s++;if(o.length===0)continue;const c=Math.max(...o.map(l=>l.sets||$||3));for(let l=1;l<=c;l++)for(const y of o)t.push({exercise:y,setNumber:l,totalSets:c})}return t},[d,L,$]);r.useEffect(()=>{const t=Ee(d[0]);Ge(t);const s=localStorage.getItem("goodlift_stretch_prefs");(s?JSON.parse(s):{showWarmup:!0}).showWarmup||(we(!0),H("exercise"))},[d]),r.useEffect(()=>(K.current=Date.now(),z.current=setInterval(()=>{const s=Math.floor((Date.now()-K.current)/1e3);C(s)},1e3),(async()=>{const s={},n=[...new Set(d.map(o=>o["Exercise Name"]))];await Promise.all(n.map(async o=>{const[c,l]=await Promise.all([zt(o),Et(o)]);s[o]={weight:c??null,reps:l??null}})),oe(s)})(),()=>{z.current&&clearInterval(z.current)}),[d]),r.useEffect(()=>{const t=E[i];if(t?.exercise?.["Exercise Name"]){const s=t.exercise["Exercise Name"],n=U[s],o=ie[s]??n?.weight??null;I(o),J(n?.reps??null),A(o??""),ne(n?.reps??""),Y(null),h(!1)}window.scrollTo({top:0,behavior:"smooth"})},[i,U,E,ie]);const M=E[i],T=M?.exercise?.["Exercise Name"],j=M?.exercise?.Equipment?.toLowerCase()==="bodyweight";r.useEffect(()=>{const t=()=>{const o=he.current;if(!o||!T)return;const c=o.parentElement;if(!c)return;const l=c.clientWidth,y=c.clientHeight,v=window.innerWidth<600?16:32,N=l-v*2,X=Math.min(y*.8,window.innerHeight*.25);if(N<=0)return;const q=window.innerWidth<600?48:window.innerWidth<1024?60:72,a=window.innerWidth<600?110:window.innerWidth<1024?140:180,We=T,Ce=N*.9,g=document.createElement("div");g.style.visibility="hidden",g.style.position="absolute",g.style.fontFamily=getComputedStyle(o).fontFamily,g.style.fontWeight="600",g.style.lineHeight="1.2",g.style.width=Ce+"px",g.style.wordBreak="break-word",g.style.overflowWrap="break-word",g.style.whiteSpace="normal",g.style.textAlign="center",g.textContent=We,document.body.appendChild(g);let le=q,de=a,Re=q;for(;le<=de;){const ee=Math.floor((le+de)/2);g.style.fontSize=ee+"px";const at=g.scrollWidth,ct=g.scrollHeight;at<=Ce&&ct<=X?(Re=ee,le=ee+1):de=ee-1}document.body.removeChild(g);const it=Math.max(q,Math.min(Re,a));Oe(`${it}px`)};t();const s=()=>t();window.addEventListener("resize",s),window.addEventListener("orientationchange",s);const n=setTimeout(t,100);return()=>{window.removeEventListener("resize",s),window.removeEventListener("orientationchange",s),clearTimeout(n)}},[T]),r.useEffect(()=>{if(T){const t=qt(T);fe(t),be(!1)}},[T]);const Je=()=>{Pe||(be(!0),fe("/goodlift/placeholder-exercise.svg"))},Se=async t=>{const s={};t.forEach(({exerciseName:n,setNumber:o,weight:c,reps:l})=>{s[n]||(s[n]=[]),s[n].push({setNumber:o,weight:c,reps:l})});for(const[n,o]of Object.entries(s)){const c=U[n]||{weight:null,reps:null},l=c.reps??0,y=c.weight,v=o.map(a=>a.reps).filter(a=>typeof a=="number"&&!isNaN(a));if(v.length===0)continue;const N=Math.min(...v),X=v.every(a=>a>=l);if(v.every(a=>a>l)&&N>0&&await Ht(n,N),X){const a=o[o.length-1].weight;typeof a=="number"&&!isNaN(a)&&a>=0&&a!==y&&await Mt(n,a)}}},Ve=()=>{$e(!0),H("exercise")},Ye=()=>{we(!0),H("exercise")},Xe=()=>{Ue(!0),H("complete")},Ze=()=>{ye(!0),H("complete")},Ke=()=>{const t=Math.floor((Date.now()-K.current)/1e3);z.current&&clearInterval(z.current);const s={date:new Date().toISOString(),type:d[0]?.["Primary Muscle"]||"unknown",duration:t,exercises:{},warmupCompleted:Le,warmupSkipped:ae,cooldownCompleted:_e,cooldownSkipped:ce,totalDuration:t};f.forEach(n=>{const{exerciseName:o,setNumber:c,weight:l,reps:y}=n;s.exercises[o]||(s.exercises[o]={sets:[]}),s.exercises[o].sets.push({set:c,weight:l,reps:y})}),B(s)},Qe=async t=>{t.preventDefault();const s=t.target.closest("form")||document.querySelector("form"),n=s?.querySelector("#weight-select"),o=s?.querySelector("#reps-select");if(!n||!o){console.error("Form inputs not found");return}const c=Math.max(0,parseFloat(n.value)||0),l=parseInt(o.value,10),y=l>0?l:0,v=M.exercise["Exercise Name"],N=ie[v]??U[v]?.weight;c!==N&&N!==null&&N!==void 0&&(Fe(a=>new Set(a).add(v)),Ae(a=>({...a,[v]:c})));const X={exerciseName:v,setNumber:M.setNumber,weight:c,reps:y},q=[...f,X];if(W(q),S&&y>0&&!Be.has(v)){const a=Dt(c,y,S);a&&(Y(a),h(!0),setTimeout(()=>h(!1),5e3))}if(i+1>=E.length){await Se(q);const a=localStorage.getItem("goodlift_stretch_prefs");(a?JSON.parse(a):{showCooldown:!0}).showCooldown?H("cooldown"):(ye(!0),H("complete"))}else w(a=>a+1)},et=()=>{i>0&&(w(t=>t-1),W(t=>t.slice(0,-1)))},tt=async()=>{if(window.confirm("Save this workout as partially complete? Your current progress will be saved.")){await Se(f);const t=Math.floor((Date.now()-K.current)/1e3);z.current&&clearInterval(z.current);const s={date:new Date().toISOString(),type:d[0]?.["Primary Muscle"]||"unknown",duration:t,exercises:{},isPartial:!0};f.forEach(n=>{const{exerciseName:o,setNumber:c,weight:l,reps:y}=n;s.exercises[o]||(s.exercises[o]={sets:[]}),s.exercises[o].sets.push({set:c,weight:l,reps:y})}),B(s)}},st=()=>{window.confirm("Are you sure you want to exit? Your progress will not be saved.")&&(z.current&&clearInterval(z.current),P())},rt=()=>{try{const t=Ee(d[0]);Nt({name:`${t.charAt(0).toUpperCase()+t.slice(1)} Body Workout`,type:t,equipment:"all",exercises:d}),se(!0),V(!0)}catch(t){console.error("Error saving to favorites:",t),alert("Failed to save workout to favorites")}},je=t=>{const s=parseFloat(R)||0,n=Math.max(0,s+t);A(n.toFixed(1))},ke=t=>{const s=parseInt(ue,10)||0,n=Math.max(0,s+t);ne(n.toString())},ot=()=>{D?.suggestedWeight&&(A(D.suggestedWeight.toString()),h(!1))},nt=()=>{if(window.confirm("Skip all remaining sets of this exercise?")){let t=i+1;const s=M.exercise["Exercise Name"];for(;t<E.length&&E[t].exercise["Exercise Name"]===s;)t++;t>=E.length?H("cooldown"):w(t)}};if(!M&&Q==="exercise")return null;if(Q==="warmup"){const t=localStorage.getItem("goodlift_stretch_prefs"),s=t?JSON.parse(t):{defaultWarmupDuration:5};return e.jsxs("div",{className:"screen",style:{paddingBottom:"100px",padding:"0.5rem",maxWidth:"100vw",boxSizing:"border-box"},children:[e.jsx(x,{sx:{mb:1.5,px:{xs:.5,sm:0}},children:e.jsx(b,{variant:"h6",sx:{fontWeight:600,textAlign:"center",mb:1},children:"Warm-Up Phase"})}),e.jsx(me,{type:"warmup",workoutType:ve,defaultDuration:s.defaultWarmupDuration||5,onComplete:Ve,onSkip:Ye})]})}if(Q==="cooldown"){const t=localStorage.getItem("goodlift_stretch_prefs"),s=t?JSON.parse(t):{defaultCooldownDuration:5};return e.jsxs("div",{className:"screen",style:{paddingBottom:"100px",padding:"0.5rem",maxWidth:"100vw",boxSizing:"border-box"},children:[e.jsx(x,{sx:{mb:1.5,px:{xs:.5,sm:0}},children:e.jsx(b,{variant:"h6",sx:{fontWeight:600,textAlign:"center",mb:1},children:"Cool-Down Phase"})}),e.jsx(me,{type:"cooldown",workoutType:ve,defaultDuration:s.defaultCooldownDuration||5,onComplete:Xe,onSkip:Ze})]})}return Q==="complete"?e.jsx("div",{className:"screen",style:{paddingBottom:"100px",padding:"2rem",maxWidth:"100vw",boxSizing:"border-box",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"60vh"},children:e.jsxs(O.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},style:{textAlign:"center"},children:[e.jsx(gt,{sx:{fontSize:80,color:"primary.main",mb:2}}),e.jsx(b,{variant:"h4",sx:{fontWeight:600,mb:2},children:"Workout Complete! ðŸŽ‰"}),e.jsxs(b,{variant:"body1",color:"text.secondary",sx:{mb:3},children:["Great job! You've completed your workout",!ae&&!ce?" including warmup and cooldown phases":ae?ce?"":" including cooldown phase":" including warmup phase","."]}),e.jsx(G,{variant:"contained",size:"large",onClick:Ke,sx:{mt:2},children:"Finish Workout"})]})}):e.jsxs("div",{className:"screen",style:{padding:"0.5rem",maxWidth:"100vw",boxSizing:"border-box"},children:[e.jsxs(x,{sx:{mb:1.5,px:{xs:.5,sm:0}},children:[e.jsxs(x,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5,gap:1},children:[e.jsx(b,{variant:"body1",sx:{fontWeight:600,fontSize:{xs:"0.9rem",sm:"1.25rem"}},children:At(F)}),e.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:{xs:.5,sm:1}},children:[e.jsxs(b,{variant:"body1",sx:{fontWeight:600,fontSize:{xs:"0.9rem",sm:"1.25rem"}},children:[i+1,"/",E.length]}),e.jsx(k,{onClick:rt,disabled:_,size:"small",sx:{color:_?"warning.main":"action.active","&:hover":{color:"warning.main"},p:{xs:.5,sm:1}},"aria-label":"Save to favorites",children:_?e.jsx(ft,{sx:{fontSize:{xs:20,sm:24}}}):e.jsx(bt,{sx:{fontSize:{xs:20,sm:24}}})})]})]}),e.jsx(De,{variant:"determinate",value:i/E.length*100,sx:{height:{xs:6,sm:8},borderRadius:4,bgcolor:"rgba(138, 190, 185, 0.2)","& .MuiLinearProgress-bar":{bgcolor:"primary.main",borderRadius:4}}})]}),e.jsx("div",{className:"exercise-card-container",children:e.jsx(xe,{mode:"wait",children:e.jsx(O.form,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},onSubmit:Qe,children:e.jsxs(O.div,{className:"exercise-card",initial:{scale:.95},animate:{scale:1},transition:{duration:.3},style:{display:"flex",flexDirection:"column"},children:[e.jsxs(x,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:1,mb:2},children:[e.jsxs(x,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(k,{component:"a",href:`https://www.google.com/search?q=${encodeURIComponent(T+" form")}`,target:"_blank",rel:"noopener noreferrer",sx:{minWidth:{xs:"36px",sm:"44px"},minHeight:{xs:"36px",sm:"44px"},color:"primary.main",border:"2px solid",borderColor:"primary.main",borderRadius:"8px","&:hover":{backgroundColor:"rgba(19, 70, 134, 0.08)"}},"aria-label":`Search for ${T} form guide`,children:e.jsx(wt,{sx:{fontSize:{xs:20,sm:24}}})}),e.jsx(k,{onClick:nt,sx:{minWidth:{xs:"36px",sm:"44px"},minHeight:{xs:"36px",sm:"44px"},color:"primary.main",border:"2px solid",borderColor:"primary.main",borderRadius:"8px","&:hover":{backgroundColor:"rgba(19, 70, 134, 0.08)"}},"aria-label":"Skip exercise",children:e.jsx(He,{sx:{fontSize:{xs:20,sm:24}}})}),e.jsx(Ne,{label:`Set ${M.setNumber} of ${M.totalSets}`,color:"primary",size:"medium",sx:{fontWeight:600,fontSize:{xs:"0.75rem",sm:"0.875rem"}}})]}),e.jsxs(x,{sx:{display:"flex",gap:1},children:[f.length>0&&e.jsx(k,{onClick:tt,sx:{minWidth:{xs:"36px",sm:"44px"},minHeight:{xs:"36px",sm:"44px"},color:"rgb(254, 178, 26)",border:"2px solid rgb(254, 178, 26)",borderRadius:"8px","&:hover":{backgroundColor:"rgba(254, 178, 26, 0.08)"}},"aria-label":"End and save workout",children:e.jsx(yt,{sx:{fontSize:{xs:20,sm:24}}})}),e.jsx(k,{onClick:st,sx:{minWidth:{xs:"36px",sm:"44px"},minHeight:{xs:"36px",sm:"44px"},color:"rgb(237, 63, 39)",border:"2px solid rgb(237, 63, 39)",borderRadius:"8px","&:hover":{backgroundColor:"rgba(237, 63, 39, 0.08)"}},"aria-label":"End workout without saving",children:e.jsx(vt,{sx:{fontSize:{xs:20,sm:24}}})})]})]}),e.jsx(x,{sx:{mb:1.5,mt:2,px:{xs:2,sm:4},display:"flex",alignItems:"center",justifyContent:"center",minHeight:{xs:"80px",sm:"100px"},maxHeight:{xs:"25vh",sm:"25vh"},overflow:"hidden"},children:e.jsx(b,{ref:he,variant:"h3",component:"h2",sx:{fontWeight:600,fontSize:qe+" !important",color:"primary.main",textAlign:"center",lineHeight:"1.2 !important",width:"100%",wordBreak:"break-word",overflowWrap:"break-word",whiteSpace:"normal",display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:T})}),ge&&e.jsx(x,{sx:{mb:1.5,mt:0,display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(x,{component:"img",src:ge,alt:`${T} demonstration`,onError:Je,sx:{maxWidth:"100%",maxHeight:{xs:"200px",sm:"280px"},width:"auto",height:"auto",borderRadius:2,objectFit:"contain",backgroundColor:"rgba(255, 255, 255, 0.15)",padding:2,border:"1px solid rgba(255, 255, 255, 0.1)"},loading:"lazy"})}),(m!==null||S!==null)&&e.jsxs(O.p,{className:"prev-weight",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},style:{marginBottom:"1rem",marginTop:"0.5rem",textAlign:"center"},children:["Target: ",m??"â€“"," lbs â€¢ ",S??"â€“"," reps"]}),e.jsx(xe,{children:p&&D&&e.jsx(O.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:e.jsx(Te,{severity:D.type==="excellent"?"success":"info",icon:e.jsx(St,{}),action:D.suggestedWeight!==parseFloat(R)&&e.jsx(G,{color:"inherit",size:"small",onClick:ot,sx:{minHeight:"44px"},children:"Apply"}),sx:{mb:2,minHeight:"44px"},children:D.message})})}),e.jsxs("div",{className:"input-row",children:[e.jsxs("div",{className:"input-group",children:[e.jsxs("label",{htmlFor:"weight-select",children:["Weight (lbs)",j&&" (N/A)"]}),e.jsxs(x,{sx:{display:"flex",gap:{xs:.5,sm:1},alignItems:"center"},children:[e.jsx(k,{onClick:()=>je(-2.5),disabled:j,size:"small",sx:{bgcolor:j?"action.disabledBackground":"action.hover",minWidth:{xs:"36px",sm:"40px"},minHeight:{xs:"36px",sm:"40px"},p:{xs:.5,sm:1},"&:hover":{bgcolor:j?"action.disabledBackground":"action.selected"}},children:e.jsx(Ie,{sx:{fontSize:{xs:18,sm:20}}})}),e.jsx("input",{id:"weight-select",type:"tel",inputMode:"decimal",pattern:"[0-9]*([.,][0-9]+)?",step:"2.5",min:"0",max:"500",className:"exercise-input",value:R,onChange:t=>A(t.target.value),placeholder:"â€“",disabled:j,"aria-label":"Weight in pounds",onFocus:t=>{t.target.select();const n=t.target.getBoundingClientRect().bottom,c=window.innerHeight*.55;n>c&&setTimeout(()=>{t.target.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{window.scrollBy({top:-80,behavior:"smooth"})},100)},300)},style:{width:"100%",minWidth:"80px",padding:"12px",minHeight:"44px",borderRadius:"8px",border:"2px solid var(--color-border)",fontSize:"1.1rem",fontFamily:"var(--font-body)",backgroundColor:j?"var(--color-disabled)":"var(--color-surface)",color:j?"var(--color-text-disabled)":"var(--color-text)",cursor:j?"not-allowed":"text",opacity:j?.6:1}}),e.jsx(k,{onClick:()=>je(2.5),disabled:j,size:"small",sx:{bgcolor:j?"action.disabledBackground":"action.hover",minWidth:{xs:"36px",sm:"40px"},minHeight:{xs:"36px",sm:"40px"},p:{xs:.5,sm:1},"&:hover":{bgcolor:j?"action.disabledBackground":"action.selected"}},children:e.jsx(ze,{sx:{fontSize:{xs:18,sm:20}}})})]})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"reps-select",children:"Reps"}),e.jsxs(x,{sx:{display:"flex",gap:{xs:.5,sm:1},alignItems:"center"},children:[e.jsx(k,{onClick:()=>ke(-1),size:"small",sx:{bgcolor:"action.hover",minWidth:{xs:"36px",sm:"40px"},minHeight:{xs:"36px",sm:"40px"},p:{xs:.5,sm:1},"&:hover":{bgcolor:"action.selected"}},children:e.jsx(Ie,{sx:{fontSize:{xs:18,sm:20}}})}),e.jsx("input",{id:"reps-select",type:"number",inputMode:"numeric",step:"1",min:"1",max:"20",className:"exercise-input",value:ue,onChange:t=>ne(t.target.value),placeholder:"â€“","aria-label":"Repetitions",onFocus:t=>{t.target.select();const n=t.target.getBoundingClientRect().bottom,c=window.innerHeight*.55;n>c&&setTimeout(()=>{t.target.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{window.scrollBy({top:-80,behavior:"smooth"})},100)},300)},style:{width:"100%",minWidth:"80px",padding:"12px",minHeight:"44px",borderRadius:"8px",border:"2px solid var(--color-border)",fontSize:"1.1rem",fontFamily:"var(--font-body)",backgroundColor:"var(--color-surface)",color:"var(--color-text)"}}),e.jsx(k,{onClick:()=>ke(1),size:"small",sx:{bgcolor:"action.hover",minWidth:{xs:"36px",sm:"40px"},minHeight:{xs:"36px",sm:"40px"},p:{xs:.5,sm:1},"&:hover":{bgcolor:"action.selected"}},children:e.jsx(ze,{sx:{fontSize:{xs:18,sm:20}}})})]})]})]}),e.jsxs("div",{className:"workout-nav-buttons",children:[i>0&&e.jsxs("button",{type:"button",className:"back-btn",onClick:et,style:{minHeight:"44px"},children:[e.jsx(jt,{sx:{fontSize:18,mr:.5}})," Back"]}),e.jsxs("button",{type:"submit",className:"next-btn",style:{minHeight:"44px"},children:["Next ",e.jsx(kt,{sx:{fontSize:18,ml:.5}})]})]})]})},i)})}),e.jsx(Wt,{open:re,autoHideDuration:3e3,onClose:()=>V(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(Te,{severity:"success",onClose:()=>V(!1),children:"Workout saved to favorites!"})})]})};Me.propTypes={workoutPlan:u.array.isRequired,onComplete:u.func.isRequired,onExit:u.func.isRequired,supersetConfig:u.arrayOf(u.number),setsPerSuperset:u.number};const Ot=({open:d,workoutPlan:B,onComplete:P,onExit:L,supersetConfig:$,setsPerSuperset:i})=>{const[w,f]=r.useState(!1),[W,F]=r.useState(Z.isActive()),[C]=r.useState(Z.isWakeLockSupported());r.useEffect(()=>{const S=Z.reacquireOnVisibilityChange();return()=>{S&&S.then(J=>J&&J())}},[]);const m=()=>{f(!1)},I=async()=>{if(W)await Z.releaseWakeLock(),F(!1);else{const S=await Z.requestWakeLock();F(S)}};return e.jsxs(e.Fragment,{children:[e.jsx(xe,{children:w&&e.jsx(O.div,{initial:{opacity:0,scale:.8,y:50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:50},style:{position:"fixed",bottom:"80px",right:"20px",zIndex:1400},children:e.jsx(k,{onClick:m,sx:{bgcolor:"primary.main",color:"white",width:56,height:56,boxShadow:3,"&:hover":{bgcolor:"primary.dark",transform:"scale(1.1)"},transition:"all 0.2s ease"},"aria-label":"Restore workout",children:e.jsx(Ct,{})})})}),e.jsxs(Rt,{open:d&&!w,fullScreen:!0,PaperProps:{sx:{bgcolor:"background.default",backgroundImage:"none"}},children:[e.jsx(x,{sx:{position:"relative",top:0,zIndex:1100,bgcolor:"background.paper",borderBottom:"1px solid",borderColor:"divider",display:"flex",justifyContent:"center",alignItems:"center",py:1.5,px:1,gap:1,minHeight:"56px"},children:C&&e.jsx(x,{sx:{position:"absolute",right:"8px"},children:e.jsx(Tt,{title:W?"Screen kept awake":"Allow screen sleep",children:e.jsx(k,{onClick:I,size:"small",sx:{color:W?"secondary.main":"text.secondary","&:hover":{bgcolor:W?"rgba(255, 140, 0, 0.08)":"action.hover"}},"aria-label":W?"Release wake lock":"Keep screen awake",children:W?e.jsx(Bt,{size:20}):e.jsx(Ft,{size:20})})})})}),e.jsx(It,{sx:{p:0,overflow:"auto",WebkitOverflowScrolling:"touch",maxHeight:"100vh"},children:e.jsx(Me,{workoutPlan:B,onComplete:P,onExit:L,supersetConfig:$,setsPerSuperset:i})})]})]})};Ot.propTypes={open:u.bool.isRequired,workoutPlan:u.array.isRequired,onComplete:u.func.isRequired,onExit:u.func.isRequired,supersetConfig:u.arrayOf(u.number),setsPerSuperset:u.number};export{Ot as default};
