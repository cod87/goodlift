var pR=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);import{u as Ia,j as r,B as A,T as _x,a as ar,P as T,k as zx,b as M,c as cr,D as Et,d as zt,e as Dt,f as Nt,g as Ce,h as mR,i as qr,S as gR,l as Wg,m as Le,I as Ie,A as $n,C as Ge,n as at,o as xw,E as Nx,p as sd,q as Nl,M as xR,r as Be,s as Da,t as yR,v as _u,U as bR,w as jo,L as wn,x as it,y as Ur,z as St,F as Nn,G as vR,H as SR,J as Xt,K as En,O as wR,N as hi,R as Hs,Q as Wa,V as ws,W as Je,X as Bi,Y as cn,Z as Ne,_ as ln,$ as jR,a0 as CR,a1 as TR,a2 as Yr,a3 as jC,a4 as Vi,a5 as CC,a6 as Lx,a7 as TC,a8 as kR,a9 as Co,aa as sh,ab as ii,ac as Ll,ad as To,ae as ss,af as Ni,ag as ER,ah as kC,ai as ie,aj as bt,ak as On,al as as,am as os,an as Yi,ao as Xe,ap as xs,aq as Fn,ar as Do,as as qe,at as pu,au as Ys,av as Eh,aw as DR,ax as MR,ay as $t,az as Us,aA as AR,aB as Fl,aC as Hi,aD as Fx,aE as Ol,aF as _a,aG as EC,aH as RR,aI as PR,aJ as OR,aK as ui,aL as ja,aM as DC,aN as IR,aO as ci,aP as WR,aQ as MC,aR as yw,aS as zu,aT as Bl,aU as kt,aV as Or,aW as Ma,aX as mu,aY as pi,aZ as Vl,a_ as gu,a$ as Kt,b0 as ur,b1 as Ui,b2 as _R,b3 as zR,b4 as gi,b5 as Dh,b6 as NR,b7 as LR,b8 as FR,b9 as BR,ba as rd,bb as VR,bc as Nu,bd as Hl,be as bw,bf as rh,bg as ih,bh as HR,bi as vw,bj as UR,bk as AC,bl as Ul,bm as RC,bn as $R,bo as _g,bp as PC,bq as OC,br as qR,bs as YR,bt as GR,bu as Sw,bv as zg,bw as ww,bx as QR,by as IC,bz as KR,bA as XR,bB as WC,bC as ZR,bD as JR,bE as eP,bF as tP,bG as jw,bH as Cr,bI as nP,bJ as sP,bK as rP,bL as iP,bM as aP,bN as _C,bO as kn,bP as oP,bQ as Ng,bR as lP,bS as cP,bT as uP,bU as dP,bV as fP,bW as hP,bX as Gc,bY as pP,bZ as mP,b_ as gP,b$ as xP,c0 as yP,c1 as zC,c2 as Lg,c3 as bP,c4 as vP,c5 as Cw,c6 as Tw,c7 as kw}from"./mui-CWZyZ9Mi.js";import{d as SP,e as wP,g as NC,r as y,a as Ta}from"./vendor-B0qVADJY.js";import{i as jP,g as CP,a as TP,b as kP,d as LC,s as EP,c as DP,o as MP,e as AP,f as RP,h as PP}from"./firebase-BNDukJBA.js";import{m as Lu,i as xu,a as OP,e as IP,c as FC,r as ts,v as WP,t as _P,d as zP,b as NP,A as LP,P as BC,B as FP,C as BP,f as VP,L as HP,g as UP,p as $P,h as qP,j as YP,k as GP,l as QP}from"./charts-DcU5gkX5.js";var F9=pR((or,lr)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var ng={exports:{}},Qc={},sg={exports:{}},rg={};var Ew;function KP(){return Ew||(Ew=1,(function(e){function t(N,V){var F=N.length;N.push(V);e:for(;0<F;){var X=F-1>>>1,oe=N[X];if(0<o(oe,V))N[X]=V,N[F]=oe,F=X;else break e}}function n(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var V=N[0],F=N.pop();if(F!==V){N[0]=F;e:for(var X=0,oe=N.length,ue=oe>>>1;X<ue;){var Te=2*(X+1)-1,De=N[Te],ee=Te+1,G=N[ee];if(0>o(De,F))ee<oe&&0>o(G,De)?(N[X]=G,N[ee]=F,X=ee):(N[X]=De,N[Te]=F,X=Te);else if(ee<oe&&0>o(G,F))N[X]=G,N[ee]=F,X=ee;else break e}}return V}function o(N,V){var F=N.sortIndex-V.sortIndex;return F!==0?F:N.id-V.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();e.unstable_now=function(){return d.now()-f}}var h=[],g=[],m=1,b=null,v=3,j=!1,E=!1,S=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function O(N){for(var V=n(g);V!==null;){if(V.callback===null)i(g);else if(V.startTime<=N)i(g),V.sortIndex=V.expirationTime,t(h,V);else break;V=n(g)}}function I(N){if(S=!1,O(N),!E)if(n(h)!==null)E=!0,P||(P=!0,U());else{var V=n(g);V!==null&&$(I,V.startTime-N)}}var P=!1,W=-1,L=5,z=-1;function q(){return w?!0:!(e.unstable_now()-z<L)}function B(){if(w=!1,P){var N=e.unstable_now();z=N;var V=!0;try{e:{E=!1,S&&(S=!1,k(W),W=-1),j=!0;var F=v;try{t:{for(O(N),b=n(h);b!==null&&!(b.expirationTime>N&&q());){var X=b.callback;if(typeof X=="function"){b.callback=null,v=b.priorityLevel;var oe=X(b.expirationTime<=N);if(N=e.unstable_now(),typeof oe=="function"){b.callback=oe,O(N),V=!0;break t}b===n(h)&&i(h),O(N)}else i(h);b=n(h)}if(b!==null)V=!0;else{var ue=n(g);ue!==null&&$(I,ue.startTime-N),V=!1}}break e}finally{b=null,v=F,j=!1}V=void 0}}finally{V?U():P=!1}}}var U;if(typeof R=="function")U=function(){R(B)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,H=re.port2;re.port1.onmessage=B,U=function(){H.postMessage(null)}}else U=function(){C(B,0)};function $(N,V){W=C(function(){N(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(N){switch(v){case 1:case 2:case 3:var V=3;break;default:V=v}var F=v;v=V;try{return N()}finally{v=F}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(N,V){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var F=v;v=N;try{return V()}finally{v=F}},e.unstable_scheduleCallback=function(N,V,F){var X=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?X+F:X):F=X,N){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=F+oe,N={id:m++,callback:V,priorityLevel:N,startTime:F,expirationTime:oe,sortIndex:-1},F>X?(N.sortIndex=F,t(g,N),n(h)===null&&N===n(g)&&(S?(k(W),W=-1):S=!0,$(I,F-X))):(N.sortIndex=oe,t(h,N),E||j||(E=!0,P||(P=!0,U()))),N},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(N){var V=v;return function(){var F=v;v=V;try{return N.apply(this,arguments)}finally{v=F}}}})(rg)),rg}var Dw;function XP(){return Dw||(Dw=1,sg.exports=KP()),sg.exports}var Mw;function ZP(){if(Mw)return Qc;Mw=1;var e=XP(),t=SP(),n=wP();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function c(s){var a=s,l=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(l=a.return),s=a.return;while(s)}return a.tag===3?l:null}function d(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function f(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function h(s){if(c(s)!==s)throw Error(i(188))}function g(s){var a=s.alternate;if(!a){if(a=c(s),a===null)throw Error(i(188));return a!==s?null:s}for(var l=s,u=a;;){var p=l.return;if(p===null)break;var x=p.alternate;if(x===null){if(u=p.return,u!==null){l=u;continue}break}if(p.child===x.child){for(x=p.child;x;){if(x===l)return h(p),s;if(x===u)return h(p),a;x=x.sibling}throw Error(i(188))}if(l.return!==u.return)l=p,u=x;else{for(var D=!1,_=p.child;_;){if(_===l){D=!0,l=p,u=x;break}if(_===u){D=!0,u=p,l=x;break}_=_.sibling}if(!D){for(_=x.child;_;){if(_===l){D=!0,l=x,u=p;break}if(_===u){D=!0,u=x,l=p;break}_=_.sibling}if(!D)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:a}function m(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=m(s),a!==null)return a;s=s.sibling}return null}var b=Object.assign,v=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),R=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function U(s){return s===null||typeof s!="object"?null:(s=B&&s[B]||s["@@iterator"],typeof s=="function"?s:null)}var re=Symbol.for("react.client.reference");function H(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===re?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case C:return"Profiler";case w:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList";case z:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case E:return"Portal";case R:return s.displayName||"Context";case k:return(s._context.displayName||"Context")+".Consumer";case O:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case W:return a=s.displayName||null,a!==null?a:H(s.type)||"Memo";case L:a=s._payload,s=s._init;try{return H(s(a))}catch{}}return null}var $=Array.isArray,N=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},X=[],oe=-1;function ue(s){return{current:s}}function Te(s){0>oe||(s.current=X[oe],X[oe]=null,oe--)}function De(s,a){oe++,X[oe]=s.current,s.current=a}var ee=ue(null),G=ue(null),ae=ue(null),ve=ue(null);function te(s,a){switch(De(ae,a),De(G,s),De(ee,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?FS(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=FS(a),s=BS(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Te(ee),De(ee,s)}function ye(){Te(ee),Te(G),Te(ae)}function Se(s){s.memoizedState!==null&&De(ve,s);var a=ee.current,l=BS(a,s.type);a!==l&&(De(G,s),De(ee,l))}function Y(s){G.current===s&&(Te(ee),Te(G)),ve.current===s&&(Te(ve),Uc._currentValue=F)}var ce,Ae;function ne(s){if(ce===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);ce=a&&a[1]||"",Ae=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ce+s+Ae}var de=!1;function K(s,a){if(!s||de)return"";de=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var Oe=function(){throw Error()};if(Object.defineProperty(Oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Oe,[])}catch(je){var xe=je}Reflect.construct(s,[],Oe)}else{try{Oe.call()}catch(je){xe=je}s.call(Oe.prototype)}}else{try{throw Error()}catch(je){xe=je}(Oe=s())&&typeof Oe.catch=="function"&&Oe.catch(function(){})}}catch(je){if(je&&xe&&typeof je.stack=="string")return[je.stack,xe.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=u.DetermineComponentFrameRoot(),D=x[0],_=x[1];if(D&&_){var Q=D.split(`
`),pe=_.split(`
`);for(p=u=0;u<Q.length&&!Q[u].includes("DetermineComponentFrameRoot");)u++;for(;p<pe.length&&!pe[p].includes("DetermineComponentFrameRoot");)p++;if(u===Q.length||p===pe.length)for(u=Q.length-1,p=pe.length-1;1<=u&&0<=p&&Q[u]!==pe[p];)p--;for(;1<=u&&0<=p;u--,p--)if(Q[u]!==pe[p]){if(u!==1||p!==1)do if(u--,p--,0>p||Q[u]!==pe[p]){var Ee=`
`+Q[u].replace(" at new "," at ");return s.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",s.displayName)),Ee}while(1<=u&&0<=p);break}}}finally{de=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?ne(l):""}function Z(s,a){switch(s.tag){case 26:case 27:case 5:return ne(s.type);case 16:return ne("Lazy");case 13:return s.child!==a&&a!==null?ne("Suspense Fallback"):ne("Suspense");case 19:return ne("SuspenseList");case 0:case 15:return K(s.type,!1);case 11:return K(s.type.render,!1);case 1:return K(s.type,!0);case 31:return ne("Activity");default:return""}}function be(s){try{var a="",l=null;do a+=Z(s,l),l=s,s=s.return;while(s);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var ke=Object.prototype.hasOwnProperty,me=e.unstable_scheduleCallback,we=e.unstable_cancelCallback,J=e.unstable_shouldYield,ge=e.unstable_requestPaint,We=e.unstable_now,_e=e.unstable_getCurrentPriorityLevel,Re=e.unstable_ImmediatePriority,Fe=e.unstable_UserBlockingPriority,Qe=e.unstable_NormalPriority,He=e.unstable_LowPriority,Ze=e.unstable_IdlePriority,et=e.log,xt=e.unstable_setDisableYieldValue,yt=null,ct=null;function ot(s){if(typeof et=="function"&&xt(s),ct&&typeof ct.setStrictMode=="function")try{ct.setStrictMode(yt,s)}catch{}}var vt=Math.clz32?Math.clz32:jn,ft=Math.log,Jt=Math.LN2;function jn(s){return s>>>=0,s===0?32:31-(ft(s)/Jt|0)|0}var fn=256,sn=262144,Gn=4194304;function Cs(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function dr(s,a,l){var u=s.pendingLanes;if(u===0)return 0;var p=0,x=s.suspendedLanes,D=s.pingedLanes;s=s.warmLanes;var _=u&134217727;return _!==0?(u=_&~x,u!==0?p=Cs(u):(D&=_,D!==0?p=Cs(D):l||(l=_&~s,l!==0&&(p=Cs(l))))):(_=u&~x,_!==0?p=Cs(_):D!==0?p=Cs(D):l||(l=u&~s,l!==0&&(p=Cs(l)))),p===0?0:a!==0&&a!==p&&(a&x)===0&&(x=p&-p,l=a&-a,x>=l||x===32&&(l&4194048)!==0)?a:p}function Ir(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function yi(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hn(){var s=Gn;return Gn<<=1,(Gn&62914560)===0&&(Gn=4194304),s}function bs(s){for(var a=[],l=0;31>l;l++)a.push(s);return a}function Gs(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function qt(s,a,l,u,p,x){var D=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var _=s.entanglements,Q=s.expirationTimes,pe=s.hiddenUpdates;for(l=D&~l;0<l;){var Ee=31-vt(l),Oe=1<<Ee;_[Ee]=0,Q[Ee]=-1;var xe=pe[Ee];if(xe!==null)for(pe[Ee]=null,Ee=0;Ee<xe.length;Ee++){var je=xe[Ee];je!==null&&(je.lane&=-536870913)}l&=~Oe}u!==0&&Qs(s,u,0),x!==0&&p===0&&s.tag!==0&&(s.suspendedLanes|=x&~(D&~a))}function Qs(s,a,l){s.pendingLanes|=a,s.suspendedLanes&=~a;var u=31-vt(a);s.entangledLanes|=a,s.entanglements[u]=s.entanglements[u]|1073741824|l&261930}function An(s,a){var l=s.entangledLanes|=a;for(s=s.entanglements;l;){var u=31-vt(l),p=1<<u;p&a|s[u]&a&&(s[u]|=a),l&=~p}}function No(s,a){var l=a&-a;return l=(l&42)!==0?1:Qn(l),(l&(s.suspendedLanes|a))!==0?0:l}function Qn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function At(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ut(){var s=V.p;return s!==0?s:(s=window.event,s===void 0?32:uw(s.type))}function Wr(s,a){var l=V.p;try{return V.p=s,a()}finally{V.p=l}}var Ks=Math.random().toString(36).slice(2),In="__reactFiber$"+Ks,Kn="__reactProps$"+Ks,fr="__reactContainer$"+Ks,Fa="__reactEvents$"+Ks,sc="__reactListeners$"+Ks,rc="__reactHandles$"+Ks,Lo="__reactResources$"+Ks,Xr="__reactMarker$"+Ks;function Ba(s){delete s[In],delete s[Kn],delete s[Fa],delete s[sc],delete s[rc]}function hr(s){var a=s[In];if(a)return a;for(var l=s.parentNode;l;){if(a=l[fr]||l[In]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(s=GS(s);s!==null;){if(l=s[In])return l;s=GS(s)}return a}s=l,l=s.parentNode}return null}function _r(s){if(s=s[In]||s[fr]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function bi(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function Zr(s){var a=s[Lo];return a||(a=s[Lo]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function pn(s){s[Xr]=!0}var fe=new Set,ze={};function tt(s,a){mn(s,a),mn(s+"Capture",a)}function mn(s,a){for(ze[s]=a,s=0;s<a.length;s++)fe.add(a[s])}var cs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jr={},ei={};function us(s){return ke.call(ei,s)?!0:ke.call(Jr,s)?!1:cs.test(s)?ei[s]=!0:(Jr[s]=!0,!1)}function Ps(s,a,l){if(us(a))if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+l)}}function pr(s,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+l)}}function Ts(s,a,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(a,l,""+u)}}function Pe(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ve(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function nt(s,a,l){var u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,x=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return p.call(this)},set:function(D){l=""+D,x.call(this,D)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(D){l=""+D},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function st(s){if(!s._valueTracker){var a=Ve(s)?"checked":"value";s._valueTracker=nt(s,a,""+s[a])}}function Ct(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var l=a.getValue(),u="";return s&&(u=Ve(s)?s.checked?"true":"false":s.value),s=u,s!==l?(a.setValue(s),!0):!1}function ht(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var rn=/[\n"\\]/g;function Lt(s){return s.replace(rn,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function ds(s,a,l,u,p,x,D,_){s.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?s.type=D:s.removeAttribute("type"),a!=null?D==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+Pe(a)):s.value!==""+Pe(a)&&(s.value=""+Pe(a)):D!=="submit"&&D!=="reset"||s.removeAttribute("value"),a!=null?gn(s,D,Pe(a)):l!=null?gn(s,D,Pe(l)):u!=null&&s.removeAttribute("value"),p==null&&x!=null&&(s.defaultChecked=!!x),p!=null&&(s.checked=p&&typeof p!="function"&&typeof p!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?s.name=""+Pe(_):s.removeAttribute("name")}function mr(s,a,l,u,p,x,D,_){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.type=x),a!=null||l!=null){if(!(x!=="submit"&&x!=="reset"||a!=null)){st(s);return}l=l!=null?""+Pe(l):"",a=a!=null?""+Pe(a):l,_||a===s.value||(s.value=a),s.defaultValue=a}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=_?s.checked:!!u,s.defaultChecked=!!u,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(s.name=D),st(s)}function gn(s,a,l){a==="number"&&ht(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function wt(s,a,l,u){if(s=s.options,a){a={};for(var p=0;p<l.length;p++)a["$"+l[p]]=!0;for(l=0;l<s.length;l++)p=a.hasOwnProperty("$"+s[l].value),s[l].selected!==p&&(s[l].selected=p),p&&u&&(s[l].defaultSelected=!0)}else{for(l=""+Pe(l),a=null,p=0;p<s.length;p++){if(s[p].value===l){s[p].selected=!0,u&&(s[p].defaultSelected=!0);return}a!==null||s[p].disabled||(a=s[p])}a!==null&&(a.selected=!0)}}function Qi(s,a,l){if(a!=null&&(a=""+Pe(a),a!==s.value&&(s.value=a),l==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=l!=null?""+Pe(l):""}function Va(s,a,l,u){if(a==null){if(u!=null){if(l!=null)throw Error(i(92));if($(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),a=l}l=Pe(a),s.defaultValue=l,u=s.textContent,u===l&&u!==""&&u!==null&&(s.value=u),st(s)}function Cn(s,a){if(a){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=a;return}}s.textContent=a}var Ha=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fo(s,a,l){var u=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":u?s.setProperty(a,l):typeof l!="number"||l===0||Ha.has(a)?a==="float"?s.cssFloat=l:s[a]=(""+l).trim():s[a]=l+"px"}function ic(s,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var p in a)u=a[p],a.hasOwnProperty(p)&&l[p]!==u&&Fo(s,p,u)}else for(var x in a)a.hasOwnProperty(x)&&Fo(s,x,a[x])}function ac(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),N0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wd(s){return N0.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function vi(){}var Jh=null;function ep(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Vo=null,Ho=null;function L0(s){var a=_r(s);if(a&&(s=a.stateNode)){var l=s[Kn]||null;e:switch(s=a.stateNode,a.type){case"input":if(ds(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Lt(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var u=l[a];if(u!==s&&u.form===s.form){var p=u[Kn]||null;if(!p)throw Error(i(90));ds(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<l.length;a++)u=l[a],u.form===s.form&&Ct(u)}break e;case"textarea":Qi(s,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&wt(s,!!l.multiple,a,!1)}}}var tp=!1;function F0(s,a,l){if(tp)return s(a,l);tp=!0;try{var u=s(a);return u}finally{if(tp=!1,(Vo!==null||Ho!==null)&&(uf(),Vo&&(a=Vo,s=Ho,Ho=Vo=null,L0(a),s)))for(a=0;a<s.length;a++)L0(s[a])}}function oc(s,a){var l=s.stateNode;if(l===null)return null;var u=l[Kn]||null;if(u===null)return null;l=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var Si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),np=!1;if(Si)try{var lc={};Object.defineProperty(lc,"passive",{get:function(){np=!0}}),window.addEventListener("test",lc,lc),window.removeEventListener("test",lc,lc)}catch{np=!1}var Ki=null,sp=null,jd=null;function B0(){if(jd)return jd;var s,a=sp,l=a.length,u,p="value"in Ki?Ki.value:Ki.textContent,x=p.length;for(s=0;s<l&&a[s]===p[s];s++);var D=l-s;for(u=1;u<=D&&a[l-u]===p[x-u];u++);return jd=p.slice(s,1<u?1-u:void 0)}function Cd(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Td(){return!0}function V0(){return!1}function Os(s){function a(l,u,p,x,D){this._reactName=l,this._targetInst=p,this.type=u,this.nativeEvent=x,this.target=D,this.currentTarget=null;for(var _ in s)s.hasOwnProperty(_)&&(l=s[_],this[_]=l?l(x):x[_]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Td:V0,this.isPropagationStopped=V0,this}return b(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Td)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Td)},persist:function(){},isPersistent:Td}),a}var Ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kd=Os(Ua),cc=b({},Ua,{view:0,detail:0}),fM=Os(cc),rp,ip,uc,Ed=b({},cc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:op,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==uc&&(uc&&s.type==="mousemove"?(rp=s.screenX-uc.screenX,ip=s.screenY-uc.screenY):ip=rp=0,uc=s),rp)},movementY:function(s){return"movementY"in s?s.movementY:ip}}),H0=Os(Ed),hM=b({},Ed,{dataTransfer:0}),pM=Os(hM),mM=b({},cc,{relatedTarget:0}),ap=Os(mM),gM=b({},Ua,{animationName:0,elapsedTime:0,pseudoElement:0}),xM=Os(gM),yM=b({},Ua,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),bM=Os(yM),vM=b({},Ua,{data:0}),U0=Os(vM),SM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CM(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=jM[s])?!!a[s]:!1}function op(){return CM}var TM=b({},cc,{key:function(s){if(s.key){var a=SM[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Cd(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?wM[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:op,charCode:function(s){return s.type==="keypress"?Cd(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Cd(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),kM=Os(TM),EM=b({},Ed,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$0=Os(EM),DM=b({},cc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:op}),MM=Os(DM),AM=b({},Ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),RM=Os(AM),PM=b({},Ed,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),OM=Os(PM),IM=b({},Ua,{newState:0,oldState:0}),WM=Os(IM),_M=[9,13,27,32],lp=Si&&"CompositionEvent"in window,dc=null;Si&&"documentMode"in document&&(dc=document.documentMode);var zM=Si&&"TextEvent"in window&&!dc,q0=Si&&(!lp||dc&&8<dc&&11>=dc),Y0=" ",G0=!1;function Q0(s,a){switch(s){case"keyup":return _M.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function K0(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Uo=!1;function NM(s,a){switch(s){case"compositionend":return K0(a);case"keypress":return a.which!==32?null:(G0=!0,Y0);case"textInput":return s=a.data,s===Y0&&G0?null:s;default:return null}}function LM(s,a){if(Uo)return s==="compositionend"||!lp&&Q0(s,a)?(s=B0(),jd=sp=Ki=null,Uo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return q0&&a.locale!=="ko"?null:a.data;default:return null}}var FM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function X0(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!FM[s.type]:a==="textarea"}function Z0(s,a,l,u){Vo?Ho?Ho.push(u):Ho=[u]:Vo=u,a=xf(a,"onChange"),0<a.length&&(l=new kd("onChange","change",null,l,u),s.push({event:l,listeners:a}))}var fc=null,hc=null;function BM(s){IS(s,0)}function Dd(s){var a=bi(s);if(Ct(a))return s}function J0(s,a){if(s==="change")return a}var eb=!1;if(Si){var cp;if(Si){var up="oninput"in document;if(!up){var tb=document.createElement("div");tb.setAttribute("oninput","return;"),up=typeof tb.oninput=="function"}cp=up}else cp=!1;eb=cp&&(!document.documentMode||9<document.documentMode)}function nb(){fc&&(fc.detachEvent("onpropertychange",sb),hc=fc=null)}function sb(s){if(s.propertyName==="value"&&Dd(hc)){var a=[];Z0(a,hc,s,ep(s)),F0(BM,a)}}function VM(s,a,l){s==="focusin"?(nb(),fc=a,hc=l,fc.attachEvent("onpropertychange",sb)):s==="focusout"&&nb()}function HM(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Dd(hc)}function UM(s,a){if(s==="click")return Dd(a)}function $M(s,a){if(s==="input"||s==="change")return Dd(a)}function qM(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Xs=typeof Object.is=="function"?Object.is:qM;function pc(s,a){if(Xs(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var l=Object.keys(s),u=Object.keys(a);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var p=l[u];if(!ke.call(a,p)||!Xs(s[p],a[p]))return!1}return!0}function rb(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function ib(s,a){var l=rb(s);s=0;for(var u;l;){if(l.nodeType===3){if(u=s+l.textContent.length,s<=a&&u>=a)return{node:l,offset:a-s};s=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=rb(l)}}function ab(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?ab(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function ob(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=ht(s.document);a instanceof s.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)s=a.contentWindow;else break;a=ht(s.document)}return a}function dp(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var YM=Si&&"documentMode"in document&&11>=document.documentMode,$o=null,fp=null,mc=null,hp=!1;function lb(s,a,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;hp||$o==null||$o!==ht(u)||(u=$o,"selectionStart"in u&&dp(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),mc&&pc(mc,u)||(mc=u,u=xf(fp,"onSelect"),0<u.length&&(a=new kd("onSelect","select",null,a,l),s.push({event:a,listeners:u}),a.target=$o)))}function $a(s,a){var l={};return l[s.toLowerCase()]=a.toLowerCase(),l["Webkit"+s]="webkit"+a,l["Moz"+s]="moz"+a,l}var qo={animationend:$a("Animation","AnimationEnd"),animationiteration:$a("Animation","AnimationIteration"),animationstart:$a("Animation","AnimationStart"),transitionrun:$a("Transition","TransitionRun"),transitionstart:$a("Transition","TransitionStart"),transitioncancel:$a("Transition","TransitionCancel"),transitionend:$a("Transition","TransitionEnd")},pp={},cb={};Si&&(cb=document.createElement("div").style,"AnimationEvent"in window||(delete qo.animationend.animation,delete qo.animationiteration.animation,delete qo.animationstart.animation),"TransitionEvent"in window||delete qo.transitionend.transition);function qa(s){if(pp[s])return pp[s];if(!qo[s])return s;var a=qo[s],l;for(l in a)if(a.hasOwnProperty(l)&&l in cb)return pp[s]=a[l];return s}var ub=qa("animationend"),db=qa("animationiteration"),fb=qa("animationstart"),GM=qa("transitionrun"),QM=qa("transitionstart"),KM=qa("transitioncancel"),hb=qa("transitionend"),pb=new Map,mp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mp.push("scrollEnd");function zr(s,a){pb.set(s,a),tt(a,[s])}var Md=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},gr=[],Yo=0,gp=0;function Ad(){for(var s=Yo,a=gp=Yo=0;a<s;){var l=gr[a];gr[a++]=null;var u=gr[a];gr[a++]=null;var p=gr[a];gr[a++]=null;var x=gr[a];if(gr[a++]=null,u!==null&&p!==null){var D=u.pending;D===null?p.next=p:(p.next=D.next,D.next=p),u.pending=p}x!==0&&mb(l,p,x)}}function Rd(s,a,l,u){gr[Yo++]=s,gr[Yo++]=a,gr[Yo++]=l,gr[Yo++]=u,gp|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function xp(s,a,l,u){return Rd(s,a,l,u),Pd(s)}function Ya(s,a){return Rd(s,null,null,a),Pd(s)}function mb(s,a,l){s.lanes|=l;var u=s.alternate;u!==null&&(u.lanes|=l);for(var p=!1,x=s.return;x!==null;)x.childLanes|=l,u=x.alternate,u!==null&&(u.childLanes|=l),x.tag===22&&(s=x.stateNode,s===null||s._visibility&1||(p=!0)),s=x,x=x.return;return s.tag===3?(x=s.stateNode,p&&a!==null&&(p=31-vt(l),s=x.hiddenUpdates,u=s[p],u===null?s[p]=[a]:u.push(a),a.lane=l|536870912),x):null}function Pd(s){if(50<zc)throw zc=0,km=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Go={};function XM(s,a,l,u){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zs(s,a,l,u){return new XM(s,a,l,u)}function yp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function wi(s,a){var l=s.alternate;return l===null?(l=Zs(s.tag,a,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=a,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,a=s.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function gb(s,a){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,a=l.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function Od(s,a,l,u,p,x){var D=0;if(u=s,typeof s=="function")yp(s)&&(D=1);else if(typeof s=="string")D=nR(s,l,ee.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case z:return s=Zs(31,l,a,p),s.elementType=z,s.lanes=x,s;case S:return Ga(l.children,p,x,a);case w:D=8,p|=24;break;case C:return s=Zs(12,l,a,p|2),s.elementType=C,s.lanes=x,s;case I:return s=Zs(13,l,a,p),s.elementType=I,s.lanes=x,s;case P:return s=Zs(19,l,a,p),s.elementType=P,s.lanes=x,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case R:D=10;break e;case k:D=9;break e;case O:D=11;break e;case W:D=14;break e;case L:D=16,u=null;break e}D=29,l=Error(i(130,s===null?"null":typeof s,"")),u=null}return a=Zs(D,l,a,p),a.elementType=s,a.type=u,a.lanes=x,a}function Ga(s,a,l,u){return s=Zs(7,s,u,a),s.lanes=l,s}function bp(s,a,l){return s=Zs(6,s,null,a),s.lanes=l,s}function xb(s){var a=Zs(18,null,null,0);return a.stateNode=s,a}function vp(s,a,l){return a=Zs(4,s.children!==null?s.children:[],s.key,a),a.lanes=l,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var yb=new WeakMap;function xr(s,a){if(typeof s=="object"&&s!==null){var l=yb.get(s);return l!==void 0?l:(a={value:s,source:a,stack:be(a)},yb.set(s,a),a)}return{value:s,source:a,stack:be(a)}}var Qo=[],Ko=0,Id=null,gc=0,yr=[],br=0,Xi=null,ti=1,ni="";function ji(s,a){Qo[Ko++]=gc,Qo[Ko++]=Id,Id=s,gc=a}function bb(s,a,l){yr[br++]=ti,yr[br++]=ni,yr[br++]=Xi,Xi=s;var u=ti;s=ni;var p=32-vt(u)-1;u&=~(1<<p),l+=1;var x=32-vt(a)+p;if(30<x){var D=p-p%5;x=(u&(1<<D)-1).toString(32),u>>=D,p-=D,ti=1<<32-vt(a)+p|l<<p|u,ni=x+s}else ti=1<<x|l<<p|u,ni=s}function Sp(s){s.return!==null&&(ji(s,1),bb(s,1,0))}function wp(s){for(;s===Id;)Id=Qo[--Ko],Qo[Ko]=null,gc=Qo[--Ko],Qo[Ko]=null;for(;s===Xi;)Xi=yr[--br],yr[br]=null,ni=yr[--br],yr[br]=null,ti=yr[--br],yr[br]=null}function vb(s,a){yr[br++]=ti,yr[br++]=ni,yr[br++]=Xi,ti=a.id,ni=a.overflow,Xi=s}var fs=null,xn=null,Wt=!1,Zi=null,vr=!1,jp=Error(i(519));function Ji(s){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw xc(xr(a,s)),jp}function Sb(s){var a=s.stateNode,l=s.type,u=s.memoizedProps;switch(a[In]=s,a[Kn]=u,l){case"dialog":Pt("cancel",a),Pt("close",a);break;case"iframe":case"object":case"embed":Pt("load",a);break;case"video":case"audio":for(l=0;l<Lc.length;l++)Pt(Lc[l],a);break;case"source":Pt("error",a);break;case"img":case"image":case"link":Pt("error",a),Pt("load",a);break;case"details":Pt("toggle",a);break;case"input":Pt("invalid",a),mr(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Pt("invalid",a);break;case"textarea":Pt("invalid",a),Va(a,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||u.suppressHydrationWarning===!0||NS(a.textContent,l)?(u.popover!=null&&(Pt("beforetoggle",a),Pt("toggle",a)),u.onScroll!=null&&Pt("scroll",a),u.onScrollEnd!=null&&Pt("scrollend",a),u.onClick!=null&&(a.onclick=vi),a=!0):a=!1,a||Ji(s,!0)}function wb(s){for(fs=s.return;fs;)switch(fs.tag){case 5:case 31:case 13:vr=!1;return;case 27:case 3:vr=!0;return;default:fs=fs.return}}function Xo(s){if(s!==fs)return!1;if(!Wt)return wb(s),Wt=!0,!1;var a=s.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Bm(s.type,s.memoizedProps)),l=!l),l&&xn&&Ji(s),wb(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));xn=YS(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));xn=YS(s)}else a===27?(a=xn,ha(s.type)?(s=qm,qm=null,xn=s):xn=a):xn=fs?wr(s.stateNode.nextSibling):null;return!0}function Qa(){xn=fs=null,Wt=!1}function Cp(){var s=Zi;return s!==null&&(zs===null?zs=s:zs.push.apply(zs,s),Zi=null),s}function xc(s){Zi===null?Zi=[s]:Zi.push(s)}var Tp=ue(null),Ka=null,Ci=null;function ea(s,a,l){De(Tp,a._currentValue),a._currentValue=l}function Ti(s){s._currentValue=Tp.current,Te(Tp)}function kp(s,a,l){for(;s!==null;){var u=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),s===l)break;s=s.return}}function Ep(s,a,l,u){var p=s.child;for(p!==null&&(p.return=s);p!==null;){var x=p.dependencies;if(x!==null){var D=p.child;x=x.firstContext;e:for(;x!==null;){var _=x;x=p;for(var Q=0;Q<a.length;Q++)if(_.context===a[Q]){x.lanes|=l,_=x.alternate,_!==null&&(_.lanes|=l),kp(x.return,l,s),u||(D=null);break e}x=_.next}}else if(p.tag===18){if(D=p.return,D===null)throw Error(i(341));D.lanes|=l,x=D.alternate,x!==null&&(x.lanes|=l),kp(D,l,s),D=null}else D=p.child;if(D!==null)D.return=p;else for(D=p;D!==null;){if(D===s){D=null;break}if(p=D.sibling,p!==null){p.return=D.return,D=p;break}D=D.return}p=D}}function Zo(s,a,l,u){s=null;for(var p=a,x=!1;p!==null;){if(!x){if((p.flags&524288)!==0)x=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var D=p.alternate;if(D===null)throw Error(i(387));if(D=D.memoizedProps,D!==null){var _=p.type;Xs(p.pendingProps.value,D.value)||(s!==null?s.push(_):s=[_])}}else if(p===ve.current){if(D=p.alternate,D===null)throw Error(i(387));D.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(s!==null?s.push(Uc):s=[Uc])}p=p.return}s!==null&&Ep(a,s,l,u),a.flags|=262144}function Wd(s){for(s=s.firstContext;s!==null;){if(!Xs(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Xa(s){Ka=s,Ci=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function hs(s){return jb(Ka,s)}function _d(s,a){return Ka===null&&Xa(s),jb(s,a)}function jb(s,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Ci===null){if(s===null)throw Error(i(308));Ci=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Ci=Ci.next=a;return l}var ZM=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(l,u){s.push(u)}};this.abort=function(){a.aborted=!0,s.forEach(function(l){return l()})}},JM=e.unstable_scheduleCallback,eA=e.unstable_NormalPriority,Xn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dp(){return{controller:new ZM,data:new Map,refCount:0}}function yc(s){s.refCount--,s.refCount===0&&JM(eA,function(){s.controller.abort()})}var bc=null,Mp=0,Jo=0,el=null;function tA(s,a){if(bc===null){var l=bc=[];Mp=0,Jo=Pm(),el={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Mp++,a.then(Cb,Cb),a}function Cb(){if(--Mp===0&&bc!==null){el!==null&&(el.status="fulfilled");var s=bc;bc=null,Jo=0,el=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function nA(s,a){var l=[],u={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return s.then(function(){u.status="fulfilled",u.value=a;for(var p=0;p<l.length;p++)(0,l[p])(a)},function(p){for(u.status="rejected",u.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),u}var Tb=N.S;N.S=function(s,a){lS=We(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&tA(s,a),Tb!==null&&Tb(s,a)};var Za=ue(null);function Ap(){var s=Za.current;return s!==null?s:an.pooledCache}function zd(s,a){a===null?De(Za,Za.current):De(Za,a.pool)}function kb(){var s=Ap();return s===null?null:{parent:Xn._currentValue,pool:s}}var tl=Error(i(460)),Rp=Error(i(474)),Nd=Error(i(542)),Ld={then:function(){}};function Eb(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Db(s,a,l){switch(l=s[l],l===void 0?s.push(a):l!==a&&(a.then(vi,vi),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Ab(s),s;default:if(typeof a.status=="string")a.then(vi,vi);else{if(s=an,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(u){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=u}},function(u){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Ab(s),s}throw eo=a,tl}}function Ja(s){try{var a=s._init;return a(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(eo=l,tl):l}}var eo=null;function Mb(){if(eo===null)throw Error(i(459));var s=eo;return eo=null,s}function Ab(s){if(s===tl||s===Nd)throw Error(i(483))}var nl=null,vc=0;function Fd(s){var a=vc;return vc+=1,nl===null&&(nl=[]),Db(nl,s,a)}function Sc(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function Bd(s,a){throw a.$$typeof===v?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function Rb(s){function a(le,se){if(s){var he=le.deletions;he===null?(le.deletions=[se],le.flags|=16):he.push(se)}}function l(le,se){if(!s)return null;for(;se!==null;)a(le,se),se=se.sibling;return null}function u(le){for(var se=new Map;le!==null;)le.key!==null?se.set(le.key,le):se.set(le.index,le),le=le.sibling;return se}function p(le,se){return le=wi(le,se),le.index=0,le.sibling=null,le}function x(le,se,he){return le.index=he,s?(he=le.alternate,he!==null?(he=he.index,he<se?(le.flags|=67108866,se):he):(le.flags|=67108866,se)):(le.flags|=1048576,se)}function D(le){return s&&le.alternate===null&&(le.flags|=67108866),le}function _(le,se,he,Me){return se===null||se.tag!==6?(se=bp(he,le.mode,Me),se.return=le,se):(se=p(se,he),se.return=le,se)}function Q(le,se,he,Me){var rt=he.type;return rt===S?Ee(le,se,he.props.children,Me,he.key):se!==null&&(se.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===L&&Ja(rt)===se.type)?(se=p(se,he.props),Sc(se,he),se.return=le,se):(se=Od(he.type,he.key,he.props,null,le.mode,Me),Sc(se,he),se.return=le,se)}function pe(le,se,he,Me){return se===null||se.tag!==4||se.stateNode.containerInfo!==he.containerInfo||se.stateNode.implementation!==he.implementation?(se=vp(he,le.mode,Me),se.return=le,se):(se=p(se,he.children||[]),se.return=le,se)}function Ee(le,se,he,Me,rt){return se===null||se.tag!==7?(se=Ga(he,le.mode,Me,rt),se.return=le,se):(se=p(se,he),se.return=le,se)}function Oe(le,se,he){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=bp(""+se,le.mode,he),se.return=le,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case j:return he=Od(se.type,se.key,se.props,null,le.mode,he),Sc(he,se),he.return=le,he;case E:return se=vp(se,le.mode,he),se.return=le,se;case L:return se=Ja(se),Oe(le,se,he)}if($(se)||U(se))return se=Ga(se,le.mode,he,null),se.return=le,se;if(typeof se.then=="function")return Oe(le,Fd(se),he);if(se.$$typeof===R)return Oe(le,_d(le,se),he);Bd(le,se)}return null}function xe(le,se,he,Me){var rt=se!==null?se.key:null;if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return rt!==null?null:_(le,se,""+he,Me);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case j:return he.key===rt?Q(le,se,he,Me):null;case E:return he.key===rt?pe(le,se,he,Me):null;case L:return he=Ja(he),xe(le,se,he,Me)}if($(he)||U(he))return rt!==null?null:Ee(le,se,he,Me,null);if(typeof he.then=="function")return xe(le,se,Fd(he),Me);if(he.$$typeof===R)return xe(le,se,_d(le,he),Me);Bd(le,he)}return null}function je(le,se,he,Me,rt){if(typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint")return le=le.get(he)||null,_(se,le,""+Me,rt);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case j:return le=le.get(Me.key===null?he:Me.key)||null,Q(se,le,Me,rt);case E:return le=le.get(Me.key===null?he:Me.key)||null,pe(se,le,Me,rt);case L:return Me=Ja(Me),je(le,se,he,Me,rt)}if($(Me)||U(Me))return le=le.get(he)||null,Ee(se,le,Me,rt,null);if(typeof Me.then=="function")return je(le,se,he,Fd(Me),rt);if(Me.$$typeof===R)return je(le,se,he,_d(se,Me),rt);Bd(se,Me)}return null}function Ye(le,se,he,Me){for(var rt=null,Ft=null,Ke=se,Tt=se=0,It=null;Ke!==null&&Tt<he.length;Tt++){Ke.index>Tt?(It=Ke,Ke=null):It=Ke.sibling;var Bt=xe(le,Ke,he[Tt],Me);if(Bt===null){Ke===null&&(Ke=It);break}s&&Ke&&Bt.alternate===null&&a(le,Ke),se=x(Bt,se,Tt),Ft===null?rt=Bt:Ft.sibling=Bt,Ft=Bt,Ke=It}if(Tt===he.length)return l(le,Ke),Wt&&ji(le,Tt),rt;if(Ke===null){for(;Tt<he.length;Tt++)Ke=Oe(le,he[Tt],Me),Ke!==null&&(se=x(Ke,se,Tt),Ft===null?rt=Ke:Ft.sibling=Ke,Ft=Ke);return Wt&&ji(le,Tt),rt}for(Ke=u(Ke);Tt<he.length;Tt++)It=je(Ke,le,Tt,he[Tt],Me),It!==null&&(s&&It.alternate!==null&&Ke.delete(It.key===null?Tt:It.key),se=x(It,se,Tt),Ft===null?rt=It:Ft.sibling=It,Ft=It);return s&&Ke.forEach(function(ya){return a(le,ya)}),Wt&&ji(le,Tt),rt}function dt(le,se,he,Me){if(he==null)throw Error(i(151));for(var rt=null,Ft=null,Ke=se,Tt=se=0,It=null,Bt=he.next();Ke!==null&&!Bt.done;Tt++,Bt=he.next()){Ke.index>Tt?(It=Ke,Ke=null):It=Ke.sibling;var ya=xe(le,Ke,Bt.value,Me);if(ya===null){Ke===null&&(Ke=It);break}s&&Ke&&ya.alternate===null&&a(le,Ke),se=x(ya,se,Tt),Ft===null?rt=ya:Ft.sibling=ya,Ft=ya,Ke=It}if(Bt.done)return l(le,Ke),Wt&&ji(le,Tt),rt;if(Ke===null){for(;!Bt.done;Tt++,Bt=he.next())Bt=Oe(le,Bt.value,Me),Bt!==null&&(se=x(Bt,se,Tt),Ft===null?rt=Bt:Ft.sibling=Bt,Ft=Bt);return Wt&&ji(le,Tt),rt}for(Ke=u(Ke);!Bt.done;Tt++,Bt=he.next())Bt=je(Ke,le,Tt,Bt.value,Me),Bt!==null&&(s&&Bt.alternate!==null&&Ke.delete(Bt.key===null?Tt:Bt.key),se=x(Bt,se,Tt),Ft===null?rt=Bt:Ft.sibling=Bt,Ft=Bt);return s&&Ke.forEach(function(hR){return a(le,hR)}),Wt&&ji(le,Tt),rt}function nn(le,se,he,Me){if(typeof he=="object"&&he!==null&&he.type===S&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case j:e:{for(var rt=he.key;se!==null;){if(se.key===rt){if(rt=he.type,rt===S){if(se.tag===7){l(le,se.sibling),Me=p(se,he.props.children),Me.return=le,le=Me;break e}}else if(se.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===L&&Ja(rt)===se.type){l(le,se.sibling),Me=p(se,he.props),Sc(Me,he),Me.return=le,le=Me;break e}l(le,se);break}else a(le,se);se=se.sibling}he.type===S?(Me=Ga(he.props.children,le.mode,Me,he.key),Me.return=le,le=Me):(Me=Od(he.type,he.key,he.props,null,le.mode,Me),Sc(Me,he),Me.return=le,le=Me)}return D(le);case E:e:{for(rt=he.key;se!==null;){if(se.key===rt)if(se.tag===4&&se.stateNode.containerInfo===he.containerInfo&&se.stateNode.implementation===he.implementation){l(le,se.sibling),Me=p(se,he.children||[]),Me.return=le,le=Me;break e}else{l(le,se);break}else a(le,se);se=se.sibling}Me=vp(he,le.mode,Me),Me.return=le,le=Me}return D(le);case L:return he=Ja(he),nn(le,se,he,Me)}if($(he))return Ye(le,se,he,Me);if(U(he)){if(rt=U(he),typeof rt!="function")throw Error(i(150));return he=rt.call(he),dt(le,se,he,Me)}if(typeof he.then=="function")return nn(le,se,Fd(he),Me);if(he.$$typeof===R)return nn(le,se,_d(le,he),Me);Bd(le,he)}return typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint"?(he=""+he,se!==null&&se.tag===6?(l(le,se.sibling),Me=p(se,he),Me.return=le,le=Me):(l(le,se),Me=bp(he,le.mode,Me),Me.return=le,le=Me),D(le)):l(le,se)}return function(le,se,he,Me){try{vc=0;var rt=nn(le,se,he,Me);return nl=null,rt}catch(Ke){if(Ke===tl||Ke===Nd)throw Ke;var Ft=Zs(29,Ke,null,le.mode);return Ft.lanes=Me,Ft.return=le,Ft}finally{}}}var to=Rb(!0),Pb=Rb(!1),ta=!1;function Pp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Op(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function na(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function sa(s,a,l){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(Vt&2)!==0){var p=u.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),u.pending=a,a=Pd(s),mb(s,null,l),a}return Rd(s,u,a,l),Pd(s)}function wc(s,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var u=a.lanes;u&=s.pendingLanes,l|=u,a.lanes=l,An(s,l)}}function Ip(s,a){var l=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var p=null,x=null;if(l=l.firstBaseUpdate,l!==null){do{var D={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};x===null?p=x=D:x=x.next=D,l=l.next}while(l!==null);x===null?p=x=a:x=x.next=a}else p=x=a;l={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:x,shared:u.shared,callbacks:u.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=a:s.next=a,l.lastBaseUpdate=a}var Wp=!1;function jc(){if(Wp){var s=el;if(s!==null)throw s}}function Cc(s,a,l,u){Wp=!1;var p=s.updateQueue;ta=!1;var x=p.firstBaseUpdate,D=p.lastBaseUpdate,_=p.shared.pending;if(_!==null){p.shared.pending=null;var Q=_,pe=Q.next;Q.next=null,D===null?x=pe:D.next=pe,D=Q;var Ee=s.alternate;Ee!==null&&(Ee=Ee.updateQueue,_=Ee.lastBaseUpdate,_!==D&&(_===null?Ee.firstBaseUpdate=pe:_.next=pe,Ee.lastBaseUpdate=Q))}if(x!==null){var Oe=p.baseState;D=0,Ee=pe=Q=null,_=x;do{var xe=_.lane&-536870913,je=xe!==_.lane;if(je?(Ot&xe)===xe:(u&xe)===xe){xe!==0&&xe===Jo&&(Wp=!0),Ee!==null&&(Ee=Ee.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var Ye=s,dt=_;xe=a;var nn=l;switch(dt.tag){case 1:if(Ye=dt.payload,typeof Ye=="function"){Oe=Ye.call(nn,Oe,xe);break e}Oe=Ye;break e;case 3:Ye.flags=Ye.flags&-65537|128;case 0:if(Ye=dt.payload,xe=typeof Ye=="function"?Ye.call(nn,Oe,xe):Ye,xe==null)break e;Oe=b({},Oe,xe);break e;case 2:ta=!0}}xe=_.callback,xe!==null&&(s.flags|=64,je&&(s.flags|=8192),je=p.callbacks,je===null?p.callbacks=[xe]:je.push(xe))}else je={lane:xe,tag:_.tag,payload:_.payload,callback:_.callback,next:null},Ee===null?(pe=Ee=je,Q=Oe):Ee=Ee.next=je,D|=xe;if(_=_.next,_===null){if(_=p.shared.pending,_===null)break;je=_,_=je.next,je.next=null,p.lastBaseUpdate=je,p.shared.pending=null}}while(!0);Ee===null&&(Q=Oe),p.baseState=Q,p.firstBaseUpdate=pe,p.lastBaseUpdate=Ee,x===null&&(p.shared.lanes=0),la|=D,s.lanes=D,s.memoizedState=Oe}}function Ob(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function Ib(s,a){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)Ob(l[s],a)}var sl=ue(null),Vd=ue(0);function Wb(s,a){s=Ii,De(Vd,s),De(sl,a),Ii=s|a.baseLanes}function _p(){De(Vd,Ii),De(sl,sl.current)}function zp(){Ii=Vd.current,Te(sl),Te(Vd)}var Js=ue(null),Sr=null;function ra(s){var a=s.alternate;De(Bn,Bn.current&1),De(Js,s),Sr===null&&(a===null||sl.current!==null||a.memoizedState!==null)&&(Sr=s)}function Np(s){De(Bn,Bn.current),De(Js,s),Sr===null&&(Sr=s)}function _b(s){s.tag===22?(De(Bn,Bn.current),De(Js,s),Sr===null&&(Sr=s)):ia()}function ia(){De(Bn,Bn.current),De(Js,Js.current)}function er(s){Te(Js),Sr===s&&(Sr=null),Te(Bn)}var Bn=ue(0);function Hd(s){for(var a=s;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Um(l)||$m(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ki=0,jt=null,en=null,Zn=null,Ud=!1,rl=!1,no=!1,$d=0,Tc=0,il=null,sA=0;function Wn(){throw Error(i(321))}function Lp(s,a){if(a===null)return!1;for(var l=0;l<a.length&&l<s.length;l++)if(!Xs(s[l],a[l]))return!1;return!0}function Fp(s,a,l,u,p,x){return ki=x,jt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,N.H=s===null||s.memoizedState===null?bv:tm,no=!1,x=l(u,p),no=!1,rl&&(x=Nb(a,l,u,p)),zb(s),x}function zb(s){N.H=Dc;var a=en!==null&&en.next!==null;if(ki=0,Zn=en=jt=null,Ud=!1,Tc=0,il=null,a)throw Error(i(300));s===null||Jn||(s=s.dependencies,s!==null&&Wd(s)&&(Jn=!0))}function Nb(s,a,l,u){jt=s;var p=0;do{if(rl&&(il=null),Tc=0,rl=!1,25<=p)throw Error(i(301));if(p+=1,Zn=en=null,s.updateQueue!=null){var x=s.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}N.H=vv,x=a(l,u)}while(rl);return x}function rA(){var s=N.H,a=s.useState()[0];return a=typeof a.then=="function"?kc(a):a,s=s.useState()[0],(en!==null?en.memoizedState:null)!==s&&(jt.flags|=1024),a}function Bp(){var s=$d!==0;return $d=0,s}function Vp(s,a,l){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~l}function Hp(s){if(Ud){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Ud=!1}ki=0,Zn=en=jt=null,rl=!1,Tc=$d=0,il=null}function ks(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zn===null?jt.memoizedState=Zn=s:Zn=Zn.next=s,Zn}function Vn(){if(en===null){var s=jt.alternate;s=s!==null?s.memoizedState:null}else s=en.next;var a=Zn===null?jt.memoizedState:Zn.next;if(a!==null)Zn=a,en=s;else{if(s===null)throw jt.alternate===null?Error(i(467)):Error(i(310));en=s,s={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},Zn===null?jt.memoizedState=Zn=s:Zn=Zn.next=s}return Zn}function qd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kc(s){var a=Tc;return Tc+=1,il===null&&(il=[]),s=Db(il,s,a),a=jt,(Zn===null?a.memoizedState:Zn.next)===null&&(a=a.alternate,N.H=a===null||a.memoizedState===null?bv:tm),s}function Yd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return kc(s);if(s.$$typeof===R)return hs(s)}throw Error(i(438,String(s)))}function Up(s){var a=null,l=jt.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var u=jt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=qd(),jt.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(s),u=0;u<s;u++)l[u]=q;return a.index++,l}function Ei(s,a){return typeof a=="function"?a(s):a}function Gd(s){var a=Vn();return $p(a,en,s)}function $p(s,a,l){var u=s.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var p=s.baseQueue,x=u.pending;if(x!==null){if(p!==null){var D=p.next;p.next=x.next,x.next=D}a.baseQueue=p=x,u.pending=null}if(x=s.baseState,p===null)s.memoizedState=x;else{a=p.next;var _=D=null,Q=null,pe=a,Ee=!1;do{var Oe=pe.lane&-536870913;if(Oe!==pe.lane?(Ot&Oe)===Oe:(ki&Oe)===Oe){var xe=pe.revertLane;if(xe===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),Oe===Jo&&(Ee=!0);else if((ki&xe)===xe){pe=pe.next,xe===Jo&&(Ee=!0);continue}else Oe={lane:0,revertLane:pe.revertLane,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},Q===null?(_=Q=Oe,D=x):Q=Q.next=Oe,jt.lanes|=xe,la|=xe;Oe=pe.action,no&&l(x,Oe),x=pe.hasEagerState?pe.eagerState:l(x,Oe)}else xe={lane:Oe,revertLane:pe.revertLane,gesture:pe.gesture,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},Q===null?(_=Q=xe,D=x):Q=Q.next=xe,jt.lanes|=Oe,la|=Oe;pe=pe.next}while(pe!==null&&pe!==a);if(Q===null?D=x:Q.next=_,!Xs(x,s.memoizedState)&&(Jn=!0,Ee&&(l=el,l!==null)))throw l;s.memoizedState=x,s.baseState=D,s.baseQueue=Q,u.lastRenderedState=x}return p===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function qp(s){var a=Vn(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var u=l.dispatch,p=l.pending,x=a.memoizedState;if(p!==null){l.pending=null;var D=p=p.next;do x=s(x,D.action),D=D.next;while(D!==p);Xs(x,a.memoizedState)||(Jn=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),l.lastRenderedState=x}return[x,u]}function Lb(s,a,l){var u=jt,p=Vn(),x=Wt;if(x){if(l===void 0)throw Error(i(407));l=l()}else l=a();var D=!Xs((en||p).memoizedState,l);if(D&&(p.memoizedState=l,Jn=!0),p=p.queue,Qp(Vb.bind(null,u,p,s),[s]),p.getSnapshot!==a||D||Zn!==null&&Zn.memoizedState.tag&1){if(u.flags|=2048,al(9,{destroy:void 0},Bb.bind(null,u,p,l,a),null),an===null)throw Error(i(349));x||(ki&127)!==0||Fb(u,a,l)}return l}function Fb(s,a,l){s.flags|=16384,s={getSnapshot:a,value:l},a=jt.updateQueue,a===null?(a=qd(),jt.updateQueue=a,a.stores=[s]):(l=a.stores,l===null?a.stores=[s]:l.push(s))}function Bb(s,a,l,u){a.value=l,a.getSnapshot=u,Hb(a)&&Ub(s)}function Vb(s,a,l){return l(function(){Hb(a)&&Ub(s)})}function Hb(s){var a=s.getSnapshot;s=s.value;try{var l=a();return!Xs(s,l)}catch{return!0}}function Ub(s){var a=Ya(s,2);a!==null&&Ns(a,s,2)}function Yp(s){var a=ks();if(typeof s=="function"){var l=s;if(s=l(),no){ot(!0);try{l()}finally{ot(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:s},a}function $b(s,a,l,u){return s.baseState=l,$p(s,en,typeof u=="function"?u:Ei)}function iA(s,a,l,u,p){if(Xd(s))throw Error(i(485));if(s=a.action,s!==null){var x={payload:p,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){x.listeners.push(D)}};N.T!==null?l(!0):x.isTransition=!1,u(x),l=a.pending,l===null?(x.next=a.pending=x,qb(a,x)):(x.next=l.next,a.pending=l.next=x)}}function qb(s,a){var l=a.action,u=a.payload,p=s.state;if(a.isTransition){var x=N.T,D={};N.T=D;try{var _=l(p,u),Q=N.S;Q!==null&&Q(D,_),Yb(s,a,_)}catch(pe){Gp(s,a,pe)}finally{x!==null&&D.types!==null&&(x.types=D.types),N.T=x}}else try{x=l(p,u),Yb(s,a,x)}catch(pe){Gp(s,a,pe)}}function Yb(s,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){Gb(s,a,u)},function(u){return Gp(s,a,u)}):Gb(s,a,l)}function Gb(s,a,l){a.status="fulfilled",a.value=l,Qb(a),s.state=l,a=s.pending,a!==null&&(l=a.next,l===a?s.pending=null:(l=l.next,a.next=l,qb(s,l)))}function Gp(s,a,l){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=l,Qb(a),a=a.next;while(a!==u)}s.action=null}function Qb(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function Kb(s,a){return a}function Xb(s,a){if(Wt){var l=an.formState;if(l!==null){e:{var u=jt;if(Wt){if(xn){t:{for(var p=xn,x=vr;p.nodeType!==8;){if(!x){p=null;break t}if(p=wr(p.nextSibling),p===null){p=null;break t}}x=p.data,p=x==="F!"||x==="F"?p:null}if(p){xn=wr(p.nextSibling),u=p.data==="F!";break e}}Ji(u)}u=!1}u&&(a=l[0])}}return l=ks(),l.memoizedState=l.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kb,lastRenderedState:a},l.queue=u,l=gv.bind(null,jt,u),u.dispatch=l,u=Yp(!1),x=em.bind(null,jt,!1,u.queue),u=ks(),p={state:a,dispatch:null,action:s,pending:null},u.queue=p,l=iA.bind(null,jt,p,x,l),p.dispatch=l,u.memoizedState=s,[a,l,!1]}function Zb(s){var a=Vn();return Jb(a,en,s)}function Jb(s,a,l){if(a=$p(s,a,Kb)[0],s=Gd(Ei)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=kc(a)}catch(D){throw D===tl?Nd:D}else u=a;a=Vn();var p=a.queue,x=p.dispatch;return l!==a.memoizedState&&(jt.flags|=2048,al(9,{destroy:void 0},aA.bind(null,p,l),null)),[u,x,s]}function aA(s,a){s.action=a}function ev(s){var a=Vn(),l=en;if(l!==null)return Jb(a,l,s);Vn(),a=a.memoizedState,l=Vn();var u=l.queue.dispatch;return l.memoizedState=s,[a,u,!1]}function al(s,a,l,u){return s={tag:s,create:l,deps:u,inst:a,next:null},a=jt.updateQueue,a===null&&(a=qd(),jt.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=s.next=s:(u=l.next,l.next=s,s.next=u,a.lastEffect=s),s}function tv(){return Vn().memoizedState}function Qd(s,a,l,u){var p=ks();jt.flags|=s,p.memoizedState=al(1|a,{destroy:void 0},l,u===void 0?null:u)}function Kd(s,a,l,u){var p=Vn();u=u===void 0?null:u;var x=p.memoizedState.inst;en!==null&&u!==null&&Lp(u,en.memoizedState.deps)?p.memoizedState=al(a,x,l,u):(jt.flags|=s,p.memoizedState=al(1|a,x,l,u))}function nv(s,a){Qd(8390656,8,s,a)}function Qp(s,a){Kd(2048,8,s,a)}function oA(s){jt.flags|=4;var a=jt.updateQueue;if(a===null)a=qd(),jt.updateQueue=a,a.events=[s];else{var l=a.events;l===null?a.events=[s]:l.push(s)}}function sv(s){var a=Vn().memoizedState;return oA({ref:a,nextImpl:s}),function(){if((Vt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function rv(s,a){return Kd(4,2,s,a)}function iv(s,a){return Kd(4,4,s,a)}function av(s,a){if(typeof a=="function"){s=s();var l=a(s);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function ov(s,a,l){l=l!=null?l.concat([s]):null,Kd(4,4,av.bind(null,a,s),l)}function Kp(){}function lv(s,a){var l=Vn();a=a===void 0?null:a;var u=l.memoizedState;return a!==null&&Lp(a,u[1])?u[0]:(l.memoizedState=[s,a],s)}function cv(s,a){var l=Vn();a=a===void 0?null:a;var u=l.memoizedState;if(a!==null&&Lp(a,u[1]))return u[0];if(u=s(),no){ot(!0);try{s()}finally{ot(!1)}}return l.memoizedState=[u,a],u}function Xp(s,a,l){return l===void 0||(ki&1073741824)!==0&&(Ot&261930)===0?s.memoizedState=a:(s.memoizedState=l,s=uS(),jt.lanes|=s,la|=s,l)}function uv(s,a,l,u){return Xs(l,a)?l:sl.current!==null?(s=Xp(s,l,u),Xs(s,a)||(Jn=!0),s):(ki&42)===0||(ki&1073741824)!==0&&(Ot&261930)===0?(Jn=!0,s.memoizedState=l):(s=uS(),jt.lanes|=s,la|=s,a)}function dv(s,a,l,u,p){var x=V.p;V.p=x!==0&&8>x?x:8;var D=N.T,_={};N.T=_,em(s,!1,a,l);try{var Q=p(),pe=N.S;if(pe!==null&&pe(_,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var Ee=nA(Q,u);Ec(s,a,Ee,sr(s))}else Ec(s,a,u,sr(s))}catch(Oe){Ec(s,a,{then:function(){},status:"rejected",reason:Oe},sr())}finally{V.p=x,D!==null&&_.types!==null&&(D.types=_.types),N.T=D}}function lA(){}function Zp(s,a,l,u){if(s.tag!==5)throw Error(i(476));var p=fv(s).queue;dv(s,p,a,F,l===null?lA:function(){return hv(s),l(u)})}function fv(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:F},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:l},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function hv(s){var a=fv(s);a.next===null&&(a=s.alternate.memoizedState),Ec(s,a.next.queue,{},sr())}function Jp(){return hs(Uc)}function pv(){return Vn().memoizedState}function mv(){return Vn().memoizedState}function cA(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var l=sr();s=na(l);var u=sa(a,s,l);u!==null&&(Ns(u,a,l),wc(u,a,l)),a={cache:Dp()},s.payload=a;return}a=a.return}}function uA(s,a,l){var u=sr();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Xd(s)?xv(a,l):(l=xp(s,a,l,u),l!==null&&(Ns(l,s,u),yv(l,a,u)))}function gv(s,a,l){var u=sr();Ec(s,a,l,u)}function Ec(s,a,l,u){var p={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Xd(s))xv(a,p);else{var x=s.alternate;if(s.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var D=a.lastRenderedState,_=x(D,l);if(p.hasEagerState=!0,p.eagerState=_,Xs(_,D))return Rd(s,a,p,0),an===null&&Ad(),!1}catch{}finally{}if(l=xp(s,a,p,u),l!==null)return Ns(l,s,u),yv(l,a,u),!0}return!1}function em(s,a,l,u){if(u={lane:2,revertLane:Pm(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Xd(s)){if(a)throw Error(i(479))}else a=xp(s,l,u,2),a!==null&&Ns(a,s,2)}function Xd(s){var a=s.alternate;return s===jt||a!==null&&a===jt}function xv(s,a){rl=Ud=!0;var l=s.pending;l===null?a.next=a:(a.next=l.next,l.next=a),s.pending=a}function yv(s,a,l){if((l&4194048)!==0){var u=a.lanes;u&=s.pendingLanes,l|=u,a.lanes=l,An(s,l)}}var Dc={readContext:hs,use:Yd,useCallback:Wn,useContext:Wn,useEffect:Wn,useImperativeHandle:Wn,useLayoutEffect:Wn,useInsertionEffect:Wn,useMemo:Wn,useReducer:Wn,useRef:Wn,useState:Wn,useDebugValue:Wn,useDeferredValue:Wn,useTransition:Wn,useSyncExternalStore:Wn,useId:Wn,useHostTransitionStatus:Wn,useFormState:Wn,useActionState:Wn,useOptimistic:Wn,useMemoCache:Wn,useCacheRefresh:Wn};Dc.useEffectEvent=Wn;var bv={readContext:hs,use:Yd,useCallback:function(s,a){return ks().memoizedState=[s,a===void 0?null:a],s},useContext:hs,useEffect:nv,useImperativeHandle:function(s,a,l){l=l!=null?l.concat([s]):null,Qd(4194308,4,av.bind(null,a,s),l)},useLayoutEffect:function(s,a){return Qd(4194308,4,s,a)},useInsertionEffect:function(s,a){Qd(4,2,s,a)},useMemo:function(s,a){var l=ks();a=a===void 0?null:a;var u=s();if(no){ot(!0);try{s()}finally{ot(!1)}}return l.memoizedState=[u,a],u},useReducer:function(s,a,l){var u=ks();if(l!==void 0){var p=l(a);if(no){ot(!0);try{l(a)}finally{ot(!1)}}}else p=a;return u.memoizedState=u.baseState=p,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:p},u.queue=s,s=s.dispatch=uA.bind(null,jt,s),[u.memoizedState,s]},useRef:function(s){var a=ks();return s={current:s},a.memoizedState=s},useState:function(s){s=Yp(s);var a=s.queue,l=gv.bind(null,jt,a);return a.dispatch=l,[s.memoizedState,l]},useDebugValue:Kp,useDeferredValue:function(s,a){var l=ks();return Xp(l,s,a)},useTransition:function(){var s=Yp(!1);return s=dv.bind(null,jt,s.queue,!0,!1),ks().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,l){var u=jt,p=ks();if(Wt){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),an===null)throw Error(i(349));(Ot&127)!==0||Fb(u,a,l)}p.memoizedState=l;var x={value:l,getSnapshot:a};return p.queue=x,nv(Vb.bind(null,u,x,s),[s]),u.flags|=2048,al(9,{destroy:void 0},Bb.bind(null,u,x,l,a),null),l},useId:function(){var s=ks(),a=an.identifierPrefix;if(Wt){var l=ni,u=ti;l=(u&~(1<<32-vt(u)-1)).toString(32)+l,a="_"+a+"R_"+l,l=$d++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=sA++,a="_"+a+"r_"+l.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:Jp,useFormState:Xb,useActionState:Xb,useOptimistic:function(s){var a=ks();a.memoizedState=a.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=em.bind(null,jt,!0,l),l.dispatch=a,[s,a]},useMemoCache:Up,useCacheRefresh:function(){return ks().memoizedState=cA.bind(null,jt)},useEffectEvent:function(s){var a=ks(),l={impl:s};return a.memoizedState=l,function(){if((Vt&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},tm={readContext:hs,use:Yd,useCallback:lv,useContext:hs,useEffect:Qp,useImperativeHandle:ov,useInsertionEffect:rv,useLayoutEffect:iv,useMemo:cv,useReducer:Gd,useRef:tv,useState:function(){return Gd(Ei)},useDebugValue:Kp,useDeferredValue:function(s,a){var l=Vn();return uv(l,en.memoizedState,s,a)},useTransition:function(){var s=Gd(Ei)[0],a=Vn().memoizedState;return[typeof s=="boolean"?s:kc(s),a]},useSyncExternalStore:Lb,useId:pv,useHostTransitionStatus:Jp,useFormState:Zb,useActionState:Zb,useOptimistic:function(s,a){var l=Vn();return $b(l,en,s,a)},useMemoCache:Up,useCacheRefresh:mv};tm.useEffectEvent=sv;var vv={readContext:hs,use:Yd,useCallback:lv,useContext:hs,useEffect:Qp,useImperativeHandle:ov,useInsertionEffect:rv,useLayoutEffect:iv,useMemo:cv,useReducer:qp,useRef:tv,useState:function(){return qp(Ei)},useDebugValue:Kp,useDeferredValue:function(s,a){var l=Vn();return en===null?Xp(l,s,a):uv(l,en.memoizedState,s,a)},useTransition:function(){var s=qp(Ei)[0],a=Vn().memoizedState;return[typeof s=="boolean"?s:kc(s),a]},useSyncExternalStore:Lb,useId:pv,useHostTransitionStatus:Jp,useFormState:ev,useActionState:ev,useOptimistic:function(s,a){var l=Vn();return en!==null?$b(l,en,s,a):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Up,useCacheRefresh:mv};vv.useEffectEvent=sv;function nm(s,a,l,u){a=s.memoizedState,l=l(u,a),l=l==null?a:b({},a,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var sm={enqueueSetState:function(s,a,l){s=s._reactInternals;var u=sr(),p=na(u);p.payload=a,l!=null&&(p.callback=l),a=sa(s,p,u),a!==null&&(Ns(a,s,u),wc(a,s,u))},enqueueReplaceState:function(s,a,l){s=s._reactInternals;var u=sr(),p=na(u);p.tag=1,p.payload=a,l!=null&&(p.callback=l),a=sa(s,p,u),a!==null&&(Ns(a,s,u),wc(a,s,u))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var l=sr(),u=na(l);u.tag=2,a!=null&&(u.callback=a),a=sa(s,u,l),a!==null&&(Ns(a,s,l),wc(a,s,l))}};function Sv(s,a,l,u,p,x,D){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,x,D):a.prototype&&a.prototype.isPureReactComponent?!pc(l,u)||!pc(p,x):!0}function wv(s,a,l,u){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,u),a.state!==s&&sm.enqueueReplaceState(a,a.state,null)}function so(s,a){var l=a;if("ref"in a){l={};for(var u in a)u!=="ref"&&(l[u]=a[u])}if(s=s.defaultProps){l===a&&(l=b({},l));for(var p in s)l[p]===void 0&&(l[p]=s[p])}return l}function jv(s){Md(s)}function Cv(s){console.error(s)}function Tv(s){Md(s)}function Zd(s,a){try{var l=s.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function kv(s,a,l){try{var u=s.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function rm(s,a,l){return l=na(l),l.tag=3,l.payload={element:null},l.callback=function(){Zd(s,a)},l}function Ev(s){return s=na(s),s.tag=3,s}function Dv(s,a,l,u){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var x=u.value;s.payload=function(){return p(x)},s.callback=function(){kv(a,l,u)}}var D=l.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(s.callback=function(){kv(a,l,u),typeof p!="function"&&(ca===null?ca=new Set([this]):ca.add(this));var _=u.stack;this.componentDidCatch(u.value,{componentStack:_!==null?_:""})})}function dA(s,a,l,u,p){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=l.alternate,a!==null&&Zo(a,l,p,!0),l=Js.current,l!==null){switch(l.tag){case 31:case 13:return Sr===null?df():l.alternate===null&&_n===0&&(_n=3),l.flags&=-257,l.flags|=65536,l.lanes=p,u===Ld?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([u]):a.add(u),Mm(s,u,p)),!1;case 22:return l.flags|=65536,u===Ld?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([u]):l.add(u)),Mm(s,u,p)),!1}throw Error(i(435,l.tag))}return Mm(s,u,p),df(),!1}if(Wt)return a=Js.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,u!==jp&&(s=Error(i(422),{cause:u}),xc(xr(s,l)))):(u!==jp&&(a=Error(i(423),{cause:u}),xc(xr(a,l))),s=s.current.alternate,s.flags|=65536,p&=-p,s.lanes|=p,u=xr(u,l),p=rm(s.stateNode,u,p),Ip(s,p),_n!==4&&(_n=2)),!1;var x=Error(i(520),{cause:u});if(x=xr(x,l),_c===null?_c=[x]:_c.push(x),_n!==4&&(_n=2),a===null)return!0;u=xr(u,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,s=p&-p,l.lanes|=s,s=rm(l.stateNode,u,s),Ip(l,s),!1;case 1:if(a=l.type,x=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ca===null||!ca.has(x))))return l.flags|=65536,p&=-p,l.lanes|=p,p=Ev(p),Dv(p,s,l,u),Ip(l,p),!1}l=l.return}while(l!==null);return!1}var im=Error(i(461)),Jn=!1;function ps(s,a,l,u){a.child=s===null?Pb(a,null,l,u):to(a,s.child,l,u)}function Mv(s,a,l,u,p){l=l.render;var x=a.ref;if("ref"in u){var D={};for(var _ in u)_!=="ref"&&(D[_]=u[_])}else D=u;return Xa(a),u=Fp(s,a,l,D,x,p),_=Bp(),s!==null&&!Jn?(Vp(s,a,p),Di(s,a,p)):(Wt&&_&&Sp(a),a.flags|=1,ps(s,a,u,p),a.child)}function Av(s,a,l,u,p){if(s===null){var x=l.type;return typeof x=="function"&&!yp(x)&&x.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=x,Rv(s,a,x,u,p)):(s=Od(l.type,null,u,a,a.mode,p),s.ref=a.ref,s.return=a,a.child=s)}if(x=s.child,!hm(s,p)){var D=x.memoizedProps;if(l=l.compare,l=l!==null?l:pc,l(D,u)&&s.ref===a.ref)return Di(s,a,p)}return a.flags|=1,s=wi(x,u),s.ref=a.ref,s.return=a,a.child=s}function Rv(s,a,l,u,p){if(s!==null){var x=s.memoizedProps;if(pc(x,u)&&s.ref===a.ref)if(Jn=!1,a.pendingProps=u=x,hm(s,p))(s.flags&131072)!==0&&(Jn=!0);else return a.lanes=s.lanes,Di(s,a,p)}return am(s,a,l,u,p)}function Pv(s,a,l,u){var p=u.children,x=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(x=x!==null?x.baseLanes|l:l,s!==null){for(u=a.child=s.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~x}else u=0,a.child=null;return Ov(s,a,x,l,u)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&zd(a,x!==null?x.cachePool:null),x!==null?Wb(a,x):_p(),_b(a);else return u=a.lanes=536870912,Ov(s,a,x!==null?x.baseLanes|l:l,l,u)}else x!==null?(zd(a,x.cachePool),Wb(a,x),ia(),a.memoizedState=null):(s!==null&&zd(a,null),_p(),ia());return ps(s,a,p,l),a.child}function Mc(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Ov(s,a,l,u,p){var x=Ap();return x=x===null?null:{parent:Xn._currentValue,pool:x},a.memoizedState={baseLanes:l,cachePool:x},s!==null&&zd(a,null),_p(),_b(a),s!==null&&Zo(s,a,u,!0),a.childLanes=p,null}function Jd(s,a){return a=tf({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function Iv(s,a,l){return to(a,s.child,null,l),s=Jd(a,a.pendingProps),s.flags|=2,er(a),a.memoizedState=null,s}function fA(s,a,l){var u=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(Wt){if(u.mode==="hidden")return s=Jd(a,u),a.lanes=536870912,Mc(null,s);if(Np(a),(s=xn)?(s=qS(s,vr),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Xi!==null?{id:ti,overflow:ni}:null,retryLane:536870912,hydrationErrors:null},l=xb(s),l.return=a,a.child=l,fs=a,xn=null)):s=null,s===null)throw Ji(a);return a.lanes=536870912,null}return Jd(a,u)}var x=s.memoizedState;if(x!==null){var D=x.dehydrated;if(Np(a),p)if(a.flags&256)a.flags&=-257,a=Iv(s,a,l);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(i(558));else if(Jn||Zo(s,a,l,!1),p=(l&s.childLanes)!==0,Jn||p){if(u=an,u!==null&&(D=No(u,l),D!==0&&D!==x.retryLane))throw x.retryLane=D,Ya(s,D),Ns(u,s,D),im;df(),a=Iv(s,a,l)}else s=x.treeContext,xn=wr(D.nextSibling),fs=a,Wt=!0,Zi=null,vr=!1,s!==null&&vb(a,s),a=Jd(a,u),a.flags|=4096;return a}return s=wi(s.child,{mode:u.mode,children:u.children}),s.ref=a.ref,a.child=s,s.return=a,s}function ef(s,a){var l=a.ref;if(l===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(a.flags|=4194816)}}function am(s,a,l,u,p){return Xa(a),l=Fp(s,a,l,u,void 0,p),u=Bp(),s!==null&&!Jn?(Vp(s,a,p),Di(s,a,p)):(Wt&&u&&Sp(a),a.flags|=1,ps(s,a,l,p),a.child)}function Wv(s,a,l,u,p,x){return Xa(a),a.updateQueue=null,l=Nb(a,u,l,p),zb(s),u=Bp(),s!==null&&!Jn?(Vp(s,a,x),Di(s,a,x)):(Wt&&u&&Sp(a),a.flags|=1,ps(s,a,l,x),a.child)}function _v(s,a,l,u,p){if(Xa(a),a.stateNode===null){var x=Go,D=l.contextType;typeof D=="object"&&D!==null&&(x=hs(D)),x=new l(u,x),a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=sm,a.stateNode=x,x._reactInternals=a,x=a.stateNode,x.props=u,x.state=a.memoizedState,x.refs={},Pp(a),D=l.contextType,x.context=typeof D=="object"&&D!==null?hs(D):Go,x.state=a.memoizedState,D=l.getDerivedStateFromProps,typeof D=="function"&&(nm(a,l,D,u),x.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(D=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),D!==x.state&&sm.enqueueReplaceState(x,x.state,null),Cc(a,u,x,p),jc(),x.state=a.memoizedState),typeof x.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(s===null){x=a.stateNode;var _=a.memoizedProps,Q=so(l,_);x.props=Q;var pe=x.context,Ee=l.contextType;D=Go,typeof Ee=="object"&&Ee!==null&&(D=hs(Ee));var Oe=l.getDerivedStateFromProps;Ee=typeof Oe=="function"||typeof x.getSnapshotBeforeUpdate=="function",_=a.pendingProps!==_,Ee||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(_||pe!==D)&&wv(a,x,u,D),ta=!1;var xe=a.memoizedState;x.state=xe,Cc(a,u,x,p),jc(),pe=a.memoizedState,_||xe!==pe||ta?(typeof Oe=="function"&&(nm(a,l,Oe,u),pe=a.memoizedState),(Q=ta||Sv(a,l,Q,u,xe,pe,D))?(Ee||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=pe),x.props=u,x.state=pe,x.context=D,u=Q):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{x=a.stateNode,Op(s,a),D=a.memoizedProps,Ee=so(l,D),x.props=Ee,Oe=a.pendingProps,xe=x.context,pe=l.contextType,Q=Go,typeof pe=="object"&&pe!==null&&(Q=hs(pe)),_=l.getDerivedStateFromProps,(pe=typeof _=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(D!==Oe||xe!==Q)&&wv(a,x,u,Q),ta=!1,xe=a.memoizedState,x.state=xe,Cc(a,u,x,p),jc();var je=a.memoizedState;D!==Oe||xe!==je||ta||s!==null&&s.dependencies!==null&&Wd(s.dependencies)?(typeof _=="function"&&(nm(a,l,_,u),je=a.memoizedState),(Ee=ta||Sv(a,l,Ee,u,xe,je,Q)||s!==null&&s.dependencies!==null&&Wd(s.dependencies))?(pe||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(u,je,Q),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(u,je,Q)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||D===s.memoizedProps&&xe===s.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&xe===s.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=je),x.props=u,x.state=je,x.context=Q,u=Ee):(typeof x.componentDidUpdate!="function"||D===s.memoizedProps&&xe===s.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&xe===s.memoizedState||(a.flags|=1024),u=!1)}return x=u,ef(s,a),u=(a.flags&128)!==0,x||u?(x=a.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:x.render(),a.flags|=1,s!==null&&u?(a.child=to(a,s.child,null,p),a.child=to(a,null,l,p)):ps(s,a,l,p),a.memoizedState=x.state,s=a.child):s=Di(s,a,p),s}function zv(s,a,l,u){return Qa(),a.flags|=256,ps(s,a,l,u),a.child}var om={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lm(s){return{baseLanes:s,cachePool:kb()}}function cm(s,a,l){return s=s!==null?s.childLanes&~l:0,a&&(s|=nr),s}function Nv(s,a,l){var u=a.pendingProps,p=!1,x=(a.flags&128)!==0,D;if((D=x)||(D=s!==null&&s.memoizedState===null?!1:(Bn.current&2)!==0),D&&(p=!0,a.flags&=-129),D=(a.flags&32)!==0,a.flags&=-33,s===null){if(Wt){if(p?ra(a):ia(),(s=xn)?(s=qS(s,vr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Xi!==null?{id:ti,overflow:ni}:null,retryLane:536870912,hydrationErrors:null},l=xb(s),l.return=a,a.child=l,fs=a,xn=null)):s=null,s===null)throw Ji(a);return $m(s)?a.lanes=32:a.lanes=536870912,null}var _=u.children;return u=u.fallback,p?(ia(),p=a.mode,_=tf({mode:"hidden",children:_},p),u=Ga(u,p,l,null),_.return=a,u.return=a,_.sibling=u,a.child=_,u=a.child,u.memoizedState=lm(l),u.childLanes=cm(s,D,l),a.memoizedState=om,Mc(null,u)):(ra(a),um(a,_))}var Q=s.memoizedState;if(Q!==null&&(_=Q.dehydrated,_!==null)){if(x)a.flags&256?(ra(a),a.flags&=-257,a=dm(s,a,l)):a.memoizedState!==null?(ia(),a.child=s.child,a.flags|=128,a=null):(ia(),_=u.fallback,p=a.mode,u=tf({mode:"visible",children:u.children},p),_=Ga(_,p,l,null),_.flags|=2,u.return=a,_.return=a,u.sibling=_,a.child=u,to(a,s.child,null,l),u=a.child,u.memoizedState=lm(l),u.childLanes=cm(s,D,l),a.memoizedState=om,a=Mc(null,u));else if(ra(a),$m(_)){if(D=_.nextSibling&&_.nextSibling.dataset,D)var pe=D.dgst;D=pe,u=Error(i(419)),u.stack="",u.digest=D,xc({value:u,source:null,stack:null}),a=dm(s,a,l)}else if(Jn||Zo(s,a,l,!1),D=(l&s.childLanes)!==0,Jn||D){if(D=an,D!==null&&(u=No(D,l),u!==0&&u!==Q.retryLane))throw Q.retryLane=u,Ya(s,u),Ns(D,s,u),im;Um(_)||df(),a=dm(s,a,l)}else Um(_)?(a.flags|=192,a.child=s.child,a=null):(s=Q.treeContext,xn=wr(_.nextSibling),fs=a,Wt=!0,Zi=null,vr=!1,s!==null&&vb(a,s),a=um(a,u.children),a.flags|=4096);return a}return p?(ia(),_=u.fallback,p=a.mode,Q=s.child,pe=Q.sibling,u=wi(Q,{mode:"hidden",children:u.children}),u.subtreeFlags=Q.subtreeFlags&65011712,pe!==null?_=wi(pe,_):(_=Ga(_,p,l,null),_.flags|=2),_.return=a,u.return=a,u.sibling=_,a.child=u,Mc(null,u),u=a.child,_=s.child.memoizedState,_===null?_=lm(l):(p=_.cachePool,p!==null?(Q=Xn._currentValue,p=p.parent!==Q?{parent:Q,pool:Q}:p):p=kb(),_={baseLanes:_.baseLanes|l,cachePool:p}),u.memoizedState=_,u.childLanes=cm(s,D,l),a.memoizedState=om,Mc(s.child,u)):(ra(a),l=s.child,s=l.sibling,l=wi(l,{mode:"visible",children:u.children}),l.return=a,l.sibling=null,s!==null&&(D=a.deletions,D===null?(a.deletions=[s],a.flags|=16):D.push(s)),a.child=l,a.memoizedState=null,l)}function um(s,a){return a=tf({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function tf(s,a){return s=Zs(22,s,null,a),s.lanes=0,s}function dm(s,a,l){return to(a,s.child,null,l),s=um(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function Lv(s,a,l){s.lanes|=a;var u=s.alternate;u!==null&&(u.lanes|=a),kp(s.return,a,l)}function fm(s,a,l,u,p,x){var D=s.memoizedState;D===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:p,treeForkCount:x}:(D.isBackwards=a,D.rendering=null,D.renderingStartTime=0,D.last=u,D.tail=l,D.tailMode=p,D.treeForkCount=x)}function Fv(s,a,l){var u=a.pendingProps,p=u.revealOrder,x=u.tail;u=u.children;var D=Bn.current,_=(D&2)!==0;if(_?(D=D&1|2,a.flags|=128):D&=1,De(Bn,D),ps(s,a,u,l),u=Wt?gc:0,!_&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Lv(s,l,a);else if(s.tag===19)Lv(s,l,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(p){case"forwards":for(l=a.child,p=null;l!==null;)s=l.alternate,s!==null&&Hd(s)===null&&(p=l),l=l.sibling;l=p,l===null?(p=a.child,a.child=null):(p=l.sibling,l.sibling=null),fm(a,!1,p,l,x,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=a.child,a.child=null;p!==null;){if(s=p.alternate,s!==null&&Hd(s)===null){a.child=p;break}s=p.sibling,p.sibling=l,l=p,p=s}fm(a,!0,l,null,x,u);break;case"together":fm(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function Di(s,a,l){if(s!==null&&(a.dependencies=s.dependencies),la|=a.lanes,(l&a.childLanes)===0)if(s!==null){if(Zo(s,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,l=wi(s,s.pendingProps),a.child=l,l.return=a;s.sibling!==null;)s=s.sibling,l=l.sibling=wi(s,s.pendingProps),l.return=a;l.sibling=null}return a.child}function hm(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Wd(s)))}function hA(s,a,l){switch(a.tag){case 3:te(a,a.stateNode.containerInfo),ea(a,Xn,s.memoizedState.cache),Qa();break;case 27:case 5:Se(a);break;case 4:te(a,a.stateNode.containerInfo);break;case 10:ea(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Np(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(ra(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Nv(s,a,l):(ra(a),s=Di(s,a,l),s!==null?s.sibling:null);ra(a);break;case 19:var p=(s.flags&128)!==0;if(u=(l&a.childLanes)!==0,u||(Zo(s,a,l,!1),u=(l&a.childLanes)!==0),p){if(u)return Fv(s,a,l);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),De(Bn,Bn.current),u)break;return null;case 22:return a.lanes=0,Pv(s,a,l,a.pendingProps);case 24:ea(a,Xn,s.memoizedState.cache)}return Di(s,a,l)}function Bv(s,a,l){if(s!==null)if(s.memoizedProps!==a.pendingProps)Jn=!0;else{if(!hm(s,l)&&(a.flags&128)===0)return Jn=!1,hA(s,a,l);Jn=(s.flags&131072)!==0}else Jn=!1,Wt&&(a.flags&1048576)!==0&&bb(a,gc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(s=Ja(a.elementType),a.type=s,typeof s=="function")yp(s)?(u=so(s,u),a.tag=1,a=_v(null,a,s,u,l)):(a.tag=0,a=am(null,a,s,u,l));else{if(s!=null){var p=s.$$typeof;if(p===O){a.tag=11,a=Mv(null,a,s,u,l);break e}else if(p===W){a.tag=14,a=Av(null,a,s,u,l);break e}}throw a=H(s)||s,Error(i(306,a,""))}}return a;case 0:return am(s,a,a.type,a.pendingProps,l);case 1:return u=a.type,p=so(u,a.pendingProps),_v(s,a,u,p,l);case 3:e:{if(te(a,a.stateNode.containerInfo),s===null)throw Error(i(387));u=a.pendingProps;var x=a.memoizedState;p=x.element,Op(s,a),Cc(a,u,null,l);var D=a.memoizedState;if(u=D.cache,ea(a,Xn,u),u!==x.cache&&Ep(a,[Xn],l,!0),jc(),u=D.element,x.isDehydrated)if(x={element:u,isDehydrated:!1,cache:D.cache},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){a=zv(s,a,u,l);break e}else if(u!==p){p=xr(Error(i(424)),a),xc(p),a=zv(s,a,u,l);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(xn=wr(s.firstChild),fs=a,Wt=!0,Zi=null,vr=!0,l=Pb(a,null,u,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Qa(),u===p){a=Di(s,a,l);break e}ps(s,a,u,l)}a=a.child}return a;case 26:return ef(s,a),s===null?(l=ZS(a.type,null,a.pendingProps,null))?a.memoizedState=l:Wt||(l=a.type,s=a.pendingProps,u=yf(ae.current).createElement(l),u[In]=a,u[Kn]=s,ms(u,l,s),pn(u),a.stateNode=u):a.memoizedState=ZS(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Se(a),s===null&&Wt&&(u=a.stateNode=QS(a.type,a.pendingProps,ae.current),fs=a,vr=!0,p=xn,ha(a.type)?(qm=p,xn=wr(u.firstChild)):xn=p),ps(s,a,a.pendingProps.children,l),ef(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&Wt&&((p=u=xn)&&(u=HA(u,a.type,a.pendingProps,vr),u!==null?(a.stateNode=u,fs=a,xn=wr(u.firstChild),vr=!1,p=!0):p=!1),p||Ji(a)),Se(a),p=a.type,x=a.pendingProps,D=s!==null?s.memoizedProps:null,u=x.children,Bm(p,x)?u=null:D!==null&&Bm(p,D)&&(a.flags|=32),a.memoizedState!==null&&(p=Fp(s,a,rA,null,null,l),Uc._currentValue=p),ef(s,a),ps(s,a,u,l),a.child;case 6:return s===null&&Wt&&((s=l=xn)&&(l=UA(l,a.pendingProps,vr),l!==null?(a.stateNode=l,fs=a,xn=null,s=!0):s=!1),s||Ji(a)),null;case 13:return Nv(s,a,l);case 4:return te(a,a.stateNode.containerInfo),u=a.pendingProps,s===null?a.child=to(a,null,u,l):ps(s,a,u,l),a.child;case 11:return Mv(s,a,a.type,a.pendingProps,l);case 7:return ps(s,a,a.pendingProps,l),a.child;case 8:return ps(s,a,a.pendingProps.children,l),a.child;case 12:return ps(s,a,a.pendingProps.children,l),a.child;case 10:return u=a.pendingProps,ea(a,a.type,u.value),ps(s,a,u.children,l),a.child;case 9:return p=a.type._context,u=a.pendingProps.children,Xa(a),p=hs(p),u=u(p),a.flags|=1,ps(s,a,u,l),a.child;case 14:return Av(s,a,a.type,a.pendingProps,l);case 15:return Rv(s,a,a.type,a.pendingProps,l);case 19:return Fv(s,a,l);case 31:return fA(s,a,l);case 22:return Pv(s,a,l,a.pendingProps);case 24:return Xa(a),u=hs(Xn),s===null?(p=Ap(),p===null&&(p=an,x=Dp(),p.pooledCache=x,x.refCount++,x!==null&&(p.pooledCacheLanes|=l),p=x),a.memoizedState={parent:u,cache:p},Pp(a),ea(a,Xn,p)):((s.lanes&l)!==0&&(Op(s,a),Cc(a,null,null,l),jc()),p=s.memoizedState,x=a.memoizedState,p.parent!==u?(p={parent:u,cache:u},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),ea(a,Xn,u)):(u=x.cache,ea(a,Xn,u),u!==p.cache&&Ep(a,[Xn],l,!0))),ps(s,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Mi(s){s.flags|=4}function pm(s,a,l,u,p){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(p&335544128)===p)if(s.stateNode.complete)s.flags|=8192;else if(pS())s.flags|=8192;else throw eo=Ld,Rp}else s.flags&=-16777217}function Vv(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!sw(a))if(pS())s.flags|=8192;else throw eo=Ld,Rp}function nf(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?hn():536870912,s.lanes|=a,ul|=a)}function Ac(s,a){if(!Wt)switch(s.tailMode){case"hidden":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function yn(s){var a=s.alternate!==null&&s.alternate.child===s.child,l=0,u=0;if(a)for(var p=s.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=u,s.childLanes=l,a}function pA(s,a,l){var u=a.pendingProps;switch(wp(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yn(a),null;case 1:return yn(a),null;case 3:return l=a.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Ti(Xn),ye(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Xo(a)?Mi(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Cp())),yn(a),null;case 26:var p=a.type,x=a.memoizedState;return s===null?(Mi(a),x!==null?(yn(a),Vv(a,x)):(yn(a),pm(a,p,null,u,l))):x?x!==s.memoizedState?(Mi(a),yn(a),Vv(a,x)):(yn(a),a.flags&=-16777217):(s=s.memoizedProps,s!==u&&Mi(a),yn(a),pm(a,p,s,u,l)),null;case 27:if(Y(a),l=ae.current,p=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==u&&Mi(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return yn(a),null}s=ee.current,Xo(a)?Sb(a):(s=QS(p,u,l),a.stateNode=s,Mi(a))}return yn(a),null;case 5:if(Y(a),p=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==u&&Mi(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return yn(a),null}if(x=ee.current,Xo(a))Sb(a);else{var D=yf(ae.current);switch(x){case 1:x=D.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:x=D.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":x=D.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":x=D.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":x=D.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof u.is=="string"?D.createElement("select",{is:u.is}):D.createElement("select"),u.multiple?x.multiple=!0:u.size&&(x.size=u.size);break;default:x=typeof u.is=="string"?D.createElement(p,{is:u.is}):D.createElement(p)}}x[In]=a,x[Kn]=u;e:for(D=a.child;D!==null;){if(D.tag===5||D.tag===6)x.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===a)break e;for(;D.sibling===null;){if(D.return===null||D.return===a)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}a.stateNode=x;e:switch(ms(x,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Mi(a)}}return yn(a),pm(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,l),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==u&&Mi(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(i(166));if(s=ae.current,Xo(a)){if(s=a.stateNode,l=a.memoizedProps,u=null,p=fs,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}s[In]=a,s=!!(s.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||NS(s.nodeValue,l)),s||Ji(a,!0)}else s=yf(s).createTextNode(u),s[In]=a,a.stateNode=s}return yn(a),null;case 31:if(l=a.memoizedState,s===null||s.memoizedState!==null){if(u=Xo(a),l!==null){if(s===null){if(!u)throw Error(i(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[In]=a}else Qa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;yn(a),s=!1}else l=Cp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return a.flags&256?(er(a),a):(er(a),null);if((a.flags&128)!==0)throw Error(i(558))}return yn(a),null;case 13:if(u=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(p=Xo(a),u!==null&&u.dehydrated!==null){if(s===null){if(!p)throw Error(i(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[In]=a}else Qa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;yn(a),p=!1}else p=Cp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(er(a),a):(er(a),null)}return er(a),(a.flags&128)!==0?(a.lanes=l,a):(l=u!==null,s=s!==null&&s.memoizedState!==null,l&&(u=a.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),x=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(x=u.memoizedState.cachePool.pool),x!==p&&(u.flags|=2048)),l!==s&&l&&(a.child.flags|=8192),nf(a,a.updateQueue),yn(a),null);case 4:return ye(),s===null&&_m(a.stateNode.containerInfo),yn(a),null;case 10:return Ti(a.type),yn(a),null;case 19:if(Te(Bn),u=a.memoizedState,u===null)return yn(a),null;if(p=(a.flags&128)!==0,x=u.rendering,x===null)if(p)Ac(u,!1);else{if(_n!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(x=Hd(s),x!==null){for(a.flags|=128,Ac(u,!1),s=x.updateQueue,a.updateQueue=s,nf(a,s),a.subtreeFlags=0,s=l,l=a.child;l!==null;)gb(l,s),l=l.sibling;return De(Bn,Bn.current&1|2),Wt&&ji(a,u.treeForkCount),a.child}s=s.sibling}u.tail!==null&&We()>lf&&(a.flags|=128,p=!0,Ac(u,!1),a.lanes=4194304)}else{if(!p)if(s=Hd(x),s!==null){if(a.flags|=128,p=!0,s=s.updateQueue,a.updateQueue=s,nf(a,s),Ac(u,!0),u.tail===null&&u.tailMode==="hidden"&&!x.alternate&&!Wt)return yn(a),null}else 2*We()-u.renderingStartTime>lf&&l!==536870912&&(a.flags|=128,p=!0,Ac(u,!1),a.lanes=4194304);u.isBackwards?(x.sibling=a.child,a.child=x):(s=u.last,s!==null?s.sibling=x:a.child=x,u.last=x)}return u.tail!==null?(s=u.tail,u.rendering=s,u.tail=s.sibling,u.renderingStartTime=We(),s.sibling=null,l=Bn.current,De(Bn,p?l&1|2:l&1),Wt&&ji(a,u.treeForkCount),s):(yn(a),null);case 22:case 23:return er(a),zp(),u=a.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(l&536870912)!==0&&(a.flags&128)===0&&(yn(a),a.subtreeFlags&6&&(a.flags|=8192)):yn(a),l=a.updateQueue,l!==null&&nf(a,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==l&&(a.flags|=2048),s!==null&&Te(Za),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ti(Xn),yn(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function mA(s,a){switch(wp(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Ti(Xn),ye(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Y(a),null;case 31:if(a.memoizedState!==null){if(er(a),a.alternate===null)throw Error(i(340));Qa()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(er(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Qa()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Te(Bn),null;case 4:return ye(),null;case 10:return Ti(a.type),null;case 22:case 23:return er(a),zp(),s!==null&&Te(Za),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Ti(Xn),null;case 25:return null;default:return null}}function Hv(s,a){switch(wp(a),a.tag){case 3:Ti(Xn),ye();break;case 26:case 27:case 5:Y(a);break;case 4:ye();break;case 31:a.memoizedState!==null&&er(a);break;case 13:er(a);break;case 19:Te(Bn);break;case 10:Ti(a.type);break;case 22:case 23:er(a),zp(),s!==null&&Te(Za);break;case 24:Ti(Xn)}}function Rc(s,a){try{var l=a.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var p=u.next;l=p;do{if((l.tag&s)===s){u=void 0;var x=l.create,D=l.inst;u=x(),D.destroy=u}l=l.next}while(l!==p)}}catch(_){Gt(a,a.return,_)}}function aa(s,a,l){try{var u=a.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var x=p.next;u=x;do{if((u.tag&s)===s){var D=u.inst,_=D.destroy;if(_!==void 0){D.destroy=void 0,p=a;var Q=l,pe=_;try{pe()}catch(Ee){Gt(p,Q,Ee)}}}u=u.next}while(u!==x)}}catch(Ee){Gt(a,a.return,Ee)}}function Uv(s){var a=s.updateQueue;if(a!==null){var l=s.stateNode;try{Ib(a,l)}catch(u){Gt(s,s.return,u)}}}function $v(s,a,l){l.props=so(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(u){Gt(s,a,u)}}function Pc(s,a){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof l=="function"?s.refCleanup=l(u):l.current=u}}catch(p){Gt(s,a,p)}}function si(s,a){var l=s.ref,u=s.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(p){Gt(s,a,p)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){Gt(s,a,p)}else l.current=null}function qv(s){var a=s.type,l=s.memoizedProps,u=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(p){Gt(s,s.return,p)}}function mm(s,a,l){try{var u=s.stateNode;zA(u,s.type,l,a),u[Kn]=a}catch(p){Gt(s,s.return,p)}}function Yv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ha(s.type)||s.tag===4}function gm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Yv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ha(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function xm(s,a,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(s),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=vi));else if(u!==4&&(u===27&&ha(s.type)&&(l=s.stateNode,a=null),s=s.child,s!==null))for(xm(s,a,l),s=s.sibling;s!==null;)xm(s,a,l),s=s.sibling}function sf(s,a,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?l.insertBefore(s,a):l.appendChild(s);else if(u!==4&&(u===27&&ha(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(sf(s,a,l),s=s.sibling;s!==null;)sf(s,a,l),s=s.sibling}function Gv(s){var a=s.stateNode,l=s.memoizedProps;try{for(var u=s.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);ms(a,u,l),a[In]=s,a[Kn]=l}catch(x){Gt(s,s.return,x)}}var Ai=!1,es=!1,ym=!1,Qv=typeof WeakSet=="function"?WeakSet:Set,ls=null;function gA(s,a){if(s=s.containerInfo,Lm=Tf,s=ob(s),dp(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var p=u.anchorOffset,x=u.focusNode;u=u.focusOffset;try{l.nodeType,x.nodeType}catch{l=null;break e}var D=0,_=-1,Q=-1,pe=0,Ee=0,Oe=s,xe=null;t:for(;;){for(var je;Oe!==l||p!==0&&Oe.nodeType!==3||(_=D+p),Oe!==x||u!==0&&Oe.nodeType!==3||(Q=D+u),Oe.nodeType===3&&(D+=Oe.nodeValue.length),(je=Oe.firstChild)!==null;)xe=Oe,Oe=je;for(;;){if(Oe===s)break t;if(xe===l&&++pe===p&&(_=D),xe===x&&++Ee===u&&(Q=D),(je=Oe.nextSibling)!==null)break;Oe=xe,xe=Oe.parentNode}Oe=je}l=_===-1||Q===-1?null:{start:_,end:Q}}else l=null}l=l||{start:0,end:0}}else l=null;for(Fm={focusedElem:s,selectionRange:l},Tf=!1,ls=a;ls!==null;)if(a=ls,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,ls=s;else for(;ls!==null;){switch(a=ls,x=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)p=s[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&x!==null){s=void 0,l=a,p=x.memoizedProps,x=x.memoizedState,u=l.stateNode;try{var Ye=so(l.type,p);s=u.getSnapshotBeforeUpdate(Ye,x),u.__reactInternalSnapshotBeforeUpdate=s}catch(dt){Gt(l,l.return,dt)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,l=s.nodeType,l===9)Hm(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Hm(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,ls=s;break}ls=a.return}}function Kv(s,a,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Pi(s,l),u&4&&Rc(5,l);break;case 1:if(Pi(s,l),u&4)if(s=l.stateNode,a===null)try{s.componentDidMount()}catch(D){Gt(l,l.return,D)}else{var p=so(l.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(p,a,s.__reactInternalSnapshotBeforeUpdate)}catch(D){Gt(l,l.return,D)}}u&64&&Uv(l),u&512&&Pc(l,l.return);break;case 3:if(Pi(s,l),u&64&&(s=l.updateQueue,s!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{Ib(s,a)}catch(D){Gt(l,l.return,D)}}break;case 27:a===null&&u&4&&Gv(l);case 26:case 5:Pi(s,l),a===null&&u&4&&qv(l),u&512&&Pc(l,l.return);break;case 12:Pi(s,l);break;case 31:Pi(s,l),u&4&&Jv(s,l);break;case 13:Pi(s,l),u&4&&eS(s,l),u&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=TA.bind(null,l),$A(s,l))));break;case 22:if(u=l.memoizedState!==null||Ai,!u){a=a!==null&&a.memoizedState!==null||es,p=Ai;var x=es;Ai=u,(es=a)&&!x?Oi(s,l,(l.subtreeFlags&8772)!==0):Pi(s,l),Ai=p,es=x}break;case 30:break;default:Pi(s,l)}}function Xv(s){var a=s.alternate;a!==null&&(s.alternate=null,Xv(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Ba(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Tn=null,Is=!1;function Ri(s,a,l){for(l=l.child;l!==null;)Zv(s,a,l),l=l.sibling}function Zv(s,a,l){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(yt,l)}catch{}switch(l.tag){case 26:es||si(l,a),Ri(s,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:es||si(l,a);var u=Tn,p=Is;ha(l.type)&&(Tn=l.stateNode,Is=!1),Ri(s,a,l),Bc(l.stateNode),Tn=u,Is=p;break;case 5:es||si(l,a);case 6:if(u=Tn,p=Is,Tn=null,Ri(s,a,l),Tn=u,Is=p,Tn!==null)if(Is)try{(Tn.nodeType===9?Tn.body:Tn.nodeName==="HTML"?Tn.ownerDocument.body:Tn).removeChild(l.stateNode)}catch(x){Gt(l,a,x)}else try{Tn.removeChild(l.stateNode)}catch(x){Gt(l,a,x)}break;case 18:Tn!==null&&(Is?(s=Tn,US(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),yl(s)):US(Tn,l.stateNode));break;case 4:u=Tn,p=Is,Tn=l.stateNode.containerInfo,Is=!0,Ri(s,a,l),Tn=u,Is=p;break;case 0:case 11:case 14:case 15:aa(2,l,a),es||aa(4,l,a),Ri(s,a,l);break;case 1:es||(si(l,a),u=l.stateNode,typeof u.componentWillUnmount=="function"&&$v(l,a,u)),Ri(s,a,l);break;case 21:Ri(s,a,l);break;case 22:es=(u=es)||l.memoizedState!==null,Ri(s,a,l),es=u;break;default:Ri(s,a,l)}}function Jv(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{yl(s)}catch(l){Gt(a,a.return,l)}}}function eS(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{yl(s)}catch(l){Gt(a,a.return,l)}}function xA(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Qv),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Qv),a;default:throw Error(i(435,s.tag))}}function rf(s,a){var l=xA(s);a.forEach(function(u){if(!l.has(u)){l.add(u);var p=kA.bind(null,s,u);u.then(p,p)}})}function Ws(s,a){var l=a.deletions;if(l!==null)for(var u=0;u<l.length;u++){var p=l[u],x=s,D=a,_=D;e:for(;_!==null;){switch(_.tag){case 27:if(ha(_.type)){Tn=_.stateNode,Is=!1;break e}break;case 5:Tn=_.stateNode,Is=!1;break e;case 3:case 4:Tn=_.stateNode.containerInfo,Is=!0;break e}_=_.return}if(Tn===null)throw Error(i(160));Zv(x,D,p),Tn=null,Is=!1,x=p.alternate,x!==null&&(x.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)tS(a,s),a=a.sibling}var Nr=null;function tS(s,a){var l=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ws(a,s),_s(s),u&4&&(aa(3,s,s.return),Rc(3,s),aa(5,s,s.return));break;case 1:Ws(a,s),_s(s),u&512&&(es||l===null||si(l,l.return)),u&64&&Ai&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var p=Nr;if(Ws(a,s),_s(s),u&512&&(es||l===null||si(l,l.return)),u&4){var x=l!==null?l.memoizedState:null;if(u=s.memoizedState,l===null)if(u===null)if(s.stateNode===null){e:{u=s.type,l=s.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":x=p.getElementsByTagName("title")[0],(!x||x[Xr]||x[In]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=p.createElement(u),p.head.insertBefore(x,p.querySelector("head > title"))),ms(x,u,l),x[In]=s,pn(x),u=x;break e;case"link":var D=tw("link","href",p).get(u+(l.href||""));if(D){for(var _=0;_<D.length;_++)if(x=D[_],x.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&x.getAttribute("rel")===(l.rel==null?null:l.rel)&&x.getAttribute("title")===(l.title==null?null:l.title)&&x.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){D.splice(_,1);break t}}x=p.createElement(u),ms(x,u,l),p.head.appendChild(x);break;case"meta":if(D=tw("meta","content",p).get(u+(l.content||""))){for(_=0;_<D.length;_++)if(x=D[_],x.getAttribute("content")===(l.content==null?null:""+l.content)&&x.getAttribute("name")===(l.name==null?null:l.name)&&x.getAttribute("property")===(l.property==null?null:l.property)&&x.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&x.getAttribute("charset")===(l.charSet==null?null:l.charSet)){D.splice(_,1);break t}}x=p.createElement(u),ms(x,u,l),p.head.appendChild(x);break;default:throw Error(i(468,u))}x[In]=s,pn(x),u=x}s.stateNode=u}else nw(p,s.type,s.stateNode);else s.stateNode=ew(p,u,s.memoizedProps);else x!==u?(x===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):x.count--,u===null?nw(p,s.type,s.stateNode):ew(p,u,s.memoizedProps)):u===null&&s.stateNode!==null&&mm(s,s.memoizedProps,l.memoizedProps)}break;case 27:Ws(a,s),_s(s),u&512&&(es||l===null||si(l,l.return)),l!==null&&u&4&&mm(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Ws(a,s),_s(s),u&512&&(es||l===null||si(l,l.return)),s.flags&32){p=s.stateNode;try{Cn(p,"")}catch(Ye){Gt(s,s.return,Ye)}}u&4&&s.stateNode!=null&&(p=s.memoizedProps,mm(s,p,l!==null?l.memoizedProps:p)),u&1024&&(ym=!0);break;case 6:if(Ws(a,s),_s(s),u&4){if(s.stateNode===null)throw Error(i(162));u=s.memoizedProps,l=s.stateNode;try{l.nodeValue=u}catch(Ye){Gt(s,s.return,Ye)}}break;case 3:if(Sf=null,p=Nr,Nr=bf(a.containerInfo),Ws(a,s),Nr=p,_s(s),u&4&&l!==null&&l.memoizedState.isDehydrated)try{yl(a.containerInfo)}catch(Ye){Gt(s,s.return,Ye)}ym&&(ym=!1,nS(s));break;case 4:u=Nr,Nr=bf(s.stateNode.containerInfo),Ws(a,s),_s(s),Nr=u;break;case 12:Ws(a,s),_s(s);break;case 31:Ws(a,s),_s(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,rf(s,u)));break;case 13:Ws(a,s),_s(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(of=We()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,rf(s,u)));break;case 22:p=s.memoizedState!==null;var Q=l!==null&&l.memoizedState!==null,pe=Ai,Ee=es;if(Ai=pe||p,es=Ee||Q,Ws(a,s),es=Ee,Ai=pe,_s(s),u&8192)e:for(a=s.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(l===null||Q||Ai||es||ro(s)),l=null,a=s;;){if(a.tag===5||a.tag===26){if(l===null){Q=l=a;try{if(x=Q.stateNode,p)D=x.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{_=Q.stateNode;var Oe=Q.memoizedProps.style,xe=Oe!=null&&Oe.hasOwnProperty("display")?Oe.display:null;_.style.display=xe==null||typeof xe=="boolean"?"":(""+xe).trim()}}catch(Ye){Gt(Q,Q.return,Ye)}}}else if(a.tag===6){if(l===null){Q=a;try{Q.stateNode.nodeValue=p?"":Q.memoizedProps}catch(Ye){Gt(Q,Q.return,Ye)}}}else if(a.tag===18){if(l===null){Q=a;try{var je=Q.stateNode;p?$S(je,!0):$S(Q.stateNode,!1)}catch(Ye){Gt(Q,Q.return,Ye)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=s.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,rf(s,l))));break;case 19:Ws(a,s),_s(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,rf(s,u)));break;case 30:break;case 21:break;default:Ws(a,s),_s(s)}}function _s(s){var a=s.flags;if(a&2){try{for(var l,u=s.return;u!==null;){if(Yv(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var p=l.stateNode,x=gm(s);sf(s,x,p);break;case 5:var D=l.stateNode;l.flags&32&&(Cn(D,""),l.flags&=-33);var _=gm(s);sf(s,_,D);break;case 3:case 4:var Q=l.stateNode.containerInfo,pe=gm(s);xm(s,pe,Q);break;default:throw Error(i(161))}}catch(Ee){Gt(s,s.return,Ee)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function nS(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;nS(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function Pi(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Kv(s,a.alternate,a),a=a.sibling}function ro(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:aa(4,a,a.return),ro(a);break;case 1:si(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&$v(a,a.return,l),ro(a);break;case 27:Bc(a.stateNode);case 26:case 5:si(a,a.return),ro(a);break;case 22:a.memoizedState===null&&ro(a);break;case 30:ro(a);break;default:ro(a)}s=s.sibling}}function Oi(s,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,p=s,x=a,D=x.flags;switch(x.tag){case 0:case 11:case 15:Oi(p,x,l),Rc(4,x);break;case 1:if(Oi(p,x,l),u=x,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(pe){Gt(u,u.return,pe)}if(u=x,p=u.updateQueue,p!==null){var _=u.stateNode;try{var Q=p.shared.hiddenCallbacks;if(Q!==null)for(p.shared.hiddenCallbacks=null,p=0;p<Q.length;p++)Ob(Q[p],_)}catch(pe){Gt(u,u.return,pe)}}l&&D&64&&Uv(x),Pc(x,x.return);break;case 27:Gv(x);case 26:case 5:Oi(p,x,l),l&&u===null&&D&4&&qv(x),Pc(x,x.return);break;case 12:Oi(p,x,l);break;case 31:Oi(p,x,l),l&&D&4&&Jv(p,x);break;case 13:Oi(p,x,l),l&&D&4&&eS(p,x);break;case 22:x.memoizedState===null&&Oi(p,x,l),Pc(x,x.return);break;case 30:break;default:Oi(p,x,l)}a=a.sibling}}function bm(s,a){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&yc(l))}function vm(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&yc(s))}function Lr(s,a,l,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)sS(s,a,l,u),a=a.sibling}function sS(s,a,l,u){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Lr(s,a,l,u),p&2048&&Rc(9,a);break;case 1:Lr(s,a,l,u);break;case 3:Lr(s,a,l,u),p&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&yc(s)));break;case 12:if(p&2048){Lr(s,a,l,u),s=a.stateNode;try{var x=a.memoizedProps,D=x.id,_=x.onPostCommit;typeof _=="function"&&_(D,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(Q){Gt(a,a.return,Q)}}else Lr(s,a,l,u);break;case 31:Lr(s,a,l,u);break;case 13:Lr(s,a,l,u);break;case 23:break;case 22:x=a.stateNode,D=a.alternate,a.memoizedState!==null?x._visibility&2?Lr(s,a,l,u):Oc(s,a):x._visibility&2?Lr(s,a,l,u):(x._visibility|=2,ol(s,a,l,u,(a.subtreeFlags&10256)!==0||!1)),p&2048&&bm(D,a);break;case 24:Lr(s,a,l,u),p&2048&&vm(a.alternate,a);break;default:Lr(s,a,l,u)}}function ol(s,a,l,u,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var x=s,D=a,_=l,Q=u,pe=D.flags;switch(D.tag){case 0:case 11:case 15:ol(x,D,_,Q,p),Rc(8,D);break;case 23:break;case 22:var Ee=D.stateNode;D.memoizedState!==null?Ee._visibility&2?ol(x,D,_,Q,p):Oc(x,D):(Ee._visibility|=2,ol(x,D,_,Q,p)),p&&pe&2048&&bm(D.alternate,D);break;case 24:ol(x,D,_,Q,p),p&&pe&2048&&vm(D.alternate,D);break;default:ol(x,D,_,Q,p)}a=a.sibling}}function Oc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=s,u=a,p=u.flags;switch(u.tag){case 22:Oc(l,u),p&2048&&bm(u.alternate,u);break;case 24:Oc(l,u),p&2048&&vm(u.alternate,u);break;default:Oc(l,u)}a=a.sibling}}var Ic=8192;function ll(s,a,l){if(s.subtreeFlags&Ic)for(s=s.child;s!==null;)rS(s,a,l),s=s.sibling}function rS(s,a,l){switch(s.tag){case 26:ll(s,a,l),s.flags&Ic&&s.memoizedState!==null&&sR(l,Nr,s.memoizedState,s.memoizedProps);break;case 5:ll(s,a,l);break;case 3:case 4:var u=Nr;Nr=bf(s.stateNode.containerInfo),ll(s,a,l),Nr=u;break;case 22:s.memoizedState===null&&(u=s.alternate,u!==null&&u.memoizedState!==null?(u=Ic,Ic=16777216,ll(s,a,l),Ic=u):ll(s,a,l));break;default:ll(s,a,l)}}function iS(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Wc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];ls=u,oS(u,s)}iS(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)aS(s),s=s.sibling}function aS(s){switch(s.tag){case 0:case 11:case 15:Wc(s),s.flags&2048&&aa(9,s,s.return);break;case 3:Wc(s);break;case 12:Wc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,af(s)):Wc(s);break;default:Wc(s)}}function af(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];ls=u,oS(u,s)}iS(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:aa(8,a,a.return),af(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,af(a));break;default:af(a)}s=s.sibling}}function oS(s,a){for(;ls!==null;){var l=ls;switch(l.tag){case 0:case 11:case 15:aa(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:yc(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,ls=u;else e:for(l=s;ls!==null;){u=ls;var p=u.sibling,x=u.return;if(Xv(u),u===l){ls=null;break e}if(p!==null){p.return=x,ls=p;break e}ls=x}}}var yA={getCacheForType:function(s){var a=hs(Xn),l=a.data.get(s);return l===void 0&&(l=s(),a.data.set(s,l)),l},cacheSignal:function(){return hs(Xn).controller.signal}},bA=typeof WeakMap=="function"?WeakMap:Map,Vt=0,an=null,Rt=null,Ot=0,Yt=0,tr=null,oa=!1,cl=!1,Sm=!1,Ii=0,_n=0,la=0,io=0,wm=0,nr=0,ul=0,_c=null,zs=null,jm=!1,of=0,lS=0,lf=1/0,cf=null,ca=null,rs=0,ua=null,dl=null,Wi=0,Cm=0,Tm=null,cS=null,zc=0,km=null;function sr(){return(Vt&2)!==0&&Ot!==0?Ot&-Ot:N.T!==null?Pm():Ut()}function uS(){if(nr===0)if((Ot&536870912)===0||Wt){var s=sn;sn<<=1,(sn&3932160)===0&&(sn=262144),nr=s}else nr=536870912;return s=Js.current,s!==null&&(s.flags|=32),nr}function Ns(s,a,l){(s===an&&(Yt===2||Yt===9)||s.cancelPendingCommit!==null)&&(fl(s,0),da(s,Ot,nr,!1)),Gs(s,l),((Vt&2)===0||s!==an)&&(s===an&&((Vt&2)===0&&(io|=l),_n===4&&da(s,Ot,nr,!1)),ri(s))}function dS(s,a,l){if((Vt&6)!==0)throw Error(i(327));var u=!l&&(a&127)===0&&(a&s.expiredLanes)===0||Ir(s,a),p=u?wA(s,a):Dm(s,a,!0),x=u;do{if(p===0){cl&&!u&&da(s,a,0,!1);break}else{if(l=s.current.alternate,x&&!vA(l)){p=Dm(s,a,!1),x=!1;continue}if(p===2){if(x=a,s.errorRecoveryDisabledLanes&x)var D=0;else D=s.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){a=D;e:{var _=s;p=_c;var Q=_.current.memoizedState.isDehydrated;if(Q&&(fl(_,D).flags|=256),D=Dm(_,D,!1),D!==2){if(Sm&&!Q){_.errorRecoveryDisabledLanes|=x,io|=x,p=4;break e}x=zs,zs=p,x!==null&&(zs===null?zs=x:zs.push.apply(zs,x))}p=D}if(x=!1,p!==2)continue}}if(p===1){fl(s,0),da(s,a,0,!0);break}e:{switch(u=s,x=p,x){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:da(u,a,nr,!oa);break e;case 2:zs=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(p=of+300-We(),10<p)){if(da(u,a,nr,!oa),dr(u,0,!0)!==0)break e;Wi=a,u.timeoutHandle=VS(fS.bind(null,u,l,zs,cf,jm,a,nr,io,ul,oa,x,"Throttled",-0,0),p);break e}fS(u,l,zs,cf,jm,a,nr,io,ul,oa,x,null,-0,0)}}break}while(!0);ri(s)}function fS(s,a,l,u,p,x,D,_,Q,pe,Ee,Oe,xe,je){if(s.timeoutHandle=-1,Oe=a.subtreeFlags,Oe&8192||(Oe&16785408)===16785408){Oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vi},rS(a,x,Oe);var Ye=(x&62914560)===x?of-We():(x&4194048)===x?lS-We():0;if(Ye=rR(Oe,Ye),Ye!==null){Wi=x,s.cancelPendingCommit=Ye(vS.bind(null,s,a,x,l,u,p,D,_,Q,Ee,Oe,null,xe,je)),da(s,x,D,!pe);return}}vS(s,a,x,l,u,p,D,_,Q)}function vA(s){for(var a=s;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var p=l[u],x=p.getSnapshot;p=p.value;try{if(!Xs(x(),p))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function da(s,a,l,u){a&=~wm,a&=~io,s.suspendedLanes|=a,s.pingedLanes&=~a,u&&(s.warmLanes|=a),u=s.expirationTimes;for(var p=a;0<p;){var x=31-vt(p),D=1<<x;u[x]=-1,p&=~D}l!==0&&Qs(s,l,a)}function uf(){return(Vt&6)===0?(Nc(0),!1):!0}function Em(){if(Rt!==null){if(Yt===0)var s=Rt.return;else s=Rt,Ci=Ka=null,Hp(s),nl=null,vc=0,s=Rt;for(;s!==null;)Hv(s.alternate,s),s=s.return;Rt=null}}function fl(s,a){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,FA(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Wi=0,Em(),an=s,Rt=l=wi(s.current,null),Ot=a,Yt=0,tr=null,oa=!1,cl=Ir(s,a),Sm=!1,ul=nr=wm=io=la=_n=0,zs=_c=null,jm=!1,(a&8)!==0&&(a|=a&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=a;0<u;){var p=31-vt(u),x=1<<p;a|=s[p],u&=~x}return Ii=a,Ad(),l}function hS(s,a){jt=null,N.H=Dc,a===tl||a===Nd?(a=Mb(),Yt=3):a===Rp?(a=Mb(),Yt=4):Yt=a===im?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,tr=a,Rt===null&&(_n=1,Zd(s,xr(a,s.current)))}function pS(){var s=Js.current;return s===null?!0:(Ot&4194048)===Ot?Sr===null:(Ot&62914560)===Ot||(Ot&536870912)!==0?s===Sr:!1}function mS(){var s=N.H;return N.H=Dc,s===null?Dc:s}function gS(){var s=N.A;return N.A=yA,s}function df(){_n=4,oa||(Ot&4194048)!==Ot&&Js.current!==null||(cl=!0),(la&134217727)===0&&(io&134217727)===0||an===null||da(an,Ot,nr,!1)}function Dm(s,a,l){var u=Vt;Vt|=2;var p=mS(),x=gS();(an!==s||Ot!==a)&&(cf=null,fl(s,a)),a=!1;var D=_n;e:do try{if(Yt!==0&&Rt!==null){var _=Rt,Q=tr;switch(Yt){case 8:Em(),D=6;break e;case 3:case 2:case 9:case 6:Js.current===null&&(a=!0);var pe=Yt;if(Yt=0,tr=null,hl(s,_,Q,pe),l&&cl){D=0;break e}break;default:pe=Yt,Yt=0,tr=null,hl(s,_,Q,pe)}}SA(),D=_n;break}catch(Ee){hS(s,Ee)}while(!0);return a&&s.shellSuspendCounter++,Ci=Ka=null,Vt=u,N.H=p,N.A=x,Rt===null&&(an=null,Ot=0,Ad()),D}function SA(){for(;Rt!==null;)xS(Rt)}function wA(s,a){var l=Vt;Vt|=2;var u=mS(),p=gS();an!==s||Ot!==a?(cf=null,lf=We()+500,fl(s,a)):cl=Ir(s,a);e:do try{if(Yt!==0&&Rt!==null){a=Rt;var x=tr;t:switch(Yt){case 1:Yt=0,tr=null,hl(s,a,x,1);break;case 2:case 9:if(Eb(x)){Yt=0,tr=null,yS(a);break}a=function(){Yt!==2&&Yt!==9||an!==s||(Yt=7),ri(s)},x.then(a,a);break e;case 3:Yt=7;break e;case 4:Yt=5;break e;case 7:Eb(x)?(Yt=0,tr=null,yS(a)):(Yt=0,tr=null,hl(s,a,x,7));break;case 5:var D=null;switch(Rt.tag){case 26:D=Rt.memoizedState;case 5:case 27:var _=Rt;if(D?sw(D):_.stateNode.complete){Yt=0,tr=null;var Q=_.sibling;if(Q!==null)Rt=Q;else{var pe=_.return;pe!==null?(Rt=pe,ff(pe)):Rt=null}break t}}Yt=0,tr=null,hl(s,a,x,5);break;case 6:Yt=0,tr=null,hl(s,a,x,6);break;case 8:Em(),_n=6;break e;default:throw Error(i(462))}}jA();break}catch(Ee){hS(s,Ee)}while(!0);return Ci=Ka=null,N.H=u,N.A=p,Vt=l,Rt!==null?0:(an=null,Ot=0,Ad(),_n)}function jA(){for(;Rt!==null&&!J();)xS(Rt)}function xS(s){var a=Bv(s.alternate,s,Ii);s.memoizedProps=s.pendingProps,a===null?ff(s):Rt=a}function yS(s){var a=s,l=a.alternate;switch(a.tag){case 15:case 0:a=Wv(l,a,a.pendingProps,a.type,void 0,Ot);break;case 11:a=Wv(l,a,a.pendingProps,a.type.render,a.ref,Ot);break;case 5:Hp(a);default:Hv(l,a),a=Rt=gb(a,Ii),a=Bv(l,a,Ii)}s.memoizedProps=s.pendingProps,a===null?ff(s):Rt=a}function hl(s,a,l,u){Ci=Ka=null,Hp(a),nl=null,vc=0;var p=a.return;try{if(dA(s,p,a,l,Ot)){_n=1,Zd(s,xr(l,s.current)),Rt=null;return}}catch(x){if(p!==null)throw Rt=p,x;_n=1,Zd(s,xr(l,s.current)),Rt=null;return}a.flags&32768?(Wt||u===1?s=!0:cl||(Ot&536870912)!==0?s=!1:(oa=s=!0,(u===2||u===9||u===3||u===6)&&(u=Js.current,u!==null&&u.tag===13&&(u.flags|=16384))),bS(a,s)):ff(a)}function ff(s){var a=s;do{if((a.flags&32768)!==0){bS(a,oa);return}s=a.return;var l=pA(a.alternate,a,Ii);if(l!==null){Rt=l;return}if(a=a.sibling,a!==null){Rt=a;return}Rt=a=s}while(a!==null);_n===0&&(_n=5)}function bS(s,a){do{var l=mA(s.alternate,s);if(l!==null){l.flags&=32767,Rt=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(s=s.sibling,s!==null)){Rt=s;return}Rt=s=l}while(s!==null);_n=6,Rt=null}function vS(s,a,l,u,p,x,D,_,Q){s.cancelPendingCommit=null;do hf();while(rs!==0);if((Vt&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(x=a.lanes|a.childLanes,x|=gp,qt(s,l,x,D,_,Q),s===an&&(Rt=an=null,Ot=0),dl=a,ua=s,Wi=l,Cm=x,Tm=p,cS=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,EA(Qe,function(){return TS(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=N.T,N.T=null,p=V.p,V.p=2,D=Vt,Vt|=4;try{gA(s,a,l)}finally{Vt=D,V.p=p,N.T=u}}rs=1,SS(),wS(),jS()}}function SS(){if(rs===1){rs=0;var s=ua,a=dl,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=N.T,N.T=null;var u=V.p;V.p=2;var p=Vt;Vt|=4;try{tS(a,s);var x=Fm,D=ob(s.containerInfo),_=x.focusedElem,Q=x.selectionRange;if(D!==_&&_&&_.ownerDocument&&ab(_.ownerDocument.documentElement,_)){if(Q!==null&&dp(_)){var pe=Q.start,Ee=Q.end;if(Ee===void 0&&(Ee=pe),"selectionStart"in _)_.selectionStart=pe,_.selectionEnd=Math.min(Ee,_.value.length);else{var Oe=_.ownerDocument||document,xe=Oe&&Oe.defaultView||window;if(xe.getSelection){var je=xe.getSelection(),Ye=_.textContent.length,dt=Math.min(Q.start,Ye),nn=Q.end===void 0?dt:Math.min(Q.end,Ye);!je.extend&&dt>nn&&(D=nn,nn=dt,dt=D);var le=ib(_,dt),se=ib(_,nn);if(le&&se&&(je.rangeCount!==1||je.anchorNode!==le.node||je.anchorOffset!==le.offset||je.focusNode!==se.node||je.focusOffset!==se.offset)){var he=Oe.createRange();he.setStart(le.node,le.offset),je.removeAllRanges(),dt>nn?(je.addRange(he),je.extend(se.node,se.offset)):(he.setEnd(se.node,se.offset),je.addRange(he))}}}}for(Oe=[],je=_;je=je.parentNode;)je.nodeType===1&&Oe.push({element:je,left:je.scrollLeft,top:je.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<Oe.length;_++){var Me=Oe[_];Me.element.scrollLeft=Me.left,Me.element.scrollTop=Me.top}}Tf=!!Lm,Fm=Lm=null}finally{Vt=p,V.p=u,N.T=l}}s.current=a,rs=2}}function wS(){if(rs===2){rs=0;var s=ua,a=dl,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=N.T,N.T=null;var u=V.p;V.p=2;var p=Vt;Vt|=4;try{Kv(s,a.alternate,a)}finally{Vt=p,V.p=u,N.T=l}}rs=3}}function jS(){if(rs===4||rs===3){rs=0,ge();var s=ua,a=dl,l=Wi,u=cS;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?rs=5:(rs=0,dl=ua=null,CS(s,s.pendingLanes));var p=s.pendingLanes;if(p===0&&(ca=null),At(l),a=a.stateNode,ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(yt,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=N.T,p=V.p,V.p=2,N.T=null;try{for(var x=s.onRecoverableError,D=0;D<u.length;D++){var _=u[D];x(_.value,{componentStack:_.stack})}}finally{N.T=a,V.p=p}}(Wi&3)!==0&&hf(),ri(s),p=s.pendingLanes,(l&261930)!==0&&(p&42)!==0?s===km?zc++:(zc=0,km=s):zc=0,Nc(0)}}function CS(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,yc(a)))}function hf(){return SS(),wS(),jS(),TS()}function TS(){if(rs!==5)return!1;var s=ua,a=Cm;Cm=0;var l=At(Wi),u=N.T,p=V.p;try{V.p=32>l?32:l,N.T=null,l=Tm,Tm=null;var x=ua,D=Wi;if(rs=0,dl=ua=null,Wi=0,(Vt&6)!==0)throw Error(i(331));var _=Vt;if(Vt|=4,aS(x.current),sS(x,x.current,D,l),Vt=_,Nc(0,!1),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(yt,x)}catch{}return!0}finally{V.p=p,N.T=u,CS(s,a)}}function kS(s,a,l){a=xr(l,a),a=rm(s.stateNode,a,2),s=sa(s,a,2),s!==null&&(Gs(s,2),ri(s))}function Gt(s,a,l){if(s.tag===3)kS(s,s,l);else for(;a!==null;){if(a.tag===3){kS(a,s,l);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ca===null||!ca.has(u))){s=xr(l,s),l=Ev(2),u=sa(a,l,2),u!==null&&(Dv(l,u,a,s),Gs(u,2),ri(u));break}}a=a.return}}function Mm(s,a,l){var u=s.pingCache;if(u===null){u=s.pingCache=new bA;var p=new Set;u.set(a,p)}else p=u.get(a),p===void 0&&(p=new Set,u.set(a,p));p.has(l)||(Sm=!0,p.add(l),s=CA.bind(null,s,a,l),a.then(s,s))}function CA(s,a,l){var u=s.pingCache;u!==null&&u.delete(a),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,an===s&&(Ot&l)===l&&(_n===4||_n===3&&(Ot&62914560)===Ot&&300>We()-of?(Vt&2)===0&&fl(s,0):wm|=l,ul===Ot&&(ul=0)),ri(s)}function ES(s,a){a===0&&(a=hn()),s=Ya(s,a),s!==null&&(Gs(s,a),ri(s))}function TA(s){var a=s.memoizedState,l=0;a!==null&&(l=a.retryLane),ES(s,l)}function kA(s,a){var l=0;switch(s.tag){case 31:case 13:var u=s.stateNode,p=s.memoizedState;p!==null&&(l=p.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(a),ES(s,l)}function EA(s,a){return me(s,a)}var pf=null,pl=null,Am=!1,mf=!1,Rm=!1,fa=0;function ri(s){s!==pl&&s.next===null&&(pl===null?pf=pl=s:pl=pl.next=s),mf=!0,Am||(Am=!0,MA())}function Nc(s,a){if(!Rm&&mf){Rm=!0;do for(var l=!1,u=pf;u!==null;){if(s!==0){var p=u.pendingLanes;if(p===0)var x=0;else{var D=u.suspendedLanes,_=u.pingedLanes;x=(1<<31-vt(42|s)+1)-1,x&=p&~(D&~_),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(l=!0,RS(u,x))}else x=Ot,x=dr(u,u===an?x:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(x&3)===0||Ir(u,x)||(l=!0,RS(u,x));u=u.next}while(l);Rm=!1}}function DA(){DS()}function DS(){mf=Am=!1;var s=0;fa!==0&&LA()&&(s=fa);for(var a=We(),l=null,u=pf;u!==null;){var p=u.next,x=MS(u,a);x===0?(u.next=null,l===null?pf=p:l.next=p,p===null&&(pl=l)):(l=u,(s!==0||(x&3)!==0)&&(mf=!0)),u=p}rs!==0&&rs!==5||Nc(s),fa!==0&&(fa=0)}function MS(s,a){for(var l=s.suspendedLanes,u=s.pingedLanes,p=s.expirationTimes,x=s.pendingLanes&-62914561;0<x;){var D=31-vt(x),_=1<<D,Q=p[D];Q===-1?((_&l)===0||(_&u)!==0)&&(p[D]=yi(_,a)):Q<=a&&(s.expiredLanes|=_),x&=~_}if(a=an,l=Ot,l=dr(s,s===a?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,l===0||s===a&&(Yt===2||Yt===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&we(u),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Ir(s,l)){if(a=l&-l,a===s.callbackPriority)return a;switch(u!==null&&we(u),At(l)){case 2:case 8:l=Fe;break;case 32:l=Qe;break;case 268435456:l=Ze;break;default:l=Qe}return u=AS.bind(null,s),l=me(l,u),s.callbackPriority=a,s.callbackNode=l,a}return u!==null&&u!==null&&we(u),s.callbackPriority=2,s.callbackNode=null,2}function AS(s,a){if(rs!==0&&rs!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(hf()&&s.callbackNode!==l)return null;var u=Ot;return u=dr(s,s===an?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(dS(s,u,a),MS(s,We()),s.callbackNode!=null&&s.callbackNode===l?AS.bind(null,s):null)}function RS(s,a){if(hf())return null;dS(s,a,!0)}function MA(){BA(function(){(Vt&6)!==0?me(Re,DA):DS()})}function Pm(){if(fa===0){var s=Jo;s===0&&(s=fn,fn<<=1,(fn&261888)===0&&(fn=256)),fa=s}return fa}function PS(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:wd(""+s)}function OS(s,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,s.id&&l.setAttribute("form",s.id),a.parentNode.insertBefore(l,a),s=new FormData(s),l.parentNode.removeChild(l),s}function AA(s,a,l,u,p){if(a==="submit"&&l&&l.stateNode===p){var x=PS((p[Kn]||null).action),D=u.submitter;D&&(a=(a=D[Kn]||null)?PS(a.formAction):D.getAttribute("formAction"),a!==null&&(x=a,D=null));var _=new kd("action","action",null,u,p);s.push({event:_,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(fa!==0){var Q=D?OS(p,D):new FormData(p);Zp(l,{pending:!0,data:Q,method:p.method,action:x},null,Q)}}else typeof x=="function"&&(_.preventDefault(),Q=D?OS(p,D):new FormData(p),Zp(l,{pending:!0,data:Q,method:p.method,action:x},x,Q))},currentTarget:p}]})}}for(var Om=0;Om<mp.length;Om++){var Im=mp[Om],RA=Im.toLowerCase(),PA=Im[0].toUpperCase()+Im.slice(1);zr(RA,"on"+PA)}zr(ub,"onAnimationEnd"),zr(db,"onAnimationIteration"),zr(fb,"onAnimationStart"),zr("dblclick","onDoubleClick"),zr("focusin","onFocus"),zr("focusout","onBlur"),zr(GM,"onTransitionRun"),zr(QM,"onTransitionStart"),zr(KM,"onTransitionCancel"),zr(hb,"onTransitionEnd"),mn("onMouseEnter",["mouseout","mouseover"]),mn("onMouseLeave",["mouseout","mouseover"]),mn("onPointerEnter",["pointerout","pointerover"]),mn("onPointerLeave",["pointerout","pointerover"]),tt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),tt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),tt("onBeforeInput",["compositionend","keypress","textInput","paste"]),tt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),tt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),tt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lc));function IS(s,a){a=(a&4)!==0;for(var l=0;l<s.length;l++){var u=s[l],p=u.event;u=u.listeners;e:{var x=void 0;if(a)for(var D=u.length-1;0<=D;D--){var _=u[D],Q=_.instance,pe=_.currentTarget;if(_=_.listener,Q!==x&&p.isPropagationStopped())break e;x=_,p.currentTarget=pe;try{x(p)}catch(Ee){Md(Ee)}p.currentTarget=null,x=Q}else for(D=0;D<u.length;D++){if(_=u[D],Q=_.instance,pe=_.currentTarget,_=_.listener,Q!==x&&p.isPropagationStopped())break e;x=_,p.currentTarget=pe;try{x(p)}catch(Ee){Md(Ee)}p.currentTarget=null,x=Q}}}}function Pt(s,a){var l=a[Fa];l===void 0&&(l=a[Fa]=new Set);var u=s+"__bubble";l.has(u)||(WS(a,s,2,!1),l.add(u))}function Wm(s,a,l){var u=0;a&&(u|=4),WS(l,s,u,a)}var gf="_reactListening"+Math.random().toString(36).slice(2);function _m(s){if(!s[gf]){s[gf]=!0,fe.forEach(function(l){l!=="selectionchange"&&(OA.has(l)||Wm(l,!1,s),Wm(l,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[gf]||(a[gf]=!0,Wm("selectionchange",!1,a))}}function WS(s,a,l,u){switch(uw(a)){case 2:var p=oR;break;case 8:p=lR;break;default:p=Xm}l=p.bind(null,a,l,s),p=void 0,!np||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),u?p!==void 0?s.addEventListener(a,l,{capture:!0,passive:p}):s.addEventListener(a,l,!0):p!==void 0?s.addEventListener(a,l,{passive:p}):s.addEventListener(a,l,!1)}function zm(s,a,l,u,p){var x=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var D=u.tag;if(D===3||D===4){var _=u.stateNode.containerInfo;if(_===p)break;if(D===4)for(D=u.return;D!==null;){var Q=D.tag;if((Q===3||Q===4)&&D.stateNode.containerInfo===p)return;D=D.return}for(;_!==null;){if(D=hr(_),D===null)return;if(Q=D.tag,Q===5||Q===6||Q===26||Q===27){u=x=D;continue e}_=_.parentNode}}u=u.return}F0(function(){var pe=x,Ee=ep(l),Oe=[];e:{var xe=pb.get(s);if(xe!==void 0){var je=kd,Ye=s;switch(s){case"keypress":if(Cd(l)===0)break e;case"keydown":case"keyup":je=kM;break;case"focusin":Ye="focus",je=ap;break;case"focusout":Ye="blur",je=ap;break;case"beforeblur":case"afterblur":je=ap;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=H0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=pM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=MM;break;case ub:case db:case fb:je=xM;break;case hb:je=RM;break;case"scroll":case"scrollend":je=fM;break;case"wheel":je=OM;break;case"copy":case"cut":case"paste":je=bM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=$0;break;case"toggle":case"beforetoggle":je=WM}var dt=(a&4)!==0,nn=!dt&&(s==="scroll"||s==="scrollend"),le=dt?xe!==null?xe+"Capture":null:xe;dt=[];for(var se=pe,he;se!==null;){var Me=se;if(he=Me.stateNode,Me=Me.tag,Me!==5&&Me!==26&&Me!==27||he===null||le===null||(Me=oc(se,le),Me!=null&&dt.push(Fc(se,Me,he))),nn)break;se=se.return}0<dt.length&&(xe=new je(xe,Ye,null,l,Ee),Oe.push({event:xe,listeners:dt}))}}if((a&7)===0){e:{if(xe=s==="mouseover"||s==="pointerover",je=s==="mouseout"||s==="pointerout",xe&&l!==Jh&&(Ye=l.relatedTarget||l.fromElement)&&(hr(Ye)||Ye[fr]))break e;if((je||xe)&&(xe=Ee.window===Ee?Ee:(xe=Ee.ownerDocument)?xe.defaultView||xe.parentWindow:window,je?(Ye=l.relatedTarget||l.toElement,je=pe,Ye=Ye?hr(Ye):null,Ye!==null&&(nn=c(Ye),dt=Ye.tag,Ye!==nn||dt!==5&&dt!==27&&dt!==6)&&(Ye=null)):(je=null,Ye=pe),je!==Ye)){if(dt=H0,Me="onMouseLeave",le="onMouseEnter",se="mouse",(s==="pointerout"||s==="pointerover")&&(dt=$0,Me="onPointerLeave",le="onPointerEnter",se="pointer"),nn=je==null?xe:bi(je),he=Ye==null?xe:bi(Ye),xe=new dt(Me,se+"leave",je,l,Ee),xe.target=nn,xe.relatedTarget=he,Me=null,hr(Ee)===pe&&(dt=new dt(le,se+"enter",Ye,l,Ee),dt.target=he,dt.relatedTarget=nn,Me=dt),nn=Me,je&&Ye)t:{for(dt=IA,le=je,se=Ye,he=0,Me=le;Me;Me=dt(Me))he++;Me=0;for(var rt=se;rt;rt=dt(rt))Me++;for(;0<he-Me;)le=dt(le),he--;for(;0<Me-he;)se=dt(se),Me--;for(;he--;){if(le===se||se!==null&&le===se.alternate){dt=le;break t}le=dt(le),se=dt(se)}dt=null}else dt=null;je!==null&&_S(Oe,xe,je,dt,!1),Ye!==null&&nn!==null&&_S(Oe,nn,Ye,dt,!0)}}e:{if(xe=pe?bi(pe):window,je=xe.nodeName&&xe.nodeName.toLowerCase(),je==="select"||je==="input"&&xe.type==="file")var Ft=J0;else if(X0(xe))if(eb)Ft=$M;else{Ft=HM;var Ke=VM}else je=xe.nodeName,!je||je.toLowerCase()!=="input"||xe.type!=="checkbox"&&xe.type!=="radio"?pe&&ac(pe.elementType)&&(Ft=J0):Ft=UM;if(Ft&&(Ft=Ft(s,pe))){Z0(Oe,Ft,l,Ee);break e}Ke&&Ke(s,xe,pe),s==="focusout"&&pe&&xe.type==="number"&&pe.memoizedProps.value!=null&&gn(xe,"number",xe.value)}switch(Ke=pe?bi(pe):window,s){case"focusin":(X0(Ke)||Ke.contentEditable==="true")&&($o=Ke,fp=pe,mc=null);break;case"focusout":mc=fp=$o=null;break;case"mousedown":hp=!0;break;case"contextmenu":case"mouseup":case"dragend":hp=!1,lb(Oe,l,Ee);break;case"selectionchange":if(YM)break;case"keydown":case"keyup":lb(Oe,l,Ee)}var Tt;if(lp)e:{switch(s){case"compositionstart":var It="onCompositionStart";break e;case"compositionend":It="onCompositionEnd";break e;case"compositionupdate":It="onCompositionUpdate";break e}It=void 0}else Uo?Q0(s,l)&&(It="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(It="onCompositionStart");It&&(q0&&l.locale!=="ko"&&(Uo||It!=="onCompositionStart"?It==="onCompositionEnd"&&Uo&&(Tt=B0()):(Ki=Ee,sp="value"in Ki?Ki.value:Ki.textContent,Uo=!0)),Ke=xf(pe,It),0<Ke.length&&(It=new U0(It,s,null,l,Ee),Oe.push({event:It,listeners:Ke}),Tt?It.data=Tt:(Tt=K0(l),Tt!==null&&(It.data=Tt)))),(Tt=zM?NM(s,l):LM(s,l))&&(It=xf(pe,"onBeforeInput"),0<It.length&&(Ke=new U0("onBeforeInput","beforeinput",null,l,Ee),Oe.push({event:Ke,listeners:It}),Ke.data=Tt)),AA(Oe,s,pe,l,Ee)}IS(Oe,a)})}function Fc(s,a,l){return{instance:s,listener:a,currentTarget:l}}function xf(s,a){for(var l=a+"Capture",u=[];s!==null;){var p=s,x=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||x===null||(p=oc(s,l),p!=null&&u.unshift(Fc(s,p,x)),p=oc(s,a),p!=null&&u.push(Fc(s,p,x))),s.tag===3)return u;s=s.return}return[]}function IA(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function _S(s,a,l,u,p){for(var x=a._reactName,D=[];l!==null&&l!==u;){var _=l,Q=_.alternate,pe=_.stateNode;if(_=_.tag,Q!==null&&Q===u)break;_!==5&&_!==26&&_!==27||pe===null||(Q=pe,p?(pe=oc(l,x),pe!=null&&D.unshift(Fc(l,pe,Q))):p||(pe=oc(l,x),pe!=null&&D.push(Fc(l,pe,Q)))),l=l.return}D.length!==0&&s.push({event:a,listeners:D})}var WA=/\r\n?/g,_A=/\u0000|\uFFFD/g;function zS(s){return(typeof s=="string"?s:""+s).replace(WA,`
`).replace(_A,"")}function NS(s,a){return a=zS(a),zS(s)===a}function tn(s,a,l,u,p,x){switch(l){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||Cn(s,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&Cn(s,""+u);break;case"className":pr(s,"class",u);break;case"tabIndex":pr(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":pr(s,l,u);break;case"style":ic(s,u,x);break;case"data":if(a!=="object"){pr(s,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||l!=="href")){s.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=wd(""+u),s.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(l==="formAction"?(a!=="input"&&tn(s,a,"name",p.name,p,null),tn(s,a,"formEncType",p.formEncType,p,null),tn(s,a,"formMethod",p.formMethod,p,null),tn(s,a,"formTarget",p.formTarget,p,null)):(tn(s,a,"encType",p.encType,p,null),tn(s,a,"method",p.method,p,null),tn(s,a,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=wd(""+u),s.setAttribute(l,u);break;case"onClick":u!=null&&(s.onclick=vi);break;case"onScroll":u!=null&&Pt("scroll",s);break;case"onScrollEnd":u!=null&&Pt("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}l=wd(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""+u):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":u===!0?s.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,u):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(l,u):s.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(l):s.setAttribute(l,u);break;case"popover":Pt("beforetoggle",s),Pt("toggle",s),Ps(s,"popover",u);break;case"xlinkActuate":Ts(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ts(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ts(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ts(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ts(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ts(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ts(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ts(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ts(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ps(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Bo.get(l)||l,Ps(s,l,u))}}function Nm(s,a,l,u,p,x){switch(l){case"style":ic(s,u,x);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof u=="string"?Cn(s,u):(typeof u=="number"||typeof u=="bigint")&&Cn(s,""+u);break;case"onScroll":u!=null&&Pt("scroll",s);break;case"onScrollEnd":u!=null&&Pt("scrollend",s);break;case"onClick":u!=null&&(s.onclick=vi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ze.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),a=l.slice(2,p?l.length-7:void 0),x=s[Kn]||null,x=x!=null?x[l]:null,typeof x=="function"&&s.removeEventListener(a,x,p),typeof u=="function")){typeof x!="function"&&x!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(a,u,p);break e}l in s?s[l]=u:u===!0?s.setAttribute(l,""):Ps(s,l,u)}}}function ms(s,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pt("error",s),Pt("load",s);var u=!1,p=!1,x;for(x in l)if(l.hasOwnProperty(x)){var D=l[x];if(D!=null)switch(x){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:tn(s,a,x,D,l,null)}}p&&tn(s,a,"srcSet",l.srcSet,l,null),u&&tn(s,a,"src",l.src,l,null);return;case"input":Pt("invalid",s);var _=x=D=p=null,Q=null,pe=null;for(u in l)if(l.hasOwnProperty(u)){var Ee=l[u];if(Ee!=null)switch(u){case"name":p=Ee;break;case"type":D=Ee;break;case"checked":Q=Ee;break;case"defaultChecked":pe=Ee;break;case"value":x=Ee;break;case"defaultValue":_=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(i(137,a));break;default:tn(s,a,u,Ee,l,null)}}mr(s,x,_,Q,pe,D,p,!1);return;case"select":Pt("invalid",s),u=D=x=null;for(p in l)if(l.hasOwnProperty(p)&&(_=l[p],_!=null))switch(p){case"value":x=_;break;case"defaultValue":D=_;break;case"multiple":u=_;default:tn(s,a,p,_,l,null)}a=x,l=D,s.multiple=!!u,a!=null?wt(s,!!u,a,!1):l!=null&&wt(s,!!u,l,!0);return;case"textarea":Pt("invalid",s),x=p=u=null;for(D in l)if(l.hasOwnProperty(D)&&(_=l[D],_!=null))switch(D){case"value":u=_;break;case"defaultValue":p=_;break;case"children":x=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:tn(s,a,D,_,l,null)}Va(s,u,p,x);return;case"option":for(Q in l)if(l.hasOwnProperty(Q)&&(u=l[Q],u!=null))switch(Q){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:tn(s,a,Q,u,l,null)}return;case"dialog":Pt("beforetoggle",s),Pt("toggle",s),Pt("cancel",s),Pt("close",s);break;case"iframe":case"object":Pt("load",s);break;case"video":case"audio":for(u=0;u<Lc.length;u++)Pt(Lc[u],s);break;case"image":Pt("error",s),Pt("load",s);break;case"details":Pt("toggle",s);break;case"embed":case"source":case"link":Pt("error",s),Pt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(pe in l)if(l.hasOwnProperty(pe)&&(u=l[pe],u!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:tn(s,a,pe,u,l,null)}return;default:if(ac(a)){for(Ee in l)l.hasOwnProperty(Ee)&&(u=l[Ee],u!==void 0&&Nm(s,a,Ee,u,l,void 0));return}}for(_ in l)l.hasOwnProperty(_)&&(u=l[_],u!=null&&tn(s,a,_,u,l,null))}function zA(s,a,l,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,x=null,D=null,_=null,Q=null,pe=null,Ee=null;for(je in l){var Oe=l[je];if(l.hasOwnProperty(je)&&Oe!=null)switch(je){case"checked":break;case"value":break;case"defaultValue":Q=Oe;default:u.hasOwnProperty(je)||tn(s,a,je,null,u,Oe)}}for(var xe in u){var je=u[xe];if(Oe=l[xe],u.hasOwnProperty(xe)&&(je!=null||Oe!=null))switch(xe){case"type":x=je;break;case"name":p=je;break;case"checked":pe=je;break;case"defaultChecked":Ee=je;break;case"value":D=je;break;case"defaultValue":_=je;break;case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(i(137,a));break;default:je!==Oe&&tn(s,a,xe,je,u,Oe)}}ds(s,D,_,Q,pe,Ee,x,p);return;case"select":je=D=_=xe=null;for(x in l)if(Q=l[x],l.hasOwnProperty(x)&&Q!=null)switch(x){case"value":break;case"multiple":je=Q;default:u.hasOwnProperty(x)||tn(s,a,x,null,u,Q)}for(p in u)if(x=u[p],Q=l[p],u.hasOwnProperty(p)&&(x!=null||Q!=null))switch(p){case"value":xe=x;break;case"defaultValue":_=x;break;case"multiple":D=x;default:x!==Q&&tn(s,a,p,x,u,Q)}a=_,l=D,u=je,xe!=null?wt(s,!!l,xe,!1):!!u!=!!l&&(a!=null?wt(s,!!l,a,!0):wt(s,!!l,l?[]:"",!1));return;case"textarea":je=xe=null;for(_ in l)if(p=l[_],l.hasOwnProperty(_)&&p!=null&&!u.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:tn(s,a,_,null,u,p)}for(D in u)if(p=u[D],x=l[D],u.hasOwnProperty(D)&&(p!=null||x!=null))switch(D){case"value":xe=p;break;case"defaultValue":je=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==x&&tn(s,a,D,p,u,x)}Qi(s,xe,je);return;case"option":for(var Ye in l)if(xe=l[Ye],l.hasOwnProperty(Ye)&&xe!=null&&!u.hasOwnProperty(Ye))switch(Ye){case"selected":s.selected=!1;break;default:tn(s,a,Ye,null,u,xe)}for(Q in u)if(xe=u[Q],je=l[Q],u.hasOwnProperty(Q)&&xe!==je&&(xe!=null||je!=null))switch(Q){case"selected":s.selected=xe&&typeof xe!="function"&&typeof xe!="symbol";break;default:tn(s,a,Q,xe,u,je)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var dt in l)xe=l[dt],l.hasOwnProperty(dt)&&xe!=null&&!u.hasOwnProperty(dt)&&tn(s,a,dt,null,u,xe);for(pe in u)if(xe=u[pe],je=l[pe],u.hasOwnProperty(pe)&&xe!==je&&(xe!=null||je!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(i(137,a));break;default:tn(s,a,pe,xe,u,je)}return;default:if(ac(a)){for(var nn in l)xe=l[nn],l.hasOwnProperty(nn)&&xe!==void 0&&!u.hasOwnProperty(nn)&&Nm(s,a,nn,void 0,u,xe);for(Ee in u)xe=u[Ee],je=l[Ee],!u.hasOwnProperty(Ee)||xe===je||xe===void 0&&je===void 0||Nm(s,a,Ee,xe,u,je);return}}for(var le in l)xe=l[le],l.hasOwnProperty(le)&&xe!=null&&!u.hasOwnProperty(le)&&tn(s,a,le,null,u,xe);for(Oe in u)xe=u[Oe],je=l[Oe],!u.hasOwnProperty(Oe)||xe===je||xe==null&&je==null||tn(s,a,Oe,xe,u,je)}function LS(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function NA(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var p=l[u],x=p.transferSize,D=p.initiatorType,_=p.duration;if(x&&_&&LS(D)){for(D=0,_=p.responseEnd,u+=1;u<l.length;u++){var Q=l[u],pe=Q.startTime;if(pe>_)break;var Ee=Q.transferSize,Oe=Q.initiatorType;Ee&&LS(Oe)&&(Q=Q.responseEnd,D+=Ee*(Q<_?1:(_-pe)/(Q-pe)))}if(--u,a+=8*(x+D)/(p.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Lm=null,Fm=null;function yf(s){return s.nodeType===9?s:s.ownerDocument}function FS(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function BS(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Bm(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Vm=null;function LA(){var s=window.event;return s&&s.type==="popstate"?s===Vm?!1:(Vm=s,!0):(Vm=null,!1)}var VS=typeof setTimeout=="function"?setTimeout:void 0,FA=typeof clearTimeout=="function"?clearTimeout:void 0,HS=typeof Promise=="function"?Promise:void 0,BA=typeof queueMicrotask=="function"?queueMicrotask:typeof HS<"u"?function(s){return HS.resolve(null).then(s).catch(VA)}:VS;function VA(s){setTimeout(function(){throw s})}function ha(s){return s==="head"}function US(s,a){var l=a,u=0;do{var p=l.nextSibling;if(s.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(u===0){s.removeChild(p),yl(a);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")Bc(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,Bc(l);for(var x=l.firstChild;x;){var D=x.nextSibling,_=x.nodeName;x[Xr]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&x.rel.toLowerCase()==="stylesheet"||l.removeChild(x),x=D}}else l==="body"&&Bc(s.ownerDocument.body);l=p}while(l);yl(a)}function $S(s,a){var l=s;s=0;do{var u=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=u}while(l)}function Hm(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Hm(l),Ba(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function HA(s,a,l,u){for(;s.nodeType===1;){var p=l;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[Xr])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(x=s.getAttribute("rel"),x==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(x!==p.rel||s.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||s.getAttribute("title")!==(p.title==null?null:p.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(x=s.getAttribute("src"),(x!==(p.src==null?null:p.src)||s.getAttribute("type")!==(p.type==null?null:p.type)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&x&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var x=p.name==null?null:""+p.name;if(p.type==="hidden"&&s.getAttribute("name")===x)return s}else return s;if(s=wr(s.nextSibling),s===null)break}return null}function UA(s,a,l){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=wr(s.nextSibling),s===null))return null;return s}function qS(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=wr(s.nextSibling),s===null))return null;return s}function Um(s){return s.data==="$?"||s.data==="$~"}function $m(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function $A(s,a){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||l.readyState!=="loading")a();else{var u=function(){a(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function wr(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var qm=null;function YS(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(a===0)return wr(s.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}s=s.nextSibling}return null}function GS(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return s;a--}else l!=="/$"&&l!=="/&"||a++}s=s.previousSibling}return null}function QS(s,a,l){switch(a=yf(l),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Bc(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Ba(s)}var jr=new Map,KS=new Set;function bf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var _i=V.d;V.d={f:qA,r:YA,D:GA,C:QA,L:KA,m:XA,X:JA,S:ZA,M:eR};function qA(){var s=_i.f(),a=uf();return s||a}function YA(s){var a=_r(s);a!==null&&a.tag===5&&a.type==="form"?hv(a):_i.r(s)}var ml=typeof document>"u"?null:document;function XS(s,a,l){var u=ml;if(u&&typeof a=="string"&&a){var p=Lt(a);p='link[rel="'+s+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),KS.has(p)||(KS.add(p),s={rel:s,crossOrigin:l,href:a},u.querySelector(p)===null&&(a=u.createElement("link"),ms(a,"link",s),pn(a),u.head.appendChild(a)))}}function GA(s){_i.D(s),XS("dns-prefetch",s,null)}function QA(s,a){_i.C(s,a),XS("preconnect",s,a)}function KA(s,a,l){_i.L(s,a,l);var u=ml;if(u&&s&&a){var p='link[rel="preload"][as="'+Lt(a)+'"]';a==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+Lt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+Lt(l.imageSizes)+'"]')):p+='[href="'+Lt(s)+'"]';var x=p;switch(a){case"style":x=gl(s);break;case"script":x=xl(s)}jr.has(x)||(s=b({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:s,as:a},l),jr.set(x,s),u.querySelector(p)!==null||a==="style"&&u.querySelector(Vc(x))||a==="script"&&u.querySelector(Hc(x))||(a=u.createElement("link"),ms(a,"link",s),pn(a),u.head.appendChild(a)))}}function XA(s,a){_i.m(s,a);var l=ml;if(l&&s){var u=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+Lt(u)+'"][href="'+Lt(s)+'"]',x=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=xl(s)}if(!jr.has(x)&&(s=b({rel:"modulepreload",href:s},a),jr.set(x,s),l.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Hc(x)))return}u=l.createElement("link"),ms(u,"link",s),pn(u),l.head.appendChild(u)}}}function ZA(s,a,l){_i.S(s,a,l);var u=ml;if(u&&s){var p=Zr(u).hoistableStyles,x=gl(s);a=a||"default";var D=p.get(x);if(!D){var _={loading:0,preload:null};if(D=u.querySelector(Vc(x)))_.loading=5;else{s=b({rel:"stylesheet",href:s,"data-precedence":a},l),(l=jr.get(x))&&Ym(s,l);var Q=D=u.createElement("link");pn(Q),ms(Q,"link",s),Q._p=new Promise(function(pe,Ee){Q.onload=pe,Q.onerror=Ee}),Q.addEventListener("load",function(){_.loading|=1}),Q.addEventListener("error",function(){_.loading|=2}),_.loading|=4,vf(D,a,u)}D={type:"stylesheet",instance:D,count:1,state:_},p.set(x,D)}}}function JA(s,a){_i.X(s,a);var l=ml;if(l&&s){var u=Zr(l).hoistableScripts,p=xl(s),x=u.get(p);x||(x=l.querySelector(Hc(p)),x||(s=b({src:s,async:!0},a),(a=jr.get(p))&&Gm(s,a),x=l.createElement("script"),pn(x),ms(x,"link",s),l.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},u.set(p,x))}}function eR(s,a){_i.M(s,a);var l=ml;if(l&&s){var u=Zr(l).hoistableScripts,p=xl(s),x=u.get(p);x||(x=l.querySelector(Hc(p)),x||(s=b({src:s,async:!0,type:"module"},a),(a=jr.get(p))&&Gm(s,a),x=l.createElement("script"),pn(x),ms(x,"link",s),l.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},u.set(p,x))}}function ZS(s,a,l,u){var p=(p=ae.current)?bf(p):null;if(!p)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=gl(l.href),l=Zr(p).hoistableStyles,u=l.get(a),u||(u={type:"style",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=gl(l.href);var x=Zr(p).hoistableStyles,D=x.get(s);if(D||(p=p.ownerDocument||p,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(s,D),(x=p.querySelector(Vc(s)))&&!x._p&&(D.instance=x,D.state.loading=5),jr.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},jr.set(s,l),x||tR(p,s,l,D.state))),a&&u===null)throw Error(i(528,""));return D}if(a&&u!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=xl(l),l=Zr(p).hoistableScripts,u=l.get(a),u||(u={type:"script",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function gl(s){return'href="'+Lt(s)+'"'}function Vc(s){return'link[rel="stylesheet"]['+s+"]"}function JS(s){return b({},s,{"data-precedence":s.precedence,precedence:null})}function tR(s,a,l,u){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=s.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),ms(a,"link",l),pn(a),s.head.appendChild(a))}function xl(s){return'[src="'+Lt(s)+'"]'}function Hc(s){return"script[async]"+s}function ew(s,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var u=s.querySelector('style[data-href~="'+Lt(l.href)+'"]');if(u)return a.instance=u,pn(u),u;var p=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),pn(u),ms(u,"style",p),vf(u,l.precedence,s),a.instance=u;case"stylesheet":p=gl(l.href);var x=s.querySelector(Vc(p));if(x)return a.state.loading|=4,a.instance=x,pn(x),x;u=JS(l),(p=jr.get(p))&&Ym(u,p),x=(s.ownerDocument||s).createElement("link"),pn(x);var D=x;return D._p=new Promise(function(_,Q){D.onload=_,D.onerror=Q}),ms(x,"link",u),a.state.loading|=4,vf(x,l.precedence,s),a.instance=x;case"script":return x=xl(l.src),(p=s.querySelector(Hc(x)))?(a.instance=p,pn(p),p):(u=l,(p=jr.get(x))&&(u=b({},l),Gm(u,p)),s=s.ownerDocument||s,p=s.createElement("script"),pn(p),ms(p,"link",u),s.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,vf(u,l.precedence,s));return a.instance}function vf(s,a,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,x=p,D=0;D<u.length;D++){var _=u[D];if(_.dataset.precedence===a)x=_;else if(x!==p)break}x?x.parentNode.insertBefore(s,x.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(s,a.firstChild))}function Ym(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Gm(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Sf=null;function tw(s,a,l){if(Sf===null){var u=new Map,p=Sf=new Map;p.set(l,u)}else p=Sf,u=p.get(l),u||(u=new Map,p.set(l,u));if(u.has(s))return u;for(u.set(s,null),l=l.getElementsByTagName(s),p=0;p<l.length;p++){var x=l[p];if(!(x[Xr]||x[In]||s==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var D=x.getAttribute(a)||"";D=s+D;var _=u.get(D);_?_.push(x):u.set(D,[x])}}return u}function nw(s,a,l){s=s.ownerDocument||s,s.head.insertBefore(l,a==="title"?s.querySelector("head > title"):null)}function nR(s,a,l){if(l===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function sw(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function sR(s,a,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=gl(u.href),x=a.querySelector(Vc(p));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=wf.bind(s),a.then(s,s)),l.state.loading|=4,l.instance=x,pn(x);return}x=a.ownerDocument||a,u=JS(u),(p=jr.get(p))&&Ym(u,p),x=x.createElement("link"),pn(x);var D=x;D._p=new Promise(function(_,Q){D.onload=_,D.onerror=Q}),ms(x,"link",u),l.instance=x}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=wf.bind(s),a.addEventListener("load",l),a.addEventListener("error",l))}}var Qm=0;function rR(s,a){return s.stylesheets&&s.count===0&&Cf(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var u=setTimeout(function(){if(s.stylesheets&&Cf(s,s.stylesheets),s.unsuspend){var x=s.unsuspend;s.unsuspend=null,x()}},6e4+a);0<s.imgBytes&&Qm===0&&(Qm=62500*NA());var p=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Cf(s,s.stylesheets),s.unsuspend)){var x=s.unsuspend;s.unsuspend=null,x()}},(s.imgBytes>Qm?50:800)+a);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function wf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var jf=null;function Cf(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,jf=new Map,a.forEach(iR,s),jf=null,wf.call(s))}function iR(s,a){if(!(a.state.loading&4)){var l=jf.get(s);if(l)var u=l.get(null);else{l=new Map,jf.set(s,l);for(var p=s.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<p.length;x++){var D=p[x];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(l.set(D.dataset.precedence,D),u=D)}u&&l.set(null,u)}p=a.instance,D=p.getAttribute("data-precedence"),x=l.get(D)||u,x===u&&l.set(null,p),l.set(D,p),this.count++,u=wf.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),x?x.parentNode.insertBefore(p,x.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(p,s.firstChild)),a.state.loading|=4}}var Uc={$$typeof:R,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function aR(s,a,l,u,p,x,D,_,Q){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bs(0),this.hiddenUpdates=bs(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=x,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function rw(s,a,l,u,p,x,D,_,Q,pe,Ee,Oe){return s=new aR(s,a,l,D,Q,pe,Ee,Oe,_),a=1,x===!0&&(a|=24),x=Zs(3,null,null,a),s.current=x,x.stateNode=s,a=Dp(),a.refCount++,s.pooledCache=a,a.refCount++,x.memoizedState={element:u,isDehydrated:l,cache:a},Pp(x),s}function iw(s){return s?(s=Go,s):Go}function aw(s,a,l,u,p,x){p=iw(p),u.context===null?u.context=p:u.pendingContext=p,u=na(a),u.payload={element:l},x=x===void 0?null:x,x!==null&&(u.callback=x),l=sa(s,u,a),l!==null&&(Ns(l,s,a),wc(l,s,a))}function ow(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<a?l:a}}function Km(s,a){ow(s,a),(s=s.alternate)&&ow(s,a)}function lw(s){if(s.tag===13||s.tag===31){var a=Ya(s,67108864);a!==null&&Ns(a,s,67108864),Km(s,67108864)}}function cw(s){if(s.tag===13||s.tag===31){var a=sr();a=Qn(a);var l=Ya(s,a);l!==null&&Ns(l,s,a),Km(s,a)}}var Tf=!0;function oR(s,a,l,u){var p=N.T;N.T=null;var x=V.p;try{V.p=2,Xm(s,a,l,u)}finally{V.p=x,N.T=p}}function lR(s,a,l,u){var p=N.T;N.T=null;var x=V.p;try{V.p=8,Xm(s,a,l,u)}finally{V.p=x,N.T=p}}function Xm(s,a,l,u){if(Tf){var p=Zm(u);if(p===null)zm(s,a,u,kf,l),dw(s,u);else if(uR(p,s,a,l,u))u.stopPropagation();else if(dw(s,u),a&4&&-1<cR.indexOf(s)){for(;p!==null;){var x=_r(p);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var D=Cs(x.pendingLanes);if(D!==0){var _=x;for(_.pendingLanes|=2,_.entangledLanes|=2;D;){var Q=1<<31-vt(D);_.entanglements[1]|=Q,D&=~Q}ri(x),(Vt&6)===0&&(lf=We()+500,Nc(0))}}break;case 31:case 13:_=Ya(x,2),_!==null&&Ns(_,x,2),uf(),Km(x,2)}if(x=Zm(u),x===null&&zm(s,a,u,kf,l),x===p)break;p=x}p!==null&&u.stopPropagation()}else zm(s,a,u,null,l)}}function Zm(s){return s=ep(s),Jm(s)}var kf=null;function Jm(s){if(kf=null,s=hr(s),s!==null){var a=c(s);if(a===null)s=null;else{var l=a.tag;if(l===13){if(s=d(a),s!==null)return s;s=null}else if(l===31){if(s=f(a),s!==null)return s;s=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return kf=s,null}function uw(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_e()){case Re:return 2;case Fe:return 8;case Qe:case He:return 32;case Ze:return 268435456;default:return 32}default:return 32}}var eg=!1,pa=null,ma=null,ga=null,$c=new Map,qc=new Map,xa=[],cR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dw(s,a){switch(s){case"focusin":case"focusout":pa=null;break;case"dragenter":case"dragleave":ma=null;break;case"mouseover":case"mouseout":ga=null;break;case"pointerover":case"pointerout":$c.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":qc.delete(a.pointerId)}}function Yc(s,a,l,u,p,x){return s===null||s.nativeEvent!==x?(s={blockedOn:a,domEventName:l,eventSystemFlags:u,nativeEvent:x,targetContainers:[p]},a!==null&&(a=_r(a),a!==null&&lw(a)),s):(s.eventSystemFlags|=u,a=s.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),s)}function uR(s,a,l,u,p){switch(a){case"focusin":return pa=Yc(pa,s,a,l,u,p),!0;case"dragenter":return ma=Yc(ma,s,a,l,u,p),!0;case"mouseover":return ga=Yc(ga,s,a,l,u,p),!0;case"pointerover":var x=p.pointerId;return $c.set(x,Yc($c.get(x)||null,s,a,l,u,p)),!0;case"gotpointercapture":return x=p.pointerId,qc.set(x,Yc(qc.get(x)||null,s,a,l,u,p)),!0}return!1}function fw(s){var a=hr(s.target);if(a!==null){var l=c(a);if(l!==null){if(a=l.tag,a===13){if(a=d(l),a!==null){s.blockedOn=a,Wr(s.priority,function(){cw(l)});return}}else if(a===31){if(a=f(l),a!==null){s.blockedOn=a,Wr(s.priority,function(){cw(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ef(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var l=Zm(s.nativeEvent);if(l===null){l=s.nativeEvent;var u=new l.constructor(l.type,l);Jh=u,l.target.dispatchEvent(u),Jh=null}else return a=_r(l),a!==null&&lw(a),s.blockedOn=l,!1;a.shift()}return!0}function hw(s,a,l){Ef(s)&&l.delete(a)}function dR(){eg=!1,pa!==null&&Ef(pa)&&(pa=null),ma!==null&&Ef(ma)&&(ma=null),ga!==null&&Ef(ga)&&(ga=null),$c.forEach(hw),qc.forEach(hw)}function Df(s,a){s.blockedOn===a&&(s.blockedOn=null,eg||(eg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,dR)))}var Mf=null;function pw(s){Mf!==s&&(Mf=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Mf===s&&(Mf=null);for(var a=0;a<s.length;a+=3){var l=s[a],u=s[a+1],p=s[a+2];if(typeof u!="function"){if(Jm(u||l)===null)continue;break}var x=_r(l);x!==null&&(s.splice(a,3),a-=3,Zp(x,{pending:!0,data:p,method:l.method,action:u},u,p))}}))}function yl(s){function a(Q){return Df(Q,s)}pa!==null&&Df(pa,s),ma!==null&&Df(ma,s),ga!==null&&Df(ga,s),$c.forEach(a),qc.forEach(a);for(var l=0;l<xa.length;l++){var u=xa[l];u.blockedOn===s&&(u.blockedOn=null)}for(;0<xa.length&&(l=xa[0],l.blockedOn===null);)fw(l),l.blockedOn===null&&xa.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var p=l[u],x=l[u+1],D=p[Kn]||null;if(typeof x=="function")D||pw(l);else if(D){var _=null;if(x&&x.hasAttribute("formAction")){if(p=x,D=x[Kn]||null)_=D.formAction;else if(Jm(p)!==null)continue}else _=D.action;typeof _=="function"?l[u+1]=_:(l.splice(u,3),u-=3),pw(l)}}}function mw(){function s(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(D){return p=D})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function tg(s){this._internalRoot=s}Af.prototype.render=tg.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,u=sr();aw(l,u,s,a,null,null)},Af.prototype.unmount=tg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;aw(s.current,2,null,s,null,null),uf(),a[fr]=null}};function Af(s){this._internalRoot=s}Af.prototype.unstable_scheduleHydration=function(s){if(s){var a=Ut();s={blockedOn:null,target:s,priority:a};for(var l=0;l<xa.length&&a!==0&&a<xa[l].priority;l++);xa.splice(l,0,s),l===0&&fw(s)}};var gw=t.version;if(gw!=="19.2.0")throw Error(i(527,gw,"19.2.0"));V.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=g(a),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var fR={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rf.isDisabled&&Rf.supportsFiber)try{yt=Rf.inject(fR),ct=Rf}catch{}}return Qc.createRoot=function(s,a){if(!o(s))throw Error(i(299));var l=!1,u="",p=jv,x=Cv,D=Tv;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(D=a.onRecoverableError)),a=rw(s,1,!1,null,null,l,u,null,p,x,D,mw),s[fr]=a.current,_m(s),new tg(a)},Qc.hydrateRoot=function(s,a,l){if(!o(s))throw Error(i(299));var u=!1,p="",x=jv,D=Cv,_=Tv,Q=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(x=l.onUncaughtError),l.onCaughtError!==void 0&&(D=l.onCaughtError),l.onRecoverableError!==void 0&&(_=l.onRecoverableError),l.formState!==void 0&&(Q=l.formState)),a=rw(s,1,!0,a,l??null,u,p,Q,x,D,_,mw),a.context=iw(null),l=a.current,u=sr(),u=Qn(u),p=na(u),p.callback=null,sa(l,p,u),l=u,a.current.lanes=l,Gs(a,l),ri(a),s[fr]=a.current,_m(s),new Af(a)},Qc.version="19.2.0",Qc}var Aw;function JP(){if(Aw)return ng.exports;Aw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ng.exports=ZP(),ng.exports}var eO=JP();const tO=NC(eO),Bx=y.memo(({currentWeek:e=1,deloadWeekActive:t=!1,onDeloadTrigger:n,clickable:i=!1})=>{const o=Ia(),d=["SUN","MON","TUE","WED","THU","FRI","SAT"][new Date().getDay()],f=e>=4&&!t&&i,g=t?{backgroundColor:o.palette.mode==="dark"?"rgba(255, 152, 0, 0.2)":"rgba(255, 152, 0, 0.15)",color:o.palette.warning.main,border:`1px solid ${o.palette.warning.main}`}:{backgroundColor:o.palette.mode==="dark"?"rgba(29, 181, 132, 0.2)":"rgba(29, 181, 132, 0.15)",color:o.palette.primary.main,border:`1px solid ${o.palette.mode==="dark","rgba(29, 181, 132, 0.3)"}`},m=()=>{f&&n&&n()},b=r.jsxs(A,{onClick:m,sx:{display:"inline-flex",alignItems:"center",gap:.5,padding:"4px 12px",borderRadius:"16px",fontWeight:600,fontSize:"0.875rem",letterSpacing:"0.5px",cursor:f?"pointer":"default",transition:"all 0.2s ease",...g,"&:hover":f?{transform:"scale(1.05)",boxShadow:o.palette.mode==="dark"?"0 2px 8px rgba(0, 0, 0, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.15)"}:{},"&:active":f?{transform:"scale(0.98)"}:{}},role:f?"button":void 0,tabIndex:f?0:void 0,onKeyDown:f?v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),m())}:void 0,"aria-label":f?`Week ${e} - Click to trigger deload week`:`${d}, Week ${e}${t?" (Deload)":""}`,children:[r.jsx(A,{component:"span",sx:{fontWeight:700},children:d}),r.jsx(A,{component:"span",sx:{fontSize:"1rem",opacity:.6,mx:.25},children:"|"}),r.jsx(A,{component:"span",sx:{fontWeight:600},children:t?"DELOAD":`WK ${e}`}),t&&r.jsx(_x,{sx:{fontSize:"1rem",ml:.25}})]});return f?r.jsx(ar,{title:"Click to trigger deload week",arrow:!0,children:b}):b});Bx.displayName="WeekBadge";Bx.propTypes={currentWeek:T.number,deloadWeekActive:T.bool,onDeloadTrigger:T.func,clickable:T.bool};const nO={apiKey:"AIzaSyCxgAj6zUGeScwae1Slw-JqX-ZAEcEhAcI",authDomain:"goodlift-7760a.firebaseapp.com",projectId:"goodlift-7760a",storageBucket:"goodlift-7760a.firebasestorage.app",messagingSenderId:"444306542177",appId:"1:444306542177:web:ea09005a6d4cf46d6f6420",measurementId:"G-YR73MY2CH6"},Vx=jP(nO),VC=CP(Vx),Pf=TP(Vx);kP(Vx);const sO="modulepreload",rO=function(e){return"/goodlift/"+e},Rw={},iO=function(t,n,i){let o=Promise.resolve();if(n&&n.length>0){let h=function(g){return Promise.all(g.map(m=>Promise.resolve(m).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=d?.nonce||d?.getAttribute("nonce");o=h(n.map(g=>{if(g=rO(g),g in Rw)return;Rw[g]=!0;const m=g.endsWith(".css"),b=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${b}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":sO,m||(v.as="script"),v.crossOrigin="",v.href=g,f&&v.setAttribute("nonce",f),document.head.appendChild(v),m)return new Promise((j,E)=>{v.addEventListener("load",j),v.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${g}`)))})}))}function c(d){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=d,window.dispatchEvent(f),!f.defaultPrevented)throw d}return o.then(d=>{for(const f of d||[])f.status==="rejected"&&c(f.reason);return t().catch(c)})},Fg=e=>{if(e==null)return null;if(Array.isArray(e))return e.map(t=>Fg(t));if(typeof e=="object"){const t={};for(const[n,i]of Object.entries(e))i!==void 0&&(t[n]=Fg(i));return t}return e},Zt=async(e,t)=>{if(!e){console.error("Cannot save data: No user ID provided");return}try{const n=LC(VC,"users",e,"data","userData"),i=Fg({...t,lastUpdated:new Date().toISOString()});await EP(n,i,{merge:!0})}catch(n){throw console.error("Error saving data to Firebase:",n),n}},Rs=async e=>{if(!e)return console.error("Cannot load data: No user ID provided"),null;try{const t=LC(VC,"users",e,"data","userData"),n=await DP(t);return n.exists()?n.data():null}catch(t){throw console.error("Error loading data from Firebase:",t),t}},id=async(e,t)=>{if(e)try{await Zt(e,{workoutHistory:t})}catch(n){console.error("Error saving workout history to Firebase:",n)}},Mh=async(e,t)=>{if(e)try{await Zt(e,{userStats:t})}catch(n){console.error("Error saving user stats to Firebase:",n)}},Hx=async(e,t)=>{if(e)try{await Zt(e,{exerciseWeights:t})}catch(n){console.error("Error saving exercise weights to Firebase:",n)}},Ux=async(e,t)=>{if(e)try{await Zt(e,{exerciseTargetReps:t})}catch(n){console.error("Error saving exercise target reps to Firebase:",n)}},aO=async(e,t)=>{if(e)try{await Zt(e,{hiitSessions:t})}catch(n){console.error("Error saving HIIT sessions to Firebase:",n)}},oO=async(e,t)=>{if(e)try{await Zt(e,{cardioSessions:t})}catch(n){console.error("Error saving cardio sessions to Firebase:",n)}},HC=async(e,t)=>{if(e)try{await Zt(e,{stretchSessions:t})}catch(n){console.error("Error saving stretch sessions to Firebase:",n)}},lO=async(e,t)=>{if(e)try{await Zt(e,{workoutPlans:t})}catch(n){console.error("Error saving workout plans to Firebase:",n)}},cO=async(e,t)=>{if(e)try{await Zt(e,{activePlanId:t})}catch(n){console.error("Error saving active plan to Firebase:",n)}},uO=async(e,t)=>{if(e)try{await Zt(e,{plans:t})}catch(n){console.error("Error saving plans to Firebase:",n)}},dO=async(e,t)=>{if(e)try{await Zt(e,{planDays:t})}catch(n){console.error("Error saving plan days to Firebase:",n)}},fO=async(e,t)=>{if(e)try{await Zt(e,{planExercises:t})}catch(n){console.error("Error saving plan exercises to Firebase:",n)}},UC=async(e,t)=>{if(e)try{await Zt(e,{favoriteWorkouts:t})}catch(n){console.error("Error saving favorite workouts to Firebase:",n)}},$x=async(e,t)=>{if(e)try{await Zt(e,{hiitPresets:t})}catch(n){console.error("Error saving HIIT presets to Firebase:",n)}},qx=async(e,t)=>{if(e)try{await Zt(e,{yogaPresets:t})}catch(n){console.error("Error saving Yoga presets to Firebase:",n)}},ad=async(e,t)=>{if(e)try{await Zt(e,{savedWorkouts:t})}catch(n){console.error("Error saving saved workouts to Firebase:",n)}},hO=async(e,t)=>{if(e)try{await Zt(e,{pinnedExercises:t})}catch(n){console.error("Error saving pinned exercises to Firebase:",n)}},pO=async e=>{if(!e)return null;try{return(await Rs(e))?.pinnedExercises||null}catch(t){return console.error("Error loading pinned exercises from Firebase:",t),null}},$C=async(e,t)=>{if(e)try{await Zt(e,{nutritionEntries:t})}catch(n){console.error("Error saving nutrition entries to Firebase:",n)}},mO=async(e,t)=>{if(e)try{await Zt(e,{nutritionGoals:t})}catch(n){console.error("Error saving nutrition goals to Firebase:",n)}},qC=async(e,t)=>{if(e)try{await Zt(e,{nutritionRecipes:t})}catch(n){console.error("Error saving nutrition recipes to Firebase:",n)}},gO=async e=>{if(!e)return null;try{const t=await Rs(e);return{nutritionEntries:t?.nutritionEntries||null,nutritionGoals:t?.nutritionGoals||null,nutritionRecipes:t?.nutritionRecipes||null}}catch(t){return console.error("Error loading nutrition data from Firebase:",t),null}},Yx="goodlift_guest_mode",Bg=1,Ql={WORKOUT_HISTORY:"goodlift_guest_workout_history",USER_STATS:"goodlift_guest_user_stats",EXERCISE_WEIGHTS:"goodlift_guest_exercise_weights",EXERCISE_TARGET_REPS:"goodlift_guest_exercise_target_reps",HIIT_SESSIONS:"goodlift_guest_hiit_sessions",STRETCH_SESSIONS:"goodlift_guest_stretch_sessions",CARDIO_SESSIONS:"goodlift_guest_cardio_sessions",FAVORITE_WORKOUTS:"goodlift_guest_favorite_workouts",FAVORITE_EXERCISES:"goodlift_guest_favorite_exercises",PINNED_EXERCISES:"goodlift_guest_pinned_exercises",WORKOUT_PLANS:"goodlift_guest_workout_plans",SNACKBAR_DISMISSED:"goodlift_guest_snackbar_dismissed",UNLOCKED_ACHIEVEMENTS:"goodlift_guest_unlocked_achievements",TOTAL_PRS:"goodlift_guest_total_prs",TOTAL_VOLUME:"goodlift_guest_total_volume",ACTIVE_PLAN:"goodlift_guest_active_plan",PLANS:"goodlift_guest_plans",PLAN_DAYS:"goodlift_guest_plan_days",PLAN_EXERCISES:"goodlift_guest_plan_exercises",YOGA_PRESETS:"goodlift_guest_yoga_presets",HIIT_PRESETS:"goodlift_guest_hiit_presets",SAVED_WORKOUTS:"goodlift_guest_saved_workouts",NUTRITION_ENTRIES:"goodlift_guest_nutrition_entries",NUTRITION_GOALS:"goodlift_guest_nutrition_goals",NUTRITION_RECIPES:"goodlift_guest_nutrition_recipes"},$e=()=>{try{return localStorage.getItem(Yx)==="true"}catch(e){return console.error("Error checking guest mode:",e),!1}},xO=()=>{try{localStorage.setItem(Yx,"true")}catch(e){console.error("Error enabling guest mode:",e),Gx(e)}},ah=()=>{try{localStorage.removeItem(Yx)}catch(e){console.error("Error disabling guest mode:",e)}},Mt=e=>{const t=Ql[e.toUpperCase()];if(!t)return console.error(`Invalid category: ${e}`),null;try{const n=localStorage.getItem(t);if(!n)return null;const i=JSON.parse(n);return i.version&&i.version!==Bg&&console.warn(`Data version mismatch for ${e}: ${i.version} vs ${Bg}`),i.data!==void 0?i.data:i}catch(n){return console.error(`Error reading guest data for ${e}:`,n),null}},mt=(e,t)=>{const n=Ql[e.toUpperCase()];if(!n){console.error(`Invalid category: ${e}`);return}try{const i={version:Bg,data:t,lastUpdated:new Date().toISOString()};localStorage.setItem(n,JSON.stringify(i))}catch(i){console.error(`Error saving guest data for ${e}:`,i),Gx(i)}},Pw=()=>{try{Object.values(Ql).forEach(e=>{localStorage.removeItem(e)}),ah()}catch(e){console.error("Error clearing guest data:",e)}},YC=()=>{const e={};try{Object.entries(Ql).forEach(([t,n])=>{if(t==="SNACKBAR_DISMISSED")return;const i=localStorage.getItem(n);if(i)try{const o=JSON.parse(i);e[t.toLowerCase()]=o.data!==void 0?o.data:o}catch(o){console.error(`Error parsing guest data for ${t}:`,o)}})}catch(t){console.error("Error getting all guest data:",t)}return e},yO=()=>{try{const e=localStorage.getItem(Ql.SNACKBAR_DISMISSED);if(e==="permanent")return!1;if(!e)return!0;const t=parseInt(e,10),n=Date.now(),i=1440*60*1e3;return n-t>i}catch(e){return console.error("Error checking snackbar status:",e),!0}},bO=()=>{try{localStorage.setItem(Ql.SNACKBAR_DISMISSED,"permanent")}catch(e){console.error("Error dismissing snackbar:",e),Gx(e)}},Gx=e=>{(e.name==="QuotaExceededError"||e.code===22)&&console.error("localStorage quota exceeded. Some data may not be saved.")},Ue={WORKOUT_HISTORY:"goodlift_workout_history",USER_STATS:"goodlift_user_stats",EXERCISE_WEIGHTS:"goodlift_exercise_weights",EXERCISE_TARGET_REPS:"goodlift_exercise_target_reps",HIIT_SESSIONS:"goodlift_hiit_sessions",STRETCH_SESSIONS:"goodlift_stretch_sessions",CARDIO_SESSIONS:"goodlift_cardio_sessions",FAVORITE_WORKOUTS:"goodlift_favorite_workouts",FAVORITE_EXERCISES:"goodlift_favorite_exercises",PINNED_EXERCISES:"goodlift_pinned_exercises",WORKOUT_PLANS:"goodlift_workout_plans",ACTIVE_PLAN:"goodlift_active_plan",UNLOCKED_ACHIEVEMENTS:"goodlift_unlocked_achievements",TOTAL_PRS:"goodlift_total_prs",TOTAL_VOLUME:"goodlift_total_volume",YOGA_PRESETS:"goodlift_yoga_presets",HIIT_PRESETS:"goodlift_hiit_presets",SAVED_WORKOUTS:"goodlift_saved_workouts",PLANS:"goodlift_plans",PLAN_DAYS:"goodlift_plan_days",PLAN_EXERCISES:"goodlift_plan_exercises"};let ut=null;const GC=e=>{ut=e},Mo=()=>ut,Kr=async()=>{try{if($e())return Mt("workout_history")||[];if(ut)try{const t=await Rs(ut);if(t?.workoutHistory)return localStorage.setItem(Ue.WORKOUT_HISTORY,JSON.stringify(t.workoutHistory)),t.workoutHistory}catch(t){console.error("Firebase fetch failed, using localStorage:",t)}const e=localStorage.getItem(Ue.WORKOUT_HISTORY);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading workout history:",e),[]}},Qx=async e=>{try{if(!e)throw new Error("Workout data is required");const t=await Kr();t.unshift(e),$e()?mt("workout_history",t):(localStorage.setItem(Ue.WORKOUT_HISTORY,JSON.stringify(t)),ut&&await id(ut,t))}catch(t){throw console.error("Error saving workout:",t),t}},vO=async e=>{try{const t=await Kr();if(e<0||e>=t.length)throw new Error("Invalid workout index");t.splice(e,1),$e()?mt("workout_history",t):(localStorage.setItem(Ue.WORKOUT_HISTORY,JSON.stringify(t)),ut&&await id(ut,t))}catch(t){throw console.error("Error deleting workout:",t),t}},SO=async(e,t)=>{try{const n=await Kr();if(e<0||e>=n.length)throw new Error("Invalid workout index");n[e]={...n[e],...t},$e()?mt("workout_history",n):(localStorage.setItem(Ue.WORKOUT_HISTORY,JSON.stringify(n)),ut&&await id(ut,n))}catch(n){throw console.error("Error updating workout:",n),n}},wO=e=>{if(!e||!Array.isArray(e))return 0;let t=0;for(const n of e)if(n.exercises){for(const i of Object.values(n.exercises))if(!(!i.sets||!Array.isArray(i.sets)))for(const o of i.sets){const c=parseFloat(o.weight)||0,d=parseInt(o.reps,10)||0;c>0&&d>0&&(t+=c*d)}}return t},od=async()=>{try{const e=await Kr(),{calculateStreak:t}=await iO(async()=>{const{calculateStreak:E}=await Promise.resolve().then(()=>O7);return{calculateStreak:E}},void 0),n=t(e),i=e.length,o=e.reduce((E,S)=>E+(S.duration||0),0),c=wO(e),f=Ah().reduce((E,S)=>E+(S.duration||0),0),g=Rh().reduce((E,S)=>E+(S.duration||0),0),b=ld().reduce((E,S)=>E+(S.duration||0),0),v=await ZC(),j={totalWorkouts:i,totalTime:o,totalHiitTime:f,totalCardioTime:g,totalStretchTime:b,currentStreak:n.currentStreak,longestStreak:n.longestStreak,totalPRs:v,totalVolume:c};return $e()?mt("user_stats",j):(localStorage.setItem(Ue.USER_STATS,JSON.stringify(j)),ut&&await Mh(ut,j)),j}catch(e){return console.error("Error calculating user stats:",e),{totalWorkouts:0,totalTime:0,totalHiitTime:0,totalCardioTime:0,totalStretchTime:0,currentStreak:0,longestStreak:0,totalPRs:0,totalVolume:0}}},Kx=async e=>{try{if(!e)throw new Error("Stats object is required");$e()?mt("user_stats",e):(localStorage.setItem(Ue.USER_STATS,JSON.stringify(e)),ut&&await Mh(ut,e))}catch(t){throw console.error("Error saving user stats:",t),t}},bo=async e=>{try{if($e()){const c=Mt("exercise_weights")?.[e];return c!==void 0?c:null}if(ut)try{const o=await Rs(ut);if(o?.exerciseWeights){localStorage.setItem(Ue.EXERCISE_WEIGHTS,JSON.stringify(o.exerciseWeights));const c=o.exerciseWeights[e];return c!==void 0?c:null}}catch(o){console.error("Firebase fetch failed, using localStorage:",o)}const t=localStorage.getItem(Ue.EXERCISE_WEIGHTS),i=(t?JSON.parse(t):{})[e];return i!==void 0?i:null}catch(t){return console.error("Error reading exercise weight:",t),null}},jO=async()=>{try{if($e())return Mt("exercise_weights")||{};if(ut)try{const t=await Rs(ut);if(t?.exerciseWeights)return localStorage.setItem(Ue.EXERCISE_WEIGHTS,JSON.stringify(t.exerciseWeights)),t.exerciseWeights}catch(t){console.error("Firebase fetch failed, using localStorage:",t)}const e=localStorage.getItem(Ue.EXERCISE_WEIGHTS);return e?JSON.parse(e):{}}catch(e){return console.error("Error reading exercise weights:",e),{}}},$r=async(e,t)=>{try{if(!e)throw new Error("Exercise name is required");if(t!=null&&(typeof t!="number"||t<0))throw new Error("Weight must be a positive number or null");const n=await jO();n[e]=t??null,$e()?mt("exercise_weights",n):(localStorage.setItem(Ue.EXERCISE_WEIGHTS,JSON.stringify(n)),ut&&await Hx(ut,n))}catch(n){throw console.error("Error saving exercise weight:",n),n}},ka=async e=>{try{if($e()){const c=Mt("exercise_target_reps")?.[e];return c!==void 0?c:null}if(ut)try{const o=await Rs(ut);if(o?.exerciseTargetReps){localStorage.setItem(Ue.EXERCISE_TARGET_REPS,JSON.stringify(o.exerciseTargetReps));const c=o.exerciseTargetReps[e];return c!==void 0?c:null}}catch(o){console.error("Firebase fetch failed, using localStorage:",o)}const t=localStorage.getItem(Ue.EXERCISE_TARGET_REPS),i=(t?JSON.parse(t):{})[e];return i!==void 0?i:null}catch(t){return console.error("Error reading exercise target reps:",t),null}},oh=async(e,t)=>{try{if(!e)throw new Error("Exercise name is required");if(t!=null&&(typeof t!="number"||t<1))throw new Error("Reps must be a positive number or null");let n={};if($e())n=Mt("exercise_target_reps")||{};else{const i=localStorage.getItem(Ue.EXERCISE_TARGET_REPS);n=i?JSON.parse(i):{}}n[e]=t??null,$e()?mt("exercise_target_reps",n):(localStorage.setItem(Ue.EXERCISE_TARGET_REPS,JSON.stringify(n)),ut&&await Ux(ut,n))}catch(n){throw console.error("Error saving exercise target reps:",n),n}},QC=async e=>{if(!e){console.error("Cannot load data: No user ID provided");return}try{GC(e);const t=await Rs(e);if(t)t.workoutHistory&&localStorage.setItem(Ue.WORKOUT_HISTORY,JSON.stringify(t.workoutHistory)),t.userStats&&localStorage.setItem(Ue.USER_STATS,JSON.stringify(t.userStats)),t.exerciseWeights&&localStorage.setItem(Ue.EXERCISE_WEIGHTS,JSON.stringify(t.exerciseWeights)),t.exerciseTargetReps&&localStorage.setItem(Ue.EXERCISE_TARGET_REPS,JSON.stringify(t.exerciseTargetReps)),t.hiitSessions&&localStorage.setItem(Ue.HIIT_SESSIONS,JSON.stringify(t.hiitSessions)),t.cardioSessions&&localStorage.setItem(Ue.CARDIO_SESSIONS,JSON.stringify(t.cardioSessions)),t.stretchSessions&&localStorage.setItem(Ue.STRETCH_SESSIONS,JSON.stringify(t.stretchSessions)),t.workoutPlans&&localStorage.setItem(Ue.WORKOUT_PLANS,JSON.stringify(t.workoutPlans)),t.activePlanId&&localStorage.setItem(Ue.ACTIVE_PLAN,t.activePlanId),t.savedWorkouts&&localStorage.setItem(Ue.SAVED_WORKOUTS,JSON.stringify(t.savedWorkouts)),t.favoriteWorkouts&&localStorage.setItem(Ue.FAVORITE_WORKOUTS,JSON.stringify(t.favoriteWorkouts)),t.hiitPresets&&localStorage.setItem(Ue.HIIT_PRESETS,JSON.stringify(t.hiitPresets)),t.yogaPresets&&localStorage.setItem(Ue.YOGA_PRESETS,JSON.stringify(t.yogaPresets)),t.plans&&localStorage.setItem(Ue.PLANS,JSON.stringify(t.plans)),t.planDays&&localStorage.setItem(Ue.PLAN_DAYS,JSON.stringify(t.planDays)),t.planExercises&&localStorage.setItem(Ue.PLAN_EXERCISES,JSON.stringify(t.planExercises));else{const n=await Kr(),i=await od(),o=localStorage.getItem(Ue.EXERCISE_WEIGHTS),c=o?JSON.parse(o):{},d=localStorage.getItem(Ue.EXERCISE_TARGET_REPS),f=d?JSON.parse(d):{},h=Ah(),g=Rh(),m=ld(),b=localStorage.getItem(Ue.WORKOUT_PLANS),v=b?JSON.parse(b):[],j=localStorage.getItem(Ue.ACTIVE_PLAN),E=localStorage.getItem(Ue.SAVED_WORKOUTS),S=E?JSON.parse(E):[],w=localStorage.getItem(Ue.FAVORITE_WORKOUTS),C=w?JSON.parse(w):[],k=localStorage.getItem(Ue.HIIT_PRESETS),R=k?JSON.parse(k):[],O=localStorage.getItem(Ue.YOGA_PRESETS),I=O?JSON.parse(O):[],P=localStorage.getItem(Ue.PLANS),W=P?JSON.parse(P):[],L=localStorage.getItem(Ue.PLAN_DAYS),z=L?JSON.parse(L):[],q=localStorage.getItem(Ue.PLAN_EXERCISES),B=q?JSON.parse(q):[];(n.length>0||i?.totalWorkouts>0||Object.keys(c).length>0||Object.keys(f).length>0||h.length>0||g.length>0||m.length>0||v.length>0||j||S.length>0||C.length>0||R.length>0||I.length>0||W.length>0||z.length>0||B.length>0)&&await Promise.all([id(e,n),Mh(e,i),Hx(e,c),Ux(e,f),aO(e,h),oO(e,g),HC(e,m),lO(e,v),cO(e,j),ad(e,S),UC(e,C),$x(e,R),qx(e,I),uO(e,W),dO(e,z),fO(e,B)])}}catch(t){console.error("Error loading user data from cloud:",t)}},Ah=()=>{try{if($e())return Mt("hiit_sessions")||[];const e=localStorage.getItem(Ue.HIIT_SESSIONS);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading HIIT sessions:",e),[]}},Rh=()=>{try{if($e())return Mt("cardio_sessions")||[];const e=localStorage.getItem(Ue.CARDIO_SESSIONS);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading cardio sessions:",e),[]}},KC=async()=>{try{if($e())return Mt("favorite_workouts")||[];if(ut)try{const t=await Rs(ut);if(t?.favoriteWorkouts)return localStorage.setItem(Ue.FAVORITE_WORKOUTS,JSON.stringify(t.favoriteWorkouts)),t.favoriteWorkouts}catch(t){console.error("Firebase fetch failed for favorite workouts, using localStorage:",t)}const e=localStorage.getItem(Ue.FAVORITE_WORKOUTS);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading favorite workouts:",e),[]}},yu=async e=>{try{if(!e)throw new Error("Workout data is required");const t=await KC(),n={id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:e.name||`${e.type} Workout`,type:e.type,equipment:e.equipment||"all",exercises:e.exercises,savedAt:new Date().toISOString()};t.unshift(n),$e()?mt("favorite_workouts",t):(localStorage.setItem(Ue.FAVORITE_WORKOUTS,JSON.stringify(t)),ut&&await UC(ut,t))}catch(t){throw console.error("Error saving favorite workout:",t),t}},ld=()=>{try{if($e())return Mt("stretch_sessions")||[];const e=localStorage.getItem(Ue.STRETCH_SESSIONS);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading stretch sessions:",e),[]}},CO=async e=>{try{if(!e)throw new Error("Session data is required");const t=ld();t.unshift(e),$e()?mt("stretch_sessions",t):(localStorage.setItem(Ue.STRETCH_SESSIONS,JSON.stringify(t)),ut&&await HC(ut,t))}catch(t){throw console.error("Error saving stretch session:",t),t}},Xx=()=>{try{if($e()){const t=Mt("favorite_exercises")||[];return new Set(t)}const e=localStorage.getItem(Ue.FAVORITE_EXERCISES);return new Set(e?JSON.parse(e):[])}catch(e){return console.error("Error reading favorite exercises:",e),new Set}},TO=e=>{try{if(!e)throw new Error("Exercise name is required");const t=Xx();let n;t.has(e)?(t.delete(e),n=!1):(t.add(e),n=!0);const i=Array.from(t);return $e()?mt("favorite_exercises",i):localStorage.setItem(Ue.FAVORITE_EXERCISES,JSON.stringify(i)),n}catch(t){throw console.error("Error toggling favorite exercise:",t),t}},kO=e=>Xx().has(e),EO=async()=>{try{if($e())return Mt("pinned_exercises")||[];const e=Mo();if(e)try{const n=await pO(e);if(n&&Array.isArray(n))return localStorage.setItem(Ue.PINNED_EXERCISES,JSON.stringify(n)),n}catch(n){console.warn("Could not load pinned exercises from Firebase, using localStorage:",n)}const t=localStorage.getItem(Ue.PINNED_EXERCISES);return t?JSON.parse(t):[]}catch(e){return console.error("Error reading pinned exercises:",e),[]}},DO=async e=>{try{if(!Array.isArray(e))throw new Error("Pinned exercises must be an array");const t=e.slice(0,10);if($e())mt("pinned_exercises",t);else{localStorage.setItem(Ue.PINNED_EXERCISES,JSON.stringify(t));const n=Mo();if(n)try{await hO(n,t)}catch(i){console.warn("Could not sync pinned exercises to Firebase:",i)}}}catch(t){throw console.error("Error saving pinned exercises:",t),t}},XC=async()=>{try{if($e())return Mt("unlocked_achievements")||[];const e=localStorage.getItem(Ue.UNLOCKED_ACHIEVEMENTS);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading unlocked achievements:",e),[]}},MO=async e=>{try{$e()?mt("unlocked_achievements",e):localStorage.setItem(Ue.UNLOCKED_ACHIEVEMENTS,JSON.stringify(e))}catch(t){console.error("Error saving unlocked achievements:",t)}},AO=async e=>{try{const t=await XC();t.includes(e)||(t.push(e),await MO(t))}catch(t){console.error("Error adding unlocked achievement:",t)}},ZC=async()=>{try{if($e())return Mt("total_prs")||0;const e=localStorage.getItem(Ue.TOTAL_PRS);return e?parseInt(e,10):0}catch(e){return console.error("Error reading total PRs:",e),0}},RO=async()=>{try{const t=await ZC()+1;return $e()?mt("total_prs",t):localStorage.setItem(Ue.TOTAL_PRS,t.toString()),t}catch(e){console.error("Error incrementing total PRs:",e)}},PO=async()=>{try{if($e())return Mt("total_volume")||0;const e=localStorage.getItem(Ue.TOTAL_VOLUME);return e?parseFloat(e):0}catch(e){return console.error("Error reading total volume:",e),0}},OO=async e=>{try{const n=await PO()+e;return $e()?mt("total_volume",n):localStorage.setItem(Ue.TOTAL_VOLUME,n.toString()),n}catch(t){console.error("Error adding to total volume:",t)}},bu=async()=>{try{if($e())return Mt("yoga_presets")||[];if(ut)try{const t=await Rs(ut);if(t?.yogaPresets)return localStorage.setItem(Ue.YOGA_PRESETS,JSON.stringify(t.yogaPresets)),t.yogaPresets}catch(t){console.error("Firebase fetch failed for yoga presets, using localStorage:",t)}const e=localStorage.getItem(Ue.YOGA_PRESETS);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading yoga presets:",e),[]}},IO=async e=>{try{if(!e||!e.name)throw new Error("Preset must have a name");const t=await bu(),n=t.findIndex(i=>i.id===e.id);return n>=0?t[n]={...e,updatedAt:Date.now()}:t.push({...e,id:e.id||`yoga_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:Date.now(),updatedAt:Date.now()}),$e()?mt("yoga_presets",t):(localStorage.setItem(Ue.YOGA_PRESETS,JSON.stringify(t)),ut&&await qx(ut,t)),t}catch(t){throw console.error("Error saving yoga preset:",t),t}},WO=async e=>{try{const n=(await bu()).filter(i=>i.id!==e);return $e()?mt("yoga_presets",n):(localStorage.setItem(Ue.YOGA_PRESETS,JSON.stringify(n)),ut&&await qx(ut,n)),n}catch(t){throw console.error("Error deleting yoga preset:",t),t}},vu=async()=>{try{if($e())return Mt("hiit_presets")||[];if(ut)try{const t=await Rs(ut);if(t?.hiitPresets)return localStorage.setItem(Ue.HIIT_PRESETS,JSON.stringify(t.hiitPresets)),t.hiitPresets}catch(t){console.error("Firebase fetch failed for HIIT presets, using localStorage:",t)}const e=localStorage.getItem(Ue.HIIT_PRESETS);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading HIIT presets:",e),[]}},_O=async e=>{try{if(!e||!e.name)throw new Error("Preset must have a name");const t=await vu(),n=t.findIndex(i=>i.id===e.id);return n>=0?t[n]={...e,updatedAt:Date.now()}:t.push({...e,id:e.id||`hiit_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:Date.now(),updatedAt:Date.now()}),$e()?mt("hiit_presets",t):(localStorage.setItem(Ue.HIIT_PRESETS,JSON.stringify(t)),ut&&await $x(ut,t)),t}catch(t){throw console.error("Error saving HIIT preset:",t),t}},zO=async e=>{try{const n=(await vu()).filter(i=>i.id!==e);return $e()?mt("hiit_presets",n):(localStorage.setItem(Ue.HIIT_PRESETS,JSON.stringify(n)),ut&&await $x(ut,n)),n}catch(t){throw console.error("Error deleting HIIT preset:",t),t}},Mr=async()=>{try{if($e())return Mt("saved_workouts")||[];if(ut)try{const t=await Rs(ut);if(t?.savedWorkouts)return localStorage.setItem(Ue.SAVED_WORKOUTS,JSON.stringify(t.savedWorkouts)),t.savedWorkouts}catch(t){console.error("Firebase fetch failed, using localStorage:",t)}const e=localStorage.getItem(Ue.SAVED_WORKOUTS);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading saved workouts:",e),[]}},NO=async e=>{try{const t=await Mr(),n={...e,id:Date.now(),createdAt:new Date().toISOString()};return t.push(n),$e()?mt("saved_workouts",t):(localStorage.setItem(Ue.SAVED_WORKOUTS,JSON.stringify(t)),ut&&await ad(ut,t)),t}catch(t){throw console.error("Error saving workout:",t),t}},LO=async e=>{try{const t=await Mr();return t.splice(e,1),$e()?mt("saved_workouts",t):(localStorage.setItem(Ue.SAVED_WORKOUTS,JSON.stringify(t)),ut&&await ad(ut,t)),t}catch(t){throw console.error("Error deleting saved workout:",t),t}},Su=async(e,t)=>{try{const n=await Mr();return e>=0&&e<n.length&&(n[e]={...n[e],...t},$e()?mt("saved_workouts",n):(localStorage.setItem(Ue.SAVED_WORKOUTS,JSON.stringify(n)),ut&&await ad(ut,n))),n}catch(n){throw console.error("Error updating saved workout:",n),n}},FO=async e=>{try{const t=await Mr();if(e<0||e>=t.length)throw new Error("Invalid workout index");const n=t[e],i=new Date().toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),o={...n,id:Date.now(),name:`${n.name||"Workout"} (Copy - ${i})`,exercises:n.exercises?JSON.parse(JSON.stringify(n.exercises)):[],supersetConfig:n.supersetConfig?JSON.parse(JSON.stringify(n.supersetConfig)):void 0,createdAt:new Date().toISOString(),assignedDay:void 0,archived:!1};return t.push(o),$e()?mt("saved_workouts",t):(localStorage.setItem(Ue.SAVED_WORKOUTS,JSON.stringify(t)),ut&&await ad(ut,t)),o}catch(t){throw console.error("Error duplicating saved workout:",t),t}},qs={NUTRITION_ENTRIES:"goodlift_nutrition_entries",NUTRITION_GOALS:"goodlift_nutrition_goals",NUTRITION_RECIPES:"goodlift_nutrition_recipes",FAVORITE_FOODS:"goodlift_favorite_foods"};let Gr=null;const Ow=e=>{Gr=e},lh=()=>{try{if($e())return Mt("nutrition_entries")||[];const e=localStorage.getItem(qs.NUTRITION_ENTRIES);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting nutrition entries:",e),[]}},ig=async e=>{try{const t=lh();if(t.push(e),$e()){mt("nutrition_entries",t);return}if(localStorage.setItem(qs.NUTRITION_ENTRIES,JSON.stringify(t)),Gr)try{await $C(Gr,t)}catch(n){console.error("Error syncing nutrition entries to Firebase:",n)}}catch(t){throw console.error("Error saving nutrition entry:",t),t}},BO=async e=>{try{const n=lh().filter(i=>i.id!==e);if($e()){mt("nutrition_entries",n);return}if(localStorage.setItem(qs.NUTRITION_ENTRIES,JSON.stringify(n)),Gr)try{await $C(Gr,n)}catch(i){console.error("Error syncing nutrition entries to Firebase:",i)}}catch(t){throw console.error("Error deleting nutrition entry:",t),t}},VO=()=>{try{if($e())return Mt("nutrition_goals")||null;const e=localStorage.getItem(qs.NUTRITION_GOALS);return e?JSON.parse(e):null}catch(e){return console.error("Error getting nutrition goals:",e),null}},HO=async e=>{try{if($e()){mt("nutrition_goals",e);return}if(localStorage.setItem(qs.NUTRITION_GOALS,JSON.stringify(e)),Gr)try{await mO(Gr,e)}catch(t){console.error("Error syncing nutrition goals to Firebase:",t)}}catch(t){throw console.error("Error saving nutrition goals:",t),t}},UO=async e=>{try{const t=await gO(e);t&&(t.nutritionEntries&&localStorage.setItem(qs.NUTRITION_ENTRIES,JSON.stringify(t.nutritionEntries)),t.nutritionGoals&&localStorage.setItem(qs.NUTRITION_GOALS,JSON.stringify(t.nutritionGoals)),t.nutritionRecipes&&localStorage.setItem(qs.NUTRITION_RECIPES,JSON.stringify(t.nutritionRecipes)))}catch(t){throw console.error("Error loading user nutrition data:",t),t}},Zx=()=>{try{if($e())return Mt("nutrition_recipes")||[];const e=localStorage.getItem(qs.NUTRITION_RECIPES);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting recipes:",e),[]}},JC=async e=>{try{const t=Zx(),n=t.findIndex(i=>i.id===e.id);if(n>=0?t[n]=e:t.push(e),$e()){mt("nutrition_recipes",t);return}if(localStorage.setItem(qs.NUTRITION_RECIPES,JSON.stringify(t)),Gr)try{await qC(Gr,t)}catch(i){console.error("Error syncing recipes to Firebase:",i)}}catch(t){throw console.error("Error saving recipe:",t),t}},$O=async e=>{try{const n=Zx().filter(i=>i.id!==e);if($e()){mt("nutrition_recipes",n);return}if(localStorage.setItem(qs.NUTRITION_RECIPES,JSON.stringify(n)),Gr)try{await qC(Gr,n)}catch(i){console.error("Error syncing recipes to Firebase:",i)}}catch(t){throw console.error("Error deleting recipe:",t),t}},Ph=()=>{try{if($e())return Mt("favorite_foods")||[];const e=localStorage.getItem(qs.FAVORITE_FOODS);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting favorite foods:",e),[]}},eT=(e,t)=>t.fdcId&&e.fdcId===t.fdcId||e.description===(t.description||t.foodName),tT=async e=>{try{const t=Ph();if(t.some(o=>eT(o,e)))return;const i={id:e.fdcId||`fav_${Date.now()}`,fdcId:e.fdcId,description:e.description||e.foodName,foodNutrients:e.foodNutrients,addedAt:new Date().toISOString()};if(t.push(i),$e()){mt("favorite_foods",t);return}localStorage.setItem(qs.FAVORITE_FOODS,JSON.stringify(t))}catch(t){throw console.error("Error adding favorite food:",t),t}},nT=async e=>{try{const n=Ph().filter(i=>i.id!==e&&i.fdcId!==e);if($e()){mt("favorite_foods",n);return}localStorage.setItem(qs.FAVORITE_FOODS,JSON.stringify(n))}catch(t){throw console.error("Error removing favorite food:",t),t}},ch=e=>{try{return Ph().some(n=>eT(n,e))}catch(t){return console.error("Error checking favorite food:",t),!1}},qO=zx`
  from {
    transform: rotate(360deg);
  }
  to {
    transform: rotate(0deg);
  }
`,Kl=()=>r.jsxs(A,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh",bgcolor:"background.default"},children:[r.jsx(A,{sx:{flex:1}}),r.jsxs(A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:4},children:[r.jsx(A,{component:"img",src:"/goodlift/goodlift-dog.svg",alt:"Loading...",sx:{width:{xs:"120px",sm:"160px",md:"200px"},height:{xs:"120px",sm:"160px",md:"200px"},animation:`${qO} 1.5s linear infinite`}}),r.jsx(M,{variant:"h6",sx:{color:"text.secondary",fontWeight:500,mt:2},children:"Loading GoodLift..."})]}),r.jsx(A,{sx:{flex:2}})]}),sT=y.createContext({}),Ao=()=>y.useContext(sT),rT=({children:e})=>{const[t,n]=y.useState(null),[i,o]=y.useState(!0),[c,d]=y.useState(!1),[f,h]=y.useState(!1),g=()=>{if($e()){const w=YC(),C=Object.keys(w).length>0;return h(C),C}return h(!1),!1},m=(w,C)=>PP(Pf,w,C),b=(w,C)=>RP(Pf,w,C),v=()=>c?(d(!1),ah(),n(null),Promise.resolve()):AP(Pf),j=()=>{xO(),d(!0),n({uid:"guest",email:null,isGuest:!0})},E=async(w,C)=>{if(d(!1),C||ah(),n(w),!C)try{await QC(w.uid),Ow(w.uid),await UO(w.uid)}catch(k){console.error("Error loading user data:",k)}};y.useEffect(()=>($e()&&(d(!0),n({uid:"guest",email:null,isGuest:!0}),g(),o(!1)),MP(Pf,async C=>{if(C){const k=g();await E(C,k)}else $e()||(d(!1),h(!1),n(null),GC(null),Ow(null));o(!1)})),[]);const S={currentUser:t,isGuest:c,hasGuestData:f,signup:m,login:b,logout:v,continueAsGuest:j,checkGuestData:g};return r.jsx(sT.Provider,{value:S,children:i?r.jsx(Kl,{}):e})};rT.propTypes={children:T.node.isRequired};const iT=6048e5,YO=864e5,aT=6e4,oT=36e5,GO=1e3,Iw=Symbol.for("constructDateFrom");function Mn(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Iw in e?e[Iw](t):e instanceof Date?new e.constructor(t):new Date(t)}function lt(e,t){return Mn(t||e,e)}function cd(e,t,n){const i=lt(e,n?.in);return isNaN(t)?Mn(n?.in||e,NaN):(t&&i.setDate(i.getDate()+t),i)}function Oh(e,t,n){const i=lt(e,n?.in);if(isNaN(t))return Mn(e,NaN);if(!t)return i;const o=i.getDate(),c=Mn(e,i.getTime());c.setMonth(i.getMonth()+t+1,0);const d=c.getDate();return o>=d?c:(i.setFullYear(c.getFullYear(),c.getMonth(),o),i)}function lT(e,t,n){return Mn(e,+lt(e)+t)}function QO(e,t,n){return lT(e,t*oT)}let KO={};function Ro(){return KO}function Qr(e,t){const n=Ro(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=lt(e,t?.in),c=o.getDay(),d=(c<i?7:0)+c-i;return o.setDate(o.getDate()-d),o.setHours(0,0,0,0),o}function $l(e,t){return Qr(e,{...t,weekStartsOn:1})}function cT(e,t){const n=lt(e,t?.in),i=n.getFullYear(),o=Mn(n,0);o.setFullYear(i+1,0,4),o.setHours(0,0,0,0);const c=$l(o),d=Mn(n,0);d.setFullYear(i,0,4),d.setHours(0,0,0,0);const f=$l(d);return n.getTime()>=c.getTime()?i+1:n.getTime()>=f.getTime()?i:i-1}function uh(e){const t=lt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function ud(e,...t){const n=Mn.bind(null,t.find(i=>typeof i=="object"));return t.map(n)}function Fu(e,t){const n=lt(e,t?.in);return n.setHours(0,0,0,0),n}function XO(e,t,n){const[i,o]=ud(n?.in,e,t),c=Fu(i),d=Fu(o),f=+c-uh(c),h=+d-uh(d);return Math.round((f-h)/YO)}function ZO(e,t){const n=cT(e,t),i=Mn(e,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),$l(i)}function JO(e,t,n){const i=lt(e,n?.in);return i.setTime(i.getTime()+t*aT),i}function e5(e,t,n){return lT(e,t*1e3)}function t5(e,t,n){return cd(e,t*7,n)}function n5(e,t,n){return Oh(e,t*12,n)}function Vg(e,t,n){const[i,o]=ud(n?.in,e,t);return+Fu(i)==+Fu(o)}function s5(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function uT(e){return!(!s5(e)&&typeof e!="number"||isNaN(+lt(e)))}function Ww(e,t){const n=lt(e,t?.in);return n.setHours(23,59,59,999),n}function dT(e,t){const n=lt(e,t?.in),i=n.getMonth();return n.setFullYear(n.getFullYear(),i+1,0),n.setHours(23,59,59,999),n}function fT(e,t){const n=lt(e,t?.in);return n.setDate(1),n.setHours(0,0,0,0),n}function _w(e,t){const n=lt(e,t?.in),i=n.getFullYear();return n.setFullYear(i+1,0,0),n.setHours(23,59,59,999),n}function hT(e,t){const n=lt(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function pT(e,t){const n=Ro(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=lt(e,t?.in),c=o.getDay(),d=(c<i?-7:0)+6-(c-i);return o.setDate(o.getDate()+d),o.setHours(23,59,59,999),o}const r5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},i5=(e,t,n)=>{let i;const o=r5[e];return typeof o=="string"?i=o:t===1?i=o.one:i=o.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function ag(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const a5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},o5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},l5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},c5={date:ag({formats:a5,defaultWidth:"full"}),time:ag({formats:o5,defaultWidth:"full"}),dateTime:ag({formats:l5,defaultWidth:"full"})},u5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},d5=(e,t,n,i)=>u5[e];function Kc(e){return(t,n)=>{const i=n?.context?String(n.context):"standalone";let o;if(i==="formatting"&&e.formattingValues){const d=e.defaultFormattingWidth||e.defaultWidth,f=n?.width?String(n.width):d;o=e.formattingValues[f]||e.formattingValues[d]}else{const d=e.defaultWidth,f=n?.width?String(n.width):e.defaultWidth;o=e.values[f]||e.values[d]}const c=e.argumentCallback?e.argumentCallback(t):t;return o[c]}}const f5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},h5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},p5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},m5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},g5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},x5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},y5=(e,t)=>{const n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},b5={ordinalNumber:y5,era:Kc({values:f5,defaultWidth:"wide"}),quarter:Kc({values:h5,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Kc({values:p5,defaultWidth:"wide"}),day:Kc({values:m5,defaultWidth:"wide"}),dayPeriod:Kc({values:g5,defaultWidth:"wide",formattingValues:x5,defaultFormattingWidth:"wide"})};function Xc(e){return(t,n={})=>{const i=n.width,o=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],c=t.match(o);if(!c)return null;const d=c[0],f=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],h=Array.isArray(f)?S5(f,b=>b.test(d)):v5(f,b=>b.test(d));let g;g=e.valueCallback?e.valueCallback(h):h,g=n.valueCallback?n.valueCallback(g):g;const m=t.slice(d.length);return{value:g,rest:m}}}function v5(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function S5(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function w5(e){return(t,n={})=>{const i=t.match(e.matchPattern);if(!i)return null;const o=i[0],c=t.match(e.parsePattern);if(!c)return null;let d=e.valueCallback?e.valueCallback(c[0]):c[0];d=n.valueCallback?n.valueCallback(d):d;const f=t.slice(o.length);return{value:d,rest:f}}}const j5=/^(\d+)(th|st|nd|rd)?/i,C5=/\d+/i,T5={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},k5={any:[/^b/i,/^(a|c)/i]},E5={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},D5={any:[/1/i,/2/i,/3/i,/4/i]},M5={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},A5={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},R5={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},P5={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},O5={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},I5={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},W5={ordinalNumber:w5({matchPattern:j5,parsePattern:C5,valueCallback:e=>parseInt(e,10)}),era:Xc({matchPatterns:T5,defaultMatchWidth:"wide",parsePatterns:k5,defaultParseWidth:"any"}),quarter:Xc({matchPatterns:E5,defaultMatchWidth:"wide",parsePatterns:D5,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Xc({matchPatterns:M5,defaultMatchWidth:"wide",parsePatterns:A5,defaultParseWidth:"any"}),day:Xc({matchPatterns:R5,defaultMatchWidth:"wide",parsePatterns:P5,defaultParseWidth:"any"}),dayPeriod:Xc({matchPatterns:O5,defaultMatchWidth:"any",parsePatterns:I5,defaultParseWidth:"any"})},Jx={code:"en-US",formatDistance:i5,formatLong:c5,formatRelative:d5,localize:b5,match:W5,options:{weekStartsOn:0,firstWeekContainsDate:1}};function _5(e,t){const n=lt(e,t?.in);return XO(n,hT(n))+1}function mT(e,t){const n=lt(e,t?.in),i=+$l(n)-+ZO(n);return Math.round(i/iT)+1}function ey(e,t){const n=lt(e,t?.in),i=n.getFullYear(),o=Ro(),c=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,d=Mn(t?.in||e,0);d.setFullYear(i+1,0,c),d.setHours(0,0,0,0);const f=Qr(d,t),h=Mn(t?.in||e,0);h.setFullYear(i,0,c),h.setHours(0,0,0,0);const g=Qr(h,t);return+n>=+f?i+1:+n>=+g?i:i-1}function z5(e,t){const n=Ro(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=ey(e,t),c=Mn(t?.in||e,0);return c.setFullYear(o,0,i),c.setHours(0,0,0,0),Qr(c,t)}function ty(e,t){const n=lt(e,t?.in),i=+Qr(n,t)-+z5(n,t);return Math.round(i/iT)+1}function Qt(e,t){const n=e<0?"-":"",i=Math.abs(e).toString().padStart(t,"0");return n+i}const ba={y(e,t){const n=e.getFullYear(),i=n>0?n:1-n;return Qt(t==="yy"?i%100:i,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Qt(n+1,2)},d(e,t){return Qt(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Qt(e.getHours()%12||12,t.length)},H(e,t){return Qt(e.getHours(),t.length)},m(e,t){return Qt(e.getMinutes(),t.length)},s(e,t){return Qt(e.getSeconds(),t.length)},S(e,t){const n=t.length,i=e.getMilliseconds(),o=Math.trunc(i*Math.pow(10,n-3));return Qt(o,t.length)}},bl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},zw={G:function(e,t,n){const i=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const i=e.getFullYear(),o=i>0?i:1-i;return n.ordinalNumber(o,{unit:"year"})}return ba.y(e,t)},Y:function(e,t,n,i){const o=ey(e,i),c=o>0?o:1-o;if(t==="YY"){const d=c%100;return Qt(d,2)}return t==="Yo"?n.ordinalNumber(c,{unit:"year"}):Qt(c,t.length)},R:function(e,t){const n=cT(e);return Qt(n,t.length)},u:function(e,t){const n=e.getFullYear();return Qt(n,t.length)},Q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return Qt(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return Qt(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,n){const i=e.getMonth();switch(t){case"M":case"MM":return ba.M(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){const i=e.getMonth();switch(t){case"L":return String(i+1);case"LL":return Qt(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,n,i){const o=ty(e,i);return t==="wo"?n.ordinalNumber(o,{unit:"week"}):Qt(o,t.length)},I:function(e,t,n){const i=mT(e);return t==="Io"?n.ordinalNumber(i,{unit:"week"}):Qt(i,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):ba.d(e,t)},D:function(e,t,n){const i=_5(e);return t==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):Qt(i,t.length)},E:function(e,t,n){const i=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,n,i){const o=e.getDay(),c=(o-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(c);case"ee":return Qt(c,2);case"eo":return n.ordinalNumber(c,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,n,i){const o=e.getDay(),c=(o-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(c);case"cc":return Qt(c,t.length);case"co":return n.ordinalNumber(c,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,n){const i=e.getDay(),o=i===0?7:i;switch(t){case"i":return String(o);case"ii":return Qt(o,t.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,n){const o=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,t,n){const i=e.getHours();let o;switch(i===12?o=bl.noon:i===0?o=bl.midnight:o=i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,n){const i=e.getHours();let o;switch(i>=17?o=bl.evening:i>=12?o=bl.afternoon:i>=4?o=bl.morning:o=bl.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let i=e.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return ba.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):ba.H(e,t)},K:function(e,t,n){const i=e.getHours()%12;return t==="Ko"?n.ordinalNumber(i,{unit:"hour"}):Qt(i,t.length)},k:function(e,t,n){let i=e.getHours();return i===0&&(i=24),t==="ko"?n.ordinalNumber(i,{unit:"hour"}):Qt(i,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):ba.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):ba.s(e,t)},S:function(e,t){return ba.S(e,t)},X:function(e,t,n){const i=e.getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return Lw(i);case"XXXX":case"XX":return fo(i);case"XXXXX":case"XXX":default:return fo(i,":")}},x:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"x":return Lw(i);case"xxxx":case"xx":return fo(i);case"xxxxx":case"xxx":default:return fo(i,":")}},O:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Nw(i,":");case"OOOO":default:return"GMT"+fo(i,":")}},z:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Nw(i,":");case"zzzz":default:return"GMT"+fo(i,":")}},t:function(e,t,n){const i=Math.trunc(+e/1e3);return Qt(i,t.length)},T:function(e,t,n){return Qt(+e,t.length)}};function Nw(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),o=Math.trunc(i/60),c=i%60;return c===0?n+String(o):n+String(o)+t+Qt(c,2)}function Lw(e,t){return e%60===0?(e>0?"-":"+")+Qt(Math.abs(e)/60,2):fo(e,t)}function fo(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),o=Qt(Math.trunc(i/60),2),c=Qt(i%60,2);return n+o+t+c}const Fw=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},gT=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},N5=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],i=n[1],o=n[2];if(!o)return Fw(e,t);let c;switch(i){case"P":c=t.dateTime({width:"short"});break;case"PP":c=t.dateTime({width:"medium"});break;case"PPP":c=t.dateTime({width:"long"});break;case"PPPP":default:c=t.dateTime({width:"full"});break}return c.replace("{{date}}",Fw(i,t)).replace("{{time}}",gT(o,t))},dh={p:gT,P:N5},L5=/^D+$/,F5=/^Y+$/,B5=["D","DD","YY","YYYY"];function xT(e){return L5.test(e)}function yT(e){return F5.test(e)}function Hg(e,t,n){const i=V5(e,t,n);if(console.warn(i),B5.includes(e))throw new RangeError(i)}function V5(e,t,n){const i=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const H5=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,U5=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$5=/^'([^]*?)'?$/,q5=/''/g,Y5=/[a-zA-Z]/;function Ug(e,t,n){const i=Ro(),o=n?.locale??i.locale??Jx,c=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,d=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,f=lt(e,n?.in);if(!uT(f))throw new RangeError("Invalid time value");let h=t.match(U5).map(m=>{const b=m[0];if(b==="p"||b==="P"){const v=dh[b];return v(m,o.formatLong)}return m}).join("").match(H5).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const b=m[0];if(b==="'")return{isToken:!1,value:G5(m)};if(zw[b])return{isToken:!0,value:m};if(b.match(Y5))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:m}});o.localize.preprocessor&&(h=o.localize.preprocessor(f,h));const g={firstWeekContainsDate:c,weekStartsOn:d,locale:o};return h.map(m=>{if(!m.isToken)return m.value;const b=m.value;(!n?.useAdditionalWeekYearTokens&&yT(b)||!n?.useAdditionalDayOfYearTokens&&xT(b))&&Hg(b,t,String(e));const v=zw[b[0]];return v(f,b,o.localize,g)}).join("")}function G5(e){const t=e.match($5);return t?t[1].replace(q5,"'"):e}function Q5(e,t){return lt(e,t?.in).getDate()}function bT(e,t){const n=lt(e,t?.in),i=n.getFullYear(),o=n.getMonth(),c=Mn(n,0);return c.setFullYear(i,o+1,0),c.setHours(0,0,0,0),c.getDate()}function K5(){return Object.assign({},Ro())}function X5(e,t){return lt(e,t?.in).getHours()}function Z5(e,t){const n=lt(e,t?.in).getDay();return n===0?7:n}function J5(e){return lt(e).getMilliseconds()}function eI(e,t){return lt(e,t?.in).getMinutes()}function tI(e,t){return lt(e,t?.in).getMonth()}function nI(e){return lt(e).getSeconds()}function sI(e,t){return lt(e,t?.in).getFullYear()}function Zf(e,t){return+lt(e)>+lt(t)}function og(e,t){return+lt(e)<+lt(t)}function rI(e,t){return+lt(e)==+lt(t)}function iI(e,t){const n=aI(t)?new t(0):Mn(t,0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}function aI(e){return typeof e=="function"&&e.prototype?.constructor===e}const oI=10;class vT{subPriority=0;validate(t,n){return!0}}class lI extends vT{constructor(t,n,i,o,c){super(),this.value=t,this.validateValue=n,this.setValue=i,this.priority=o,c&&(this.subPriority=c)}validate(t,n){return this.validateValue(t,this.value,n)}set(t,n,i){return this.setValue(t,n,this.value,i)}}class cI extends vT{priority=oI;subPriority=-1;constructor(t,n){super(),this.context=t||(i=>Mn(n,i))}set(t,n){return n.timestampIsSet?t:Mn(t,iI(t,this.context))}}class Ht{run(t,n,i,o){const c=this.parse(t,n,i,o);return c?{setter:new lI(c.value,this.validate,this.set,this.priority,this.subPriority),rest:c.rest}:null}validate(t,n,i){return!0}}class uI extends Ht{priority=140;parse(t,n,i){switch(n){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});case"GGGG":default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}set(t,n,i){return n.era=i,t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["R","u","t","T"]}const qn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},oi={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Yn(e,t){return e&&{value:t(e.value),rest:e.rest}}function Rn(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function li(e,t){const n=t.match(e);if(!n)return null;if(n[0]==="Z")return{value:0,rest:t.slice(1)};const i=n[1]==="+"?1:-1,o=n[2]?parseInt(n[2],10):0,c=n[3]?parseInt(n[3],10):0,d=n[5]?parseInt(n[5],10):0;return{value:i*(o*oT+c*aT+d*GO),rest:t.slice(n[0].length)}}function ST(e){return Rn(qn.anyDigitsSigned,e)}function Ln(e,t){switch(e){case 1:return Rn(qn.singleDigit,t);case 2:return Rn(qn.twoDigits,t);case 3:return Rn(qn.threeDigits,t);case 4:return Rn(qn.fourDigits,t);default:return Rn(new RegExp("^\\d{1,"+e+"}"),t)}}function fh(e,t){switch(e){case 1:return Rn(qn.singleDigitSigned,t);case 2:return Rn(qn.twoDigitsSigned,t);case 3:return Rn(qn.threeDigitsSigned,t);case 4:return Rn(qn.fourDigitsSigned,t);default:return Rn(new RegExp("^-?\\d{1,"+e+"}"),t)}}function ny(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function wT(e,t){const n=t>0,i=n?t:1-t;let o;if(i<=50)o=e||100;else{const c=i+50,d=Math.trunc(c/100)*100,f=e>=c%100;o=e+d-(f?100:0)}return n?o:1-o}function jT(e){return e%400===0||e%4===0&&e%100!==0}class dI extends Ht{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(t,n,i){const o=c=>({year:c,isTwoDigitYear:n==="yy"});switch(n){case"y":return Yn(Ln(4,t),o);case"yo":return Yn(i.ordinalNumber(t,{unit:"year"}),o);default:return Yn(Ln(n.length,t),o)}}validate(t,n){return n.isTwoDigitYear||n.year>0}set(t,n,i){const o=t.getFullYear();if(i.isTwoDigitYear){const d=wT(i.year,o);return t.setFullYear(d,0,1),t.setHours(0,0,0,0),t}const c=!("era"in n)||n.era===1?i.year:1-i.year;return t.setFullYear(c,0,1),t.setHours(0,0,0,0),t}}class fI extends Ht{priority=130;parse(t,n,i){const o=c=>({year:c,isTwoDigitYear:n==="YY"});switch(n){case"Y":return Yn(Ln(4,t),o);case"Yo":return Yn(i.ordinalNumber(t,{unit:"year"}),o);default:return Yn(Ln(n.length,t),o)}}validate(t,n){return n.isTwoDigitYear||n.year>0}set(t,n,i,o){const c=ey(t,o);if(i.isTwoDigitYear){const f=wT(i.year,c);return t.setFullYear(f,0,o.firstWeekContainsDate),t.setHours(0,0,0,0),Qr(t,o)}const d=!("era"in n)||n.era===1?i.year:1-i.year;return t.setFullYear(d,0,o.firstWeekContainsDate),t.setHours(0,0,0,0),Qr(t,o)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class hI extends Ht{priority=130;parse(t,n){return fh(n==="R"?4:n.length,t)}set(t,n,i){const o=Mn(t,0);return o.setFullYear(i,0,4),o.setHours(0,0,0,0),$l(o)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class pI extends Ht{priority=130;parse(t,n){return fh(n==="u"?4:n.length,t)}set(t,n,i){return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class mI extends Ht{priority=120;parse(t,n,i){switch(n){case"Q":case"QQ":return Ln(n.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=1&&n<=4}set(t,n,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class gI extends Ht{priority=120;parse(t,n,i){switch(n){case"q":case"qq":return Ln(n.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=1&&n<=4}set(t,n,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class xI extends Ht{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(t,n,i){const o=c=>c-1;switch(n){case"M":return Yn(Rn(qn.month,t),o);case"MM":return Yn(Ln(2,t),o);case"Mo":return Yn(i.ordinalNumber(t,{unit:"month"}),o);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=11}set(t,n,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}class yI extends Ht{priority=110;parse(t,n,i){const o=c=>c-1;switch(n){case"L":return Yn(Rn(qn.month,t),o);case"LL":return Yn(Ln(2,t),o);case"Lo":return Yn(i.ordinalNumber(t,{unit:"month"}),o);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=11}set(t,n,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function bI(e,t,n){const i=lt(e,n?.in),o=ty(i,n)-t;return i.setDate(i.getDate()-o*7),lt(i,n?.in)}class vI extends Ht{priority=100;parse(t,n,i){switch(n){case"w":return Rn(qn.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return Ln(n.length,t)}}validate(t,n){return n>=1&&n<=53}set(t,n,i,o){return Qr(bI(t,i,o),o)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function SI(e,t,n){const i=lt(e,n?.in),o=mT(i,n)-t;return i.setDate(i.getDate()-o*7),i}class wI extends Ht{priority=100;parse(t,n,i){switch(n){case"I":return Rn(qn.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return Ln(n.length,t)}}validate(t,n){return n>=1&&n<=53}set(t,n,i){return $l(SI(t,i))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const jI=[31,28,31,30,31,30,31,31,30,31,30,31],CI=[31,29,31,30,31,30,31,31,30,31,30,31];class TI extends Ht{priority=90;subPriority=1;parse(t,n,i){switch(n){case"d":return Rn(qn.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return Ln(n.length,t)}}validate(t,n){const i=t.getFullYear(),o=jT(i),c=t.getMonth();return o?n>=1&&n<=CI[c]:n>=1&&n<=jI[c]}set(t,n,i){return t.setDate(i),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class kI extends Ht{priority=90;subpriority=1;parse(t,n,i){switch(n){case"D":case"DD":return Rn(qn.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return Ln(n.length,t)}}validate(t,n){const i=t.getFullYear();return jT(i)?n>=1&&n<=366:n>=1&&n<=365}set(t,n,i){return t.setMonth(0,i),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function sy(e,t,n){const i=Ro(),o=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,c=lt(e,n?.in),d=c.getDay(),h=(t%7+7)%7,g=7-o,m=t<0||t>6?t-(d+g)%7:(h+g)%7-(d+g)%7;return cd(c,m,n)}class EI extends Ht{priority=90;parse(t,n,i){switch(n){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(t,n,i,o){return t=sy(t,i,o),t.setHours(0,0,0,0),t}incompatibleTokens=["D","i","e","c","t","T"]}class DI extends Ht{priority=90;parse(t,n,i,o){const c=d=>{const f=Math.floor((d-1)/7)*7;return(d+o.weekStartsOn+6)%7+f};switch(n){case"e":case"ee":return Yn(Ln(n.length,t),c);case"eo":return Yn(i.ordinalNumber(t,{unit:"day"}),c);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(t,n,i,o){return t=sy(t,i,o),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class MI extends Ht{priority=90;parse(t,n,i,o){const c=d=>{const f=Math.floor((d-1)/7)*7;return(d+o.weekStartsOn+6)%7+f};switch(n){case"c":case"cc":return Yn(Ln(n.length,t),c);case"co":return Yn(i.ordinalNumber(t,{unit:"day"}),c);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=6}set(t,n,i,o){return t=sy(t,i,o),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function AI(e,t,n){const i=lt(e,n?.in),o=Z5(i,n),c=t-o;return cd(i,c,n)}class RI extends Ht{priority=90;parse(t,n,i){const o=c=>c===0?7:c;switch(n){case"i":case"ii":return Ln(n.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return Yn(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),o);case"iiiii":return Yn(i.day(t,{width:"narrow",context:"formatting"}),o);case"iiiiii":return Yn(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),o);case"iiii":default:return Yn(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),o)}}validate(t,n){return n>=1&&n<=7}set(t,n,i){return t=AI(t,i),t.setHours(0,0,0,0),t}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class PI extends Ht{priority=80;parse(t,n,i){switch(n){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,i){return t.setHours(ny(i),0,0,0),t}incompatibleTokens=["b","B","H","k","t","T"]}class OI extends Ht{priority=80;parse(t,n,i){switch(n){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,i){return t.setHours(ny(i),0,0,0),t}incompatibleTokens=["a","B","H","k","t","T"]}class II extends Ht{priority=80;parse(t,n,i){switch(n){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,i){return t.setHours(ny(i),0,0,0),t}incompatibleTokens=["a","b","t","T"]}class WI extends Ht{priority=70;parse(t,n,i){switch(n){case"h":return Rn(qn.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return Ln(n.length,t)}}validate(t,n){return n>=1&&n<=12}set(t,n,i){const o=t.getHours()>=12;return o&&i<12?t.setHours(i+12,0,0,0):!o&&i===12?t.setHours(0,0,0,0):t.setHours(i,0,0,0),t}incompatibleTokens=["H","K","k","t","T"]}class _I extends Ht{priority=70;parse(t,n,i){switch(n){case"H":return Rn(qn.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return Ln(n.length,t)}}validate(t,n){return n>=0&&n<=23}set(t,n,i){return t.setHours(i,0,0,0),t}incompatibleTokens=["a","b","h","K","k","t","T"]}class zI extends Ht{priority=70;parse(t,n,i){switch(n){case"K":return Rn(qn.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return Ln(n.length,t)}}validate(t,n){return n>=0&&n<=11}set(t,n,i){return t.getHours()>=12&&i<12?t.setHours(i+12,0,0,0):t.setHours(i,0,0,0),t}incompatibleTokens=["h","H","k","t","T"]}class NI extends Ht{priority=70;parse(t,n,i){switch(n){case"k":return Rn(qn.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return Ln(n.length,t)}}validate(t,n){return n>=1&&n<=24}set(t,n,i){const o=i<=24?i%24:i;return t.setHours(o,0,0,0),t}incompatibleTokens=["a","b","h","H","K","t","T"]}class LI extends Ht{priority=60;parse(t,n,i){switch(n){case"m":return Rn(qn.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return Ln(n.length,t)}}validate(t,n){return n>=0&&n<=59}set(t,n,i){return t.setMinutes(i,0,0),t}incompatibleTokens=["t","T"]}class FI extends Ht{priority=50;parse(t,n,i){switch(n){case"s":return Rn(qn.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return Ln(n.length,t)}}validate(t,n){return n>=0&&n<=59}set(t,n,i){return t.setSeconds(i,0),t}incompatibleTokens=["t","T"]}class BI extends Ht{priority=30;parse(t,n){const i=o=>Math.trunc(o*Math.pow(10,-n.length+3));return Yn(Ln(n.length,t),i)}set(t,n,i){return t.setMilliseconds(i),t}incompatibleTokens=["t","T"]}class VI extends Ht{priority=10;parse(t,n){switch(n){case"X":return li(oi.basicOptionalMinutes,t);case"XX":return li(oi.basic,t);case"XXXX":return li(oi.basicOptionalSeconds,t);case"XXXXX":return li(oi.extendedOptionalSeconds,t);case"XXX":default:return li(oi.extended,t)}}set(t,n,i){return n.timestampIsSet?t:Mn(t,t.getTime()-uh(t)-i)}incompatibleTokens=["t","T","x"]}class HI extends Ht{priority=10;parse(t,n){switch(n){case"x":return li(oi.basicOptionalMinutes,t);case"xx":return li(oi.basic,t);case"xxxx":return li(oi.basicOptionalSeconds,t);case"xxxxx":return li(oi.extendedOptionalSeconds,t);case"xxx":default:return li(oi.extended,t)}}set(t,n,i){return n.timestampIsSet?t:Mn(t,t.getTime()-uh(t)-i)}incompatibleTokens=["t","T","X"]}class UI extends Ht{priority=40;parse(t){return ST(t)}set(t,n,i){return[Mn(t,i*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class $I extends Ht{priority=20;parse(t){return ST(t)}set(t,n,i){return[Mn(t,i),{timestampIsSet:!0}]}incompatibleTokens="*"}const qI={G:new uI,y:new dI,Y:new fI,R:new hI,u:new pI,Q:new mI,q:new gI,M:new xI,L:new yI,w:new vI,I:new wI,d:new TI,D:new kI,E:new EI,e:new DI,c:new MI,i:new RI,a:new PI,b:new OI,B:new II,h:new WI,H:new _I,K:new zI,k:new NI,m:new LI,s:new FI,S:new BI,X:new VI,x:new HI,t:new UI,T:new $I},YI=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,GI=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,QI=/^'([^]*?)'?$/,KI=/''/g,XI=/\S/,ZI=/[a-zA-Z]/;function JI(e,t,n,i){const o=()=>Mn(i?.in||n,NaN),c=K5(),d=i?.locale??c.locale??Jx,f=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??c.firstWeekContainsDate??c.locale?.options?.firstWeekContainsDate??1,h=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??c.weekStartsOn??c.locale?.options?.weekStartsOn??0;if(!t)return e?o():lt(n,i?.in);const g={firstWeekContainsDate:f,weekStartsOn:h,locale:d},m=[new cI(i?.in,n)],b=t.match(GI).map(w=>{const C=w[0];if(C in dh){const k=dh[C];return k(w,d.formatLong)}return w}).join("").match(YI),v=[];for(let w of b){!i?.useAdditionalWeekYearTokens&&yT(w)&&Hg(w,t,e),!i?.useAdditionalDayOfYearTokens&&xT(w)&&Hg(w,t,e);const C=w[0],k=qI[C];if(k){const{incompatibleTokens:R}=k;if(Array.isArray(R)){const I=v.find(P=>R.includes(P.token)||P.token===C);if(I)throw new RangeError(`The format string mustn't contain \`${I.fullToken}\` and \`${w}\` at the same time`)}else if(k.incompatibleTokens==="*"&&v.length>0)throw new RangeError(`The format string mustn't contain \`${w}\` and any other token at the same time`);v.push({token:C,fullToken:w});const O=k.run(e,w,d.match,g);if(!O)return o();m.push(O.setter),e=O.rest}else{if(C.match(ZI))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");if(w==="''"?w="'":C==="'"&&(w=eW(w)),e.indexOf(w)===0)e=e.slice(w.length);else return o()}}if(e.length>0&&XI.test(e))return o();const j=m.map(w=>w.priority).sort((w,C)=>C-w).filter((w,C,k)=>k.indexOf(w)===C).map(w=>m.filter(C=>C.priority===w).sort((C,k)=>k.subPriority-C.subPriority)).map(w=>w[0]);let E=lt(n,i?.in);if(isNaN(+E))return o();const S={};for(const w of j){if(!w.validate(E,g))return o();const C=w.set(E,S,g);Array.isArray(C)?(E=C[0],Object.assign(S,C[1])):E=C}return E}function eW(e){return e.match(QI)[1].replace(KI,"'")}function Bw(e,t){const n=lt(e,t?.in);return n.setMinutes(0,0,0),n}function tW(e,t,n){const[i,o]=ud(n?.in,e,t);return+Bw(i)==+Bw(o)}function CT(e,t,n){const[i,o]=ud(n?.in,e,t);return i.getFullYear()===o.getFullYear()&&i.getMonth()===o.getMonth()}function nW(e,t,n){const[i,o]=ud(n?.in,e,t);return i.getFullYear()===o.getFullYear()}function sW(e,t,n){const i=+lt(e,n?.in),[o,c]=[+lt(t.start,n?.in),+lt(t.end,n?.in)].sort((d,f)=>d-f);return i>=o&&i<=c}function rW(e,t,n){const i=lt(e,n?.in),o=i.getFullYear(),c=i.getDate(),d=Mn(e,0);d.setFullYear(o,t,15),d.setHours(0,0,0,0);const f=bT(d);return i.setMonth(t,Math.min(c,f)),i}function iW(e,t,n){const i=lt(e,n?.in);return i.setDate(t),i}function aW(e,t,n){const i=lt(e,n?.in);return i.setHours(t),i}function oW(e,t,n){const i=lt(e,n?.in);return i.setMilliseconds(t),i}function lW(e,t,n){const i=lt(e,n?.in);return i.setMinutes(t),i}function cW(e,t,n){const i=lt(e,n?.in);return i.setSeconds(t),i}function uW(e,t,n){const i=lt(e,n?.in);return isNaN(+i)?Mn(e,NaN):(i.setFullYear(t),i)}function dW(e,t,n){return Oh(e,-1,n)}const TT=y.createContext({}),Po=()=>y.useContext(TT),Zc={currentWeek:1,cycleStartDate:null,deloadWeekActive:!1,weeklySchedule:{Monday:null,Tuesday:null,Wednesday:null,Thursday:null,Friday:null,Saturday:null,Sunday:null},favorites:[]},kT=({children:e})=>{const{currentUser:t,isGuest:n}=Ao(),[i,o]=y.useState(Zc),[c,d]=y.useState(!0),f=y.useCallback(()=>{const O=Qr(new Date,{weekStartsOn:0});return O.setHours(0,0,0,0),O.toISOString()},[]),h=y.useCallback(R=>{if(!R)return 1;const O=new Date(R),I=new Date(f());return Math.floor((I-O)/(10080*60*1e3))+1},[f]),g=y.useCallback(async R=>{const O=f();if(R.cycleStartDate&&Zf(new Date(O),new Date(R.cycleStartDate))){const I=h(R.cycleStartDate);if(I!==R.currentWeek){const P=R.deloadWeekActive,W={...R,currentWeek:I,deloadWeekActive:!1};return o(W),await m(W),{updated:!0,wasDeloadActive:P}}}return{updated:!1,wasDeloadActive:!1}},[f,h]);y.useEffect(()=>{t!==void 0&&(async()=>{d(!0);try{let O=null;if(t&&!n)O=(await Rs(t.uid))?.weekScheduling;else{const I=localStorage.getItem("goodlift_week_scheduling");I&&(O=JSON.parse(I))}if(O){const I={...Zc,...O,weeklySchedule:{...Zc.weeklySchedule,...O.weeklySchedule||{}}};o(I),await g(I)}else{const I={...Zc,cycleStartDate:f()};o(I),await m(I)}}catch(O){console.error("Error loading week state:",O);const I={...Zc,cycleStartDate:f()};o(I)}finally{d(!1)}})()},[t,n,f,g]);const m=async R=>{try{t&&!n?await Zt(t.uid,{weekScheduling:R}):localStorage.setItem("goodlift_week_scheduling",JSON.stringify(R))}catch(O){throw console.error("Error saving week state:",O),O}},b=y.useCallback(async()=>{const R={...i,currentWeek:1,cycleStartDate:f(),deloadWeekActive:!1};return o(R),await m(R),R},[i,f]),v=y.useCallback(async()=>{if(i.currentWeek<4)throw new Error("Deload week only available from week 4 onwards");const R={...i,deloadWeekActive:!0,weeklySchedule:{Monday:null,Tuesday:null,Wednesday:null,Thursday:null,Friday:null,Saturday:null,Sunday:null}};return o(R),await m(R),R},[i]),j=y.useCallback(()=>i.currentWeek===1,[i.currentWeek]),E=y.useCallback(async(R,O)=>{const I={...i.weeklySchedule,[R]:O},P={...i,weeklySchedule:I};return o(P),await m(P),P},[i]),S=y.useCallback(async R=>{const O={...R,id:`fav_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,addedAt:new Date().toISOString()},I=[...i.favorites,O],P={...i,favorites:I};return o(P),await m(P),O},[i]),w=y.useCallback(async R=>{const O=i.favorites.filter(P=>P.id!==R),I={...i,favorites:O};return o(I),await m(I),I},[i]),C=y.useCallback((R,O=[])=>{if(!O||O.length===0)return null;const I=new Date;I.setDate(I.getDate()-7);const W={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6}[R],L=O.filter(z=>{const q=new Date(z.date);return q.getDay()===W&&q>=new Date(I.getTime()-10080*60*1e3)&&q<I});return L.length>0?L[L.length-1]:null},[]),k={weekState:i,loading:c,currentWeek:i.currentWeek,cycleStartDate:i.cycleStartDate,deloadWeekActive:i.deloadWeekActive,weeklySchedule:i.weeklySchedule,favorites:i.favorites,resetWeekCycle:b,triggerDeloadWeek:v,isAutoAssignWeek:j,assignWorkoutToDay:E,addToFavorites:S,removeFromFavorites:w,getWorkoutSuggestion:C,checkAndIncrementWeek:()=>g(i)};return r.jsx(TT.Provider,{value:k,children:e})};kT.propTypes={children:T.node.isRequired};const Xl={desktop:1024},Vw={minimum:"44px",navigation:"56px"},Hw={navigation:1e3},fW={home:"Work",preview:"Workout Preview",workout:"Workout",completion:"Workout Complete",progress:"Progress",settings:"Settings",profile:"Profile","exercise-list":"Exercise Library",cardio:"Timer",hiit:"Timer",timer:"Timer",stretch:"Mobility",mobility:"Mobility","log-activity":"Log Activity","edit-weekly-schedule":"Weekly Schedule"},ET=({currentTab:e,currentSubtab:t})=>{const n=Ia(),i=cr(`(min-width: ${Xl.desktop}px)`),{currentWeek:o,deloadWeekActive:c,triggerDeloadWeek:d}=Po(),[f,h]=y.useState(!1),g=()=>{h(!0)},m=async()=>{try{await d(),h(!1)}catch(j){console.error("Error triggering deload week:",j)}},b=()=>{h(!1)},v=fW[e]||"GoodLift";return r.jsxs(A,{component:"header",sx:{position:"fixed",top:0,left:i?"80px":0,right:0,height:"48px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",paddingLeft:i?"2rem":"1rem",paddingRight:i?"2rem":"1rem",background:n.palette.background.default,zIndex:100,borderBottom:`1px solid ${n.palette.divider}`},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[r.jsx(M,{variant:"h6",sx:{fontWeight:600,fontSize:"1rem",color:"text.primary",letterSpacing:"-0.01em"},children:v}),t&&r.jsxs(r.Fragment,{children:[r.jsx(M,{sx:{color:"text.secondary",fontSize:"1rem",mx:.5},children:"/"}),r.jsx(M,{sx:{fontWeight:500,fontSize:"0.9rem",color:"text.secondary"},children:t})]})]}),r.jsx(Bx,{currentWeek:o,deloadWeekActive:c,onDeloadTrigger:g,clickable:!0}),r.jsxs(Et,{open:f,onClose:b,maxWidth:"sm",fullWidth:!0,children:[r.jsx(zt,{children:"Trigger Deload Week?"}),r.jsx(Dt,{children:r.jsx(M,{children:"This will activate deload week, replacing your scheduled workouts with recovery-focused sessions. The week counter will continue normally, and deload mode will end after this week completes."})}),r.jsxs(Nt,{children:[r.jsx(Ce,{onClick:b,color:"inherit",children:"Cancel"}),r.jsx(Ce,{onClick:m,variant:"contained",color:"warning",children:"Activate Deload"})]})]})]})};ET.propTypes={currentTab:T.string,currentSubtab:T.string};const lg="#1db584",ry=y.memo(({currentScreen:e,onNavigate:t})=>{const n=Ia(),i=cr(`(min-width: ${Xl.desktop}px)`),o=[{id:"home",label:"Work",iconActive:null,iconInactive:null,customIcon:"goodlift-favicon.svg",screens:["home","preview","workout","customize","custom-preview","completion","timer","cardio","hiit"]},{id:"progress",label:"Progress",iconActive:qr,iconInactive:mR,screens:["progress"]},{id:"settings",label:"Settings",iconActive:Wg,iconInactive:gR,screens:["settings","log-activity","exercise-list","profile","stretch","mobility"]}],c=f=>{t(f)},d=f=>f.screens.includes(e);return i?r.jsxs("nav",{style:{position:"fixed",left:0,top:0,width:"80px",height:"100vh",backgroundColor:n.palette.background.paper,borderRight:`1px solid ${n.palette.divider}`,zIndex:Hw.navigation,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"1rem",gap:"0.5rem"},children:[r.jsx("div",{style:{marginBottom:"1.5rem",padding:"0.5rem"},children:r.jsx("img",{src:"/goodlift/goodlift-favicon.svg",alt:"GoodLift",style:{width:"40px",height:"40px"}})}),o.map(f=>{const h=d(f),g=h?f.iconActive:f.iconInactive;return r.jsxs("button",{onClick:()=>c(f.id),style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"64px",height:"64px",background:h?`${lg}15`:"transparent",border:"none",borderRadius:"12px",cursor:"pointer",color:h?lg:n.palette.text.secondary,transition:"all 0.2s ease",padding:"8px"},"aria-label":f.label,"aria-current":h?"page":void 0,children:[r.jsx("div",{style:{fontSize:"1.5rem",marginBottom:"4px",display:"flex",alignItems:"center",justifyContent:"center"},children:f.customIcon?r.jsx("img",{src:`/goodlift/${f.customIcon}`,alt:f.label,style:{width:"28px",height:"28px",filter:h?"none":n.palette.mode==="dark"?"brightness(0.6)":"brightness(0.5)"}}):r.jsx(g,{sx:{fontSize:"1.75rem"}})}),r.jsx("span",{style:{fontSize:"0.65rem",fontWeight:h?600:400,textTransform:"uppercase",letterSpacing:"0.5px",lineHeight:1},children:f.label})]},f.id)})]}):r.jsx("nav",{style:{position:"fixed",bottom:0,left:0,right:0,height:`calc(${Vw.navigation} + env(safe-area-inset-bottom))`,backgroundColor:n.palette.background.default,borderTop:`1px solid ${n.palette.divider}`,zIndex:Hw.navigation,display:"flex",alignItems:"center",justifyContent:"space-around",paddingBottom:"env(safe-area-inset-bottom)",paddingLeft:"env(safe-area-inset-left)",paddingRight:"env(safe-area-inset-right)"},children:o.map(f=>{const h=d(f),g=h?f.iconActive:f.iconInactive;return r.jsxs("button",{onClick:()=>c(f.id),style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1,height:"100%",minWidth:Vw.minimum,background:"transparent",border:"none",cursor:"pointer",color:h?lg:n.palette.text.secondary,transition:"color 0.2s ease, opacity 0.15s ease",padding:"8px 4px",position:"relative"},"aria-label":f.label,"aria-current":h?"page":void 0,children:[r.jsx("div",{style:{fontSize:"1.5rem",marginBottom:"2px",display:"flex",alignItems:"center",justifyContent:"center"},children:f.customIcon?r.jsx("img",{src:`/goodlift/${f.customIcon}`,alt:f.label,style:{width:"24px",height:"24px",filter:h?"none":n.palette.mode==="dark"?"brightness(0.6)":"brightness(0.5)"}}):r.jsx(g,{sx:{fontSize:"1.5rem"}})}),r.jsx("span",{style:{fontSize:"0.625rem",fontWeight:h?600:400,textTransform:"uppercase",letterSpacing:"0.5px",lineHeight:1},children:f.label})]},f.id)})})});ry.displayName="BottomNav";ry.propTypes={currentScreen:T.string.isRequired,onNavigate:T.func.isRequired};const hW=e=>({push:"Push",pull:"Pull",legs:"Legs",upper:"Upper",lower:"Lower",full:"Full",stretch:"Stretch",hiit:"HIIT",rest:"Rest",cardio:"Cardio",core:"Core",strength:"Strength",hypertrophy:"Hypertrophy",active_recovery:"Active Recovery"})[e]||e.charAt(0).toUpperCase()+e.slice(1),Uw=e=>({push:"Push",pull:"Pull",legs:"Legs",upper:"Upper Body",lower:"Lower Body",full:"Full Body",stretch:"Stretch",hiit:"HIIT",rest:"Rest",cardio:"Cardio",strength:"Strength",hypertrophy:"Hypertrophy",active_recovery:"Active Recovery"})[e]||e.charAt(0).toUpperCase()+e.slice(1),cg=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],pW=e=>e&&(e["Exercise Name"]||e.exerciseName||e.name)||null,mW=e=>!e||!Array.isArray(e)?0:e.filter(t=>t>1).length,iy=y.memo(({onCreateWorkout:e,onStartWorkout:t,onEditWorkout:n})=>{const{assignWorkoutToDay:i}=Po(),[o,c]=y.useState([]),[d,f]=y.useState(null),[h,g]=y.useState(null),[m,b]=y.useState(!1),[v,j]=y.useState(null),[E,S]=y.useState(!1);y.useEffect(()=>{(async()=>{try{const N=await Mr();c(N||[])}catch(N){console.error("Error loading saved workouts:",N),c([])}})()},[]);const w=[...o].sort(($,N)=>{const V=$.assignedDay,F=N.assignedDay;return V&&F?cg.indexOf(V)-cg.indexOf(F):V&&!F?-1:!V&&F?1:0}),C=w.filter($=>!$.archived),k=w.filter($=>$.archived),R=($,N)=>{$.stopPropagation(),f($.currentTarget),g(N)},O=()=>{f(null),g(null)},I=async()=>{if(h!==null)try{await LO(h);const $=await Mr();c($||[])}catch($){console.error("Error deleting workout:",$)}O()},P=$=>{j($),b(!0),O()},W=()=>{b(!1),j(null)},L=async $=>{if(v!==null)try{const N=o[v],V={...N,assignedDay:$};await Su(v,V),await i($,{sessionType:N.type||"full",sessionName:N.name||`${N.type||"Custom"} Workout`,exercises:N.exercises,supersetConfig:N.supersetConfig||[2,2,2,2]});const F=await Mr();c(F||[])}catch(N){console.error("Error assigning workout to day:",N)}W()},z=async()=>{if(v!==null)try{const N={...o[v],assignedDay:void 0};await Su(v,N);const V=await Mr();c(V||[])}catch($){console.error("Error unassigning workout from day:",$)}W()},q=$=>{if(!$||!$.exercises||$.exercises.length===0){console.warn("Cannot start workout: no exercises found in workout");return}if(!t){console.warn("No onStartWorkout callback provided");return}try{if(!$.exercises.every(F=>pW(F)!==null)){console.error("Invalid exercise data in workout");return}const V=$.supersetConfig||[2,2,2,2];t($.type||"full","all",$.exercises,V)}catch(N){console.error("Error starting workout:",N)}},B=()=>{if(h!==null&&n){const $=o[h];n($,h)}O()},U=async()=>{if(h!==null)try{const $=o[h],N={...$,archived:!$.archived};await Su(h,N);const V=await Mr();c(V||[])}catch($){console.error("Error archiving/unarchiving workout:",$)}O()},re=async()=>{if(h!==null)try{await FO(h);const $=await Mr();c($||[])}catch($){console.error("Error duplicating workout:",$)}O()},H=$=>$.length===0?null:r.jsx(wn,{sx:{p:0},children:$.map(N=>{const V=o.findIndex(X=>X.id===N.id||X.createdAt===N.createdAt&&X.name===N.name),F=mW(N.supersetConfig);return r.jsx(Ge,{sx:{mb:1.5,borderRadius:2},children:r.jsx(it,{disablePadding:!0,secondaryAction:r.jsx(Ie,{edge:"end",onClick:X=>R(X,V),size:"small",sx:{mr:.5},children:r.jsx(SR,{fontSize:"small"})}),children:r.jsx(Ur,{onClick:()=>q(N),sx:{py:1.5,px:2},children:r.jsx(St,{primary:r.jsx(M,{variant:"subtitle1",sx:{fontWeight:600,fontSize:"0.95rem",mb:.5},children:N.name||`${N.type||"Custom"} Workout`}),secondary:r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1.5,color:"text.secondary",fontSize:"0.75rem"},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[r.jsx(Nn,{sx:{fontSize:"0.875rem",opacity:.7}}),r.jsx("span",{children:N.exercises?.length||0})]}),N.type&&r.jsx(A,{sx:{display:"flex",alignItems:"center"},children:r.jsx(M,{component:"span",sx:{fontSize:"0.75rem",color:"text.secondary",textTransform:"lowercase"},children:hW(N.type)})}),F>0&&r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[r.jsx(vR,{sx:{fontSize:"0.875rem",opacity:.7}}),r.jsx("span",{children:F})]}),N.assignedDay&&r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:.5,color:"primary.main"},children:[r.jsx(_u,{sx:{fontSize:"0.875rem"}}),r.jsx("span",{style:{fontWeight:500},children:N.assignedDay.substring(0,3)})]})]})})})})},N.id||V)})});return r.jsxs(A,{children:[r.jsxs(Le,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:1.5},children:[r.jsx(M,{variant:"subtitle1",sx:{fontWeight:600},children:"My Workouts"}),r.jsx(Ie,{color:"primary",onClick:e,size:"small",sx:{bgcolor:"primary.main",color:"white",width:32,height:32,"&:hover":{bgcolor:"primary.dark"}},children:r.jsx($n,{fontSize:"small"})})]}),C.length===0&&k.length===0?r.jsx(Ge,{sx:{borderRadius:3},children:r.jsx(at,{sx:{textAlign:"center",py:4},children:r.jsx(M,{variant:"body1",color:"text.secondary",children:"No saved workouts."})})}):r.jsxs(r.Fragment,{children:[C.length===0?r.jsx(Ge,{sx:{borderRadius:3,mb:2},children:r.jsx(at,{sx:{textAlign:"center",py:3},children:r.jsx(M,{variant:"body2",color:"text.secondary",children:"No active workouts. All workouts are archived."})})}):H(C),k.length>0&&r.jsxs(A,{sx:{mt:3},children:[r.jsx(Ce,{fullWidth:!0,onClick:()=>S(!E),sx:{justifyContent:"space-between",textTransform:"none",mb:2,py:1.5,borderRadius:2,border:"1px solid",borderColor:"divider"},endIcon:E?r.jsx(Nx,{}):r.jsx(sd,{}),children:r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(xw,{fontSize:"small"}),r.jsxs(M,{variant:"subtitle1",fontWeight:600,children:["Archived Workouts (",k.length,")"]})]})}),r.jsx(Nl,{in:E,children:H(k)})]})]}),r.jsxs(xR,{anchorEl:d,open:!!d,onClose:O,children:[r.jsxs(Be,{onClick:B,children:[r.jsx(Da,{sx:{mr:1},fontSize:"small"}),"Edit"]}),r.jsxs(Be,{onClick:re,children:[r.jsx(yR,{sx:{mr:1},fontSize:"small"}),"Duplicate"]}),r.jsxs(Be,{onClick:()=>P(h),children:[r.jsx(_u,{sx:{mr:1},fontSize:"small"}),"Assign to Day"]}),r.jsx(Be,{onClick:U,children:h!==null&&o[h]?.archived?r.jsxs(r.Fragment,{children:[r.jsx(bR,{sx:{mr:1},fontSize:"small"}),"Unarchive"]}):r.jsxs(r.Fragment,{children:[r.jsx(xw,{sx:{mr:1},fontSize:"small"}),"Archive"]})}),r.jsxs(Be,{onClick:I,children:[r.jsx(jo,{sx:{mr:1},fontSize:"small"}),"Delete"]})]}),r.jsxs(Et,{open:m,onClose:W,maxWidth:"xs",fullWidth:!0,children:[r.jsx(zt,{children:"Assign to Day"}),r.jsxs(Dt,{children:[r.jsx(M,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Select which day of the week this workout should be assigned to"}),r.jsx(Le,{spacing:1,children:cg.map($=>r.jsx(Ce,{variant:"outlined",fullWidth:!0,onClick:()=>L($),sx:{justifyContent:"flex-start"},children:$},$))})]}),r.jsxs(Nt,{children:[v!==null&&o[v]?.assignedDay&&r.jsx(Ce,{onClick:z,color:"warning",children:"Unassign"}),r.jsx(Ce,{onClick:W,children:"Cancel"})]})]})]})});iy.displayName="SavedWorkoutsList";iy.propTypes={onCreateWorkout:T.func,onStartWorkout:T.func,onEditWorkout:T.func};const $w=3,DT=8,Oo="/goodlift/data/exercises.json",gW="/goodlift/data/hiit-exercises.json",Of={UPPER_BODY:["Chest","Upper Chest","Lower Chest","Inner Chest","Back","Lats","Upper Back","Lower Back","Delts","Front Delts","Rear Delts","Side Delts","Biceps","Triceps","Forearms","Traps"],LOWER_BODY:["Quads","Hamstrings","Glutes","Calves","Hip Flexors"]},va={UPPER_BODY:{DUMBBELL:2.5,BARBELL:5},LOWER_BODY:{DUMBBELL:10,BARBELL:5}},xW={MILLISECONDS_PER_DAY:864e5},yW=(e,t="intermediate")=>({beginner:{full:6,upper:6,lower:6,push:7,pull:7,legs:7,core:6},intermediate:{full:8,upper:8,lower:8,push:8,pull:8,legs:8,core:8},advanced:{full:9,upper:10,lower:10,push:10,pull:10,legs:10,core:10}})[t]?.[e]||DT,bW={Chest:"Lats",Lats:"Chest",Quads:"Hamstrings",Hamstrings:"Quads",Biceps:"Triceps",Triceps:"Biceps",Shoulders:"Lats"},bn=(e,t,n,i=[],o="all")=>{let c=(e[t]||[]).filter(f=>!i.some(h=>h["Exercise Name"]===f["Exercise Name"]));if(o!=="all"){const f=Array.isArray(o)?o:[o];c=c.filter(h=>{const g=h.Equipment.toLowerCase();return f.some(m=>{const b=m.toLowerCase();return b==="cable machine"?g.includes("cable"):b==="dumbbells"?g.includes("dumbbell"):g.includes(b)})})}if(c.length<n)return console.warn(`Insufficient exercises for ${t}. Available: ${c.length}, Requested: ${n}`),c;const d=[...c];for(let f=d.length-1;f>0;f--){const h=Math.floor(Math.random()*(f+1));[d[f],d[h]]=[d[h],d[f]]}return d.slice(0,n)},vW=e=>{const t=[],n=[...e];let i=1;for(;n.length>=2;){const o=n.shift(),c=o["Primary Muscle"].split("(")[0].trim(),d=bW[c];let f=-1;d&&(f=n.findIndex(g=>g["Primary Muscle"].includes(d))),f===-1&&(f=n.findIndex(g=>!g["Primary Muscle"].includes(c))),f===-1&&(f=0);const h=n.splice(f,1)[0];t.push({...o,supersetGroup:i}),t.push({...h,supersetGroup:i}),i++}return n.length>0&&t.push(...n.map(o=>({...o,supersetGroup:null}))),t},SW=(e,t,n="all",i="intermediate")=>{const o=e.reduce((f,h)=>{const g=h["Primary Muscle"].split("(")[0].trim();return f[g]||(f[g]=[]),f[g].push(h),f},{});let c=[];const d=yW(t,i);switch(t){case"push":c.push(...bn(o,"Chest",3,c,n)),c.push(...bn(o,"Delts",2,c,n)),c.push(...bn(o,"Triceps",3,c,n));break;case"pull":c.push(...bn(o,"Lats",4,c,n)),c.push(...bn(o,"Biceps",3,c,n)),c.push(...bn(o,"Traps",1,c,n));break;case"legs":c.push(...bn(o,"Quads",3,c,n)),c.push(...bn(o,"Hamstrings",3,c,n)),c.push(...bn(o,"Glutes",1,c,n)),c.push(...bn(o,"Calves",1,c,n));break;case"upper":c.push(...bn(o,"Chest",3,c,n)),c.push(...bn(o,"Lats",3,c,n)),c.push(...bn(o,"Biceps",1,c,n)),c.push(...bn(o,"Triceps",1,c,n));break;case"lower":{const f=Math.min(4,Math.floor(d*.4)),h=Math.min(3,Math.floor(d*.3)),g=Math.max(1,d-f-h-1);c.push(...bn(o,"Quads",f,c,n)),c.push(...bn(o,"Hamstrings",h,c,n)),c.push(...bn(o,"Glutes",1,c,n)),g>0&&c.push(...bn(o,"Core",g,c,n));break}case"full":{const f=Math.floor(d/4),h=d-f*4;c.push(...bn(o,"Chest",f,c,n)),c.push(...bn(o,"Lats",f,c,n)),c.push(...bn(o,"Quads",f,c,n)),c.push(...bn(o,"Hamstrings",f,c,n)),h>0&&c.push(...bn(o,"Core",h,c,n));break}case"core":c.push(...bn(o,"Core",d,c,n));break;default:console.warn(`Unknown workout type: ${t}`);break}if(c.length>d)c=c.slice(0,d);else if(c.length<d){const f=Object.keys(o);for(;c.length<d&&f.length>0;){const h=f[Math.floor(Math.random()*f.length)],g=bn(o,h,1,c,n);if(g.length>0)c.push(g[0]);else break}}return c},wW=(e,t,n="all",i="intermediate")=>{if(!e||e.length===0)return console.error("Exercise database is empty. Cannot generate workout."),[];const o=SW(e,t,n,i);return vW(o)},MT={Chest:["Chest"],Back:["Lats","Traps","Back","Upper Back","Lower Back","Rhomboids","Erector Spinae"],Shoulders:["Shoulders","Delts","Front Delts","Rear Delts","Side Delts"],Quads:["Quads"],Hamstrings:["Hamstrings"],Triceps:["Triceps"],Biceps:["Biceps","Forearms"],Calves:["Calves"],Core:["Core","Obliques","Hip Flexors"],Glutes:["Glutes","Adductors"]},jW={Chest:["Chest"],Back:["Back","Lats","Lower Back","Rhomboids","Traps","Upper Back"],Shoulders:["Shoulders","Delts","Front Delts","Rear Delts","Side Delts"],Quads:["Hip Flexors","Quads"],Hamstrings:["Hamstrings"],Triceps:[],Biceps:["Biceps","Forearms"],Calves:["Calves"],Core:["Core","Obliques"],Glutes:["Adductors","Glutes"]},CW=Object.entries(MT).reduce((e,[t,n])=>(n.forEach(i=>{e[i]=t}),e),{});function hh(e){const t=e.split("(")[0].trim();return CW[t]||t}function ay(){return Object.keys(MT)}function TW(e,t){return t==="all"?e:e.filter(n=>hh(n["Primary Muscle"])===t)}const kW=Object.entries(jW).reduce((e,[t,n])=>(n.forEach(i=>{e[i]=t}),e),{});function EW(e){return!e||typeof e!="string"?[]:e.split(",").map(t=>t.trim()).filter(t=>t.length>0)}function DW(e){const t=e.split("(")[0].trim();return kW[t]||null}function MW(e){const t=EW(e),n=new Set;return t.forEach(i=>{const o=DW(i);o&&n.add(o)}),Array.from(n)}const Ss=[6,8,10,12,15],is=10,qw={6:85,8:80,10:75,12:70,15:65},oy=e=>{if(e<=0)return 2.5;const t=e<=35?2.5:5,n=Math.round(e/t)*t;return Math.max(2.5,n)},AW=e=>{const t=parseFloat(e)||0,n=t<35?2.5:5;return t+n},RW=e=>{const t=parseFloat(e)||0;if(t<=0)return 0;let n;if(t<=35)n=2.5;else{if(t-5<35)return 35;n=5}return Math.max(0,t-n)},ly=(e,t,n)=>{if(!e||e<=0||!Ss.includes(t)||!Ss.includes(n))return null;if(t===n)return e;const i=qw[t],o=qw[n],c=e*(o/i);return oy(c)},Ea=e=>{if(!e||typeof e!="number")return is;let t=Ss[0],n=Math.abs(e-t);for(const i of Ss){const o=Math.abs(e-i);o<n&&(n=o,t=i)}return t},dd=({value:e,onChange:t,disabled:n=!1,compact:i=!1,label:o="Reps",showLabel:c=!0})=>{const d=Ss.indexOf(e),f=d>=0?d:Ss.indexOf(is),[h,g]=y.useState(Ss[f]);y.useEffect(()=>{Ss.includes(e)&&g(e)},[e]);const m=()=>{const E=Ss.indexOf(h);if(E>0){const S=Ss[E-1];g(S),t(S)}},b=()=>{const E=Ss.indexOf(h);if(E<Ss.length-1){const S=Ss[E+1];g(S),t(S)}},v=Ss.indexOf(h)>0,j=Ss.indexOf(h)<Ss.length-1;return r.jsxs(Xt,{size:"small",sx:{width:i?100:110,minWidth:i?100:110},children:[c&&r.jsx(En,{shrink:!0,children:o}),r.jsx(wR,{value:h,readOnly:!0,disabled:n,size:"small",label:c?o:void 0,notched:c,sx:{height:40,"& .MuiOutlinedInput-input":{textAlign:"center",fontWeight:400,py:1,px:.5,minWidth:28,cursor:"default"}},startAdornment:r.jsx(hi,{position:"start",sx:{mr:0},children:r.jsx(Ie,{size:"small",onClick:m,disabled:n||!v,edge:"start",sx:{p:.5,color:n||!v?"action.disabled":"text.secondary"},children:r.jsx(Hs,{sx:{fontSize:i?16:18}})})}),endAdornment:r.jsx(hi,{position:"end",sx:{ml:0},children:r.jsx(Ie,{size:"small",onClick:b,disabled:n||!j,edge:"end",sx:{p:.5,color:n||!j?"action.disabled":"text.secondary"},children:r.jsx($n,{sx:{fontSize:i?16:18}})})})})]})};dd.propTypes={value:T.number,onChange:T.func.isRequired,disabled:T.bool,compact:T.bool,label:T.string,showLabel:T.bool};const Yw=[{main:"#4caf50",light:"#e8f5e9",dark:"#2e7d32"},{main:"#2196f3",light:"#e3f2fd",dark:"#1565c0"},{main:"#ff9800",light:"#fff3e0",dark:"#ef6c00"},{main:"#9c27b0",light:"#f3e5f5",dark:"#6a1b9a"},{main:"#f44336",light:"#ffebee",dark:"#c62828"},{main:"#00bcd4",light:"#e0f7fa",dark:"#00838f"},{main:"#ffeb3b",light:"#fffde7",dark:"#f57f17"},{main:"#795548",light:"#efebe9",dark:"#4e342e"}],$g=e=>e==null?null:Yw[(e-1)%Yw.length],AT=({exercise:e,index:t,myWorkout:n,setMyWorkout:i,selectedExercises:o,setSelectedExercises:c,highlightedExercises:d,onToggleHighlight:f,currentSupersetNumber:h,onDeselectFromSuperset:g,onMoveUp:m,onMoveDown:b,canMoveUp:v,canMoveDown:j,isFirstInGroup:E})=>{const S=e.supersetGroup,w=S!=null,C=$g(S),k=d.has(e["Exercise Name"]),R=$g(h),O=I=>{const P=I.target,W=P.tagName==="INPUT"||P.closest("input"),L=P.tagName==="BUTTON"||P.closest("button");!W&&!L&&f(e["Exercise Name"])};return r.jsx(Ge,{onClick:O,sx:{position:"relative",cursor:"pointer",border:"1px solid",borderColor:"divider",borderLeft:"4px solid",borderLeftColor:w?C?.main:k?R?.main:"divider",backgroundColor:w?C?.light:k?R?.light:"background.paper",transition:"background-color 0.2s ease, border-color 0.2s ease, opacity 0.15s ease, margin-left 0.3s ease, padding-left 0.3s ease",marginLeft:k?3:0,paddingLeft:k?1:0,"&:hover":{opacity:.9},"&:active":{opacity:.8}},children:r.jsxs(at,{sx:{pb:2},children:[r.jsxs(Le,{direction:"row",alignItems:"center",spacing:2,children:[E&&r.jsxs(Le,{direction:"column",spacing:.5,children:[r.jsx(Ie,{size:"small",onClick:I=>{I.stopPropagation(),m()},disabled:!v,sx:{padding:.5,"&:disabled":{opacity:.3}},children:r.jsx(CR,{fontSize:"small"})}),r.jsx(Ie,{size:"small",onClick:I=>{I.stopPropagation(),b()},disabled:!j,sx:{padding:.5,"&:disabled":{opacity:.3}},children:r.jsx(TR,{fontSize:"small"})})]}),r.jsxs(A,{sx:{flex:1},children:[r.jsxs(Le,{direction:"row",alignItems:"center",spacing:1,children:[r.jsx(M,{variant:"body1",sx:{fontWeight:600},children:e["Exercise Name"]}),w&&r.jsx(Ne,{label:`Set ${S}`,size:"small",onDelete:I=>{I.stopPropagation(),g(e["Exercise Name"])},sx:{backgroundColor:C?.main,color:"white",fontWeight:"bold","& .MuiChip-deleteIcon":{color:"white","&:hover":{color:"rgba(255, 255, 255, 0.7)"}}}})]}),r.jsxs(M,{variant:"caption",color:"text.secondary",children:[e["Primary Muscle"],"  ",e.Equipment]})]}),r.jsx(Ie,{size:"small",onClick:I=>{I.stopPropagation();const P=new Set(o);P.delete(e["Exercise Name"]),c(P),i(n.filter(W=>W["Exercise Name"]!==e["Exercise Name"]))},children:r.jsx(Yr,{})})]}),r.jsxs(Le,{direction:"row",spacing:2,sx:{mt:2},children:[r.jsxs(Xt,{size:"small",sx:{width:80},children:[r.jsx(En,{children:"Sets"}),r.jsxs(cn,{label:"Sets",value:e.sets,onChange:I=>{I.stopPropagation();const P=parseInt(I.target.value),W=[...n],L=e.supersetGroup;L!=null?W.forEach((z,q)=>{z.supersetGroup===L&&(W[q].sets=P)}):W[t].sets=P,i(W)},onClick:I=>I.stopPropagation(),children:[r.jsx(Be,{value:1,children:"1"}),r.jsx(Be,{value:2,children:"2"}),r.jsx(Be,{value:3,children:"3"}),r.jsx(Be,{value:4,children:"4"})]})]}),r.jsx(dd,{value:typeof e.reps=="number"?Ea(e.reps):is,onChange:I=>{const P=[...n];P[t].reps=I,i(P)},compact:!0,showLabel:!0,label:"Reps"})]})]})})};AT.propTypes={exercise:T.object.isRequired,index:T.number.isRequired,myWorkout:T.array.isRequired,setMyWorkout:T.func.isRequired,selectedExercises:T.instanceOf(Set).isRequired,setSelectedExercises:T.func.isRequired,highlightedExercises:T.instanceOf(Set).isRequired,onToggleHighlight:T.func.isRequired,currentSupersetNumber:T.number.isRequired,onDeselectFromSuperset:T.func.isRequired,onMoveUp:T.func.isRequired,onMoveDown:T.func.isRequired,canMoveUp:T.bool.isRequired,canMoveDown:T.bool.isRequired,isFirstInGroup:T.bool.isRequired};const cy=({open:e,onClose:t,onSave:n,exercises:i=[],existingWorkout:o=null})=>{const[c,d]=y.useState(0),[f,h]=y.useState(""),[g,m]=y.useState("all"),[b,v]=y.useState("all"),[j,E]=y.useState(new Set),[S,w]=y.useState([]),[C,k]=y.useState(""),[R,O]=y.useState("full"),[I,P]=y.useState(new Set),[W,L]=y.useState(1),[z,q]=y.useState(!1),[B,U]=y.useState(!1),[re,H]=y.useState(8);y.useEffect(()=>{const K=(()=>{const Z=S.filter(ke=>ke.supersetGroup!==null&&ke.supersetGroup!==void 0).map(ke=>ke.supersetGroup);if(Z.length===0)return 1;const be=[...new Set(Z)].sort((ke,me)=>ke-me);for(let ke=1;ke<=be[be.length-1];ke++)if(!be.includes(ke))return ke;return be[be.length-1]+1})();L(K)},[S]),y.useEffect(()=>{if(e){if(o){if(d(1),w(o.exercises||[]),k(o.name||""),O(o.type||"full"),o.exercises&&o.exercises.length>0){const de=new Set;o.exercises.forEach(be=>{be.supersetGroup&&de.add(be.id||be["Exercise Name"])}),P(de);const K=o.exercises.filter(be=>be.supersetGroup).map(be=>be.supersetGroup),Z=K.length>0?Math.max(...K):0;L(Z+1)}}else d(0),w([]),k(""),O("full"),P(new Set),L(1);h(""),m("all"),v("all"),E(new Set)}},[e,o]);const $=i.filter(de=>{const K=de["Exercise Name"].toLowerCase().includes(f.toLowerCase()),Z=g==="all"||de.Equipment.toLowerCase().includes(g.toLowerCase());return K&&Z}),N=b==="all"?$:TW($,b),V=["all",...new Set(i.map(de=>de.Equipment))],F=["all",...ay().filter(de=>de!=="All")],X=async de=>{const K=new Set(j),Z=de["Exercise Name"];if(K.has(Z))K.delete(Z),w(S.filter(be=>be["Exercise Name"]!==Z));else{K.add(Z);const[be,ke]=await Promise.all([bo(Z),ka(Z)]);w([...S,{...de,sets:3,reps:ke?Ea(ke):is,weight:be??0,restTime:60,supersetGroup:null}])}E(K)},oe=y.useCallback(de=>{const K=new Set(I);K.has(de)?K.delete(de):K.add(de),P(K)},[I]),ue=y.useCallback(de=>{const K=S.map(Z=>Z["Exercise Name"]===de?{...Z,supersetGroup:null}:Z);w(K)},[S]),Te=()=>{if(I.size===0)return;const de=S.filter(ke=>I.has(ke["Exercise Name"])).map(ke=>ke.sets),K=Math.max(...de),Z=S.map(ke=>I.has(ke["Exercise Name"])?{...ke,supersetGroup:W,sets:K}:ke),be=De(Z);w(be),P(new Set)},De=de=>{const K=new Map,Z=[];de.forEach(me=>{me.supersetGroup!==null&&me.supersetGroup!==void 0?(K.has(me.supersetGroup)||K.set(me.supersetGroup,[]),K.get(me.supersetGroup).push(me)):Z.push(me)});const be=Array.from(K.keys()).sort((me,we)=>me-we),ke=[];return be.forEach(me=>{ke.push(...K.get(me))}),ke.push(...Z),ke},ee=de=>{const K=[],Z=new Set;return de.forEach(be=>{const ke=be["Exercise Name"];if(!Z.has(ke))if(be.supersetGroup!==null&&be.supersetGroup!==void 0){const me=de.filter(we=>we.supersetGroup===be.supersetGroup);K.push(me),me.forEach(we=>Z.add(we["Exercise Name"]))}else K.push([be]),Z.add(ke)}),K},G=(de,K)=>{let Z=0;for(let be=0;be<K.length;be++)for(let ke=0;ke<K[be].length;ke++){if(Z===de)return be;Z++}return-1},ae=y.useCallback(de=>{const K=ee(S),Z=G(de,K);if(Z<=0)return;const be=[...K];[be[Z-1],be[Z]]=[be[Z],be[Z-1]];const ke=be.flat();w(te(ke))},[S]),ve=y.useCallback(de=>{const K=ee(S),Z=G(de,K);if(Z<0||Z>=K.length-1)return;const be=[...K];[be[Z],be[Z+1]]=[be[Z+1],be[Z]];const ke=be.flat();w(te(ke))},[S]),te=de=>{const K=new Map;let Z=1;return de.forEach(be=>{const ke=be.supersetGroup;ke!=null&&(K.has(ke)||(K.set(ke,Z),Z++))}),de.map(be=>{const ke=be.supersetGroup;return ke!=null?{...be,supersetGroup:K.get(ke)}:be})},ye=()=>{const de=new Map;S.forEach(be=>{be.supersetGroup!==null&&be.supersetGroup!==void 0&&(de.has(be.supersetGroup)||de.set(be.supersetGroup,[]),de.get(be.supersetGroup).push(be))});const K=[];let Z=new Set;return S.forEach(be=>{const ke=be["Exercise Name"];if(!Z.has(ke))if(be.supersetGroup!==null&&be.supersetGroup!==void 0){const me=de.get(be.supersetGroup);me&&me.length>0&&(K.push(me.length),me.forEach(we=>Z.add(we["Exercise Name"])))}else K.push(1),Z.add(ke)}),K.length>0?K:[2,2,2,2]},Se=()=>{const de=ye(),K={name:C||`${R} Workout`,type:R,exercises:S,supersetConfig:de,createdAt:new Date().toISOString()};n(K),t()},Y=()=>{S.length>0?q(!0):U(!0)},ce=()=>{q(!1),U(!0)},Ae=async()=>{w([]),E(new Set),P(new Set),L(1);const K=wW(i,R,"all","intermediate").slice(0,re),Z=await Promise.all(K.map(async ke=>{const[me,we]=await Promise.all([bo(ke["Exercise Name"]),ka(ke["Exercise Name"])]),J=we??ke.reps??is;return{...ke,sets:ke.sets||3,reps:Ea(J),weight:me??(ke.weight||0),restTime:ke.restTime||60}}));w(Z);const be=new Set(Z.map(ke=>ke["Exercise Name"]));E(be),d(1),U(!1)},ne=y.useMemo(()=>{const de=ee(S);let K=0;return de.flatMap((Z,be)=>Z.map((ke,me)=>{const we=K++,J=me===0,ge=be>0,We=be<de.length-1;return r.jsx(AT,{exercise:ke,index:we,myWorkout:S,setMyWorkout:w,selectedExercises:j,setSelectedExercises:E,highlightedExercises:I,onToggleHighlight:oe,currentSupersetNumber:W,onDeselectFromSuperset:ue,onMoveUp:()=>ae(we),onMoveDown:()=>ve(we),canMoveUp:ge,canMoveDown:We,isFirstInGroup:J},ke["Exercise Name"])}))},[S,j,I,W,oe,ue,ae,ve]);return r.jsxs(Et,{fullScreen:!0,open:e,onClose:t,sx:{"& .MuiDialog-paper":{margin:0,maxHeight:"100vh"}},children:[r.jsxs(zt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:1,borderColor:"divider",py:1.5},children:[r.jsx(Ce,{onClick:t,color:"inherit",children:"Cancel"}),r.jsx(M,{variant:"h6",sx:{fontWeight:600},children:o?"Edit Workout":"Create Workout"}),r.jsx(Ce,{onClick:Se,variant:"contained",disabled:S.length===0,children:"Save"})]}),r.jsx(A,{sx:{borderBottom:1,borderColor:"divider"},children:r.jsxs(Wa,{value:c,onChange:(de,K)=>d(K),variant:"fullWidth",children:[r.jsx(ws,{label:"Exercises"}),r.jsx(ws,{label:`My Workout (${S.length})`,disabled:S.length===0})]})}),r.jsxs(Dt,{sx:{p:0,overflow:"auto"},children:[c===0&&r.jsxs(A,{sx:{p:2},children:[r.jsxs(Le,{spacing:2,sx:{mb:3},children:[r.jsx(Je,{fullWidth:!0,placeholder:"Search exercises...",value:f,onChange:de=>h(de.target.value),InputProps:{startAdornment:r.jsx(hi,{position:"start",children:r.jsx(Bi,{})})}}),r.jsxs(Le,{direction:"row",spacing:2,children:[r.jsxs(Xt,{size:"small",sx:{flex:1},children:[r.jsx(En,{children:"Equipment"}),r.jsx(cn,{value:g,label:"Equipment",onChange:de=>m(de.target.value),children:V.map(de=>r.jsx(Be,{value:de,children:de==="all"?"All Equipment":de},de))})]}),r.jsxs(Xt,{size:"small",sx:{flex:1},children:[r.jsx(En,{children:"Muscle Group"}),r.jsx(cn,{value:b,label:"Muscle Group",onChange:de=>v(de.target.value),children:F.map(de=>r.jsx(Be,{value:de,children:de==="all"?"All Muscles":de},de))})]})]})]}),r.jsx(Le,{spacing:2,children:N.map(de=>{const K=de["Exercise Name"],Z=j.has(K);return r.jsx(Ge,{sx:{cursor:"pointer",position:"relative",transition:"border-color 0.2s ease, opacity 0.15s ease, margin-left 0.3s ease, padding-left 0.3s ease",borderLeft:Z?"4px solid":"4px solid transparent",borderLeftColor:Z?"success.main":"transparent",marginLeft:Z?3:0,paddingLeft:Z?1:0,"&:hover":{borderLeftColor:Z?"success.dark":"primary.light"},"&:active":{opacity:.8}},onClick:()=>X(de),children:r.jsxs(at,{children:[r.jsx(M,{variant:"h6",sx:{fontWeight:600,mb:1},children:K}),r.jsxs(Le,{direction:"row",spacing:1,flexWrap:"wrap",gap:1,children:[r.jsx(Ne,{label:de["Primary Muscle"],size:"small",color:"primary",variant:"outlined"}),r.jsx(Ne,{label:de.Equipment,size:"small",variant:"outlined"}),r.jsx(Ne,{label:de["Exercise Type"],size:"small",variant:"outlined"})]})]})},K)})})]}),c===1&&r.jsxs(A,{sx:{p:2},children:[r.jsxs(Le,{spacing:2,sx:{mb:3},children:[r.jsx(Je,{fullWidth:!0,label:"Workout Name",value:C,onChange:de=>k(de.target.value),placeholder:"e.g., Upper Body Power"}),r.jsxs(Xt,{fullWidth:!0,children:[r.jsx(En,{children:"Workout Type"}),r.jsxs(cn,{value:R,label:"Workout Type",onChange:de=>O(de.target.value),children:[r.jsx(Be,{value:"full",children:"Full Body"}),r.jsx(Be,{value:"upper",children:"Upper Body"}),r.jsx(Be,{value:"lower",children:"Lower Body"}),r.jsx(Be,{value:"push",children:"Push"}),r.jsx(Be,{value:"pull",children:"Pull"}),r.jsx(Be,{value:"legs",children:"Legs"}),r.jsx(Be,{value:"core",children:"Core"})]})]})]}),r.jsx(ln,{sx:{my:2}}),r.jsx(A,{sx:{mb:2},children:r.jsxs(Le,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:1},children:[r.jsxs(M,{variant:"h6",sx:{fontWeight:600},children:["Exercises (",S.length,")"]}),r.jsx(Le,{direction:"row",spacing:1,children:r.jsx(Ce,{variant:"outlined",size:"small",startIcon:r.jsx(jR,{}),onClick:Y,children:"Generate"})})]})}),S.length>0?r.jsx(Le,{spacing:2,children:ne}):r.jsxs(A,{sx:{textAlign:"center",py:4},children:[r.jsx(Nn,{sx:{fontSize:48,color:"text.secondary",mb:2}}),r.jsx(M,{variant:"body1",color:"text.secondary",children:'No exercises added yet. Switch to the "Exercises" tab to add some.'})]}),I.size>0&&r.jsx(ar,{title:`Create Superset ${W}`,placement:"left",children:r.jsx(A,{onClick:Te,sx:{position:"fixed",bottom:24,right:24,width:64,height:64,borderRadius:"50%",backgroundColor:$g(W)?.main,color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"1.5rem",cursor:"pointer",boxShadow:6,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:1e3,"&:hover":{transform:"scale(1.1)",boxShadow:12},"&:active":{transform:"scale(0.95)"}},children:W})})]})]}),r.jsxs(Et,{open:z,onClose:()=>q(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(zt,{children:"Clear Existing Exercises?"}),r.jsx(Dt,{children:r.jsx(M,{variant:"body1",children:'Generating a new workout will clear all existing exercises in "My Workout". Do you want to proceed?'})}),r.jsxs(Nt,{children:[r.jsx(Ce,{onClick:()=>q(!1),children:"Cancel"}),r.jsx(Ce,{onClick:ce,variant:"contained",color:"warning",children:"Clear and Continue"})]})]}),r.jsxs(Et,{open:B,onClose:()=>U(!1),maxWidth:"xs",fullWidth:!0,children:[r.jsx(zt,{children:"Generate Workout"}),r.jsxs(Dt,{children:[r.jsx(M,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"How many exercises would you like in your workout?"}),r.jsxs(Xt,{fullWidth:!0,children:[r.jsx(En,{children:"Number of Exercises"}),r.jsxs(cn,{value:re,label:"Number of Exercises",onChange:de=>H(de.target.value),children:[r.jsx(Be,{value:4,children:"4 exercises"}),r.jsx(Be,{value:6,children:"6 exercises"}),r.jsx(Be,{value:8,children:"8 exercises"}),r.jsx(Be,{value:10,children:"10 exercises"}),r.jsx(Be,{value:12,children:"12 exercises"})]})]})]}),r.jsxs(Nt,{children:[r.jsx(Ce,{onClick:()=>U(!1),children:"Cancel"}),r.jsx(Ce,{onClick:Ae,variant:"contained",children:"Generate"})]})]})]})};cy.propTypes={open:T.bool.isRequired,onClose:T.func.isRequired,onSave:T.func.isRequired,exercises:T.array,existingWorkout:T.object};const uy=y.memo(({onStartWorkout:e})=>{const[t,n]=y.useState(!1),[i,o]=y.useState([]),[c,d]=y.useState(0),[f,h]=y.useState(null),[g,m]=y.useState(null);y.useEffect(()=>{(async()=>{try{const C=await(await fetch(Oo)).json();o(C)}catch(w){console.error("Error loading exercises:",w),o([])}})()},[]);const b=()=>{h(null),m(null),n(!0)},v=(S,w)=>{h(S),m(w),n(!0)},j=async S=>{try{g!==null?await Su(g,S):await NO(S),d(w=>w+1),h(null),m(null)}catch(w){console.error("Error saving workout:",w)}},E=()=>{n(!1),h(null),m(null)};return r.jsxs(A,{children:[r.jsx(iy,{onCreateWorkout:b,onStartWorkout:e,onEditWorkout:v},c),r.jsx(cy,{open:t,onClose:E,onSave:j,exercises:i,existingWorkout:f})]})});uy.displayName="StrengthTab";uy.propTypes={onStartWorkout:T.func};const dy=y.createContext({});function fy(e){const t=y.useRef(null);return t.current===null&&(t.current=e()),t.current}const hy=typeof window<"u",RT=hy?y.useLayoutEffect:y.useEffect,Ih=y.createContext(null);function py(e,t){e.indexOf(t)===-1&&e.push(t)}function my(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const $i=(e,t,n)=>n>t?t:n<e?e:n;let gy=()=>{};const qi={},PT=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function OT(e){return typeof e=="object"&&e!==null}const IT=e=>/^0[^.\s]+$/u.test(e);function xy(e){let t;return()=>(t===void 0&&(t=e()),t)}const Pr=e=>e,PW=(e,t)=>n=>t(e(n)),fd=(...e)=>e.reduce(PW),Bu=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i};class yy{constructor(){this.subscriptions=[]}add(t){return py(this.subscriptions,t),()=>my(this.subscriptions,t)}notify(t,n,i){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,n,i);else for(let c=0;c<o;c++){const d=this.subscriptions[c];d&&d(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const di=e=>e*1e3,Rr=e=>e/1e3;function WT(e,t){return t?e*(1e3/t):0}const _T=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,OW=1e-7,IW=12;function WW(e,t,n,i,o){let c,d,f=0;do d=t+(n-t)/2,c=_T(d,i,o)-e,c>0?n=d:t=d;while(Math.abs(c)>OW&&++f<IW);return d}function hd(e,t,n,i){if(e===t&&n===i)return Pr;const o=c=>WW(c,0,1,e,n);return c=>c===0||c===1?c:_T(o(c),t,i)}const zT=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,NT=e=>t=>1-e(1-t),LT=hd(.33,1.53,.69,.99),by=NT(LT),FT=zT(by),BT=e=>(e*=2)<1?.5*by(e):.5*(2-Math.pow(2,-10*(e-1))),vy=e=>1-Math.sin(Math.acos(e)),VT=NT(vy),HT=zT(vy),_W=hd(.42,0,1,1),zW=hd(0,0,.58,1),UT=hd(.42,0,.58,1),NW=e=>Array.isArray(e)&&typeof e[0]!="number",$T=e=>Array.isArray(e)&&typeof e[0]=="number",LW={linear:Pr,easeIn:_W,easeInOut:UT,easeOut:zW,circIn:vy,circInOut:HT,circOut:VT,backIn:by,backInOut:FT,backOut:LT,anticipate:BT},FW=e=>typeof e=="string",Gw=e=>{if($T(e)){gy(e.length===4);const[t,n,i,o]=e;return hd(t,n,i,o)}else if(FW(e))return LW[e];return e},If=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function BW(e,t){let n=new Set,i=new Set,o=!1,c=!1;const d=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1};function h(m){d.has(m)&&(g.schedule(m),e()),m(f)}const g={schedule:(m,b=!1,v=!1)=>{const E=v&&o?n:i;return b&&d.add(m),E.has(m)||E.add(m),m},cancel:m=>{i.delete(m),d.delete(m)},process:m=>{if(f=m,o){c=!0;return}o=!0,[n,i]=[i,n],n.forEach(h),n.clear(),o=!1,c&&(c=!1,g.process(m))}};return g}const VW=40;function qT(e,t){let n=!1,i=!0;const o={delta:0,timestamp:0,isProcessing:!1},c=()=>n=!0,d=If.reduce((R,O)=>(R[O]=BW(c),R),{}),{setup:f,read:h,resolveKeyframes:g,preUpdate:m,update:b,preRender:v,render:j,postRender:E}=d,S=()=>{const R=qi.useManualTiming?o.timestamp:performance.now();n=!1,qi.useManualTiming||(o.delta=i?1e3/60:Math.max(Math.min(R-o.timestamp,VW),1)),o.timestamp=R,o.isProcessing=!0,f.process(o),h.process(o),g.process(o),m.process(o),b.process(o),v.process(o),j.process(o),E.process(o),o.isProcessing=!1,n&&t&&(i=!1,e(S))},w=()=>{n=!0,i=!0,o.isProcessing||e(S)};return{schedule:If.reduce((R,O)=>{const I=d[O];return R[O]=(P,W=!1,L=!1)=>(n||w(),I.schedule(P,W,L)),R},{}),cancel:R=>{for(let O=0;O<If.length;O++)d[If[O]].cancel(R)},state:o,steps:d}}const{schedule:Dn,cancel:Aa,state:gs,steps:ug}=qT(typeof requestAnimationFrame<"u"?requestAnimationFrame:Pr,!0);let Jf;function HW(){Jf=void 0}const $s={now:()=>(Jf===void 0&&$s.set(gs.isProcessing||qi.useManualTiming?gs.timestamp:performance.now()),Jf),set:e=>{Jf=e,queueMicrotask(HW)}},YT=e=>t=>typeof t=="string"&&t.startsWith(e),Sy=YT("--"),UW=YT("var(--"),wy=e=>UW(e)?$W.test(e.split("/*")[0].trim()):!1,$W=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Zl={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Vu={...Zl,transform:e=>$i(0,1,e)},Wf={...Zl,default:1},wu=e=>Math.round(e*1e5)/1e5,jy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function qW(e){return e==null}const YW=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Cy=(e,t)=>n=>!!(typeof n=="string"&&YW.test(n)&&n.startsWith(e)||t&&!qW(n)&&Object.prototype.hasOwnProperty.call(n,t)),GT=(e,t,n)=>i=>{if(typeof i!="string")return i;const[o,c,d,f]=i.match(jy);return{[e]:parseFloat(o),[t]:parseFloat(c),[n]:parseFloat(d),alpha:f!==void 0?parseFloat(f):1}},GW=e=>$i(0,255,e),dg={...Zl,transform:e=>Math.round(GW(e))},go={test:Cy("rgb","red"),parse:GT("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+dg.transform(e)+", "+dg.transform(t)+", "+dg.transform(n)+", "+wu(Vu.transform(i))+")"};function QW(e){let t="",n="",i="",o="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),o=e.substring(4,5),t+=t,n+=n,i+=i,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:o?parseInt(o,16)/255:1}}const qg={test:Cy("#"),parse:QW,transform:go.transform},pd=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),wa=pd("deg"),fi=pd("%"),pt=pd("px"),KW=pd("vh"),XW=pd("vw"),Qw={...fi,parse:e=>fi.parse(e)/100,transform:e=>fi.transform(e*100)},kl={test:Cy("hsl","hue"),parse:GT("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+fi.transform(wu(t))+", "+fi.transform(wu(n))+", "+wu(Vu.transform(i))+")"},ns={test:e=>go.test(e)||qg.test(e)||kl.test(e),parse:e=>go.test(e)?go.parse(e):kl.test(e)?kl.parse(e):qg.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?go.transform(e):kl.transform(e),getAnimatableNone:e=>{const t=ns.parse(e);return t.alpha=0,ns.transform(t)}},ZW=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function JW(e){return isNaN(e)&&typeof e=="string"&&(e.match(jy)?.length||0)+(e.match(ZW)?.length||0)>0}const QT="number",KT="color",e_="var",t_="var(",Kw="${}",n_=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Hu(e){const t=e.toString(),n=[],i={color:[],number:[],var:[]},o=[];let c=0;const f=t.replace(n_,h=>(ns.test(h)?(i.color.push(c),o.push(KT),n.push(ns.parse(h))):h.startsWith(t_)?(i.var.push(c),o.push(e_),n.push(h)):(i.number.push(c),o.push(QT),n.push(parseFloat(h))),++c,Kw)).split(Kw);return{values:n,split:f,indexes:i,types:o}}function XT(e){return Hu(e).values}function ZT(e){const{split:t,types:n}=Hu(e),i=t.length;return o=>{let c="";for(let d=0;d<i;d++)if(c+=t[d],o[d]!==void 0){const f=n[d];f===QT?c+=wu(o[d]):f===KT?c+=ns.transform(o[d]):c+=o[d]}return c}}const s_=e=>typeof e=="number"?0:ns.test(e)?ns.getAnimatableNone(e):e;function r_(e){const t=XT(e);return ZT(e)(t.map(s_))}const Ra={test:JW,parse:XT,createTransformer:ZT,getAnimatableNone:r_};function fg(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function i_({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let o=0,c=0,d=0;if(!t)o=c=d=n;else{const f=n<.5?n*(1+t):n+t-n*t,h=2*n-f;o=fg(h,f,e+1/3),c=fg(h,f,e),d=fg(h,f,e-1/3)}return{red:Math.round(o*255),green:Math.round(c*255),blue:Math.round(d*255),alpha:i}}function ph(e,t){return n=>n>0?t:e}const Pn=(e,t,n)=>e+(t-e)*n,hg=(e,t,n)=>{const i=e*e,o=n*(t*t-i)+i;return o<0?0:Math.sqrt(o)},a_=[qg,go,kl],o_=e=>a_.find(t=>t.test(e));function Xw(e){const t=o_(e);if(!t)return!1;let n=t.parse(e);return t===kl&&(n=i_(n)),n}const Zw=(e,t)=>{const n=Xw(e),i=Xw(t);if(!n||!i)return ph(e,t);const o={...n};return c=>(o.red=hg(n.red,i.red,c),o.green=hg(n.green,i.green,c),o.blue=hg(n.blue,i.blue,c),o.alpha=Pn(n.alpha,i.alpha,c),go.transform(o))},Yg=new Set(["none","hidden"]);function l_(e,t){return Yg.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function c_(e,t){return n=>Pn(e,t,n)}function Ty(e){return typeof e=="number"?c_:typeof e=="string"?wy(e)?ph:ns.test(e)?Zw:f_:Array.isArray(e)?JT:typeof e=="object"?ns.test(e)?Zw:u_:ph}function JT(e,t){const n=[...e],i=n.length,o=e.map((c,d)=>Ty(c)(c,t[d]));return c=>{for(let d=0;d<i;d++)n[d]=o[d](c);return n}}function u_(e,t){const n={...e,...t},i={};for(const o in n)e[o]!==void 0&&t[o]!==void 0&&(i[o]=Ty(e[o])(e[o],t[o]));return o=>{for(const c in i)n[c]=i[c](o);return n}}function d_(e,t){const n=[],i={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const c=t.types[o],d=e.indexes[c][i[c]],f=e.values[d]??0;n[o]=f,i[c]++}return n}const f_=(e,t)=>{const n=Ra.createTransformer(t),i=Hu(e),o=Hu(t);return i.indexes.var.length===o.indexes.var.length&&i.indexes.color.length===o.indexes.color.length&&i.indexes.number.length>=o.indexes.number.length?Yg.has(e)&&!o.values.length||Yg.has(t)&&!i.values.length?l_(e,t):fd(JT(d_(i,o),o.values),n):ph(e,t)};function ek(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Pn(e,t,n):Ty(e)(e,t)}const h_=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Dn.update(t,n),stop:()=>Aa(t),now:()=>gs.isProcessing?gs.timestamp:$s.now()}},tk=(e,t,n=10)=>{let i="";const o=Math.max(Math.round(t/n),2);for(let c=0;c<o;c++)i+=Math.round(e(c/(o-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},mh=2e4;function ky(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<mh;)t+=n,i=e.next(t);return t>=mh?1/0:t}function p_(e,t=100,n){const i=n({...e,keyframes:[0,t]}),o=Math.min(ky(i),mh);return{type:"keyframes",ease:c=>i.next(o*c).value/t,duration:Rr(o)}}const m_=5;function nk(e,t,n){const i=Math.max(t-m_,0);return WT(n-e(i),t-i)}const zn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},pg=.001;function g_({duration:e=zn.duration,bounce:t=zn.bounce,velocity:n=zn.velocity,mass:i=zn.mass}){let o,c,d=1-t;d=$i(zn.minDamping,zn.maxDamping,d),e=$i(zn.minDuration,zn.maxDuration,Rr(e)),d<1?(o=g=>{const m=g*d,b=m*e,v=m-n,j=Gg(g,d),E=Math.exp(-b);return pg-v/j*E},c=g=>{const b=g*d*e,v=b*n+n,j=Math.pow(d,2)*Math.pow(g,2)*e,E=Math.exp(-b),S=Gg(Math.pow(g,2),d);return(-o(g)+pg>0?-1:1)*((v-j)*E)/S}):(o=g=>{const m=Math.exp(-g*e),b=(g-n)*e+1;return-pg+m*b},c=g=>{const m=Math.exp(-g*e),b=(n-g)*(e*e);return m*b});const f=5/e,h=y_(o,c,f);if(e=di(e),isNaN(h))return{stiffness:zn.stiffness,damping:zn.damping,duration:e};{const g=Math.pow(h,2)*i;return{stiffness:g,damping:d*2*Math.sqrt(i*g),duration:e}}}const x_=12;function y_(e,t,n){let i=n;for(let o=1;o<x_;o++)i=i-e(i)/t(i);return i}function Gg(e,t){return e*Math.sqrt(1-t*t)}const b_=["duration","bounce"],v_=["stiffness","damping","mass"];function Jw(e,t){return t.some(n=>e[n]!==void 0)}function S_(e){let t={velocity:zn.velocity,stiffness:zn.stiffness,damping:zn.damping,mass:zn.mass,isResolvedFromDuration:!1,...e};if(!Jw(e,v_)&&Jw(e,b_))if(e.visualDuration){const n=e.visualDuration,i=2*Math.PI/(n*1.2),o=i*i,c=2*$i(.05,1,1-(e.bounce||0))*Math.sqrt(o);t={...t,mass:zn.mass,stiffness:o,damping:c}}else{const n=g_(e);t={...t,...n,mass:zn.mass},t.isResolvedFromDuration=!0}return t}function gh(e=zn.visualDuration,t=zn.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:i,restDelta:o}=n;const c=n.keyframes[0],d=n.keyframes[n.keyframes.length-1],f={done:!1,value:c},{stiffness:h,damping:g,mass:m,duration:b,velocity:v,isResolvedFromDuration:j}=S_({...n,velocity:-Rr(n.velocity||0)}),E=v||0,S=g/(2*Math.sqrt(h*m)),w=d-c,C=Rr(Math.sqrt(h/m)),k=Math.abs(w)<5;i||(i=k?zn.restSpeed.granular:zn.restSpeed.default),o||(o=k?zn.restDelta.granular:zn.restDelta.default);let R;if(S<1){const I=Gg(C,S);R=P=>{const W=Math.exp(-S*C*P);return d-W*((E+S*C*w)/I*Math.sin(I*P)+w*Math.cos(I*P))}}else if(S===1)R=I=>d-Math.exp(-C*I)*(w+(E+C*w)*I);else{const I=C*Math.sqrt(S*S-1);R=P=>{const W=Math.exp(-S*C*P),L=Math.min(I*P,300);return d-W*((E+S*C*w)*Math.sinh(L)+I*w*Math.cosh(L))/I}}const O={calculatedDuration:j&&b||null,next:I=>{const P=R(I);if(j)f.done=I>=b;else{let W=I===0?E:0;S<1&&(W=I===0?di(E):nk(R,I,P));const L=Math.abs(W)<=i,z=Math.abs(d-P)<=o;f.done=L&&z}return f.value=f.done?d:P,f},toString:()=>{const I=Math.min(ky(O),mh),P=tk(W=>O.next(I*W).value,I,30);return I+"ms "+P},toTransition:()=>{}};return O}gh.applyToOptions=e=>{const t=p_(e,100,gh);return e.ease=t.ease,e.duration=di(t.duration),e.type="keyframes",e};function Qg({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:c=500,modifyTarget:d,min:f,max:h,restDelta:g=.5,restSpeed:m}){const b=e[0],v={done:!1,value:b},j=L=>f!==void 0&&L<f||h!==void 0&&L>h,E=L=>f===void 0?h:h===void 0||Math.abs(f-L)<Math.abs(h-L)?f:h;let S=n*t;const w=b+S,C=d===void 0?w:d(w);C!==w&&(S=C-b);const k=L=>-S*Math.exp(-L/i),R=L=>C+k(L),O=L=>{const z=k(L),q=R(L);v.done=Math.abs(z)<=g,v.value=v.done?C:q};let I,P;const W=L=>{j(v.value)&&(I=L,P=gh({keyframes:[v.value,E(v.value)],velocity:nk(R,L,v.value),damping:o,stiffness:c,restDelta:g,restSpeed:m}))};return W(0),{calculatedDuration:null,next:L=>{let z=!1;return!P&&I===void 0&&(z=!0,O(L),W(L)),I!==void 0&&L>=I?P.next(L-I):(!z&&O(L),v)}}}function w_(e,t,n){const i=[],o=n||qi.mix||ek,c=e.length-1;for(let d=0;d<c;d++){let f=o(e[d],e[d+1]);if(t){const h=Array.isArray(t)?t[d]||Pr:t;f=fd(h,f)}i.push(f)}return i}function j_(e,t,{clamp:n=!0,ease:i,mixer:o}={}){const c=e.length;if(gy(c===t.length),c===1)return()=>t[0];if(c===2&&t[0]===t[1])return()=>t[1];const d=e[0]===e[1];e[0]>e[c-1]&&(e=[...e].reverse(),t=[...t].reverse());const f=w_(t,i,o),h=f.length,g=m=>{if(d&&m<e[0])return t[0];let b=0;if(h>1)for(;b<e.length-2&&!(m<e[b+1]);b++);const v=Bu(e[b],e[b+1],m);return f[b](v)};return n?m=>g($i(e[0],e[c-1],m)):g}function C_(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const o=Bu(0,t,i);e.push(Pn(n,1,o))}}function T_(e){const t=[0];return C_(t,e.length-1),t}function k_(e,t){return e.map(n=>n*t)}function E_(e,t){return e.map(()=>t||UT).splice(0,e.length-1)}function ju({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const o=NW(i)?i.map(Gw):Gw(i),c={done:!1,value:t[0]},d=k_(n&&n.length===t.length?n:T_(t),e),f=j_(d,t,{ease:Array.isArray(o)?o:E_(t,o)});return{calculatedDuration:e,next:h=>(c.value=f(h),c.done=h>=e,c)}}const D_=e=>e!==null;function Ey(e,{repeat:t,repeatType:n="loop"},i,o=1){const c=e.filter(D_),f=o<0||t&&n!=="loop"&&t%2===1?0:c.length-1;return!f||i===void 0?c[f]:i}const M_={decay:Qg,inertia:Qg,tween:ju,keyframes:ju,spring:gh};function sk(e){typeof e.type=="string"&&(e.type=M_[e.type])}class Dy{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const A_=e=>e/100;class My extends Dy{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==$s.now()&&this.tick($s.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;sk(t);const{type:n=ju,repeat:i=0,repeatDelay:o=0,repeatType:c,velocity:d=0}=t;let{keyframes:f}=t;const h=n||ju;h!==ju&&typeof f[0]!="number"&&(this.mixKeyframes=fd(A_,ek(f[0],f[1])),f=[0,100]);const g=h({...t,keyframes:f});c==="mirror"&&(this.mirroredGenerator=h({...t,keyframes:[...f].reverse(),velocity:-d})),g.calculatedDuration===null&&(g.calculatedDuration=ky(g));const{calculatedDuration:m}=g;this.calculatedDuration=m,this.resolvedDuration=m+o,this.totalDuration=this.resolvedDuration*(i+1)-o,this.generator=g}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:i,totalDuration:o,mixKeyframes:c,mirroredGenerator:d,resolvedDuration:f,calculatedDuration:h}=this;if(this.startTime===null)return i.next(0);const{delay:g=0,keyframes:m,repeat:b,repeatType:v,repeatDelay:j,type:E,onUpdate:S,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-o/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const C=this.currentTime-g*(this.playbackSpeed>=0?1:-1),k=this.playbackSpeed>=0?C<0:C>o;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let R=this.currentTime,O=i;if(b){const L=Math.min(this.currentTime,o)/f;let z=Math.floor(L),q=L%1;!q&&L>=1&&(q=1),q===1&&z--,z=Math.min(z,b+1),!!(z%2)&&(v==="reverse"?(q=1-q,j&&(q-=j/f)):v==="mirror"&&(O=d)),R=$i(0,1,q)*f}const I=k?{done:!1,value:m[0]}:O.next(R);c&&(I.value=c(I.value));let{done:P}=I;!k&&h!==null&&(P=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const W=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return W&&E!==Qg&&(I.value=Ey(m,this.options,w,this.speed)),S&&S(I.value),W&&this.finish(),I}then(t,n){return this.finished.then(t,n)}get duration(){return Rr(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Rr(t)}get time(){return Rr(this.currentTime)}set time(t){t=di(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime($s.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Rr(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=h_,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime($s.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function R_(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const xo=e=>e*180/Math.PI,Kg=e=>{const t=xo(Math.atan2(e[1],e[0]));return Xg(t)},P_={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Kg,rotateZ:Kg,skewX:e=>xo(Math.atan(e[1])),skewY:e=>xo(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Xg=e=>(e=e%360,e<0&&(e+=360),e),e1=Kg,t1=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),n1=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),O_={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:t1,scaleY:n1,scale:e=>(t1(e)+n1(e))/2,rotateX:e=>Xg(xo(Math.atan2(e[6],e[5]))),rotateY:e=>Xg(xo(Math.atan2(-e[2],e[0]))),rotateZ:e1,rotate:e1,skewX:e=>xo(Math.atan(e[4])),skewY:e=>xo(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Zg(e){return e.includes("scale")?1:0}function Jg(e,t){if(!e||e==="none")return Zg(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,o;if(n)i=O_,o=n;else{const f=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=P_,o=f}if(!o)return Zg(t);const c=i[t],d=o[1].split(",").map(W_);return typeof c=="function"?c(d):d[c]}const I_=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Jg(n,t)};function W_(e){return parseFloat(e.trim())}const Jl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ec=new Set(Jl),s1=e=>e===Zl||e===pt,__=new Set(["x","y","z"]),z_=Jl.filter(e=>!__.has(e));function N_(e){const t=[];return z_.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t}const vo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Jg(t,"x"),y:(e,{transform:t})=>Jg(t,"y")};vo.translateX=vo.x;vo.translateY=vo.y;const So=new Set;let ex=!1,tx=!1,nx=!1;function rk(){if(tx){const e=Array.from(So).filter(i=>i.needsMeasurement),t=new Set(e.map(i=>i.element)),n=new Map;t.forEach(i=>{const o=N_(i);o.length&&(n.set(i,o),i.render())}),e.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const o=n.get(i);o&&o.forEach(([c,d])=>{i.getValue(c)?.set(d)})}),e.forEach(i=>i.measureEndState()),e.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}tx=!1,ex=!1,So.forEach(e=>e.complete(nx)),So.clear()}function ik(){So.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(tx=!0)})}function L_(){nx=!0,ik(),rk(),nx=!1}class Ay{constructor(t,n,i,o,c,d=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=i,this.motionValue=o,this.element=c,this.isAsync=d}scheduleResolve(){this.state="scheduled",this.isAsync?(So.add(this),ex||(ex=!0,Dn.read(ik),Dn.resolveKeyframes(rk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:i,motionValue:o}=this;if(t[0]===null){const c=o?.get(),d=t[t.length-1];if(c!==void 0)t[0]=c;else if(i&&n){const f=i.readValue(n,d);f!=null&&(t[0]=f)}t[0]===void 0&&(t[0]=d),o&&c===void 0&&o.set(t[0])}R_(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),So.delete(this)}cancel(){this.state==="scheduled"&&(So.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const F_=e=>e.startsWith("--");function B_(e,t,n){F_(t)?e.style.setProperty(t,n):e.style[t]=n}const V_=xy(()=>window.ScrollTimeline!==void 0),H_={};function U_(e,t){const n=xy(e);return()=>H_[t]??n()}const ak=U_(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),fu=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,r1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:fu([0,.65,.55,1]),circOut:fu([.55,0,1,.45]),backIn:fu([.31,.01,.66,-.59]),backOut:fu([.33,1.53,.69,.99])};function ok(e,t){if(e)return typeof e=="function"?ak()?tk(e,t):"ease-out":$T(e)?fu(e):Array.isArray(e)?e.map(n=>ok(n,t)||r1.easeOut):r1[e]}function $_(e,t,n,{delay:i=0,duration:o=300,repeat:c=0,repeatType:d="loop",ease:f="easeOut",times:h}={},g=void 0){const m={[t]:n};h&&(m.offset=h);const b=ok(f,o);Array.isArray(b)&&(m.easing=b);const v={delay:i,duration:o,easing:Array.isArray(b)?"linear":b,fill:"both",iterations:c+1,direction:d==="reverse"?"alternate":"normal"};return g&&(v.pseudoElement=g),e.animate(m,v)}function lk(e){return typeof e=="function"&&"applyToOptions"in e}function q_({type:e,...t}){return lk(e)&&ak()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class Y_ extends Dy{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:i,keyframes:o,pseudoElement:c,allowFlatten:d=!1,finalKeyframe:f,onComplete:h}=t;this.isPseudoElement=!!c,this.allowFlatten=d,this.options=t,gy(typeof t.type!="string");const g=q_(t);this.animation=$_(n,i,o,g,c),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!c){const m=Ey(o,this.options,f,this.speed);this.updateMotionValue?this.updateMotionValue(m):B_(n,i,m),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Rr(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Rr(t)}get time(){return Rr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=di(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&V_()?(this.animation.timeline=t,Pr):n(this)}}const ck={anticipate:BT,backInOut:FT,circInOut:HT};function G_(e){return e in ck}function Q_(e){typeof e.ease=="string"&&G_(e.ease)&&(e.ease=ck[e.ease])}const i1=10;class K_ extends Y_{constructor(t){Q_(t),sk(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:i,onComplete:o,element:c,...d}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const f=new My({...d,autoplay:!1}),h=di(this.finishedTime??this.time);n.setWithVelocity(f.sample(h-i1).value,f.sample(h).value,i1),f.stop()}}const a1=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ra.test(e)||e==="0")&&!e.startsWith("url("));function X_(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Z_(e,t,n,i){const o=e[0];if(o===null)return!1;if(t==="display"||t==="visibility")return!0;const c=e[e.length-1],d=a1(o,t),f=a1(c,t);return!d||!f?!1:X_(e)||(n==="spring"||lk(n))&&i}function sx(e){e.duration=0,e.type="keyframes"}const J_=new Set(["opacity","clipPath","filter","transform"]),e3=xy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function t3(e){const{motionValue:t,name:n,repeatDelay:i,repeatType:o,damping:c,type:d}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:g}=t.owner.getProps();return e3()&&n&&J_.has(n)&&(n!=="transform"||!g)&&!h&&!i&&o!=="mirror"&&c!==0&&d!=="inertia"}const n3=40;class s3 extends Dy{constructor({autoplay:t=!0,delay:n=0,type:i="keyframes",repeat:o=0,repeatDelay:c=0,repeatType:d="loop",keyframes:f,name:h,motionValue:g,element:m,...b}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=$s.now();const v={autoplay:t,delay:n,type:i,repeat:o,repeatDelay:c,repeatType:d,name:h,motionValue:g,element:m,...b},j=m?.KeyframeResolver||Ay;this.keyframeResolver=new j(f,(E,S,w)=>this.onKeyframesResolved(E,S,v,!w),h,g,m),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,i,o){this.keyframeResolver=void 0;const{name:c,type:d,velocity:f,delay:h,isHandoff:g,onUpdate:m}=i;this.resolvedAt=$s.now(),Z_(t,c,d,f)||((qi.instantAnimations||!h)&&m?.(Ey(t,i,n)),t[0]=t[t.length-1],sx(i),i.repeat=0);const v={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>n3?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:t},j=!g&&t3(v)?new K_({...v,element:v.motionValue.owner.current}):new My(v);j.finished.then(()=>this.notifyFinished()).catch(Pr),this.pendingTimeline&&(this.stopTimeline=j.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=j}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),L_()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const r3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function i3(e){const t=r3.exec(e);if(!t)return[,];const[,n,i,o]=t;return[`--${n??i}`,o]}function uk(e,t,n=1){const[i,o]=i3(e);if(!i)return;const c=window.getComputedStyle(t).getPropertyValue(i);if(c){const d=c.trim();return PT(d)?parseFloat(d):d}return wy(o)?uk(o,t,n+1):o}function Ry(e,t){return e?.[t]??e?.default??e}const dk=new Set(["width","height","top","left","right","bottom",...Jl]),a3={test:e=>e==="auto",parse:e=>e},fk=e=>t=>t.test(e),hk=[Zl,pt,fi,wa,XW,KW,a3],o1=e=>hk.find(fk(e));function o3(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||IT(e):!0}const l3=new Set(["brightness","contrast","saturate","opacity"]);function c3(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(jy)||[];if(!i)return e;const o=n.replace(i,"");let c=l3.has(t)?1:0;return i!==n&&(c*=100),t+"("+c+o+")"}const u3=/\b([a-z-]*)\(.*?\)/gu,rx={...Ra,getAnimatableNone:e=>{const t=e.match(u3);return t?t.map(c3).join(" "):e}},l1={...Zl,transform:Math.round},d3={rotate:wa,rotateX:wa,rotateY:wa,rotateZ:wa,scale:Wf,scaleX:Wf,scaleY:Wf,scaleZ:Wf,skew:wa,skewX:wa,skewY:wa,distance:pt,translateX:pt,translateY:pt,translateZ:pt,x:pt,y:pt,z:pt,perspective:pt,transformPerspective:pt,opacity:Vu,originX:Qw,originY:Qw,originZ:pt},Py={borderWidth:pt,borderTopWidth:pt,borderRightWidth:pt,borderBottomWidth:pt,borderLeftWidth:pt,borderRadius:pt,radius:pt,borderTopLeftRadius:pt,borderTopRightRadius:pt,borderBottomRightRadius:pt,borderBottomLeftRadius:pt,width:pt,maxWidth:pt,height:pt,maxHeight:pt,top:pt,right:pt,bottom:pt,left:pt,padding:pt,paddingTop:pt,paddingRight:pt,paddingBottom:pt,paddingLeft:pt,margin:pt,marginTop:pt,marginRight:pt,marginBottom:pt,marginLeft:pt,backgroundPositionX:pt,backgroundPositionY:pt,...d3,zIndex:l1,fillOpacity:Vu,strokeOpacity:Vu,numOctaves:l1},f3={...Py,color:ns,backgroundColor:ns,outlineColor:ns,fill:ns,stroke:ns,borderColor:ns,borderTopColor:ns,borderRightColor:ns,borderBottomColor:ns,borderLeftColor:ns,filter:rx,WebkitFilter:rx},pk=e=>f3[e];function mk(e,t){let n=pk(e);return n!==rx&&(n=Ra),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const h3=new Set(["auto","none","0"]);function p3(e,t,n){let i=0,o;for(;i<e.length&&!o;){const c=e[i];typeof c=="string"&&!h3.has(c)&&Hu(c).values.length&&(o=e[i]),i++}if(o&&n)for(const c of t)e[c]=mk(n,o)}class m3 extends Ay{constructor(t,n,i,o,c){super(t,n,i,o,c,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<t.length;h++){let g=t[h];if(typeof g=="string"&&(g=g.trim(),wy(g))){const m=uk(g,n.current);m!==void 0&&(t[h]=m),h===t.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!dk.has(i)||t.length!==2)return;const[o,c]=t,d=o1(o),f=o1(c);if(d!==f)if(s1(d)&&s1(f))for(let h=0;h<t.length;h++){const g=t[h];typeof g=="string"&&(t[h]=parseFloat(g))}else vo[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,i=[];for(let o=0;o<t.length;o++)(t[o]===null||o3(t[o]))&&i.push(o);i.length&&p3(t,i,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=vo[i](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&t.getValue(i,o).jump(o,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const o=t.getValue(n);o&&o.jump(this.measuredOrigin,!1);const c=i.length-1,d=i[c];i[c]=vo[n](t.measureViewportBox(),window.getComputedStyle(t.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),this.removedTransforms?.length&&this.removedTransforms.forEach(([f,h])=>{t.getValue(f).set(h)}),this.resolveNoneKeyframes()}}function g3(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let i=document;const o=n?.[e]??i.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}const gk=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function xk(e){return OT(e)&&"offsetHeight"in e}const c1=30,x3=e=>!isNaN(parseFloat(e));class y3{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const o=$s.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=$s.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=x3(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new yy);const i=this.events[t].add(n);return t==="change"?()=>{i(),Dn.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=$s.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>c1)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,c1);return WT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ql(e,t){return new y3(e,t)}const{schedule:Oy}=qT(queueMicrotask,!1),Vr={x:!1,y:!1};function yk(){return Vr.x||Vr.y}function b3(e){return e==="x"||e==="y"?Vr[e]?null:(Vr[e]=!0,()=>{Vr[e]=!1}):Vr.x||Vr.y?null:(Vr.x=Vr.y=!0,()=>{Vr.x=Vr.y=!1})}function bk(e,t){const n=g3(e),i=new AbortController,o={passive:!0,...t,signal:i.signal};return[n,o,()=>i.abort()]}function u1(e){return!(e.pointerType==="touch"||yk())}function v3(e,t,n={}){const[i,o,c]=bk(e,n),d=f=>{if(!u1(f))return;const{target:h}=f,g=t(h,f);if(typeof g!="function"||!h)return;const m=b=>{u1(b)&&(g(b),h.removeEventListener("pointerleave",m))};h.addEventListener("pointerleave",m,o)};return i.forEach(f=>{f.addEventListener("pointerenter",d,o)}),c}const vk=(e,t)=>t?e===t?!0:vk(e,t.parentElement):!1,Iy=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,S3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function w3(e){return S3.has(e.tagName)||e.tabIndex!==-1}const eh=new WeakSet;function d1(e){return t=>{t.key==="Enter"&&e(t)}}function mg(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const j3=(e,t)=>{const n=e.currentTarget;if(!n)return;const i=d1(()=>{if(eh.has(n))return;mg(n,"down");const o=d1(()=>{mg(n,"up")}),c=()=>mg(n,"cancel");n.addEventListener("keyup",o,t),n.addEventListener("blur",c,t)});n.addEventListener("keydown",i,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),t)};function f1(e){return Iy(e)&&!yk()}function C3(e,t,n={}){const[i,o,c]=bk(e,n),d=f=>{const h=f.currentTarget;if(!f1(f))return;eh.add(h);const g=t(h,f),m=(j,E)=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",v),eh.has(h)&&eh.delete(h),f1(j)&&typeof g=="function"&&g(j,{success:E})},b=j=>{m(j,h===window||h===document||n.useGlobalTarget||vk(h,j.target))},v=j=>{m(j,!1)};window.addEventListener("pointerup",b,o),window.addEventListener("pointercancel",v,o)};return i.forEach(f=>{(n.useGlobalTarget?window:f).addEventListener("pointerdown",d,o),xk(f)&&(f.addEventListener("focus",g=>j3(g,o)),!w3(f)&&!f.hasAttribute("tabindex")&&(f.tabIndex=0))}),c}function Sk(e){return OT(e)&&"ownerSVGElement"in e}function T3(e){return Sk(e)&&e.tagName==="svg"}const js=e=>!!(e&&e.getVelocity),k3=[...hk,ns,Ra],E3=e=>k3.find(fk(e)),Wy=y.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function h1(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function D3(...e){return t=>{let n=!1;const i=e.map(o=>{const c=h1(o,t);return!n&&typeof c=="function"&&(n=!0),c});if(n)return()=>{for(let o=0;o<i.length;o++){const c=i[o];typeof c=="function"?c():h1(e[o],null)}}}}function M3(...e){return y.useCallback(D3(...e),e)}class A3 extends y.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const i=n.offsetParent,o=xk(i)&&i.offsetWidth||0,c=this.props.sizeRef.current;c.height=n.offsetHeight||0,c.width=n.offsetWidth||0,c.top=n.offsetTop,c.left=n.offsetLeft,c.right=o-c.width-c.left}return null}componentDidUpdate(){}render(){return this.props.children}}function R3({children:e,isPresent:t,anchorX:n,root:i}){const o=y.useId(),c=y.useRef(null),d=y.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:f}=y.useContext(Wy),h=M3(c,e?.ref);return y.useInsertionEffect(()=>{const{width:g,height:m,top:b,left:v,right:j}=d.current;if(t||!c.current||!g||!m)return;const E=n==="left"?`left: ${v}`:`right: ${j}`;c.current.dataset.motionPopId=o;const S=document.createElement("style");f&&(S.nonce=f);const w=i??document.head;return w.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${m}px !important;
            ${E}px !important;
            top: ${b}px !important;
          }
        `),()=>{w.contains(S)&&w.removeChild(S)}},[t]),r.jsx(A3,{isPresent:t,childRef:c,sizeRef:d,children:y.cloneElement(e,{ref:h})})}const P3=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:o,presenceAffectsLayout:c,mode:d,anchorX:f,root:h})=>{const g=fy(O3),m=y.useId();let b=!0,v=y.useMemo(()=>(b=!1,{id:m,initial:t,isPresent:n,custom:o,onExitComplete:j=>{g.set(j,!0);for(const E of g.values())if(!E)return;i&&i()},register:j=>(g.set(j,!1),()=>g.delete(j))}),[n,g,i]);return c&&b&&(v={...v}),y.useMemo(()=>{g.forEach((j,E)=>g.set(E,!1))},[n]),y.useEffect(()=>{!n&&!g.size&&i&&i()},[n]),d==="popLayout"&&(e=r.jsx(R3,{isPresent:n,anchorX:f,root:h,children:e})),r.jsx(Ih.Provider,{value:v,children:e})};function O3(){return new Map}function wk(e=!0){const t=y.useContext(Ih);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:o}=t,c=y.useId();y.useEffect(()=>{if(e)return o(c)},[e]);const d=y.useCallback(()=>e&&i&&i(c),[c,i,e]);return!n&&i?[!1,d]:[!0]}const _f=e=>e.key||"";function p1(e){const t=[];return y.Children.forEach(e,n=>{y.isValidElement(n)&&t.push(n)}),t}const Pa=({children:e,custom:t,initial:n=!0,onExitComplete:i,presenceAffectsLayout:o=!0,mode:c="sync",propagate:d=!1,anchorX:f="left",root:h})=>{const[g,m]=wk(d),b=y.useMemo(()=>p1(e),[e]),v=d&&!g?[]:b.map(_f),j=y.useRef(!0),E=y.useRef(b),S=fy(()=>new Map),[w,C]=y.useState(b),[k,R]=y.useState(b);RT(()=>{j.current=!1,E.current=b;for(let P=0;P<k.length;P++){const W=_f(k[P]);v.includes(W)?S.delete(W):S.get(W)!==!0&&S.set(W,!1)}},[k,v.length,v.join("-")]);const O=[];if(b!==w){let P=[...b];for(let W=0;W<k.length;W++){const L=k[W],z=_f(L);v.includes(z)||(P.splice(W,0,L),O.push(L))}return c==="wait"&&O.length&&(P=O),R(p1(P)),C(b),null}const{forceRender:I}=y.useContext(dy);return r.jsx(r.Fragment,{children:k.map(P=>{const W=_f(P),L=d&&!g?!1:b===k||v.includes(W),z=()=>{if(S.has(W))S.set(W,!0);else return;let q=!0;S.forEach(B=>{B||(q=!1)}),q&&(I?.(),R(E.current),d&&m?.(),i&&i())};return r.jsx(P3,{isPresent:L,initial:!j.current||n?void 0:!1,custom:t,presenceAffectsLayout:o,mode:c,root:h,onExitComplete:L?void 0:z,anchorX:f,children:P},W)})})},jk=y.createContext({strict:!1}),m1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Yl={};for(const e in m1)Yl[e]={isEnabled:t=>m1[e].some(n=>!!t[n])};function I3(e){for(const t in e)Yl[t]={...Yl[t],...e[t]}}const W3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function xh(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||W3.has(e)}let Ck=e=>!xh(e);function _3(e){typeof e=="function"&&(Ck=t=>t.startsWith("on")?!xh(t):e(t))}try{_3(require("@emotion/is-prop-valid").default)}catch{}function z3(e,t,n){const i={};for(const o in e)o==="values"&&typeof e.values=="object"||(Ck(o)||n===!0&&xh(o)||!t&&!xh(o)||e.draggable&&o.startsWith("onDrag"))&&(i[o]=e[o]);return i}const Wh=y.createContext({});function _h(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Uu(e){return typeof e=="string"||Array.isArray(e)}const _y=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],zy=["initial",..._y];function zh(e){return _h(e.animate)||zy.some(t=>Uu(e[t]))}function Tk(e){return!!(zh(e)||e.variants)}function N3(e,t){if(zh(e)){const{initial:n,animate:i}=e;return{initial:n===!1||Uu(n)?n:void 0,animate:Uu(i)?i:void 0}}return e.inherit!==!1?t:{}}function L3(e){const{initial:t,animate:n}=N3(e,y.useContext(Wh));return y.useMemo(()=>({initial:t,animate:n}),[g1(t),g1(n)])}function g1(e){return Array.isArray(e)?e.join(" "):e}const $u={};function F3(e){for(const t in e)$u[t]=e[t],Sy(t)&&($u[t].isCSSVariable=!0)}function kk(e,{layout:t,layoutId:n}){return ec.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!$u[e]||e==="opacity")}const B3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},V3=Jl.length;function H3(e,t,n){let i="",o=!0;for(let c=0;c<V3;c++){const d=Jl[c],f=e[d];if(f===void 0)continue;let h=!0;if(typeof f=="number"?h=f===(d.startsWith("scale")?1:0):h=parseFloat(f)===0,!h||n){const g=gk(f,Py[d]);if(!h){o=!1;const m=B3[d]||d;i+=`${m}(${g}) `}n&&(t[d]=g)}}return i=i.trim(),n?i=n(t,o?"":i):o&&(i="none"),i}function Ny(e,t,n){const{style:i,vars:o,transformOrigin:c}=e;let d=!1,f=!1;for(const h in t){const g=t[h];if(ec.has(h)){d=!0;continue}else if(Sy(h)){o[h]=g;continue}else{const m=gk(g,Py[h]);h.startsWith("origin")?(f=!0,c[h]=m):i[h]=m}}if(t.transform||(d||n?i.transform=H3(t,e.transform,n):i.transform&&(i.transform="none")),f){const{originX:h="50%",originY:g="50%",originZ:m=0}=c;i.transformOrigin=`${h} ${g} ${m}`}}const Ly=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Ek(e,t,n){for(const i in t)!js(t[i])&&!kk(i,n)&&(e[i]=t[i])}function U3({transformTemplate:e},t){return y.useMemo(()=>{const n=Ly();return Ny(n,t,e),Object.assign({},n.vars,n.style)},[t])}function $3(e,t){const n=e.style||{},i={};return Ek(i,n,e),Object.assign(i,U3(e,t)),i}function q3(e,t){const n={},i=$3(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const Y3={offset:"stroke-dashoffset",array:"stroke-dasharray"},G3={offset:"strokeDashoffset",array:"strokeDasharray"};function Q3(e,t,n=1,i=0,o=!0){e.pathLength=1;const c=o?Y3:G3;e[c.offset]=pt.transform(-i);const d=pt.transform(t),f=pt.transform(n);e[c.array]=`${d} ${f}`}function Dk(e,{attrX:t,attrY:n,attrScale:i,pathLength:o,pathSpacing:c=1,pathOffset:d=0,...f},h,g,m){if(Ny(e,f,g),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:b,style:v}=e;b.transform&&(v.transform=b.transform,delete b.transform),(v.transform||b.transformOrigin)&&(v.transformOrigin=b.transformOrigin??"50% 50%",delete b.transformOrigin),v.transform&&(v.transformBox=m?.transformBox??"fill-box",delete b.transformBox),t!==void 0&&(b.x=t),n!==void 0&&(b.y=n),i!==void 0&&(b.scale=i),o!==void 0&&Q3(b,o,c,d,!1)}const Mk=()=>({...Ly(),attrs:{}}),Ak=e=>typeof e=="string"&&e.toLowerCase()==="svg";function K3(e,t,n,i){const o=y.useMemo(()=>{const c=Mk();return Dk(c,t,Ak(i),e.transformTemplate,e.style),{...c.attrs,style:{...c.style}}},[t]);if(e.style){const c={};Ek(c,e.style,e),o.style={...c,...o.style}}return o}const X3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Fy(e){return typeof e!="string"||e.includes("-")?!1:!!(X3.indexOf(e)>-1||/[A-Z]/u.test(e))}function Z3(e,t,n,{latestValues:i},o,c=!1){const f=(Fy(e)?K3:q3)(t,i,o,e),h=z3(t,typeof e=="string",c),g=e!==y.Fragment?{...h,...f,ref:n}:{},{children:m}=t,b=y.useMemo(()=>js(m)?m.get():m,[m]);return y.createElement(e,{...g,children:b})}function x1(e){const t=[{},{}];return e?.values.forEach((n,i)=>{t[0][i]=n.get(),t[1][i]=n.getVelocity()}),t}function By(e,t,n,i){if(typeof t=="function"){const[o,c]=x1(i);t=t(n!==void 0?n:e.custom,o,c)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[o,c]=x1(i);t=t(n!==void 0?n:e.custom,o,c)}return t}function th(e){return js(e)?e.get():e}function J3({scrapeMotionValuesFromProps:e,createRenderState:t},n,i,o){return{latestValues:ez(n,i,o,e),renderState:t()}}function ez(e,t,n,i){const o={},c=i(e,{});for(const v in c)o[v]=th(c[v]);let{initial:d,animate:f}=e;const h=zh(e),g=Tk(e);t&&g&&!h&&e.inherit!==!1&&(d===void 0&&(d=t.initial),f===void 0&&(f=t.animate));let m=n?n.initial===!1:!1;m=m||d===!1;const b=m?f:d;if(b&&typeof b!="boolean"&&!_h(b)){const v=Array.isArray(b)?b:[b];for(let j=0;j<v.length;j++){const E=By(e,v[j]);if(E){const{transitionEnd:S,transition:w,...C}=E;for(const k in C){let R=C[k];if(Array.isArray(R)){const O=m?R.length-1:0;R=R[O]}R!==null&&(o[k]=R)}for(const k in S)o[k]=S[k]}}}return o}const Rk=e=>(t,n)=>{const i=y.useContext(Wh),o=y.useContext(Ih),c=()=>J3(e,t,i,o);return n?c():fy(c)};function Vy(e,t,n){const{style:i}=e,o={};for(const c in i)(js(i[c])||t.style&&js(t.style[c])||kk(c,e)||n?.getValue(c)?.liveStyle!==void 0)&&(o[c]=i[c]);return o}const tz=Rk({scrapeMotionValuesFromProps:Vy,createRenderState:Ly});function Pk(e,t,n){const i=Vy(e,t,n);for(const o in e)if(js(e[o])||js(t[o])){const c=Jl.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;i[c]=e[o]}return i}const nz=Rk({scrapeMotionValuesFromProps:Pk,createRenderState:Mk}),sz=Symbol.for("motionComponentSymbol");function El(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function rz(e,t,n){return y.useCallback(i=>{i&&e.onMount&&e.onMount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):El(n)&&(n.current=i))},[t])}const Hy=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),iz="framerAppearId",Ok="data-"+Hy(iz),Ik=y.createContext({});function az(e,t,n,i,o){const{visualElement:c}=y.useContext(Wh),d=y.useContext(jk),f=y.useContext(Ih),h=y.useContext(Wy).reducedMotion,g=y.useRef(null);i=i||d.renderer,!g.current&&i&&(g.current=i(e,{visualState:t,parent:c,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:h}));const m=g.current,b=y.useContext(Ik);m&&!m.projection&&o&&(m.type==="html"||m.type==="svg")&&oz(g.current,n,o,b);const v=y.useRef(!1);y.useInsertionEffect(()=>{m&&v.current&&m.update(n,f)});const j=n[Ok],E=y.useRef(!!j&&!window.MotionHandoffIsComplete?.(j)&&window.MotionHasOptimisedAnimation?.(j));return RT(()=>{m&&(v.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),E.current&&m.animationState&&m.animationState.animateChanges())}),y.useEffect(()=>{m&&(!E.current&&m.animationState&&m.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(j)}),E.current=!1),m.enteringChildren=void 0)}),m}function oz(e,t,n,i){const{layoutId:o,layout:c,drag:d,dragConstraints:f,layoutScroll:h,layoutRoot:g,layoutCrossfade:m}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Wk(e.parent)),e.projection.setOptions({layoutId:o,layout:c,alwaysMeasureLayout:!!d||f&&El(f),visualElement:e,animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,crossfade:m,layoutScroll:h,layoutRoot:g})}function Wk(e){if(e)return e.options.allowProjection!==!1?e.projection:Wk(e.parent)}function gg(e,{forwardMotionProps:t=!1}={},n,i){n&&I3(n);const o=Fy(e)?nz:tz;function c(f,h){let g;const m={...y.useContext(Wy),...f,layoutId:lz(f)},{isStatic:b}=m,v=L3(f),j=o(f,b);if(!b&&hy){cz();const E=uz(m);g=E.MeasureLayout,v.visualElement=az(e,j,m,i,E.ProjectionNode)}return r.jsxs(Wh.Provider,{value:v,children:[g&&v.visualElement?r.jsx(g,{visualElement:v.visualElement,...m}):null,Z3(e,f,rz(j,v.visualElement,h),j,b,t)]})}c.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const d=y.forwardRef(c);return d[sz]=e,d}function lz({layoutId:e}){const t=y.useContext(dy).id;return t&&e!==void 0?t+"-"+e:e}function cz(e,t){y.useContext(jk).strict}function uz(e){const{drag:t,layout:n}=Yl;if(!t&&!n)return{};const i={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function dz(e,t){if(typeof Proxy>"u")return gg;const n=new Map,i=(c,d)=>gg(c,d,e,t),o=(c,d)=>i(c,d);return new Proxy(o,{get:(c,d)=>d==="create"?i:(n.has(d)||n.set(d,gg(d,void 0,e,t)),n.get(d))})}function _k({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function fz({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function hz(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function xg(e){return e===void 0||e===1}function ix({scale:e,scaleX:t,scaleY:n}){return!xg(e)||!xg(t)||!xg(n)}function ho(e){return ix(e)||zk(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function zk(e){return y1(e.x)||y1(e.y)}function y1(e){return e&&e!=="0%"}function yh(e,t,n){const i=e-n,o=t*i;return n+o}function b1(e,t,n,i,o){return o!==void 0&&(e=yh(e,o,i)),yh(e,n,i)+t}function ax(e,t=0,n=1,i,o){e.min=b1(e.min,t,n,i,o),e.max=b1(e.max,t,n,i,o)}function Nk(e,{x:t,y:n}){ax(e.x,t.translate,t.scale,t.originPoint),ax(e.y,n.translate,n.scale,n.originPoint)}const v1=.999999999999,S1=1.0000000000001;function pz(e,t,n,i=!1){const o=n.length;if(!o)return;t.x=t.y=1;let c,d;for(let f=0;f<o;f++){c=n[f],d=c.projectionDelta;const{visualElement:h}=c.options;h&&h.props.style&&h.props.style.display==="contents"||(i&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Ml(e,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),d&&(t.x*=d.x.scale,t.y*=d.y.scale,Nk(e,d)),i&&ho(c.latestValues)&&Ml(e,c.latestValues))}t.x<S1&&t.x>v1&&(t.x=1),t.y<S1&&t.y>v1&&(t.y=1)}function Dl(e,t){e.min=e.min+t,e.max=e.max+t}function w1(e,t,n,i,o=.5){const c=Pn(e.min,e.max,o);ax(e,t,n,c,i)}function Ml(e,t){w1(e.x,t.x,t.scaleX,t.scale,t.originX),w1(e.y,t.y,t.scaleY,t.scale,t.originY)}function Lk(e,t){return _k(hz(e.getBoundingClientRect(),t))}function mz(e,t,n){const i=Lk(e,n),{scroll:o}=t;return o&&(Dl(i.x,o.offset.x),Dl(i.y,o.offset.y)),i}const j1=()=>({translate:0,scale:1,origin:0,originPoint:0}),Al=()=>({x:j1(),y:j1()}),C1=()=>({min:0,max:0}),Un=()=>({x:C1(),y:C1()}),ox={current:null},Fk={current:!1};function gz(){if(Fk.current=!0,!!hy)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ox.current=e.matches;e.addEventListener("change",t),t()}else ox.current=!1}const xz=new WeakMap;function yz(e,t,n){for(const i in t){const o=t[i],c=n[i];if(js(o))e.addValue(i,o);else if(js(c))e.addValue(i,ql(o,{owner:e}));else if(c!==o)if(e.hasValue(i)){const d=e.getValue(i);d.liveStyle===!0?d.jump(o):d.hasAnimated||d.set(o)}else{const d=e.getStaticValue(i);e.addValue(i,ql(d!==void 0?d:o,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const T1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class bz{scrapeMotionValuesFromProps(t,n,i){return{}}constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:o,blockInitialAnimation:c,visualState:d},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ay,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=$s.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Dn.render(this.render,!1,!0))};const{latestValues:h,renderState:g}=d;this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=g,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=f,this.blockInitialAnimation=!!c,this.isControllingVariants=zh(n),this.isVariantNode=Tk(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:m,...b}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in b){const j=b[v];h[v]!==void 0&&js(j)&&j.set(h[v])}}mount(t){this.current=t,xz.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),Fk.current||gz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ox.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Aa(this.notifyUpdate),Aa(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=ec.has(t);i&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",d=>{this.latestValues[t]=d,this.props.onUpdate&&Dn.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{o(),c&&c(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Yl){const n=Yl[t];if(!n)continue;const{isEnabled:i,Feature:o}=n;if(!this.features[t]&&o&&i(this.props)&&(this.features[t]=new o(this)),this.features[t]){const c=this.features[t];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Un()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<T1.length;i++){const o=T1[i];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const c="on"+o,d=t[c];d&&(this.propEventSubscriptions[o]=this.on(o,d))}this.prevMotionValues=yz(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const i=this.values.get(t);n!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=ql(n===null?void 0:n,{owner:this}),this.addValue(t,i)),i}readValue(t,n){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(PT(i)||IT(i))?i=parseFloat(i):!E3(i)&&Ra.test(n)&&(i=mk(t,n)),this.setBaseTarget(t,js(i)?i.get():i)),js(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const c=By(this.props,n,this.presenceContext?.custom);c&&(i=c[t])}if(n&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!js(o)?o:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new yy),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){Oy.render(this.render)}}class Bk extends bz{constructor(){super(...arguments),this.KeyframeResolver=m3}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;js(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Vk(e,{style:t,vars:n},i,o){const c=e.style;let d;for(d in t)c[d]=t[d];o?.applyProjectionStyles(c,i);for(d in n)c.setProperty(d,n[d])}function vz(e){return window.getComputedStyle(e)}class Sz extends Bk{constructor(){super(...arguments),this.type="html",this.renderInstance=Vk}readValueFromInstance(t,n){if(ec.has(n))return this.projection?.isProjecting?Zg(n):I_(t,n);{const i=vz(t),o=(Sy(n)?i.getPropertyValue(n):i[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Lk(t,n)}build(t,n,i){Ny(t,n,i.transformTemplate)}scrapeMotionValuesFromProps(t,n,i){return Vy(t,n,i)}}const Hk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function wz(e,t,n,i){Vk(e,t,void 0,i);for(const o in t.attrs)e.setAttribute(Hk.has(o)?o:Hy(o),t.attrs[o])}class jz extends Bk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Un}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(ec.has(n)){const i=pk(n);return i&&i.default||0}return n=Hk.has(n)?n:Hy(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,i){return Pk(t,n,i)}build(t,n,i){Dk(t,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,n,i,o){wz(t,n,i,o)}mount(t){this.isSVGTag=Ak(t.tagName),super.mount(t)}}const Cz=(e,t)=>Fy(e)?new jz(t):new Sz(t,{allowProjection:e!==y.Fragment});function Il(e,t,n){const i=e.getProps();return By(i,t,n!==void 0?n:i.custom,e)}const lx=e=>Array.isArray(e);function Tz(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ql(n))}function kz(e){return lx(e)?e[e.length-1]||0:e}function Ez(e,t){const n=Il(e,t);let{transitionEnd:i={},transition:o={},...c}=n||{};c={...c,...i};for(const d in c){const f=kz(c[d]);Tz(e,d,f)}}function Dz(e){return!!(js(e)&&e.add)}function cx(e,t){const n=e.getValue("willChange");if(Dz(n))return n.add(t);if(!n&&qi.WillChange){const i=new qi.WillChange("auto");e.addValue("willChange",i),i.add(t)}}function Uk(e){return e.props[Ok]}const Mz=e=>e!==null;function Az(e,{repeat:t,repeatType:n="loop"},i){const o=e.filter(Mz),c=t&&n!=="loop"&&t%2===1?0:o.length-1;return o[c]}const Rz={type:"spring",stiffness:500,damping:25,restSpeed:10},Pz=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Oz={type:"keyframes",duration:.8},Iz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Wz=(e,{keyframes:t})=>t.length>2?Oz:ec.has(e)?e.startsWith("scale")?Pz(t[1]):Rz:Iz;function _z({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:o,repeat:c,repeatType:d,repeatDelay:f,from:h,elapsed:g,...m}){return!!Object.keys(m).length}const Uy=(e,t,n,i={},o,c)=>d=>{const f=Ry(i,e)||{},h=f.delay||i.delay||0;let{elapsed:g=0}=i;g=g-di(h);const m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...f,delay:-g,onUpdate:v=>{t.set(v),f.onUpdate&&f.onUpdate(v)},onComplete:()=>{d(),f.onComplete&&f.onComplete()},name:e,motionValue:t,element:c?void 0:o};_z(f)||Object.assign(m,Wz(e,m)),m.duration&&(m.duration=di(m.duration)),m.repeatDelay&&(m.repeatDelay=di(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let b=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(sx(m),m.delay===0&&(b=!0)),(qi.instantAnimations||qi.skipAnimations)&&(b=!0,sx(m),m.delay=0),m.allowFlatten=!f.type&&!f.ease,b&&!c&&t.get()!==void 0){const v=Az(m.keyframes,f);if(v!==void 0){Dn.update(()=>{m.onUpdate(v),m.onComplete()});return}}return f.isSync?new My(m):new s3(m)};function zz({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function $k(e,t,{delay:n=0,transitionOverride:i,type:o}={}){let{transition:c=e.getDefaultTransition(),transitionEnd:d,...f}=t;i&&(c=i);const h=[],g=o&&e.animationState&&e.animationState.getState()[o];for(const m in f){const b=e.getValue(m,e.latestValues[m]??null),v=f[m];if(v===void 0||g&&zz(g,m))continue;const j={delay:n,...Ry(c||{},m)},E=b.get();if(E!==void 0&&!b.isAnimating&&!Array.isArray(v)&&v===E&&!j.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const C=Uk(e);if(C){const k=window.MotionHandoffAnimation(C,m,Dn);k!==null&&(j.startTime=k,S=!0)}}cx(e,m),b.start(Uy(m,b,v,e.shouldReduceMotion&&dk.has(m)?{type:!1}:j,e,S));const w=b.animation;w&&h.push(w)}return d&&Promise.all(h).then(()=>{Dn.update(()=>{d&&Ez(e,d)})}),h}function qk(e,t,n,i=0,o=1){const c=Array.from(e).sort((g,m)=>g.sortNodePosition(m)).indexOf(t),d=e.size,f=(d-1)*i;return typeof n=="function"?n(c,d):o===1?c*i:f-c*i}function ux(e,t,n={}){const i=Il(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const c=i?()=>Promise.all($k(e,i,n)):()=>Promise.resolve(),d=e.variantChildren&&e.variantChildren.size?(h=0)=>{const{delayChildren:g=0,staggerChildren:m,staggerDirection:b}=o;return Nz(e,t,h,g,m,b,n)}:()=>Promise.resolve(),{when:f}=o;if(f){const[h,g]=f==="beforeChildren"?[c,d]:[d,c];return h().then(()=>g())}else return Promise.all([c(),d(n.delay)])}function Nz(e,t,n=0,i=0,o=0,c=1,d){const f=[];for(const h of e.variantChildren)h.notify("AnimationStart",t),f.push(ux(h,t,{...d,delay:n+(typeof i=="function"?0:i)+qk(e.variantChildren,h,i,o,c)}).then(()=>h.notify("AnimationComplete",t)));return Promise.all(f)}function Lz(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const o=t.map(c=>ux(e,c,n));i=Promise.all(o)}else if(typeof t=="string")i=ux(e,t,n);else{const o=typeof t=="function"?Il(e,t,n.custom):t;i=Promise.all($k(e,o,n))}return i.then(()=>{e.notify("AnimationComplete",t)})}function Yk(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}const Fz=zy.length;function Gk(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Gk(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<Fz;n++){const i=zy[n],o=e.props[i];(Uu(o)||o===!1)&&(t[i]=o)}return t}const Bz=[..._y].reverse(),Vz=_y.length;function Hz(e){return t=>Promise.all(t.map(({animation:n,options:i})=>Lz(e,n,i)))}function Uz(e){let t=Hz(e),n=k1(),i=!0;const o=h=>(g,m)=>{const b=Il(e,m,h==="exit"?e.presenceContext?.custom:void 0);if(b){const{transition:v,transitionEnd:j,...E}=b;g={...g,...E,...j}}return g};function c(h){t=h(e)}function d(h){const{props:g}=e,m=Gk(e.parent)||{},b=[],v=new Set;let j={},E=1/0;for(let w=0;w<Vz;w++){const C=Bz[w],k=n[C],R=g[C]!==void 0?g[C]:m[C],O=Uu(R),I=C===h?k.isActive:null;I===!1&&(E=w);let P=R===m[C]&&R!==g[C]&&O;if(P&&i&&e.manuallyAnimateOnMount&&(P=!1),k.protectedKeys={...j},!k.isActive&&I===null||!R&&!k.prevProp||_h(R)||typeof R=="boolean")continue;const W=$z(k.prevProp,R);let L=W||C===h&&k.isActive&&!P&&O||w>E&&O,z=!1;const q=Array.isArray(R)?R:[R];let B=q.reduce(o(C),{});I===!1&&(B={});const{prevResolvedValues:U={}}=k,re={...U,...B},H=V=>{L=!0,v.has(V)&&(z=!0,v.delete(V)),k.needsAnimating[V]=!0;const F=e.getValue(V);F&&(F.liveStyle=!1)};for(const V in re){const F=B[V],X=U[V];if(j.hasOwnProperty(V))continue;let oe=!1;lx(F)&&lx(X)?oe=!Yk(F,X):oe=F!==X,oe?F!=null?H(V):v.add(V):F!==void 0&&v.has(V)?H(V):k.protectedKeys[V]=!0}k.prevProp=R,k.prevResolvedValues=B,k.isActive&&(j={...j,...B}),i&&e.blockInitialAnimation&&(L=!1);const $=P&&W;L&&(!$||z)&&b.push(...q.map(V=>{const F={type:C};if(typeof V=="string"&&i&&!$&&e.manuallyAnimateOnMount&&e.parent){const{parent:X}=e,oe=Il(X,V);if(X.enteringChildren&&oe){const{delayChildren:ue}=oe.transition||{};F.delay=qk(X.enteringChildren,e,ue)}}return{animation:V,options:F}}))}if(v.size){const w={};if(typeof g.initial!="boolean"){const C=Il(e,Array.isArray(g.initial)?g.initial[0]:g.initial);C&&C.transition&&(w.transition=C.transition)}v.forEach(C=>{const k=e.getBaseTarget(C),R=e.getValue(C);R&&(R.liveStyle=!0),w[C]=k??null}),b.push({animation:w})}let S=!!b.length;return i&&(g.initial===!1||g.initial===g.animate)&&!e.manuallyAnimateOnMount&&(S=!1),i=!1,S?t(b):Promise.resolve()}function f(h,g){if(n[h].isActive===g)return Promise.resolve();e.variantChildren?.forEach(b=>b.animationState?.setActive(h,g)),n[h].isActive=g;const m=d(h);for(const b in n)n[b].protectedKeys={};return m}return{animateChanges:d,setActive:f,setAnimateFunction:c,getState:()=>n,reset:()=>{n=k1()}}}function $z(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Yk(t,e):!1}function ao(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function k1(){return{animate:ao(!0),whileInView:ao(),whileHover:ao(),whileTap:ao(),whileDrag:ao(),whileFocus:ao(),exit:ao()}}class za{constructor(t){this.isMounted=!1,this.node=t}update(){}}class qz extends za{constructor(t){super(t),t.animationState||(t.animationState=Uz(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();_h(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Yz=0;class Gz extends za{constructor(){super(...arguments),this.id=Yz++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const o=this.node.animationState.setActive("exit",!t);n&&!t&&o.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Qz={animation:{Feature:qz},exit:{Feature:Gz}};function qu(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}function md(e){return{point:{x:e.pageX,y:e.pageY}}}const Kz=e=>t=>Iy(t)&&e(t,md(t));function Cu(e,t,n,i){return qu(e,t,Kz(n),i)}const Qk=1e-4,Xz=1-Qk,Zz=1+Qk,Kk=.01,Jz=0-Kk,eN=0+Kk;function As(e){return e.max-e.min}function tN(e,t,n){return Math.abs(e-t)<=n}function E1(e,t,n,i=.5){e.origin=i,e.originPoint=Pn(t.min,t.max,e.origin),e.scale=As(n)/As(t),e.translate=Pn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=Xz&&e.scale<=Zz||isNaN(e.scale))&&(e.scale=1),(e.translate>=Jz&&e.translate<=eN||isNaN(e.translate))&&(e.translate=0)}function Tu(e,t,n,i){E1(e.x,t.x,n.x,i?i.originX:void 0),E1(e.y,t.y,n.y,i?i.originY:void 0)}function D1(e,t,n){e.min=n.min+t.min,e.max=e.min+As(t)}function nN(e,t,n){D1(e.x,t.x,n.x),D1(e.y,t.y,n.y)}function M1(e,t,n){e.min=t.min-n.min,e.max=e.min+As(t)}function ku(e,t,n){M1(e.x,t.x,n.x),M1(e.y,t.y,n.y)}function Dr(e){return[e("x"),e("y")]}const Xk=({current:e})=>e?e.ownerDocument.defaultView:null,A1=(e,t)=>Math.abs(e-t);function sN(e,t){const n=A1(e.x,t.x),i=A1(e.y,t.y);return Math.sqrt(n**2+i**2)}class Zk{constructor(t,n,{transformPagePoint:i,contextWindow:o=window,dragSnapToOrigin:c=!1,distanceThreshold:d=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=bg(this.lastMoveEventInfo,this.history),j=this.startEvent!==null,E=sN(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!j&&!E)return;const{point:S}=v,{timestamp:w}=gs;this.history.push({...S,timestamp:w});const{onStart:C,onMove:k}=this.handlers;j||(C&&C(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,v)},this.handlePointerMove=(v,j)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=yg(j,this.transformPagePoint),Dn.update(this.updatePoint,!0)},this.handlePointerUp=(v,j)=>{this.end();const{onEnd:E,onSessionEnd:S,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=bg(v.type==="pointercancel"?this.lastMoveEventInfo:yg(j,this.transformPagePoint),this.history);this.startEvent&&E&&E(v,C),S&&S(v,C)},!Iy(t))return;this.dragSnapToOrigin=c,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=d,this.contextWindow=o||window;const f=md(t),h=yg(f,this.transformPagePoint),{point:g}=h,{timestamp:m}=gs;this.history=[{...g,timestamp:m}];const{onSessionStart:b}=n;b&&b(t,bg(h,this.history)),this.removeListeners=fd(Cu(this.contextWindow,"pointermove",this.handlePointerMove),Cu(this.contextWindow,"pointerup",this.handlePointerUp),Cu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Aa(this.updatePoint)}}function yg(e,t){return t?{point:t(e.point)}:e}function R1(e,t){return{x:e.x-t.x,y:e.y-t.y}}function bg({point:e},t){return{point:e,delta:R1(e,Jk(t)),offset:R1(e,rN(t)),velocity:iN(t,.1)}}function rN(e){return e[0]}function Jk(e){return e[e.length-1]}function iN(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const o=Jk(e);for(;n>=0&&(i=e[n],!(o.timestamp-i.timestamp>di(t)));)n--;if(!i)return{x:0,y:0};const c=Rr(o.timestamp-i.timestamp);if(c===0)return{x:0,y:0};const d={x:(o.x-i.x)/c,y:(o.y-i.y)/c};return d.x===1/0&&(d.x=0),d.y===1/0&&(d.y=0),d}function aN(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?Pn(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?Pn(n,e,i.max):Math.min(e,n)),e}function P1(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function oN(e,{top:t,left:n,bottom:i,right:o}){return{x:P1(e.x,n,o),y:P1(e.y,t,i)}}function O1(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function lN(e,t){return{x:O1(e.x,t.x),y:O1(e.y,t.y)}}function cN(e,t){let n=.5;const i=As(e),o=As(t);return o>i?n=Bu(t.min,t.max-i,e.min):i>o&&(n=Bu(e.min,e.max-o,t.min)),$i(0,1,n)}function uN(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const dx=.35;function dN(e=dx){return e===!1?e=0:e===!0&&(e=dx),{x:I1(e,"left","right"),y:I1(e,"top","bottom")}}function I1(e,t,n){return{min:W1(e,t),max:W1(e,n)}}function W1(e,t){return typeof e=="number"?e:e[t]||0}const fN=new WeakMap;class hN{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Un(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const c=b=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(md(b).point)},d=(b,v)=>{const{drag:j,dragPropagation:E,onDragStart:S}=this.getProps();if(j&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=b3(j),!this.openDragLock))return;this.latestPointerEvent=b,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Dr(C=>{let k=this.getAxisMotionValue(C).get()||0;if(fi.test(k)){const{projection:R}=this.visualElement;if(R&&R.layout){const O=R.layout.layoutBox[C];O&&(k=As(O)*(parseFloat(k)/100))}}this.originPoint[C]=k}),S&&Dn.postRender(()=>S(b,v)),cx(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},f=(b,v)=>{this.latestPointerEvent=b,this.latestPanInfo=v;const{dragPropagation:j,dragDirectionLock:E,onDirectionLock:S,onDrag:w}=this.getProps();if(!j&&!this.openDragLock)return;const{offset:C}=v;if(E&&this.currentDirection===null){this.currentDirection=pN(C),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",v.point,C),this.updateAxis("y",v.point,C),this.visualElement.render(),w&&w(b,v)},h=(b,v)=>{this.latestPointerEvent=b,this.latestPanInfo=v,this.stop(b,v),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>Dr(b=>this.getAnimationState(b)==="paused"&&this.getAxisMotionValue(b).animation?.play()),{dragSnapToOrigin:m}=this.getProps();this.panSession=new Zk(t,{onSessionStart:c,onStart:d,onMove:f,onSessionEnd:h,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:i,contextWindow:Xk(this.visualElement)})}stop(t,n){const i=t||this.latestPointerEvent,o=n||this.latestPanInfo,c=this.isDragging;if(this.cancel(),!c||!o||!i)return;const{velocity:d}=o;this.startAnimation(d);const{onDragEnd:f}=this.getProps();f&&Dn.postRender(()=>f(i,o))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:o}=this.getProps();if(!i||!zf(t,o,this.currentDirection))return;const c=this.getAxisMotionValue(t);let d=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(d=aN(d,this.constraints[t],this.elastic[t])),c.set(d)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,o=this.constraints;t&&El(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=oN(i.layoutBox,t):this.constraints=!1,this.elastic=dN(n),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Dr(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=uN(i.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!El(t))return!1;const i=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const c=mz(i,o.root,this.visualElement.getTransformPagePoint());let d=lN(o.layout.layoutBox,c);if(n){const f=n(fz(d));this.hasMutatedConstraints=!!f,f&&(d=_k(f))}return d}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:o,dragTransition:c,dragSnapToOrigin:d,onDragTransitionEnd:f}=this.getProps(),h=this.constraints||{},g=Dr(m=>{if(!zf(m,n,this.currentDirection))return;let b=h&&h[m]||{};d&&(b={min:0,max:0});const v=o?200:1e6,j=o?40:1e7,E={type:"inertia",velocity:i?t[m]:0,bounceStiffness:v,bounceDamping:j,timeConstant:750,restDelta:1,restSpeed:10,...c,...b};return this.startAxisValueAnimation(m,E)});return Promise.all(g).then(f)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return cx(this.visualElement,t),i.start(Uy(t,i,0,n,this.visualElement,!1))}stopAnimation(){Dr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Dr(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),o=i[n];return o||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){Dr(n=>{const{drag:i}=this.getProps();if(!zf(n,i,this.currentDirection))return;const{projection:o}=this.visualElement,c=this.getAxisMotionValue(n);if(o&&o.layout){const{min:d,max:f}=o.layout.layoutBox[n];c.set(t[n]-Pn(d,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!El(n)||!i||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Dr(d=>{const f=this.getAxisMotionValue(d);if(f&&this.constraints!==!1){const h=f.get();o[d]=cN({min:h,max:h},this.constraints[d])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Dr(d=>{if(!zf(d,t,null))return;const f=this.getAxisMotionValue(d),{min:h,max:g}=this.constraints[d];f.set(Pn(h,g,o[d]))})}addListeners(){if(!this.visualElement.current)return;fN.set(this.visualElement,this);const t=this.visualElement.current,n=Cu(t,"pointerdown",h=>{const{drag:g,dragListener:m=!0}=this.getProps();g&&m&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();El(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,c=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),Dn.read(i);const d=qu(window,"resize",()=>this.scalePositionWithinConstraints()),f=o.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:g})=>{this.isDragging&&g&&(Dr(m=>{const b=this.getAxisMotionValue(m);b&&(this.originPoint[m]+=h[m].translate,b.set(b.get()+h[m].translate))}),this.visualElement.render())}));return()=>{d(),n(),c(),f&&f()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:o=!1,dragConstraints:c=!1,dragElastic:d=dx,dragMomentum:f=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:o,dragConstraints:c,dragElastic:d,dragMomentum:f}}}function zf(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function pN(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class mN extends za{constructor(t){super(t),this.removeGroupControls=Pr,this.removeListeners=Pr,this.controls=new hN(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Pr}unmount(){this.removeGroupControls(),this.removeListeners()}}const _1=e=>(t,n)=>{e&&Dn.postRender(()=>e(t,n))};class gN extends za{constructor(){super(...arguments),this.removePointerDownListener=Pr}onPointerDown(t){this.session=new Zk(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Xk(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:o}=this.node.getProps();return{onSessionStart:_1(t),onStart:_1(n),onMove:i,onEnd:(c,d)=>{delete this.session,o&&Dn.postRender(()=>o(c,d))}}}mount(){this.removePointerDownListener=Cu(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const nh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function z1(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Jc={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(pt.test(e))e=parseFloat(e);else return e;const n=z1(e,t.target.x),i=z1(e,t.target.y);return`${n}% ${i}%`}},xN={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,o=Ra.parse(e);if(o.length>5)return i;const c=Ra.createTransformer(e),d=typeof o[0]!="number"?1:0,f=n.x.scale*t.x,h=n.y.scale*t.y;o[0+d]/=f,o[1+d]/=h;const g=Pn(f,h,.5);return typeof o[2+d]=="number"&&(o[2+d]/=g),typeof o[3+d]=="number"&&(o[3+d]/=g),c(o)}};let vg=!1;class yN extends y.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:o}=this.props,{projection:c}=t;F3(bN),c&&(n.group&&n.group.add(c),i&&i.register&&o&&i.register(c),vg&&c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),nh.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:o,isPresent:c}=this.props,{projection:d}=i;return d&&(d.isPresent=c,vg=!0,o||t.layoutDependency!==n||n===void 0||t.isPresent!==c?d.willUpdate():this.safeToRemove(),t.isPresent!==c&&(c?d.promote():d.relegate()||Dn.postRender(()=>{const f=d.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Oy.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:o}=t;vg=!0,o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),i&&i.deregister&&i.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function eE(e){const[t,n]=wk(),i=y.useContext(dy);return r.jsx(yN,{...e,layoutGroup:i,switchLayoutGroup:y.useContext(Ik),isPresent:t,safeToRemove:n})}const bN={borderRadius:{...Jc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Jc,borderTopRightRadius:Jc,borderBottomLeftRadius:Jc,borderBottomRightRadius:Jc,boxShadow:xN};function vN(e,t,n){const i=js(e)?e:ql(e);return i.start(Uy("",i,t,n)),i.animation}const SN=(e,t)=>e.depth-t.depth;class wN{constructor(){this.children=[],this.isDirty=!1}add(t){py(this.children,t),this.isDirty=!0}remove(t){my(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(SN),this.isDirty=!1,this.children.forEach(t)}}function jN(e,t){const n=$s.now(),i=({timestamp:o})=>{const c=o-n;c>=t&&(Aa(i),e(c-t))};return Dn.setup(i,!0),()=>Aa(i)}const tE=["TopLeft","TopRight","BottomLeft","BottomRight"],CN=tE.length,N1=e=>typeof e=="string"?parseFloat(e):e,L1=e=>typeof e=="number"||pt.test(e);function TN(e,t,n,i,o,c){o?(e.opacity=Pn(0,n.opacity??1,kN(i)),e.opacityExit=Pn(t.opacity??1,0,EN(i))):c&&(e.opacity=Pn(t.opacity??1,n.opacity??1,i));for(let d=0;d<CN;d++){const f=`border${tE[d]}Radius`;let h=F1(t,f),g=F1(n,f);if(h===void 0&&g===void 0)continue;h||(h=0),g||(g=0),h===0||g===0||L1(h)===L1(g)?(e[f]=Math.max(Pn(N1(h),N1(g),i),0),(fi.test(g)||fi.test(h))&&(e[f]+="%")):e[f]=g}(t.rotate||n.rotate)&&(e.rotate=Pn(t.rotate||0,n.rotate||0,i))}function F1(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const kN=nE(0,.5,VT),EN=nE(.5,.95,Pr);function nE(e,t,n){return i=>i<e?0:i>t?1:n(Bu(e,t,i))}function B1(e,t){e.min=t.min,e.max=t.max}function Tr(e,t){B1(e.x,t.x),B1(e.y,t.y)}function V1(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function H1(e,t,n,i,o){return e-=t,e=yh(e,1/n,i),o!==void 0&&(e=yh(e,1/o,i)),e}function DN(e,t=0,n=1,i=.5,o,c=e,d=e){if(fi.test(t)&&(t=parseFloat(t),t=Pn(d.min,d.max,t/100)-d.min),typeof t!="number")return;let f=Pn(c.min,c.max,i);e===c&&(f-=t),e.min=H1(e.min,t,n,f,o),e.max=H1(e.max,t,n,f,o)}function U1(e,t,[n,i,o],c,d){DN(e,t[n],t[i],t[o],t.scale,c,d)}const MN=["x","scaleX","originX"],AN=["y","scaleY","originY"];function $1(e,t,n,i){U1(e.x,t,MN,n?n.x:void 0,i?i.x:void 0),U1(e.y,t,AN,n?n.y:void 0,i?i.y:void 0)}function q1(e){return e.translate===0&&e.scale===1}function sE(e){return q1(e.x)&&q1(e.y)}function Y1(e,t){return e.min===t.min&&e.max===t.max}function RN(e,t){return Y1(e.x,t.x)&&Y1(e.y,t.y)}function G1(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function rE(e,t){return G1(e.x,t.x)&&G1(e.y,t.y)}function Q1(e){return As(e.x)/As(e.y)}function K1(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class PN{constructor(){this.members=[]}add(t){py(this.members,t),t.scheduleRender()}remove(t){if(my(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(o=>t===o);if(n===0)return!1;let i;for(let o=n;o>=0;o--){const c=this.members[o];if(c.isPresent!==!1){i=c;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ON(e,t,n){let i="";const o=e.x.translate/t.x,c=e.y.translate/t.y,d=n?.z||0;if((o||c||d)&&(i=`translate3d(${o}px, ${c}px, ${d}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:g,rotate:m,rotateX:b,rotateY:v,skewX:j,skewY:E}=n;g&&(i=`perspective(${g}px) ${i}`),m&&(i+=`rotate(${m}deg) `),b&&(i+=`rotateX(${b}deg) `),v&&(i+=`rotateY(${v}deg) `),j&&(i+=`skewX(${j}deg) `),E&&(i+=`skewY(${E}deg) `)}const f=e.x.scale*t.x,h=e.y.scale*t.y;return(f!==1||h!==1)&&(i+=`scale(${f}, ${h})`),i||"none"}const Sg=["","X","Y","Z"],IN=1e3;let WN=0;function wg(e,t,n,i){const{latestValues:o}=t;o[e]&&(n[e]=o[e],t.setStaticValue(e,0),i&&(i[e]=0))}function iE(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Uk(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:c}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Dn,!(o||c))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&iE(i)}function aE({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:o}){return class{constructor(d={},f=t?.()){this.id=WN++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(NN),this.nodes.forEach(VN),this.nodes.forEach(HN),this.nodes.forEach(LN)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=d,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new wN)}addEventListener(d,f){return this.eventHandlers.has(d)||this.eventHandlers.set(d,new yy),this.eventHandlers.get(d).add(f)}notifyListeners(d,...f){const h=this.eventHandlers.get(d);h&&h.notify(...f)}hasListeners(d){return this.eventHandlers.has(d)}mount(d){if(this.instance)return;this.isSVG=Sk(d)&&!T3(d),this.instance=d;const{layoutId:f,layout:h,visualElement:g}=this.options;if(g&&!g.current&&g.mount(d),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||f)&&(this.isLayoutDirty=!0),e){let m,b=0;const v=()=>this.root.updateBlockedByResize=!1;Dn.read(()=>{b=window.innerWidth}),e(d,()=>{const j=window.innerWidth;j!==b&&(b=j,this.root.updateBlockedByResize=!0,m&&m(),m=jN(v,250),nh.hasAnimatedSinceResize&&(nh.hasAnimatedSinceResize=!1,this.nodes.forEach(J1)))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&g&&(f||h)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:b,hasRelativeLayoutChanged:v,layout:j})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||g.getDefaultTransition()||GN,{onLayoutAnimationStart:S,onLayoutAnimationComplete:w}=g.getProps(),C=!this.targetLayout||!rE(this.targetLayout,j),k=!b&&v;if(this.options.layoutRoot||this.resumeFrom||k||b&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...Ry(E,"layout"),onPlay:S,onComplete:w};(g.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(m,k)}else b||J1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=j})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const d=this.getStack();d&&d.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Aa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(UN),this.animationId++)}getTransformTemplate(){const{visualElement:d}=this.options;return d&&d.getProps().transformTemplate}willUpdate(d=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&iE(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const b=this.path[m];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:f,layout:h}=this.options;if(f===void 0&&!h)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),d&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(X1);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Z1);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(BN),this.nodes.forEach(_N),this.nodes.forEach(zN)):this.nodes.forEach(Z1),this.clearAllSnapshots();const f=$s.now();gs.delta=$i(0,1e3/60,f-gs.timestamp),gs.timestamp=f,gs.isProcessing=!0,ug.update.process(gs),ug.preRender.process(gs),ug.render.process(gs),gs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Oy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(FN),this.sharedNodes.forEach($N)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Dn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Dn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!As(this.snapshot.measuredBox.x)&&!As(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const d=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Un(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,d?d.layoutBox:void 0)}updateScroll(d="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===d&&(f=!1),f&&this.instance){const h=i(this.instance);this.scroll={animationId:this.root.animationId,phase:d,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!o)return;const d=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!sE(this.projectionDelta),h=this.getTransformTemplate(),g=h?h(this.latestValues,""):void 0,m=g!==this.prevTransformTemplateValue;d&&this.instance&&(f||ho(this.latestValues)||m)&&(o(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(d=!0){const f=this.measurePageBox();let h=this.removeElementScroll(f);return d&&(h=this.removeTransform(h)),QN(h),{animationId:this.root.animationId,measuredBox:f,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:d}=this.options;if(!d)return Un();const f=d.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(KN))){const{scroll:g}=this.root;g&&(Dl(f.x,g.offset.x),Dl(f.y,g.offset.y))}return f}removeElementScroll(d){const f=Un();if(Tr(f,d),this.scroll?.wasRoot)return f;for(let h=0;h<this.path.length;h++){const g=this.path[h],{scroll:m,options:b}=g;g!==this.root&&m&&b.layoutScroll&&(m.wasRoot&&Tr(f,d),Dl(f.x,m.offset.x),Dl(f.y,m.offset.y))}return f}applyTransform(d,f=!1){const h=Un();Tr(h,d);for(let g=0;g<this.path.length;g++){const m=this.path[g];!f&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Ml(h,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),ho(m.latestValues)&&Ml(h,m.latestValues)}return ho(this.latestValues)&&Ml(h,this.latestValues),h}removeTransform(d){const f=Un();Tr(f,d);for(let h=0;h<this.path.length;h++){const g=this.path[h];if(!g.instance||!ho(g.latestValues))continue;ix(g.latestValues)&&g.updateSnapshot();const m=Un(),b=g.measurePageBox();Tr(m,b),$1(f,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,m)}return ho(this.latestValues)&&$1(f,this.latestValues),f}setTargetDelta(d){this.targetDelta=d,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(d){this.options={...this.options,...d,crossfade:d.crossfade!==void 0?d.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(d=!1){const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==f;if(!(d||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:b}=this.options;if(!(!this.layout||!(m||b))){if(this.resolvedRelativeTargetAt=gs.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Un(),this.relativeTargetOrigin=Un(),ku(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Tr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Un(),this.targetWithTransforms=Un()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),nN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Tr(this.target,this.layout.layoutBox),Nk(this.target,this.targetDelta)):Tr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Un(),this.relativeTargetOrigin=Un(),ku(this.relativeTargetOrigin,this.target,v.target),Tr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ix(this.parent.latestValues)||zk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const d=this.getLead(),f=!!this.resumingFrom||this!==d;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===gs.timestamp&&(h=!1),h)return;const{layout:g,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||m))return;Tr(this.layoutCorrected,this.layout.layoutBox);const b=this.treeScale.x,v=this.treeScale.y;pz(this.layoutCorrected,this.treeScale,this.path,f),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=Un());const{target:j}=d;if(!j){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(V1(this.prevProjectionDelta.x,this.projectionDelta.x),V1(this.prevProjectionDelta.y,this.projectionDelta.y)),Tu(this.projectionDelta,this.layoutCorrected,j,this.latestValues),(this.treeScale.x!==b||this.treeScale.y!==v||!K1(this.projectionDelta.x,this.prevProjectionDelta.x)||!K1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",j))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(d=!0){if(this.options.visualElement?.scheduleRender(),d){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Al(),this.projectionDelta=Al(),this.projectionDeltaWithTransform=Al()}setAnimationOrigin(d,f=!1){const h=this.snapshot,g=h?h.latestValues:{},m={...this.latestValues},b=Al();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const v=Un(),j=h?h.source:void 0,E=this.layout?this.layout.source:void 0,S=j!==E,w=this.getStack(),C=!w||w.members.length<=1,k=!!(S&&!C&&this.options.crossfade===!0&&!this.path.some(YN));this.animationProgress=0;let R;this.mixTargetDelta=O=>{const I=O/1e3;ej(b.x,d.x,I),ej(b.y,d.y,I),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ku(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),qN(this.relativeTarget,this.relativeTargetOrigin,v,I),R&&RN(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=Un()),Tr(R,this.relativeTarget)),S&&(this.animationValues=m,TN(m,g,this.latestValues,I,k,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=I},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(d){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Aa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Dn.update(()=>{nh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ql(0)),this.currentAnimation=vN(this.motionValue,[0,1e3],{...d,velocity:0,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),d.onUpdate&&d.onUpdate(f)},onStop:()=>{},onComplete:()=>{d.onComplete&&d.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const d=this.getStack();d&&d.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(IN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const d=this.getLead();let{targetWithTransforms:f,target:h,layout:g,latestValues:m}=d;if(!(!f||!h||!g)){if(this!==d&&this.layout&&g&&oE(this.options.animationType,this.layout.layoutBox,g.layoutBox)){h=this.target||Un();const b=As(this.layout.layoutBox.x);h.x.min=d.target.x.min,h.x.max=h.x.min+b;const v=As(this.layout.layoutBox.y);h.y.min=d.target.y.min,h.y.max=h.y.min+v}Tr(f,h),Ml(f,m),Tu(this.projectionDeltaWithTransform,this.layoutCorrected,f,m)}}registerSharedNode(d,f){this.sharedNodes.has(d)||this.sharedNodes.set(d,new PN),this.sharedNodes.get(d).add(f);const g=f.options.initialPromotionConfig;f.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(f):void 0})}isLead(){const d=this.getStack();return d?d.lead===this:!0}getLead(){const{layoutId:d}=this.options;return d?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:d}=this.options;return d?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:d}=this.options;if(d)return this.root.sharedNodes.get(d)}promote({needsReset:d,transition:f,preserveFollowOpacity:h}={}){const g=this.getStack();g&&g.promote(this,h),d&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const d=this.getStack();return d?d.relegate(this):!1}resetSkewAndRotation(){const{visualElement:d}=this.options;if(!d)return;let f=!1;const{latestValues:h}=d;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(f=!0),!f)return;const g={};h.z&&wg("z",d,g,this.animationValues);for(let m=0;m<Sg.length;m++)wg(`rotate${Sg[m]}`,d,g,this.animationValues),wg(`skew${Sg[m]}`,d,g,this.animationValues);d.render();for(const m in g)d.setStaticValue(m,g[m]),this.animationValues&&(this.animationValues[m]=g[m]);d.scheduleRender()}applyProjectionStyles(d,f){if(!this.instance||this.isSVG)return;if(!this.isVisible){d.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,d.visibility="",d.opacity="",d.pointerEvents=th(f?.pointerEvents)||"",d.transform=h?h(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(d.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,d.pointerEvents=th(f?.pointerEvents)||""),this.hasProjected&&!ho(this.latestValues)&&(d.transform=h?h({},""):"none",this.hasProjected=!1);return}d.visibility="";const m=g.animationValues||g.latestValues;this.applyTransformsToTarget();let b=ON(this.projectionDeltaWithTransform,this.treeScale,m);h&&(b=h(m,b)),d.transform=b;const{x:v,y:j}=this.projectionDelta;d.transformOrigin=`${v.origin*100}% ${j.origin*100}% 0`,g.animationValues?d.opacity=g===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:d.opacity=g===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const E in $u){if(m[E]===void 0)continue;const{correct:S,applyTo:w,isCSSVariable:C}=$u[E],k=b==="none"?m[E]:S(m[E],g);if(w){const R=w.length;for(let O=0;O<R;O++)d[w[O]]=k}else C?this.options.visualElement.renderState.vars[E]=k:d[E]=k}this.options.layoutId&&(d.pointerEvents=g===this?th(f?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(d=>d.currentAnimation?.stop()),this.root.nodes.forEach(X1),this.root.sharedNodes.clear()}}}function _N(e){e.updateLayout()}function zN(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=e.layout,{animationType:o}=e.options,c=t.source!==e.layout.source;o==="size"?Dr(m=>{const b=c?t.measuredBox[m]:t.layoutBox[m],v=As(b);b.min=n[m].min,b.max=b.min+v}):oE(o,t.layoutBox,n)&&Dr(m=>{const b=c?t.measuredBox[m]:t.layoutBox[m],v=As(n[m]);b.max=b.min+v,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[m].max=e.relativeTarget[m].min+v)});const d=Al();Tu(d,n,t.layoutBox);const f=Al();c?Tu(f,e.applyTransform(i,!0),t.measuredBox):Tu(f,n,t.layoutBox);const h=!sE(d);let g=!1;if(!e.resumeFrom){const m=e.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:b,layout:v}=m;if(b&&v){const j=Un();ku(j,t.layoutBox,b.layoutBox);const E=Un();ku(E,n,v.layoutBox),rE(j,E)||(g=!0),m.options.layoutRoot&&(e.relativeTarget=E,e.relativeTargetOrigin=j,e.relativeParent=m)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:f,layoutDelta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:g})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function NN(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function LN(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function FN(e){e.clearSnapshot()}function X1(e){e.clearMeasurements()}function Z1(e){e.isLayoutDirty=!1}function BN(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function J1(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function VN(e){e.resolveTargetDelta()}function HN(e){e.calcProjection()}function UN(e){e.resetSkewAndRotation()}function $N(e){e.removeLeadSnapshot()}function ej(e,t,n){e.translate=Pn(t.translate,0,n),e.scale=Pn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function tj(e,t,n,i){e.min=Pn(t.min,n.min,i),e.max=Pn(t.max,n.max,i)}function qN(e,t,n,i){tj(e.x,t.x,n.x,i),tj(e.y,t.y,n.y,i)}function YN(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const GN={duration:.45,ease:[.4,0,.1,1]},nj=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),sj=nj("applewebkit/")&&!nj("chrome/")?Math.round:Pr;function rj(e){e.min=sj(e.min),e.max=sj(e.max)}function QN(e){rj(e.x),rj(e.y)}function oE(e,t,n){return e==="position"||e==="preserve-aspect"&&!tN(Q1(t),Q1(n),.2)}function KN(e){return e!==e.root&&e.scroll?.wasRoot}const XN=aE({attachResizeListener:(e,t)=>qu(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),jg={current:void 0},lE=aE({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!jg.current){const e=new XN({});e.mount(window),e.setOptions({layoutScroll:!0}),jg.current=e}return jg.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),ZN={pan:{Feature:gN},drag:{Feature:mN,ProjectionNode:lE,MeasureLayout:eE}};function ij(e,t,n){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,c=i[o];c&&Dn.postRender(()=>c(t,md(t)))}class JN extends za{mount(){const{current:t}=this.node;t&&(this.unmount=v3(t,(n,i)=>(ij(this.node,i,"Start"),o=>ij(this.node,o,"End"))))}unmount(){}}class eL extends za{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=fd(qu(this.node.current,"focus",()=>this.onFocus()),qu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function aj(e,t,n){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),c=i[o];c&&Dn.postRender(()=>c(t,md(t)))}class tL extends za{mount(){const{current:t}=this.node;t&&(this.unmount=C3(t,(n,i)=>(aj(this.node,i,"Start"),(o,{success:c})=>aj(this.node,o,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const fx=new WeakMap,Cg=new WeakMap,nL=e=>{const t=fx.get(e.target);t&&t(e)},sL=e=>{e.forEach(nL)};function rL({root:e,...t}){const n=e||document;Cg.has(n)||Cg.set(n,{});const i=Cg.get(n),o=JSON.stringify(t);return i[o]||(i[o]=new IntersectionObserver(sL,{root:e,...t})),i[o]}function iL(e,t,n){const i=rL(t);return fx.set(e,n),i.observe(e),()=>{fx.delete(e),i.unobserve(e)}}const aL={some:0,all:1};class oL extends za{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:o="some",once:c}=t,d={root:n?n.current:void 0,rootMargin:i,threshold:typeof o=="number"?o:aL[o]},f=h=>{const{isIntersecting:g}=h;if(this.isInView===g||(this.isInView=g,c&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:m,onViewportLeave:b}=this.node.getProps(),v=g?m:b;v&&v(h)};return iL(this.node.current,d,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(lL(t,n))&&this.startObserver()}unmount(){}}function lL({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const cL={inView:{Feature:oL},tap:{Feature:tL},focus:{Feature:eL},hover:{Feature:JN}},uL={layout:{ProjectionNode:lE,MeasureLayout:eE}},dL={...Qz,...cL,...ZN,...uL},gt=dz(dL,Cz);class fL{constructor(){this.audioContext=null,this.isMuted=this.loadMutePreference(),this.volume=this.loadVolumePreference(),this.sounds={},this.initAudioContext()}initAudioContext(){if(!this.audioContext&&typeof window<"u")try{this.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch(t){console.warn("Web Audio API not supported",t)}}loadMutePreference(){try{return localStorage.getItem("audioMuted")==="true"}catch{return!1}}loadVolumePreference(){try{const t=localStorage.getItem("audioVolume");return t?parseFloat(t):.3}catch{return .3}}saveMutePreference(){try{localStorage.setItem("audioMuted",this.isMuted.toString())}catch(t){console.warn("Could not save mute preference",t)}}toggleMute(){return this.isMuted=!this.isMuted,this.saveMutePreference(),this.isMuted}setMuted(t){this.isMuted=t,this.saveMutePreference()}isMutedState(){return this.isMuted}playBeep(t=800,n=200,i=null){if(this.isMuted)return;const o=i!==null?i:this.loadVolumePreference();if(!(!this.audioContext&&(this.initAudioContext(),!this.audioContext)))try{this.audioContext.state==="suspended"&&this.audioContext.resume();const c=this.audioContext.createOscillator(),d=this.audioContext.createGain();c.connect(d),d.connect(this.audioContext.destination),c.frequency.value=t,c.type="sine",d.gain.setValueAtTime(o,this.audioContext.currentTime),d.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+n/1e3),c.start(this.audioContext.currentTime),c.stop(this.audioContext.currentTime+n/1e3)}catch(c){console.warn("Could not play beep",c)}}playHighBeep(){this.playBeep(1e3,300)}playLowBeep(){this.playBeep(400,300)}playChime(){if(!this.isMuted&&!(!this.audioContext&&(this.initAudioContext(),!this.audioContext)))try{this.audioContext.state==="suspended"&&this.audioContext.resume(),this.playBeep(800,200),setTimeout(()=>{this.playBeep(1e3,400)},150)}catch(t){console.warn("Could not play chime",t)}}playCountdownBeep(){this.isMuted||(this.playBeep(600,150),setTimeout(()=>this.playBeep(600,150),200),setTimeout(()=>this.playBeep(600,150),400))}playCompletionFanfare(){if(!this.isMuted&&!(!this.audioContext&&(this.initAudioContext(),!this.audioContext)))try{this.audioContext.state==="suspended"&&this.audioContext.resume(),[523,659,784,1047].forEach((n,i)=>{setTimeout(()=>{this.playBeep(n,300)},i*150)})}catch(t){console.warn("Could not play completion fanfare",t)}}playTransitionBeep(){this.isMuted||this.playBeep(700,200)}}const on=new fL,cE=({value:e,onChange:t,availableExercises:n,label:i="Exercise",placeholder:o="Type to search exercises...",size:c="small",fullWidth:d=!0,disabled:f=!1,sx:h={}})=>{const g=m=>{if(!m)return n;const b=m.toLowerCase().split(" ").filter(v=>v.length>0);return n.filter(v=>{const j=[v.name,v.muscleGroup].join(" ").toLowerCase();return b.every(E=>j.includes(E))})};return r.jsx(jC,{fullWidth:d,size:c,options:n,value:e,onChange:t,disabled:f,getOptionLabel:m=>typeof m=="string"?m:m?.name||"",filterOptions:(m,b)=>g(b.inputValue),isOptionEqualToValue:(m,b)=>typeof m=="string"&&typeof b=="string"?m===b:m?.name===b?.name,freeSolo:!0,renderInput:m=>r.jsx(Je,{...m,label:i,placeholder:o}),renderOption:(m,b)=>{const{key:v,...j}=m;return r.jsx("li",{...j,children:r.jsxs(A,{children:[r.jsx(M,{variant:"body2",children:b.name}),r.jsx(M,{variant:"caption",color:"text.secondary",children:b.muscleGroup})]})},v)},noOptionsText:"No exercises found. Try different search terms.",sx:h})};cE.propTypes={value:T.oneOfType([T.object,T.string]),onChange:T.func.isRequired,availableExercises:T.array.isRequired,label:T.string,placeholder:T.string,size:T.string,fullWidth:T.bool,disabled:T.bool,sx:T.object};var uE={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},oj=Ta.createContext&&Ta.createContext(uE),hL=["attr","size","title"];function pL(e,t){if(e==null)return{};var n=mL(e,t),i,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(o=0;o<c.length;o++)i=c[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function mL(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function bh(){return bh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},bh.apply(this,arguments)}function lj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function vh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lj(Object(n),!0).forEach(function(i){gL(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lj(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function gL(e,t,n){return t=xL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xL(e){var t=yL(e,"string");return typeof t=="symbol"?t:t+""}function yL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dE(e){return e&&e.map((t,n)=>Ta.createElement(t.tag,vh({key:n},t.attr),dE(t.child)))}function fE(e){return t=>Ta.createElement(bL,bh({attr:vh({},e.attr)},t),dE(e.child))}function bL(e){var t=n=>{var{attr:i,size:o,title:c}=e,d=pL(e,hL),f=o||n.size||"1em",h;return n.className&&(h=n.className),e.className&&(h=(h?h+" ":"")+e.className),Ta.createElement("svg",bh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,d,{className:h,style:vh(vh({color:e.color||n.color},n.style),e.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),c&&Ta.createElement("title",null,c),e.children)};return oj!==void 0?Ta.createElement(oj.Consumer,null,n=>t(n)):t(uE)}function hE(e){return fE({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 16h4c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1v-1a2 2 0 1 0-4 0v1c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1zm.8-6c0-.66.54-1.2 1.2-1.2.66 0 1.2.54 1.2 1.2v1h-2.4v-1zM17 1H7c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 18H7V5h10v14z"},child:[]}]})(e)}function pE(e){return fE({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m23.25 12.77-2.57-2.57-1.41 1.41 2.22 2.22-5.66 5.66L4.51 8.17l5.66-5.66 2.1 2.1 1.41-1.41L11.23.75a1.49 1.49 0 0 0-2.12 0L2.75 7.11a1.49 1.49 0 0 0 0 2.12l12.02 12.02c.59.59 1.54.59 2.12 0l6.36-6.36c.59-.59.59-1.54 0-2.12zM8.47 20.48A10.487 10.487 0 0 1 2.5 12H1c.51 6.16 5.66 11 11.95 11l.66-.03-3.81-3.82-1.33 1.33zM16 9h5c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1v-.5a2.5 2.5 0 0 0-5 0V3c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1zm.8-6.5c0-.94.76-1.7 1.7-1.7s1.7.76 1.7 1.7V3h-3.4v-.5z"},child:[]}]})(e)}class vL{constructor(){this.wakeLock=null,this.isSupported="wakeLock"in navigator}isWakeLockSupported(){return this.isSupported}async requestWakeLock(){if(!this.isSupported)return console.warn("Wake Lock API is not supported in this browser"),!1;try{return this.wakeLock=await navigator.wakeLock.request("screen"),console.log("Wake Lock acquired"),this.wakeLock.addEventListener("release",()=>{console.log("Wake Lock released")}),!0}catch(t){return console.error(`Failed to acquire wake lock: ${t.name}, ${t.message}`),!1}}async releaseWakeLock(){if(this.wakeLock!==null)try{await this.wakeLock.release(),this.wakeLock=null,console.log("Wake Lock manually released")}catch(t){console.error(`Failed to release wake lock: ${t.message}`)}}isActive(){return this.wakeLock!==null&&!this.wakeLock.released}async reacquireOnVisibilityChange(){if(!this.isSupported)return;const t=async()=>{document.visibilityState==="visible"&&this.wakeLock!==null&&this.wakeLock.released&&await this.requestWakeLock()};return document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t)}}}const Ar=new vL,mE=({open:e,currentInfo:t,children:n,onExit:i})=>{const[o,c]=y.useState(Ar.isActive()),[d]=y.useState(Ar.isWakeLockSupported());y.useEffect(()=>{const h=Ar.reacquireOnVisibilityChange();return()=>{h&&h.then(g=>g&&g())}},[]);const f=async()=>{if(o)await Ar.releaseWakeLock(),c(!1);else{const h=await Ar.requestWakeLock();c(h)}};return r.jsxs(Et,{open:e,fullScreen:!0,onClose:i,PaperProps:{sx:{bgcolor:"background.default",backgroundImage:"none"}},children:[r.jsxs(A,{sx:{position:"relative",top:0,zIndex:1100,bgcolor:"background.paper",borderBottom:"1px solid",borderColor:"divider",display:"flex",justifyContent:"center",alignItems:"center",py:1.5,px:1,gap:1,minHeight:"56px"},children:[r.jsx(Ne,{label:t,color:"primary",size:"medium",sx:{fontWeight:600,fontSize:{xs:"0.75rem",sm:"0.875rem"},position:"absolute",left:"50%",transform:"translateX(-50%)"}}),d&&r.jsx(A,{sx:{position:"absolute",right:"8px"},children:r.jsx(ar,{title:o?"Screen kept awake":"Allow screen sleep",children:r.jsx(Ie,{onClick:f,size:"small",sx:{color:o?"secondary.main":"text.secondary","&:hover":{bgcolor:o?"rgba(255, 140, 0, 0.08)":"action.hover"}},"aria-label":o?"Release wake lock":"Keep screen awake",children:o?r.jsx(pE,{size:20}):r.jsx(hE,{size:20})})})})]}),r.jsx(Dt,{sx:{p:0,overflow:"auto",display:"flex",flexDirection:"column"},children:n})]})};mE.propTypes={open:T.bool.isRequired,currentInfo:T.string.isRequired,children:T.node.isRequired,onExit:T.func.isRequired};const vs={HIIT:"hiit",FLOW:"flow"},gE=({mode:e,isRunning:t,isPaused:n,timeRemaining:i,formatTime:o,isWorkPeriod:c,isPrepPeriod:d,isRecoveryPeriod:f,isExtendedRest:h,currentRound:g,currentSet:m,roundsPerSet:b,numberOfSets:v,workIntervalNames:j,intervalNames:E,sessionName:S,currentPoseIndex:w,selectedPoses:C,handleStart:k,handlePause:R,handleStop:O,handleReset:I,handleSkipForward:P,handleSkipBackward:W})=>{const L=()=>e!==vs.HIIT?"background.default":c?"#1b5e20":d||f?"#0d47a1":"#b71c1c";return r.jsxs(A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100%",p:4,bgcolor:L(),transition:"background-color 0.5s ease"},children:[r.jsxs(A,{sx:{textAlign:"center",mb:3,width:"100%"},children:[r.jsx(M,{variant:"h1",sx:{fontSize:{xs:"clamp(3rem, 15vw, 8rem)",sm:"clamp(5rem, 20vw, 10rem)",md:"12rem"},fontWeight:700,color:e===vs.HIIT?"#ffffff":e===vs.HIIT&&c?"success.main":e===vs.HIIT&&(d||f)?"warning.main":e===vs.HIIT&&!c?"error.main":"primary.main",fontFamily:"monospace",lineHeight:1},children:o(i)}),e===vs.HIIT&&r.jsxs(r.Fragment,{children:[r.jsx(M,{variant:"h6",sx:{mt:2,fontWeight:700,fontSize:{xs:"2rem",sm:"2.5rem",md:"3rem"},color:"#ffffff",textTransform:"uppercase",letterSpacing:"0.1em"},children:d?E.prep:f?E.recovery:c?j[g-1]||"Work":h?"Extended Rest":"Rest"}),d&&r.jsxs(M,{variant:"body2",sx:{mt:1,fontSize:{xs:"1.1rem",sm:"1.3rem"},color:"rgba(255, 255, 255, 0.9)",fontWeight:500},children:["Up Next: ",j[0]||"work"]}),f&&r.jsxs(M,{variant:"body2",sx:{mt:1,fontSize:{xs:"1.1rem",sm:"1.3rem"},color:"rgba(255, 255, 255, 0.9)",fontWeight:500},children:["Up Next (Set ",m+1,"): ",j[0]||"work"]}),!d&&!f&&!c&&g<b&&r.jsxs(M,{variant:"body2",sx:{mt:1,fontSize:{xs:"1.1rem",sm:"1.3rem"},color:"rgba(255, 255, 255, 0.9)",fontWeight:500},children:["Up Next: ",j[g]||"work"]}),!d&&!f&&r.jsxs(r.Fragment,{children:[r.jsxs(M,{variant:"body2",sx:{fontSize:{xs:"1.1rem",sm:"1.3rem"},color:"rgba(255, 255, 255, 0.9)",fontWeight:500},children:["Round ",g," / ",b]}),v>1&&r.jsxs(M,{variant:"body2",sx:{fontSize:{xs:"1.1rem",sm:"1.3rem"},color:"rgba(255, 255, 255, 0.9)",fontWeight:500},children:["Set ",m," / ",v]})]}),S&&r.jsx(M,{variant:"caption",sx:{display:"block",mt:1,fontSize:{xs:"0.9rem",sm:"1rem"},color:"rgba(255, 255, 255, 0.8)",fontWeight:500},children:S})]}),e===vs.FLOW&&C[w]&&r.jsxs(r.Fragment,{children:[r.jsx(M,{variant:"h6",sx:{mt:2,fontWeight:600},children:C[w].name}),r.jsxs(M,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["Pose ",w+1," of ",C.length]})]})]}),r.jsx(A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(8px)",borderRadius:3,padding:{xs:1.5,sm:2},boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)"},children:r.jsx(Le,{direction:"row",spacing:{xs:1,sm:2},justifyContent:"center",alignItems:"center",sx:{flexWrap:"nowrap",overflowX:"auto",width:"100%"},children:t?r.jsxs(r.Fragment,{children:[(e===vs.HIIT||e===vs.FLOW)&&r.jsx(Ie,{size:"large",onClick:W,sx:{width:{xs:48,sm:56},height:{xs:48,sm:56},backgroundColor:"rgba(255, 255, 255, 0.9)",color:"primary.main","&:hover":{backgroundColor:"rgba(255, 255, 255, 1)"},"&.Mui-disabled":{backgroundColor:"rgba(255, 255, 255, 0.5)"},flexShrink:0},disabled:e===vs.HIIT&&d||e===vs.FLOW&&w===0,children:r.jsx(CC,{sx:{fontSize:{xs:28,sm:36}}})}),r.jsx(Ie,{size:"large",onClick:R,sx:{width:{xs:56,sm:64},height:{xs:56,sm:64},backgroundColor:"rgba(255, 255, 255, 0.9)",color:n?"success.main":"warning.main","&:hover":{backgroundColor:"rgba(255, 255, 255, 1)"},flexShrink:0},children:n?r.jsx(Vi,{sx:{fontSize:{xs:36,sm:40}}}):r.jsx(Lx,{sx:{fontSize:{xs:36,sm:40}}})}),r.jsx(Ie,{size:"large",onClick:O,sx:{width:{xs:56,sm:64},height:{xs:56,sm:64},backgroundColor:"rgba(255, 255, 255, 0.9)",color:"error.main","&:hover":{backgroundColor:"rgba(255, 255, 255, 1)"},flexShrink:0},children:r.jsx(TC,{sx:{fontSize:{xs:36,sm:40}}})}),r.jsx(Ie,{size:"large",onClick:I,sx:{width:{xs:56,sm:64},height:{xs:56,sm:64},backgroundColor:"rgba(255, 255, 255, 0.9)",color:"primary.main","&:hover":{backgroundColor:"rgba(255, 255, 255, 1)"},flexShrink:0},children:r.jsx(kR,{sx:{fontSize:{xs:36,sm:40}}})}),(e===vs.HIIT||e===vs.FLOW)&&r.jsx(Ie,{size:"large",onClick:P,sx:{width:{xs:48,sm:56},height:{xs:48,sm:56},backgroundColor:"rgba(255, 255, 255, 0.9)",color:"primary.main","&:hover":{backgroundColor:"rgba(255, 255, 255, 1)"},"&.Mui-disabled":{backgroundColor:"rgba(255, 255, 255, 0.5)"},flexShrink:0},disabled:e===vs.HIIT&&!d&&!f&&!c&&g>=b&&m>=v||e===vs.FLOW&&w>=C.length-1,children:r.jsx(Co,{sx:{fontSize:{xs:28,sm:36}}})})]}):r.jsx(Ie,{size:"large",onClick:k,sx:{width:{xs:56,sm:64},height:{xs:56,sm:64},backgroundColor:"rgba(255, 255, 255, 0.9)",color:"primary.main","&:hover":{backgroundColor:"rgba(255, 255, 255, 1)"},flexShrink:0},disabled:e===vs.FLOW&&C.length===0,children:r.jsx(Vi,{sx:{fontSize:{xs:40,sm:48}}})})})})]})};gE.propTypes={mode:T.string.isRequired,isRunning:T.bool.isRequired,isPaused:T.bool.isRequired,timeRemaining:T.number.isRequired,formatTime:T.func.isRequired,isWorkPeriod:T.bool,isPrepPeriod:T.bool,isRecoveryPeriod:T.bool,isExtendedRest:T.bool,currentRound:T.number,currentSet:T.number,roundsPerSet:T.number,numberOfSets:T.number,workIntervalNames:T.array,intervalNames:T.object,sessionName:T.string,currentPoseIndex:T.number,selectedPoses:T.array,handleStart:T.func.isRequired,handlePause:T.func.isRequired,handleStop:T.func.isRequired,handleReset:T.func.isRequired,handleSkipForward:T.func,handleSkipBackward:T.func};const yo=({label:e,value:t,options:n,onChange:i,disabled:o=!1,formatValue:c,minValueWidth:d="80px",useArrows:f=!1,sx:h={}})=>{const g=n.findIndex(S=>typeof S=="object"?S.value===t:S===t),m=S=>typeof S=="object"?S.value:S,b=()=>{if(o)return;if(g===-1){i(m(n[n.length-1]));return}const S=g>0?g-1:n.length-1;i(m(n[S]))},v=()=>{if(o)return;if(g===-1){i(m(n[0]));return}const S=g<n.length-1?g+1:0;i(m(n[S]))},E=(()=>{if(g===-1)return c?c(t):String(t);if(c)return c(t);const S=n[g];return typeof S=="object"?S.label:S})();return r.jsxs(A,{sx:{...h},children:[e&&r.jsx(M,{variant:"subtitle2",gutterBottom:!0,sx:{fontWeight:500,color:"text.primary",mb:1.5},children:e}),r.jsxs(A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:2},children:[r.jsx(Ie,{onClick:b,disabled:o,color:"primary",children:f?r.jsx(sh,{}):r.jsx(Hs,{})}),r.jsx(M,{variant:"h6",sx:{minWidth:d,textAlign:"center",fontWeight:500,color:o?"text.disabled":"text.primary"},children:E}),r.jsx(Ie,{onClick:v,disabled:o,color:"primary",children:f?r.jsx(ii,{}):r.jsx($n,{})})]})]})};yo.propTypes={label:T.string,value:T.oneOfType([T.string,T.number,T.bool]).isRequired,options:T.arrayOf(T.oneOfType([T.string,T.number,T.bool,T.shape({label:T.string.isRequired,value:T.oneOfType([T.string,T.number,T.bool]).isRequired})])).isRequired,onChange:T.func.isRequired,disabled:T.bool,formatValue:T.func,minValueWidth:T.string,useArrows:T.bool,sx:T.object};const _t={HIIT:"hiit",FLOW:"flow",CARDIO:"cardio"},vl=60,eu=.5,cj=[{name:"Mountain Pose (Tadasana)",defaultDuration:30},{name:"Downward Dog (Adho Mukha Svanasana)",defaultDuration:60},{name:"Warrior I (Virabhadrasana I)",defaultDuration:45},{name:"Warrior II (Virabhadrasana II)",defaultDuration:45},{name:"Triangle Pose (Trikonasana)",defaultDuration:45},{name:"Tree Pose (Vrksasana)",defaultDuration:30},{name:"Child's Pose (Balasana)",defaultDuration:60},{name:"Cat-Cow Pose",defaultDuration:60},{name:"Seated Forward Bend (Paschimottanasana)",defaultDuration:60},{name:"Cobra Pose (Bhujangasana)",defaultDuration:30},{name:"Plank Pose",defaultDuration:30},{name:"Bridge Pose (Setu Bandhasana)",defaultDuration:45}],$y=({onNavigate:e,hideBackButton:t=!1})=>{const[n,i]=y.useState(_t.HIIT),[o,c]=y.useState(!0),[d,f]=y.useState(!1),[h,g]=y.useState(!1),[m,b]=y.useState(1200),[v,j]=y.useState(1200),[E,S]=y.useState(30),[w,C]=y.useState(15),[k,R]=y.useState(8),[O,I]=y.useState(1),[P,W]=y.useState(1),[L,z]=y.useState(1),[q,B]=y.useState(!0),[U,re]=y.useState(10),[H,$]=y.useState(0),[N,V]=y.useState(""),[F,X]=y.useState([]),[oe,ue]=y.useState({prep:"Get Ready",recovery:"Set Break"}),[Te,De]=y.useState(!1),[ee,G]=y.useState(!1),[ae,ve]=y.useState("1:1"),[te,ye]=y.useState(()=>{const fe=localStorage.getItem("goodlift_hiit_session_length");return fe?parseFloat(fe):10}),[Se,Y]=y.useState(!0),[ce,Ae]=y.useState(5),ne=y.useRef(0),[de,K]=y.useState(!1),[Z,be]=y.useState(()=>{const fe=localStorage.getItem("goodlift_hiit_extended_rest_interval");return fe?parseFloat(fe):8}),[ke,me]=y.useState(null),[we,J]=y.useState(!1),[ge,We]=y.useState([]),[_e,Re]=y.useState(0),[Fe,Qe]=y.useState(45),[He,Ze]=y.useState(20),[et,xt]=y.useState([]),[yt,ct]=y.useState([]),[ot,vt]=y.useState(!1),[ft,Jt]=y.useState(""),[jn,fn]=y.useState(null),[sn,Gn]=y.useState(!1),[Cs,dr]=y.useState([]),[Ir,yi]=y.useState(!1),[hn,bs]=y.useState(5),[Gs,qt]=y.useState(""),Qs=y.useRef(null),An=y.useRef(!1),No=(fe,ze)=>{const[tt,mn]=ze.split(":").map(Number);return Math.ceil(fe*mn/tt)},Qn=y.useCallback((fe,ze,tt,mn,cs)=>{const Jr=fe*60,ei=mn?cs*60:0,us=Jr-ei;if(us<=0)return 1;const Ps=ze+tt,pr=Math.ceil(us/Ps);return Math.max(1,pr)},[]),At=y.useCallback((fe,ze,tt,mn,cs)=>{if(mn||cs){const Ps=fe-1,pr=ze-1,Ts=Ps*k*(E+w),Pe=pr*(E+w);return Ts+Pe}const Jr=fe-1,ei=ze-1;let us=0;return us+=Jr*k*(E+w),us+=ei*(E+w),tt||(us+=E),us},[E,w,k]),Ut=y.useCallback((fe,ze,tt,mn)=>{const cs=ze*60,Jr=tt+mn,us=(Math.floor(fe/cs)+1)*cs,Ps=Jr*2,pr=Math.max(0,us-Ps),Ts=us+Ps,Pe=[];let Ve=0,nt=0;for(;Ve<=Ts&&(Ve+=tt,Ve>=pr&&Pe.push(Ve),Ve+=mn,nt++,!(nt>1e3)););if(Pe.length===0)return us;let st=Pe[0],Ct=Math.abs(Pe[0]-us);for(const ht of Pe){const rn=Math.abs(ht-us);rn<Ct?(Ct=rn,st=ht):rn===Ct&&(st=Math.max(st,ht))}return st},[]);y.useEffect(()=>{localStorage.setItem("goodlift_hiit_session_length",te.toString())},[te]),y.useEffect(()=>{localStorage.setItem("goodlift_hiit_extended_rest_interval",Z.toString())},[Z]),y.useEffect(()=>{if(n===_t.HIIT){const fe=No(E,ae);C(fe)}},[E,ae,n]),y.useEffect(()=>{if(n===_t.HIIT){const fe=Qn(te,E,w,Se,ce);R(fe),X(ze=>{const tt=[...ze];for(;tt.length<fe;)tt.push("");return tt.slice(0,fe)})}},[n,te,E,w,Se,ce,Qn]),y.useEffect(()=>{n===_t.HIIT&&re(Se?ce*60:0)},[Se,ce,n]),y.useEffect(()=>{(async()=>{try{const ze=await bu(),tt=await vu();xt(ze),ct(tt)}catch(ze){console.error("Error loading presets:",ze)}})()},[]),y.useEffect(()=>{(async()=>{try{const tt=await(await fetch(gW)).json();dr(tt)}catch(ze){console.error("Error loading HIIT exercises:",ze),dr([])}})()},[]),y.useEffect(()=>()=>{Qs.current&&clearInterval(Qs.current)},[]);const Wr=y.useCallback(()=>{f(!1),clearInterval(Qs.current),on.playCompletionFanfare(),yi(!0)},[]);y.useEffect(()=>(d&&!h?Qs.current=setInterval(()=>{b(fe=>{if(fe===3||fe===2?(on.playBeep(800,150),An.current=!0):fe===1&&on.playBeep(600,300),fe<=1)if(n===_t.HIIT){if(Te)return De(!1),B(!0),on.playHighBeep(),An.current=!1,E;if(ee)return G(!1),W(P+1),z(1),B(!0),on.playHighBeep(),An.current=!1,E;if(q){const ze=ne.current+E;ne.current=ze;const tt=ke!==null&&Math.abs(ze-ke)<eu;if(B(!1),K(tt),on.playLowBeep(),An.current=!1,tt){const mn=Ut(ze,Z,E,w);me(mn)}return tt?w+vl:w}else return L<k?(z(L+1),B(!0),on.playHighBeep(),An.current=!1,E):P<O?H>0?(G(!0),on.playTransitionBeep(),An.current=!1,H):(W(P+1),z(1),B(!0),on.playHighBeep(),An.current=!1,E):(Wr(),0)}else return n===_t.FLOW&&_e<ge.length-1?(Re(_e+1),on.playTransitionBeep(),An.current=!1,ge[_e+1].duration):(Wr(),0);return fe-1})},1e3):Qs.current&&clearInterval(Qs.current),()=>{Qs.current&&clearInterval(Qs.current)}),[d,h,n,q,Te,ee,L,P,k,O,_e,ge,E,w,H,ke,Z,Ut,Wr]);const Ks=()=>{if(o){if(n===_t.HIIT){ne.current=0,K(!1);const fe=Ut(0,Z,E,w);me(fe);const ze=k*(E+w),tt=O>1&&H>0?(O-1)*H:0;j(U+O*ze+tt),U>0?(b(U),De(!0),B(!1)):(b(E),De(!1),B(!0)),W(1),z(1),G(!1)}else if(n===_t.FLOW){const fe=ge.reduce((ze,tt)=>ze+tt.duration,0);j(fe),b(ge[0]?.duration||45),Re(0)}else{const fe=He*60;j(fe),b(fe)}c(!1)}f(!0),g(!1),An.current=!1},In=()=>{g(!h)},Kn=()=>{f(!1),g(!1),c(!0),An.current=!1},fr=()=>{Kn(),W(1),z(1),B(!0),De(!1),G(!1),Re(0),ne.current=0,K(!1),me(null)},Fa=(fe,ze)=>{ze!==null&&(i(ze),fr())},sc=fe=>{We([...ge,{...fe,duration:Fe}])},rc=fe=>{We(ge.filter((ze,tt)=>tt!==fe))},Lo=()=>{if(n===_t.HIIT){if(Te){De(!1),B(!0),b(E),ne.current=0;const fe=Ut(0,Z,E,w);me(fe),K(!1)}else if(q){const fe=At(P,L,!1,!1,!1);ne.current=fe;const ze=ke!==null&&Math.abs(fe-ke)<eu;if(K(ze),ze){const tt=Ut(fe,Z,E,w);me(tt),b(w+vl)}else b(w);B(!1)}else if(ee){G(!1),W(P+1),z(1),B(!0),b(E);const fe=At(P+1,1,!0,!1,!1);ne.current=fe,K(!1)}else if(L<k){z(L+1),B(!0),b(E);const fe=At(P,L+1,!0,!1,!1);ne.current=fe,K(!1)}else if(P<O)if(H>0)G(!0),b(H);else{W(P+1),z(1),B(!0),b(E);const fe=At(P+1,1,!0,!1,!1);ne.current=fe,K(!1)}on.playTransitionBeep()}else n===_t.FLOW&&_e<ge.length-1&&(Re(_e+1),b(ge[_e+1].duration),on.playTransitionBeep())},Xr=()=>{if(n===_t.HIIT){if(q&&L>1){B(!1),z(L-1);const fe=At(P,L-1,!1,!1,!1);ne.current=fe;const ze=ke!==null&&Math.abs(fe-ke)<eu;K(ze),b(ze?w+vl:w)}else if(q&&L===1&&P>1)if(H>0){G(!0),W(P-1),z(k),b(H);const fe=At(P-1,k,!1,!1,!0);ne.current=fe,K(!1)}else{W(P-1),z(k),B(!1);const fe=At(P-1,k,!1,!1,!1);ne.current=fe;const ze=ke!==null&&Math.abs(fe-ke)<eu;K(ze),b(ze?w+vl:w)}else if(!q&&!Te&&!ee){B(!0),b(E);const fe=At(P,L,!0,!1,!1);ne.current=fe,K(!1)}else if(ee){G(!1),B(!1);const fe=At(P,k,!1,!1,!1);ne.current=fe;const ze=ke!==null&&Math.abs(fe-ke)<eu;K(ze),b(ze?w+vl:w)}on.playTransitionBeep()}else n===_t.FLOW&&_e>0&&(Re(_e-1),b(ge[_e-1].duration),on.playTransitionBeep())},Ba=async()=>{try{if(!ft.trim()){alert("Please enter a preset name");return}if(n===_t.FLOW){const fe={id:jn?.id,name:ft,poses:ge,defaultDuration:Fe};await IO(fe);const ze=await bu();xt(ze)}else if(n===_t.HIIT){const fe={id:jn?.id,name:ft,workInterval:E,restInterval:w,roundsPerSet:k,numberOfSets:O,preparationInterval:U,recoveryBetweenSets:H,sessionName:N,workIntervalNames:F,intervalNames:oe,workRestRatio:ae,sessionLengthMinutes:te,warmupEnabled:Se,warmupDuration:ce,extendedRestIntervalMinutes:Z};await _O(fe);const ze=await vu();ct(ze)}vt(!1),Jt(""),fn(null)}catch(fe){console.error("Error saving preset:",fe),alert("Failed to save preset")}},hr=fe=>{n===_t.FLOW?(We(fe.poses||[]),Qe(fe.defaultDuration||45)):n===_t.HIIT&&(ve(fe.workRestRatio||"2:1"),ye(fe.sessionLengthMinutes||10),Y(fe.warmupEnabled!==void 0?fe.warmupEnabled:!0),Ae(fe.warmupDuration||5),be(fe.extendedRestIntervalMinutes||8),S(fe.workInterval||30),C(fe.restInterval||15),fe.rounds!==void 0&&fe.roundsPerSet===void 0?(R(fe.rounds),I(1)):(R(fe.roundsPerSet||8),I(fe.numberOfSets||1)),re(fe.preparationInterval||10),fe.recoveryInterval!==void 0&&fe.recoveryBetweenSets===void 0?$(fe.recoveryInterval||0):$(fe.recoveryBetweenSets||0),V(fe.sessionName||""),X(fe.workIntervalNames||[]),ue(fe.intervalNames||{prep:"Get Ready",recovery:"Set Break"}))},_r=async fe=>{try{if(n===_t.FLOW){await WO(fe);const ze=await bu();xt(ze)}else if(n===_t.HIIT){await zO(fe);const ze=await vu();ct(ze)}}catch(ze){console.error("Error deleting preset:",ze),alert("Failed to delete preset")}},bi=async()=>{try{const fe={date:Date.now(),type:n===_t.HIIT?"hiit":n===_t.FLOW?"yoga":"cardio",duration:Math.floor(v/60),perceivedEffort:hn,notes:Gs,exercises:{}};await Qx(fe);const ze=await od();ze.totalWorkouts+=1,ze.totalTime+=v,await Kx(ze),yi(!1),fr(),e&&setTimeout(()=>e("home"),500)}catch(fe){console.error("Error saving session:",fe)}},Zr=fe=>{const ze=Math.floor(fe/60),tt=fe%60;return`${ze}:${tt.toString().padStart(2,"0")}`},pn=()=>n===_t.HIIT?Te?"Get Ready":ee?`Set ${P} of ${O} - Break`:O>1?`Set ${P} of ${O} - Round ${L} of ${k}`:`Round ${L} of ${k}`:n===_t.FLOW?`Pose ${_e+1} of ${ge.length}`:"Cardio Session";return r.jsx(A,{sx:{width:"100%",p:{xs:2,sm:3},bgcolor:"background.default",maxWidth:"100vw",overflow:"hidden"},children:r.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},style:{maxWidth:"800px",margin:"0 auto"},children:[!t&&r.jsx(A,{sx:{mb:2},children:r.jsx(Ce,{startIcon:r.jsx(Ll,{}),onClick:()=>e("home"),sx:{color:"text.secondary"},children:"Back to Work Home"})}),o&&r.jsx(Ge,{sx:{borderRadius:3,mb:3},children:r.jsxs(at,{children:[r.jsxs(To,{value:n,exclusive:!0,onChange:Fa,fullWidth:!0,sx:{mb:3},children:[r.jsx(ss,{value:_t.HIIT,sx:{py:1},children:r.jsx(M,{variant:"body2",children:"HIIT"})}),r.jsx(ss,{value:_t.FLOW,sx:{py:1},children:r.jsx(M,{variant:"body2",children:"Yoga"})}),r.jsx(ss,{value:_t.CARDIO,sx:{py:1},children:r.jsx(M,{variant:"body2",children:"Cardio"})})]}),n===_t.HIIT&&r.jsxs(Le,{spacing:3,children:[r.jsxs(Le,{direction:"row",spacing:2,alignItems:"center",children:[r.jsx(M,{variant:"subtitle1",sx:{fontWeight:600,flex:1},children:"HIIT Configuration"}),r.jsx(Ce,{size:"small",startIcon:r.jsx(Ni,{}),onClick:()=>{Jt(""),fn(null),vt(!0)},children:"Save Preset"})]}),yt.length>0&&r.jsxs(A,{children:[r.jsxs(Le,{direction:"row",spacing:1,alignItems:"center",sx:{mb:1},children:[r.jsx(M,{variant:"subtitle2",sx:{flex:1},children:"Saved Presets"}),r.jsx(Ce,{size:"small",startIcon:sn?r.jsx(Ni,{}):r.jsx(Da,{}),onClick:()=>Gn(!sn),children:sn?"Done":"Manage"})]}),r.jsx(Le,{direction:"row",spacing:1,flexWrap:"wrap",useFlexGap:!0,children:yt.map(fe=>r.jsxs(A,{sx:{position:"relative",display:"inline-block"},children:[r.jsx(Ne,{label:fe.name,onClick:()=>!sn&&hr(fe),color:"primary",variant:"outlined",sx:{mb:1,cursor:sn?"default":"pointer",opacity:sn?.7:1}}),sn&&r.jsx(Ie,{size:"small",onClick:()=>_r(fe.id),sx:{position:"absolute",top:-8,right:-8,bgcolor:"error.main",color:"white",width:20,height:20,"&:hover":{bgcolor:"error.dark"}},children:r.jsx(jo,{sx:{fontSize:14}})})]},fe.id))})]}),r.jsx(Je,{label:"Session Name (optional)",value:N,onChange:fe=>V(fe.target.value),fullWidth:!0,placeholder:"e.g., Morning HIIT, Tabata Workout"}),r.jsx(yo,{label:"Warmup",value:Se?ce:0,options:[{label:"Off",value:0},{label:"2 min",value:2},{label:"5 min",value:5},{label:"7 min",value:7},{label:"10 min",value:10}],onChange:fe=>{fe===0?(Y(!1),Ae(0)):(Y(!0),Ae(fe))}}),r.jsxs(A,{children:[r.jsx(M,{variant:"subtitle2",gutterBottom:!0,children:"Session Length"}),r.jsxs(Le,{direction:"row",spacing:2,alignItems:"center",justifyContent:"center",children:[r.jsx(Ie,{onClick:()=>ye(fe=>Math.max(10,fe-2.5)),color:"primary",disabled:te<=10,children:r.jsx(Hs,{})}),r.jsxs(M,{variant:"h6",sx:{minWidth:"80px",textAlign:"center"},children:[te," min"]}),r.jsx(Ie,{onClick:()=>ye(fe=>fe+2.5),color:"primary",children:r.jsx($n,{})})]})]}),r.jsx(yo,{label:"Work:Rest Ratio",value:ae,options:[{label:"1:1",value:"1:1"},{label:"3:2",value:"3:2"},{label:"2:1",value:"2:1"}],onChange:ve,useArrows:!0}),r.jsx(yo,{label:"Work Time",value:E,options:[{label:"20s",value:20},{label:"30s",value:30},{label:"45s",value:45},{label:"60s",value:60},{label:"90s",value:90},{label:"2m",value:120},{label:"4m",value:240}],onChange:S,sx:{mb:1}}),r.jsxs(M,{variant:"caption",color:"text.secondary",sx:{display:"block",textAlign:"center"},children:["Rest time: ",w,"s (auto-calculated from ratio)"]}),r.jsx(yo,{label:"Extended Rest Every",value:Z,options:[{label:"4 min",value:4},{label:"6 min",value:6},{label:"8 min",value:8},{label:"10 min",value:10},{label:"12 min",value:12}],onChange:be,useArrows:!0}),r.jsxs(M,{variant:"caption",color:"text.secondary",sx:{display:"block",textAlign:"center",mb:2},children:["Adds ",vl,"s to rest nearest each interval mark"]}),r.jsxs(A,{children:[r.jsx(Ce,{onClick:()=>J(!we),endIcon:r.jsx(sd,{sx:{transform:we?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s"}}),sx:{mb:1,justifyContent:"space-between",width:"100%",textAlign:"left"},children:r.jsx(M,{variant:"subtitle2",children:"Exercises"})}),r.jsx(Nl,{in:we,children:r.jsx(Le,{spacing:1.5,children:Array.from({length:k||0}).map((fe,ze)=>r.jsx(cE,{label:`Round ${ze+1}`,value:F[ze]||"",onChange:(tt,mn)=>{const cs=[...F];typeof mn=="string"?cs[ze]=mn:mn&&mn.name?cs[ze]=mn.name:cs[ze]="",X(cs)},availableExercises:Cs,placeholder:"e.g., push-ups, burpees",size:"small",fullWidth:!0},ze))})})]}),r.jsxs(M,{variant:"body2",color:"text.secondary",children:["Total: ~",te," min  ",k," rounds  Extended rest every ",Z," min"]})]}),n===_t.FLOW&&r.jsxs(Le,{spacing:3,children:[r.jsxs(Le,{direction:"row",spacing:2,alignItems:"center",children:[r.jsx(M,{variant:"subtitle1",sx:{fontWeight:600,flex:1},children:"Yoga Configuration"}),r.jsx(Ce,{size:"small",startIcon:r.jsx(Ni,{}),onClick:()=>{Jt(""),fn(null),vt(!0)},disabled:ge.length===0,children:"Save Preset"})]}),et.length>0&&r.jsxs(A,{children:[r.jsxs(Le,{direction:"row",spacing:1,alignItems:"center",sx:{mb:1},children:[r.jsx(M,{variant:"subtitle2",sx:{flex:1},children:"Saved Presets"}),r.jsx(Ce,{size:"small",startIcon:sn?r.jsx(Ni,{}):r.jsx(Da,{}),onClick:()=>Gn(!sn),children:sn?"Done":"Manage"})]}),r.jsx(Le,{direction:"row",spacing:1,flexWrap:"wrap",useFlexGap:!0,children:et.map(fe=>r.jsxs(A,{sx:{position:"relative",display:"inline-block"},children:[r.jsx(Ne,{label:fe.name,onClick:()=>!sn&&hr(fe),color:"primary",variant:"outlined",icon:r.jsx(ER,{}),sx:{mb:1,cursor:sn?"default":"pointer",opacity:sn?.7:1}}),sn&&r.jsx(Ie,{size:"small",onClick:()=>_r(fe.id),sx:{position:"absolute",top:-8,right:-8,bgcolor:"error.main",color:"white",width:20,height:20,"&:hover":{bgcolor:"error.dark"}},children:r.jsx(jo,{sx:{fontSize:14}})})]},fe.id))})]}),r.jsx(Je,{label:"Hold Duration per Pose (seconds)",type:"number",value:Fe??"",onChange:fe=>{const ze=fe.target.value;if(ze===""||ze===null)Qe("");else{const tt=parseInt(ze);Qe(isNaN(tt)?"":tt)}},onBlur:fe=>{const ze=fe.target.value;if(ze===""||ze===null)Qe(45);else{const tt=parseInt(ze);Qe(Math.max(15,Math.min(300,isNaN(tt)?45:tt)))}},inputProps:{min:15,max:300,inputMode:"numeric"},fullWidth:!0}),r.jsxs(M,{variant:"subtitle2",children:["Selected Poses (",ge.length,")"]}),ge.length>0&&r.jsx(Le,{spacing:1,children:ge.map((fe,ze)=>r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:1.5,bgcolor:"background.paper",borderRadius:1},children:[r.jsx(M,{variant:"body2",children:fe.name}),r.jsxs(Le,{direction:"row",spacing:1,alignItems:"center",children:[r.jsxs(M,{variant:"caption",color:"text.secondary",children:[fe.duration,"s"]}),r.jsx(Ie,{size:"small",onClick:()=>rc(ze),sx:{color:"error.main"},children:r.jsx(Hs,{fontSize:"small"})})]})]},ze))}),r.jsxs(Xt,{fullWidth:!0,children:[r.jsx(En,{children:"Add Pose"}),r.jsx(cn,{value:"",label:"Add Pose",onChange:fe=>{const ze=cj.find(tt=>tt.name===fe.target.value);ze&&sc(ze)},children:cj.map(fe=>r.jsx(Be,{value:fe.name,children:fe.name},fe.name))})]}),ge.length>0&&r.jsxs(M,{variant:"body2",color:"text.secondary",children:["Total Duration: ",Math.floor(ge.reduce((fe,ze)=>fe+ze.duration,0)/60)," minutes ",ge.reduce((fe,ze)=>fe+ze.duration,0)%60," seconds"]})]}),n===_t.CARDIO&&r.jsxs(Le,{spacing:3,children:[r.jsx(M,{variant:"subtitle1",sx:{fontWeight:600},children:"Cardio Configuration"}),r.jsx(Je,{label:"Duration (minutes)",type:"number",value:He??"",onChange:fe=>{const ze=fe.target.value;if(ze===""||ze===null)Ze("");else{const tt=parseInt(ze);Ze(isNaN(tt)?"":tt)}},onBlur:fe=>{const ze=fe.target.value;if(ze===""||ze===null)Ze(20);else{const tt=parseInt(ze);Ze(Math.max(1,Math.min(240,isNaN(tt)?20:tt)))}},inputProps:{min:1,max:240,inputMode:"numeric"},fullWidth:!0})]})]})}),r.jsx(mE,{open:!o,mode:n,currentInfo:pn(),onExit:Kn,children:r.jsx(gE,{mode:n,isRunning:d,isPaused:h,timeRemaining:m,formatTime:Zr,isWorkPeriod:q,isPrepPeriod:Te,isRecoveryPeriod:ee,isExtendedRest:de,currentRound:L,currentSet:P,roundsPerSet:k,numberOfSets:O,workIntervalNames:F,intervalNames:oe,sessionName:N,currentPoseIndex:_e,selectedPoses:ge,handleStart:Ks,handlePause:In,handleStop:Kn,handleReset:fr,handleSkipForward:Lo,handleSkipBackward:Xr})}),o&&r.jsx(Ce,{variant:"contained",size:"large",fullWidth:!0,onClick:Ks,disabled:n===_t.FLOW&&ge.length===0,sx:{mb:2,py:2},children:n===_t.FLOW&&ge.length===0?"Add at least one pose to start":"Start Session"}),e&&!t&&r.jsx(Ce,{variant:"outlined",fullWidth:!0,onClick:()=>e("home"),sx:{mt:2},children:"Back to Home"}),r.jsxs(Et,{open:Ir,onClose:()=>yi(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(zt,{children:"Session Complete! "}),r.jsx(Dt,{children:r.jsxs(Le,{spacing:3,sx:{mt:2},children:[r.jsx(M,{variant:"body1",children:"Great work! How would you rate this session?"}),r.jsxs(A,{children:[r.jsx(M,{variant:"subtitle2",gutterBottom:!0,children:"Perceived Effort (1-10)"}),r.jsx(kC,{value:hn,onChange:(fe,ze)=>bs(ze),min:1,max:10,marks:!0,valueLabelDisplay:"on",sx:{mt:2}})]}),r.jsx(Je,{label:"Notes (optional)",multiline:!0,rows:3,value:Gs,onChange:fe=>qt(fe.target.value),fullWidth:!0}),r.jsxs(A,{sx:{p:2,bgcolor:"background.default",borderRadius:1},children:[r.jsxs(M,{variant:"body2",color:"text.secondary",children:["Type: ",n===_t.HIIT?"HIIT":n===_t.FLOW?"Yoga":"Cardio"]}),r.jsxs(M,{variant:"body2",color:"text.secondary",children:["Duration: ",Math.floor(v/60)," minutes"]})]})]})}),r.jsxs(Nt,{children:[r.jsx(Ce,{onClick:()=>yi(!1),children:"Skip"}),r.jsx(Ce,{variant:"contained",onClick:bi,children:"Save & Sync"})]})]}),r.jsxs(Et,{open:ot,onClose:()=>{vt(!1),Jt(""),fn(null)},maxWidth:"sm",fullWidth:!0,children:[r.jsxs(zt,{children:["Save ",n===_t.FLOW?"Yoga":"HIIT"," Preset"]}),r.jsx(Dt,{children:r.jsxs(Le,{spacing:2,sx:{mt:2},children:[r.jsx(Je,{label:"Preset Name",value:ft,onChange:fe=>Jt(fe.target.value),fullWidth:!0,autoFocus:!0,placeholder:n===_t.FLOW?"e.g., Morning Flow, Evening Stretch":"e.g., Tabata, Circuit Training"}),r.jsx(M,{variant:"body2",color:"text.secondary",children:n===_t.FLOW?`This will save your current pose sequence (${ge.length} poses)`:"This will save your current interval configuration"})]})}),r.jsxs(Nt,{children:[r.jsx(Ce,{onClick:()=>{vt(!1),Jt(""),fn(null)},children:"Cancel"}),r.jsx(Ce,{variant:"contained",onClick:Ba,disabled:!ft.trim(),children:"Save Preset"})]})]})]})})};$y.propTypes={onNavigate:T.func,hideBackButton:T.bool};const xE=({onNavigate:e})=>r.jsx(A,{children:r.jsx($y,{onNavigate:e,hideBackButton:!0})});xE.propTypes={onNavigate:T.func};var SL=function(t){return wL(t)&&!jL(t)};function wL(e){return!!e&&typeof e=="object"}function jL(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||kL(e)}var CL=typeof Symbol=="function"&&Symbol.for,TL=CL?Symbol.for("react.element"):60103;function kL(e){return e.$$typeof===TL}function EL(e){return Array.isArray(e)?[]:{}}function Sh(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Yu(EL(e),e,t):e}function DL(e,t,n){return e.concat(t).map(function(i){return Sh(i,n)})}function ML(e,t,n){var i={};return n.isMergeableObject(e)&&Object.keys(e).forEach(function(o){i[o]=Sh(e[o],n)}),Object.keys(t).forEach(function(o){!n.isMergeableObject(t[o])||!e[o]?i[o]=Sh(t[o],n):i[o]=Yu(e[o],t[o],n)}),i}function Yu(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||DL,n.isMergeableObject=n.isMergeableObject||SL;var i=Array.isArray(t),o=Array.isArray(e),c=i===o;return c?i?n.arrayMerge(e,t,n):ML(e,t,n):Sh(t,n)}Yu.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(i,o){return Yu(i,o,n)},{})};var hx=Yu,yE=typeof global=="object"&&global&&global.Object===Object&&global,AL=typeof self=="object"&&self&&self.Object===Object&&self,xi=yE||AL||Function("return this")(),Oa=xi.Symbol,bE=Object.prototype,RL=bE.hasOwnProperty,PL=bE.toString,tu=Oa?Oa.toStringTag:void 0;function OL(e){var t=RL.call(e,tu),n=e[tu];try{e[tu]=void 0;var i=!0}catch{}var o=PL.call(e);return i&&(t?e[tu]=n:delete e[tu]),o}var IL=Object.prototype,WL=IL.toString;function _L(e){return WL.call(e)}var zL="[object Null]",NL="[object Undefined]",uj=Oa?Oa.toStringTag:void 0;function Io(e){return e==null?e===void 0?NL:zL:uj&&uj in Object(e)?OL(e):_L(e)}function vE(e,t){return function(n){return e(t(n))}}var qy=vE(Object.getPrototypeOf,Object);function Wo(e){return e!=null&&typeof e=="object"}var LL="[object Object]",FL=Function.prototype,BL=Object.prototype,SE=FL.toString,VL=BL.hasOwnProperty,HL=SE.call(Object);function dj(e){if(!Wo(e)||Io(e)!=LL)return!1;var t=qy(e);if(t===null)return!0;var n=VL.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&SE.call(n)==HL}function UL(){this.__data__=[],this.size=0}function wE(e,t){return e===t||e!==e&&t!==t}function Nh(e,t){for(var n=e.length;n--;)if(wE(e[n][0],t))return n;return-1}var $L=Array.prototype,qL=$L.splice;function YL(e){var t=this.__data__,n=Nh(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():qL.call(t,n,1),--this.size,!0}function GL(e){var t=this.__data__,n=Nh(t,e);return n<0?void 0:t[n][1]}function QL(e){return Nh(this.__data__,e)>-1}function KL(e,t){var n=this.__data__,i=Nh(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}function Gi(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Gi.prototype.clear=UL;Gi.prototype.delete=YL;Gi.prototype.get=GL;Gi.prototype.has=QL;Gi.prototype.set=KL;function XL(){this.__data__=new Gi,this.size=0}function ZL(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function JL(e){return this.__data__.get(e)}function e6(e){return this.__data__.has(e)}function gd(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var t6="[object AsyncFunction]",n6="[object Function]",s6="[object GeneratorFunction]",r6="[object Proxy]";function jE(e){if(!gd(e))return!1;var t=Io(e);return t==n6||t==s6||t==t6||t==r6}var Tg=xi["__core-js_shared__"],fj=(function(){var e=/[^.]+$/.exec(Tg&&Tg.keys&&Tg.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function i6(e){return!!fj&&fj in e}var a6=Function.prototype,o6=a6.toString;function _o(e){if(e!=null){try{return o6.call(e)}catch{}try{return e+""}catch{}}return""}var l6=/[\\^$.*+?()[\]{}|]/g,c6=/^\[object .+?Constructor\]$/,u6=Function.prototype,d6=Object.prototype,f6=u6.toString,h6=d6.hasOwnProperty,p6=RegExp("^"+f6.call(h6).replace(l6,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m6(e){if(!gd(e)||i6(e))return!1;var t=jE(e)?p6:c6;return t.test(_o(e))}function g6(e,t){return e?.[t]}function zo(e,t){var n=g6(e,t);return m6(n)?n:void 0}var Gu=zo(xi,"Map"),Qu=zo(Object,"create");function x6(){this.__data__=Qu?Qu(null):{},this.size=0}function y6(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var b6="__lodash_hash_undefined__",v6=Object.prototype,S6=v6.hasOwnProperty;function w6(e){var t=this.__data__;if(Qu){var n=t[e];return n===b6?void 0:n}return S6.call(t,e)?t[e]:void 0}var j6=Object.prototype,C6=j6.hasOwnProperty;function T6(e){var t=this.__data__;return Qu?t[e]!==void 0:C6.call(t,e)}var k6="__lodash_hash_undefined__";function E6(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Qu&&t===void 0?k6:t,this}function ko(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}ko.prototype.clear=x6;ko.prototype.delete=y6;ko.prototype.get=w6;ko.prototype.has=T6;ko.prototype.set=E6;function D6(){this.size=0,this.__data__={hash:new ko,map:new(Gu||Gi),string:new ko}}function M6(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Lh(e,t){var n=e.__data__;return M6(t)?n[typeof t=="string"?"string":"hash"]:n.map}function A6(e){var t=Lh(this,e).delete(e);return this.size-=t?1:0,t}function R6(e){return Lh(this,e).get(e)}function P6(e){return Lh(this,e).has(e)}function O6(e,t){var n=Lh(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}function Na(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Na.prototype.clear=D6;Na.prototype.delete=A6;Na.prototype.get=R6;Na.prototype.has=P6;Na.prototype.set=O6;var I6=200;function W6(e,t){var n=this.__data__;if(n instanceof Gi){var i=n.__data__;if(!Gu||i.length<I6-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Na(i)}return n.set(e,t),this.size=n.size,this}function tc(e){var t=this.__data__=new Gi(e);this.size=t.size}tc.prototype.clear=XL;tc.prototype.delete=ZL;tc.prototype.get=JL;tc.prototype.has=e6;tc.prototype.set=W6;function _6(e,t){for(var n=-1,i=e==null?0:e.length;++n<i&&t(e[n],n,e)!==!1;);return e}var hj=(function(){try{var e=zo(Object,"defineProperty");return e({},"",{}),e}catch{}})();function CE(e,t,n){t=="__proto__"&&hj?hj(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var z6=Object.prototype,N6=z6.hasOwnProperty;function TE(e,t,n){var i=e[t];(!(N6.call(e,t)&&wE(i,n))||n===void 0&&!(t in e))&&CE(e,t,n)}function Fh(e,t,n,i){var o=!n;n||(n={});for(var c=-1,d=t.length;++c<d;){var f=t[c],h=void 0;h===void 0&&(h=e[f]),o?CE(n,f,h):TE(n,f,h)}return n}function L6(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}var F6="[object Arguments]";function pj(e){return Wo(e)&&Io(e)==F6}var kE=Object.prototype,B6=kE.hasOwnProperty,V6=kE.propertyIsEnumerable,H6=pj((function(){return arguments})())?pj:function(e){return Wo(e)&&B6.call(e,"callee")&&!V6.call(e,"callee")},xd=Array.isArray;function U6(){return!1}var EE=typeof or=="object"&&or&&!or.nodeType&&or,mj=EE&&typeof lr=="object"&&lr&&!lr.nodeType&&lr,$6=mj&&mj.exports===EE,gj=$6?xi.Buffer:void 0,q6=gj?gj.isBuffer:void 0,DE=q6||U6,Y6=9007199254740991,G6=/^(?:0|[1-9]\d*)$/;function Q6(e,t){var n=typeof e;return t=t??Y6,!!t&&(n=="number"||n!="symbol"&&G6.test(e))&&e>-1&&e%1==0&&e<t}var K6=9007199254740991;function ME(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=K6}var X6="[object Arguments]",Z6="[object Array]",J6="[object Boolean]",eF="[object Date]",tF="[object Error]",nF="[object Function]",sF="[object Map]",rF="[object Number]",iF="[object Object]",aF="[object RegExp]",oF="[object Set]",lF="[object String]",cF="[object WeakMap]",uF="[object ArrayBuffer]",dF="[object DataView]",fF="[object Float32Array]",hF="[object Float64Array]",pF="[object Int8Array]",mF="[object Int16Array]",gF="[object Int32Array]",xF="[object Uint8Array]",yF="[object Uint8ClampedArray]",bF="[object Uint16Array]",vF="[object Uint32Array]",vn={};vn[fF]=vn[hF]=vn[pF]=vn[mF]=vn[gF]=vn[xF]=vn[yF]=vn[bF]=vn[vF]=!0;vn[X6]=vn[Z6]=vn[uF]=vn[J6]=vn[dF]=vn[eF]=vn[tF]=vn[nF]=vn[sF]=vn[rF]=vn[iF]=vn[aF]=vn[oF]=vn[lF]=vn[cF]=!1;function SF(e){return Wo(e)&&ME(e.length)&&!!vn[Io(e)]}function Yy(e){return function(t){return e(t)}}var AE=typeof or=="object"&&or&&!or.nodeType&&or,Eu=AE&&typeof lr=="object"&&lr&&!lr.nodeType&&lr,wF=Eu&&Eu.exports===AE,kg=wF&&yE.process,Gl=(function(){try{var e=Eu&&Eu.require&&Eu.require("util").types;return e||kg&&kg.binding&&kg.binding("util")}catch{}})(),xj=Gl&&Gl.isTypedArray,jF=xj?Yy(xj):SF,CF=Object.prototype,TF=CF.hasOwnProperty;function RE(e,t){var n=xd(e),i=!n&&H6(e),o=!n&&!i&&DE(e),c=!n&&!i&&!o&&jF(e),d=n||i||o||c,f=d?L6(e.length,String):[],h=f.length;for(var g in e)(t||TF.call(e,g))&&!(d&&(g=="length"||o&&(g=="offset"||g=="parent")||c&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||Q6(g,h)))&&f.push(g);return f}var kF=Object.prototype;function Gy(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||kF;return e===n}var EF=vE(Object.keys,Object),DF=Object.prototype,MF=DF.hasOwnProperty;function AF(e){if(!Gy(e))return EF(e);var t=[];for(var n in Object(e))MF.call(e,n)&&n!="constructor"&&t.push(n);return t}function PE(e){return e!=null&&ME(e.length)&&!jE(e)}function Qy(e){return PE(e)?RE(e):AF(e)}function RF(e,t){return e&&Fh(t,Qy(t),e)}function PF(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var OF=Object.prototype,IF=OF.hasOwnProperty;function WF(e){if(!gd(e))return PF(e);var t=Gy(e),n=[];for(var i in e)i=="constructor"&&(t||!IF.call(e,i))||n.push(i);return n}function Ky(e){return PE(e)?RE(e,!0):WF(e)}function _F(e,t){return e&&Fh(t,Ky(t),e)}var OE=typeof or=="object"&&or&&!or.nodeType&&or,yj=OE&&typeof lr=="object"&&lr&&!lr.nodeType&&lr,zF=yj&&yj.exports===OE,bj=zF?xi.Buffer:void 0,vj=bj?bj.allocUnsafe:void 0;function NF(e,t){if(t)return e.slice();var n=e.length,i=vj?vj(n):new e.constructor(n);return e.copy(i),i}function IE(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}function LF(e,t){for(var n=-1,i=e==null?0:e.length,o=0,c=[];++n<i;){var d=e[n];t(d,n,e)&&(c[o++]=d)}return c}function WE(){return[]}var FF=Object.prototype,BF=FF.propertyIsEnumerable,Sj=Object.getOwnPropertySymbols,Xy=Sj?function(e){return e==null?[]:(e=Object(e),LF(Sj(e),function(t){return BF.call(e,t)}))}:WE;function VF(e,t){return Fh(e,Xy(e),t)}function _E(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}var HF=Object.getOwnPropertySymbols,zE=HF?function(e){for(var t=[];e;)_E(t,Xy(e)),e=qy(e);return t}:WE;function UF(e,t){return Fh(e,zE(e),t)}function NE(e,t,n){var i=t(e);return xd(e)?i:_E(i,n(e))}function $F(e){return NE(e,Qy,Xy)}function qF(e){return NE(e,Ky,zE)}var px=zo(xi,"DataView"),mx=zo(xi,"Promise"),gx=zo(xi,"Set"),xx=zo(xi,"WeakMap"),wj="[object Map]",YF="[object Object]",jj="[object Promise]",Cj="[object Set]",Tj="[object WeakMap]",kj="[object DataView]",GF=_o(px),QF=_o(Gu),KF=_o(mx),XF=_o(gx),ZF=_o(xx),zi=Io;(px&&zi(new px(new ArrayBuffer(1)))!=kj||Gu&&zi(new Gu)!=wj||mx&&zi(mx.resolve())!=jj||gx&&zi(new gx)!=Cj||xx&&zi(new xx)!=Tj)&&(zi=function(e){var t=Io(e),n=t==YF?e.constructor:void 0,i=n?_o(n):"";if(i)switch(i){case GF:return kj;case QF:return wj;case KF:return jj;case XF:return Cj;case ZF:return Tj}return t});var JF=Object.prototype,eB=JF.hasOwnProperty;function tB(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&eB.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var Ej=xi.Uint8Array;function Zy(e){var t=new e.constructor(e.byteLength);return new Ej(t).set(new Ej(e)),t}function nB(e,t){var n=t?Zy(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var sB=/\w*$/;function rB(e){var t=new e.constructor(e.source,sB.exec(e));return t.lastIndex=e.lastIndex,t}var Dj=Oa?Oa.prototype:void 0,Mj=Dj?Dj.valueOf:void 0;function iB(e){return Mj?Object(Mj.call(e)):{}}function aB(e,t){var n=t?Zy(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var oB="[object Boolean]",lB="[object Date]",cB="[object Map]",uB="[object Number]",dB="[object RegExp]",fB="[object Set]",hB="[object String]",pB="[object Symbol]",mB="[object ArrayBuffer]",gB="[object DataView]",xB="[object Float32Array]",yB="[object Float64Array]",bB="[object Int8Array]",vB="[object Int16Array]",SB="[object Int32Array]",wB="[object Uint8Array]",jB="[object Uint8ClampedArray]",CB="[object Uint16Array]",TB="[object Uint32Array]";function kB(e,t,n){var i=e.constructor;switch(t){case mB:return Zy(e);case oB:case lB:return new i(+e);case gB:return nB(e,n);case xB:case yB:case bB:case vB:case SB:case wB:case jB:case CB:case TB:return aB(e,n);case cB:return new i;case uB:case hB:return new i(e);case dB:return rB(e);case fB:return new i;case pB:return iB(e)}}var Aj=Object.create,EB=(function(){function e(){}return function(t){if(!gd(t))return{};if(Aj)return Aj(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}})();function DB(e){return typeof e.constructor=="function"&&!Gy(e)?EB(qy(e)):{}}var MB="[object Map]";function AB(e){return Wo(e)&&zi(e)==MB}var Rj=Gl&&Gl.isMap,RB=Rj?Yy(Rj):AB,PB="[object Set]";function OB(e){return Wo(e)&&zi(e)==PB}var Pj=Gl&&Gl.isSet,IB=Pj?Yy(Pj):OB,WB=1,_B=2,zB=4,LE="[object Arguments]",NB="[object Array]",LB="[object Boolean]",FB="[object Date]",BB="[object Error]",FE="[object Function]",VB="[object GeneratorFunction]",HB="[object Map]",UB="[object Number]",BE="[object Object]",$B="[object RegExp]",qB="[object Set]",YB="[object String]",GB="[object Symbol]",QB="[object WeakMap]",KB="[object ArrayBuffer]",XB="[object DataView]",ZB="[object Float32Array]",JB="[object Float64Array]",e4="[object Int8Array]",t4="[object Int16Array]",n4="[object Int32Array]",s4="[object Uint8Array]",r4="[object Uint8ClampedArray]",i4="[object Uint16Array]",a4="[object Uint32Array]",dn={};dn[LE]=dn[NB]=dn[KB]=dn[XB]=dn[LB]=dn[FB]=dn[ZB]=dn[JB]=dn[e4]=dn[t4]=dn[n4]=dn[HB]=dn[UB]=dn[BE]=dn[$B]=dn[qB]=dn[YB]=dn[GB]=dn[s4]=dn[r4]=dn[i4]=dn[a4]=!0;dn[BB]=dn[FE]=dn[QB]=!1;function Du(e,t,n,i,o,c){var d,f=t&WB,h=t&_B,g=t&zB;if(d!==void 0)return d;if(!gd(e))return e;var m=xd(e);if(m){if(d=tB(e),!f)return IE(e,d)}else{var b=zi(e),v=b==FE||b==VB;if(DE(e))return NF(e,f);if(b==BE||b==LE||v&&!o){if(d=h||v?{}:DB(e),!f)return h?UF(e,_F(d,e)):VF(e,RF(d,e))}else{if(!dn[b])return o?e:{};d=kB(e,b,f)}}c||(c=new tc);var j=c.get(e);if(j)return j;c.set(e,d),IB(e)?e.forEach(function(w){d.add(Du(w,t,n,w,e,c))}):RB(e)&&e.forEach(function(w,C){d.set(C,Du(w,t,n,C,e,c))});var E=g?h?qF:$F:h?Ky:Qy,S=m?void 0:E(e);return _6(S||e,function(w,C){S&&(C=w,w=e[C]),TE(d,C,Du(w,t,n,C,e,c))}),d}var o4=1,l4=4;function Nf(e){return Du(e,o4|l4)}var Eg,Oj;function c4(){if(Oj)return Eg;Oj=1;var e=Array.isArray,t=Object.keys,n=Object.prototype.hasOwnProperty,i=typeof Element<"u";function o(c,d){if(c===d)return!0;if(c&&d&&typeof c=="object"&&typeof d=="object"){var f=e(c),h=e(d),g,m,b;if(f&&h){if(m=c.length,m!=d.length)return!1;for(g=m;g--!==0;)if(!o(c[g],d[g]))return!1;return!0}if(f!=h)return!1;var v=c instanceof Date,j=d instanceof Date;if(v!=j)return!1;if(v&&j)return c.getTime()==d.getTime();var E=c instanceof RegExp,S=d instanceof RegExp;if(E!=S)return!1;if(E&&S)return c.toString()==d.toString();var w=t(c);if(m=w.length,m!==t(d).length)return!1;for(g=m;g--!==0;)if(!n.call(d,w[g]))return!1;if(i&&c instanceof Element&&d instanceof Element)return c===d;for(g=m;g--!==0;)if(b=w[g],!(b==="_owner"&&c.$$typeof)&&!o(c[b],d[b]))return!1;return!0}return c!==c&&d!==d}return Eg=function(d,f){try{return o(d,f)}catch(h){if(h.message&&h.message.match(/stack|recursion/i)||h.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",h.name,h.message),!1;throw h}},Eg}var u4=c4();const po=NC(u4);var d4=4;function Ij(e){return Du(e,d4)}function VE(e,t){for(var n=-1,i=e==null?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}var f4="[object Symbol]";function Jy(e){return typeof e=="symbol"||Wo(e)&&Io(e)==f4}var h4="Expected a function";function e0(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(h4);var n=function(){var i=arguments,o=t?t.apply(this,i):i[0],c=n.cache;if(c.has(o))return c.get(o);var d=e.apply(this,i);return n.cache=c.set(o,d)||c,d};return n.cache=new(e0.Cache||Na),n}e0.Cache=Na;var p4=500;function m4(e){var t=e0(e,function(i){return n.size===p4&&n.clear(),i}),n=t.cache;return t}var g4=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,x4=/\\(\\)?/g,y4=m4(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(g4,function(n,i,o,c){t.push(o?c.replace(x4,"$1"):i||n)}),t});function b4(e){if(typeof e=="string"||Jy(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Wj=Oa?Oa.prototype:void 0,_j=Wj?Wj.toString:void 0;function HE(e){if(typeof e=="string")return e;if(xd(e))return VE(e,HE)+"";if(Jy(e))return _j?_j.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function v4(e){return e==null?"":HE(e)}function UE(e){return xd(e)?VE(e,b4):Jy(e)?[e]:IE(y4(v4(e)))}function Sn(){return Sn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Sn.apply(this,arguments)}function Rl(e,t){if(e==null)return{};var n={},i=Object.keys(e),o,c;for(c=0;c<i.length;c++)o=i[c],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}var Bh=y.createContext(void 0);Bh.displayName="FormikContext";var S4=Bh.Provider;Bh.Consumer;function $E(){var e=y.useContext(Bh);return e}var Bs=function(t){return typeof t=="function"},Vh=function(t){return t!==null&&typeof t=="object"},w4=function(t){return String(Math.floor(Number(t)))===t},Dg=function(t){return Object.prototype.toString.call(t)==="[object String]"},j4=function(t){return y.Children.count(t)===0},Mg=function(t){return Vh(t)&&Bs(t.then)};function Fs(e,t,n,i){i===void 0&&(i=0);for(var o=UE(t);e&&i<o.length;)e=e[o[i++]];return i!==o.length&&!e||e===void 0?n:e}function wo(e,t,n){for(var i=Ij(e),o=i,c=0,d=UE(t);c<d.length-1;c++){var f=d[c],h=Fs(e,d.slice(0,c+1));if(h&&(Vh(h)||Array.isArray(h)))o=o[f]=Ij(h);else{var g=d[c+1];o=o[f]=w4(g)&&Number(g)>=0?[]:{}}}return(c===0?e:o)[d[c]]===n?e:(n===void 0?delete o[d[c]]:o[d[c]]=n,c===0&&n===void 0&&delete i[d[c]],i)}function qE(e,t,n,i){n===void 0&&(n=new WeakMap),i===void 0&&(i={});for(var o=0,c=Object.keys(e);o<c.length;o++){var d=c[o],f=e[d];Vh(f)?n.get(f)||(n.set(f,!0),i[d]=Array.isArray(f)?[]:{},qE(f,t,n,i[d])):i[d]=t}return i}function C4(e,t){switch(t.type){case"SET_VALUES":return Sn({},e,{values:t.payload});case"SET_TOUCHED":return Sn({},e,{touched:t.payload});case"SET_ERRORS":return po(e.errors,t.payload)?e:Sn({},e,{errors:t.payload});case"SET_STATUS":return Sn({},e,{status:t.payload});case"SET_ISSUBMITTING":return Sn({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return Sn({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return Sn({},e,{values:wo(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return Sn({},e,{touched:wo(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return Sn({},e,{errors:wo(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return Sn({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return Sn({},e,{touched:qE(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":return Sn({},e,{isSubmitting:!1});case"SUBMIT_SUCCESS":return Sn({},e,{isSubmitting:!1});default:return e}}var oo={},Lf={};function T4(e){var t=e.validateOnChange,n=t===void 0?!0:t,i=e.validateOnBlur,o=i===void 0?!0:i,c=e.validateOnMount,d=c===void 0?!1:c,f=e.isInitialValid,h=e.enableReinitialize,g=h===void 0?!1:h,m=e.onSubmit,b=Rl(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),v=Sn({validateOnChange:n,validateOnBlur:o,validateOnMount:d,onSubmit:m},b),j=y.useRef(v.initialValues),E=y.useRef(v.initialErrors||oo),S=y.useRef(v.initialTouched||Lf),w=y.useRef(v.initialStatus),C=y.useRef(!1),k=y.useRef({});y.useEffect(function(){return C.current=!0,function(){C.current=!1}},[]);var R=y.useState(0),O=R[1],I=y.useRef({values:Nf(v.initialValues),errors:Nf(v.initialErrors)||oo,touched:Nf(v.initialTouched)||Lf,status:Nf(v.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),P=I.current,W=y.useCallback(function(J){var ge=I.current;I.current=C4(ge,J),ge!==I.current&&O(function(We){return We+1})},[]),L=y.useCallback(function(J,ge){return new Promise(function(We,_e){var Re=v.validate(J,ge);Re==null?We(oo):Mg(Re)?Re.then(function(Fe){We(Fe||oo)},function(Fe){_e(Fe)}):We(Re)})},[v.validate]),z=y.useCallback(function(J,ge){var We=v.validationSchema,_e=Bs(We)?We(ge):We,Re=ge&&_e.validateAt?_e.validateAt(ge,J):D4(J,_e);return new Promise(function(Fe,Qe){Re.then(function(){Fe(oo)},function(He){He.name==="ValidationError"?Fe(E4(He)):Qe(He)})})},[v.validationSchema]),q=y.useCallback(function(J,ge){return new Promise(function(We){return We(k.current[J].validate(ge))})},[]),B=y.useCallback(function(J){var ge=Object.keys(k.current).filter(function(_e){return Bs(k.current[_e].validate)}),We=ge.length>0?ge.map(function(_e){return q(_e,Fs(J,_e))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(We).then(function(_e){return _e.reduce(function(Re,Fe,Qe){return Fe==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||Fe&&(Re=wo(Re,ge[Qe],Fe)),Re},{})})},[q]),U=y.useCallback(function(J){return Promise.all([B(J),v.validationSchema?z(J):{},v.validate?L(J):{}]).then(function(ge){var We=ge[0],_e=ge[1],Re=ge[2],Fe=hx.all([We,_e,Re],{arrayMerge:M4});return Fe})},[v.validate,v.validationSchema,B,L,z]),re=kr(function(J){return J===void 0&&(J=P.values),W({type:"SET_ISVALIDATING",payload:!0}),U(J).then(function(ge){return C.current&&(W({type:"SET_ISVALIDATING",payload:!1}),W({type:"SET_ERRORS",payload:ge})),ge})});y.useEffect(function(){d&&C.current===!0&&po(j.current,v.initialValues)&&re(j.current)},[d,re]);var H=y.useCallback(function(J){var ge=J&&J.values?J.values:j.current,We=J&&J.errors?J.errors:E.current?E.current:v.initialErrors||{},_e=J&&J.touched?J.touched:S.current?S.current:v.initialTouched||{},Re=J&&J.status?J.status:w.current?w.current:v.initialStatus;j.current=ge,E.current=We,S.current=_e,w.current=Re;var Fe=function(){W({type:"RESET_FORM",payload:{isSubmitting:!!J&&!!J.isSubmitting,errors:We,touched:_e,status:Re,values:ge,isValidating:!!J&&!!J.isValidating,submitCount:J&&J.submitCount&&typeof J.submitCount=="number"?J.submitCount:0}})};if(v.onReset){var Qe=v.onReset(P.values,Ae);Mg(Qe)?Qe.then(Fe):Fe()}else Fe()},[v.initialErrors,v.initialStatus,v.initialTouched,v.onReset]);y.useEffect(function(){C.current===!0&&!po(j.current,v.initialValues)&&g&&(j.current=v.initialValues,H(),d&&re(j.current))},[g,v.initialValues,H,d,re]),y.useEffect(function(){g&&C.current===!0&&!po(E.current,v.initialErrors)&&(E.current=v.initialErrors||oo,W({type:"SET_ERRORS",payload:v.initialErrors||oo}))},[g,v.initialErrors]),y.useEffect(function(){g&&C.current===!0&&!po(S.current,v.initialTouched)&&(S.current=v.initialTouched||Lf,W({type:"SET_TOUCHED",payload:v.initialTouched||Lf}))},[g,v.initialTouched]),y.useEffect(function(){g&&C.current===!0&&!po(w.current,v.initialStatus)&&(w.current=v.initialStatus,W({type:"SET_STATUS",payload:v.initialStatus}))},[g,v.initialStatus,v.initialTouched]);var $=kr(function(J){if(k.current[J]&&Bs(k.current[J].validate)){var ge=Fs(P.values,J),We=k.current[J].validate(ge);return Mg(We)?(W({type:"SET_ISVALIDATING",payload:!0}),We.then(function(_e){return _e}).then(function(_e){W({type:"SET_FIELD_ERROR",payload:{field:J,value:_e}}),W({type:"SET_ISVALIDATING",payload:!1})})):(W({type:"SET_FIELD_ERROR",payload:{field:J,value:We}}),Promise.resolve(We))}else if(v.validationSchema)return W({type:"SET_ISVALIDATING",payload:!0}),z(P.values,J).then(function(_e){return _e}).then(function(_e){W({type:"SET_FIELD_ERROR",payload:{field:J,value:Fs(_e,J)}}),W({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),N=y.useCallback(function(J,ge){var We=ge.validate;k.current[J]={validate:We}},[]),V=y.useCallback(function(J){delete k.current[J]},[]),F=kr(function(J,ge){W({type:"SET_TOUCHED",payload:J});var We=ge===void 0?o:ge;return We?re(P.values):Promise.resolve()}),X=y.useCallback(function(J){W({type:"SET_ERRORS",payload:J})},[]),oe=kr(function(J,ge){var We=Bs(J)?J(P.values):J;W({type:"SET_VALUES",payload:We});var _e=ge===void 0?n:ge;return _e?re(We):Promise.resolve()}),ue=y.useCallback(function(J,ge){W({type:"SET_FIELD_ERROR",payload:{field:J,value:ge}})},[]),Te=kr(function(J,ge,We){var _e=Bs(ge)?ge(Fs(P.values,J)):ge;W({type:"SET_FIELD_VALUE",payload:{field:J,value:_e}});var Re=We===void 0?n:We;return Re?re(wo(P.values,J,_e)):Promise.resolve()}),De=y.useCallback(function(J,ge){var We=ge,_e=J,Re;if(!Dg(J)){J.persist&&J.persist();var Fe=J.target?J.target:J.currentTarget,Qe=Fe.type,He=Fe.name,Ze=Fe.id,et=Fe.value,xt=Fe.checked;Fe.outerHTML;var yt=Fe.options,ct=Fe.multiple;We=ge||He||Ze,_e=/number|range/.test(Qe)?(Re=parseFloat(et),isNaN(Re)?"":Re):/checkbox/.test(Qe)?R4(Fs(P.values,We),xt,et):yt&&ct?A4(yt):et}We&&Te(We,_e)},[Te,P.values]),ee=kr(function(J){if(Dg(J))return function(ge){return De(ge,J)};De(J)}),G=kr(function(J,ge,We){ge===void 0&&(ge=!0),W({type:"SET_FIELD_TOUCHED",payload:{field:J,value:ge}});var _e=We===void 0?o:We;return _e?re(P.values):Promise.resolve()}),ae=y.useCallback(function(J,ge){J.persist&&J.persist();var We=J.target,_e=We.name,Re=We.id;We.outerHTML;var Fe=ge||_e||Re;G(Fe,!0)},[G]),ve=kr(function(J){if(Dg(J))return function(ge){return ae(ge,J)};ae(J)}),te=y.useCallback(function(J){Bs(J)?W({type:"SET_FORMIK_STATE",payload:J}):W({type:"SET_FORMIK_STATE",payload:function(){return J}})},[]),ye=y.useCallback(function(J){W({type:"SET_STATUS",payload:J})},[]),Se=y.useCallback(function(J){W({type:"SET_ISSUBMITTING",payload:J})},[]),Y=kr(function(){return W({type:"SUBMIT_ATTEMPT"}),re().then(function(J){var ge=J instanceof Error,We=!ge&&Object.keys(J).length===0;if(We){var _e;try{if(_e=ne(),_e===void 0)return}catch(Re){throw Re}return Promise.resolve(_e).then(function(Re){return C.current&&W({type:"SUBMIT_SUCCESS"}),Re}).catch(function(Re){if(C.current)throw W({type:"SUBMIT_FAILURE"}),Re})}else if(C.current&&(W({type:"SUBMIT_FAILURE"}),ge))throw J})}),ce=kr(function(J){J&&J.preventDefault&&Bs(J.preventDefault)&&J.preventDefault(),J&&J.stopPropagation&&Bs(J.stopPropagation)&&J.stopPropagation(),Y().catch(function(ge){console.warn("Warning: An unhandled error was caught from submitForm()",ge)})}),Ae={resetForm:H,validateForm:re,validateField:$,setErrors:X,setFieldError:ue,setFieldTouched:G,setFieldValue:Te,setStatus:ye,setSubmitting:Se,setTouched:F,setValues:oe,setFormikState:te,submitForm:Y},ne=kr(function(){return m(P.values,Ae)}),de=kr(function(J){J&&J.preventDefault&&Bs(J.preventDefault)&&J.preventDefault(),J&&J.stopPropagation&&Bs(J.stopPropagation)&&J.stopPropagation(),H()}),K=y.useCallback(function(J){return{value:Fs(P.values,J),error:Fs(P.errors,J),touched:!!Fs(P.touched,J),initialValue:Fs(j.current,J),initialTouched:!!Fs(S.current,J),initialError:Fs(E.current,J)}},[P.errors,P.touched,P.values]),Z=y.useCallback(function(J){return{setValue:function(We,_e){return Te(J,We,_e)},setTouched:function(We,_e){return G(J,We,_e)},setError:function(We){return ue(J,We)}}},[Te,G,ue]),be=y.useCallback(function(J){var ge=Vh(J),We=ge?J.name:J,_e=Fs(P.values,We),Re={name:We,value:_e,onChange:ee,onBlur:ve};if(ge){var Fe=J.type,Qe=J.value,He=J.as,Ze=J.multiple;Fe==="checkbox"?Qe===void 0?Re.checked=!!_e:(Re.checked=!!(Array.isArray(_e)&&~_e.indexOf(Qe)),Re.value=Qe):Fe==="radio"?(Re.checked=_e===Qe,Re.value=Qe):He==="select"&&Ze&&(Re.value=Re.value||[],Re.multiple=!0)}return Re},[ve,ee,P.values]),ke=y.useMemo(function(){return!po(j.current,P.values)},[j.current,P.values]),me=y.useMemo(function(){return typeof f<"u"?ke?P.errors&&Object.keys(P.errors).length===0:f!==!1&&Bs(f)?f(v):f:P.errors&&Object.keys(P.errors).length===0},[f,ke,P.errors,v]),we=Sn({},P,{initialValues:j.current,initialErrors:E.current,initialTouched:S.current,initialStatus:w.current,handleBlur:ve,handleChange:ee,handleReset:de,handleSubmit:ce,resetForm:H,setErrors:X,setFormikState:te,setFieldTouched:G,setFieldValue:Te,setFieldError:ue,setStatus:ye,setSubmitting:Se,setTouched:F,setValues:oe,submitForm:Y,validateForm:re,validateField:$,isValid:me,dirty:ke,unregisterField:V,registerField:N,getFieldProps:be,getFieldMeta:K,getFieldHelpers:Z,validateOnBlur:o,validateOnChange:n,validateOnMount:d});return we}function k4(e){var t=T4(e),n=e.component,i=e.children,o=e.render,c=e.innerRef;return y.useImperativeHandle(c,function(){return t}),y.createElement(S4,{value:t},n?y.createElement(n,t):o?o(t):i?Bs(i)?i(t):j4(i)?null:y.Children.only(i):null)}function E4(e){var t={};if(e.inner){if(e.inner.length===0)return wo(t,e.path,e.message);for(var o=e.inner,n=Array.isArray(o),i=0,o=n?o:o[Symbol.iterator]();;){var c;if(n){if(i>=o.length)break;c=o[i++]}else{if(i=o.next(),i.done)break;c=i.value}var d=c;Fs(t,d.path)||(t=wo(t,d.path,d.message))}}return t}function D4(e,t,n,i){n===void 0&&(n=!1);var o=yx(e);return t[n?"validateSync":"validate"](o,{abortEarly:!1,context:o})}function yx(e){var t=Array.isArray(e)?[]:{};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=String(n);Array.isArray(e[i])===!0?t[i]=e[i].map(function(o){return Array.isArray(o)===!0||dj(o)?yx(o):o!==""?o:void 0}):dj(e[i])?t[i]=yx(e[i]):t[i]=e[i]!==""?e[i]:void 0}return t}function M4(e,t,n){var i=e.slice();return t.forEach(function(c,d){if(typeof i[d]>"u"){var f=n.clone!==!1,h=f&&n.isMergeableObject(c);i[d]=h?hx(Array.isArray(c)?[]:{},c,n):c}else n.isMergeableObject(c)?i[d]=hx(e[d],c,n):e.indexOf(c)===-1&&i.push(c)}),i}function A4(e){return Array.from(e).filter(function(t){return t.selected}).map(function(t){return t.value})}function R4(e,t,n){if(typeof e=="boolean")return!!t;var i=[],o=!1,c=-1;if(Array.isArray(e))i=e,c=e.indexOf(n),o=c>=0;else if(!n||n=="true"||n=="false")return!!t;return t&&n&&!o?i.concat(n):o?i.slice(0,c).concat(i.slice(c+1)):i}var P4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?y.useLayoutEffect:y.useEffect;function kr(e){var t=y.useRef(e);return P4(function(){t.current=e}),y.useCallback(function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t.current.apply(void 0,i)},[])}function Sl(e){var t=e.validate,n=e.name,i=e.render,o=e.children,c=e.as,d=e.component,f=e.className,h=Rl(e,["validate","name","render","children","as","component","className"]),g=$E(),m=Rl(g,["validate","validationSchema"]),b=m.registerField,v=m.unregisterField;y.useEffect(function(){return b(n,{validate:t}),function(){v(n)}},[b,v,n,t]);var j=m.getFieldProps(Sn({name:n},h)),E=m.getFieldMeta(n),S={field:j,form:m};if(i)return i(Sn({},S,{meta:E}));if(Bs(o))return o(Sn({},S,{meta:E}));if(d){if(typeof d=="string"){var w=h.innerRef,C=Rl(h,["innerRef"]);return y.createElement(d,Sn({ref:w},j,C,{className:f}),o)}return y.createElement(d,Sn({field:j,form:m},h,{className:f}),o)}var k=c||"input";if(typeof k=="string"){var R=h.innerRef,O=Rl(h,["innerRef"]);return y.createElement(k,Sn({ref:R},j,O,{className:f}),o)}return y.createElement(k,Sn({},j,h,{className:f}),o)}var YE=y.forwardRef(function(e,t){var n=e.action,i=Rl(e,["action"]),o=n??"#",c=$E(),d=c.handleReset,f=c.handleSubmit;return y.createElement("form",Sn({onSubmit:f,ref:t,onReset:d,action:o},i))});YE.displayName="Form";const O4={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},I4={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",dayOfMonthFull:"do",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class W4{isMUIAdapter=!0;isTimezoneCompatible=!1;formatTokenMap=O4;escapedCharacters={start:"'",end:"'"};constructor(t){const{locale:n,formats:i,longFormatters:o,lib:c}=t;this.locale=n,this.formats=ie({},I4,i),this.longFormatters=o,this.lib=c||"date-fns"}date=t=>typeof t>"u"?new Date:t===null?null:new Date(t);getInvalidDate=()=>new Date("Invalid Date");getTimezone=()=>"default";setTimezone=t=>t;toJsDate=t=>t;getCurrentLocaleCode=()=>this.locale.code;is12HourCycleInCurrentLocale=()=>/a/.test(this.locale.formatLong.time({width:"short"}));expandFormat=t=>{const n=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return t.match(n).map(i=>{const o=i[0];if(o==="p"||o==="P"){const c=this.longFormatters[o];return c(i,this.locale.formatLong)}return i}).join("")};formatNumber=t=>t;getDayOfWeek=t=>t.getDay()+1}class t0 extends W4{constructor({locale:t,formats:n}={}){super({locale:t??Jx,formats:n,longFormatters:dh})}parse=(t,n)=>t===""?null:JI(t,n,new Date,{locale:this.locale});isValid=t=>t==null?!1:uT(t);format=(t,n)=>this.formatByString(t,this.formats[n]);formatByString=(t,n)=>Ug(t,n,{locale:this.locale});isEqual=(t,n)=>t===null&&n===null?!0:t===null||n===null?!1:rI(t,n);isSameYear=(t,n)=>nW(t,n);isSameMonth=(t,n)=>CT(t,n);isSameDay=(t,n)=>Vg(t,n);isSameHour=(t,n)=>tW(t,n);isAfter=(t,n)=>Zf(t,n);isAfterYear=(t,n)=>Zf(t,_w(n));isAfterDay=(t,n)=>Zf(t,Ww(n));isBefore=(t,n)=>og(t,n);isBeforeYear=(t,n)=>og(t,this.startOfYear(n));isBeforeDay=(t,n)=>og(t,this.startOfDay(n));isWithinRange=(t,[n,i])=>sW(t,{start:n,end:i});startOfYear=t=>hT(t);startOfMonth=t=>fT(t);startOfWeek=t=>Qr(t,{locale:this.locale});startOfDay=t=>Fu(t);endOfYear=t=>_w(t);endOfMonth=t=>dT(t);endOfWeek=t=>pT(t,{locale:this.locale});endOfDay=t=>Ww(t);addYears=(t,n)=>n5(t,n);addMonths=(t,n)=>Oh(t,n);addWeeks=(t,n)=>t5(t,n);addDays=(t,n)=>cd(t,n);addHours=(t,n)=>QO(t,n);addMinutes=(t,n)=>JO(t,n);addSeconds=(t,n)=>e5(t,n);getYear=t=>sI(t);getMonth=t=>tI(t);getDate=t=>Q5(t);getHours=t=>X5(t);getMinutes=t=>eI(t);getSeconds=t=>nI(t);getMilliseconds=t=>J5(t);setYear=(t,n)=>uW(t,n);setMonth=(t,n)=>rW(t,n);setDate=(t,n)=>iW(t,n);setHours=(t,n)=>aW(t,n);setMinutes=(t,n)=>lW(t,n);setSeconds=(t,n)=>cW(t,n);setMilliseconds=(t,n)=>oW(t,n);getDaysInMonth=t=>bT(t);getWeekArray=t=>{const n=this.startOfWeek(this.startOfMonth(t)),i=this.endOfWeek(this.endOfMonth(t));let o=0,c=n;const d=[];for(;this.isBefore(c,i);){const f=Math.floor(o/7);d[f]=d[f]||[],d[f].push(c),c=this.addDays(c,1),o+=1}return d};getWeekNumber=t=>ty(t,{locale:this.locale});getYearRange=([t,n])=>{const i=this.startOfYear(t),o=this.endOfYear(n),c=[];let d=i;for(;this.isBefore(d,o);)c.push(d),d=this.addYears(d,1);return c}}const _4=["localeText"],bx=y.createContext(null),Hh=function(t){const{localeText:n}=t,i=bt(t,_4),{adapter:o,localeText:c}=y.useContext(bx)??{adapter:void 0,localeText:void 0},d=On({props:i,name:"MuiLocalizationProvider"}),{children:f,dateAdapter:h,dateFormats:g,dateLibInstance:m,adapterLocale:b,localeText:v}=d,j=y.useMemo(()=>ie({},v,c,n),[v,c,n]),E=y.useMemo(()=>{if(!h)return o||null;const C=new h({locale:b,formats:g,instance:m});if(!C.isMUIAdapter)throw new Error(["MUI X: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/quickstart/#installation"].join(`
`));return C},[h,b,g,m,o]),S=y.useMemo(()=>E?{minDate:E.date("1900-01-01T00:00:00.000"),maxDate:E.date("2099-12-31T00:00:00.000")}:null,[E]),w=y.useMemo(()=>({utils:E,adapter:E,defaultDates:S,localeText:j}),[S,E,j]);return r.jsx(bx.Provider,{value:w,children:f})},nu=(e,t)=>e.length!==t.length?!1:t.every(n=>e.includes(n)),z4=({openTo:e,defaultOpenTo:t,views:n,defaultViews:i})=>{const o=n??i;let c;if(e!=null)c=e;else if(o.includes(t))c=t;else if(o.length>0)c=o[0];else throw new Error("MUI X: The `views` prop must contain at least one view.");return{views:o,openTo:c}},wh=(e,t,n)=>{let i=t;return i=e.setHours(i,e.getHours(n)),i=e.setMinutes(i,e.getMinutes(n)),i=e.setSeconds(i,e.getSeconds(n)),i=e.setMilliseconds(i,e.getMilliseconds(n)),i},Ku=({date:e,disableFuture:t,disablePast:n,maxDate:i,minDate:o,isDateDisabled:c,adapter:d,timezone:f})=>{const h=wh(d,d.date(void 0,f),e);n&&d.isBefore(o,h)&&(o=h),t&&d.isAfter(i,h)&&(i=h);let g=e,m=e;for(d.isBefore(e,o)&&(g=o,m=null),d.isAfter(e,i)&&(m&&(m=i),g=null);g||m;){if(g&&d.isAfter(g,i)&&(g=null),m&&d.isBefore(m,o)&&(m=null),g){if(!c(g))return g;g=d.addDays(g,1)}if(m){if(!c(m))return m;m=d.addDays(m,-1)}}return null},N4=(e,t)=>e.isValid(t)?t:null,zj=(e,t,n)=>t==null||!e.isValid(t)?n:t,L4=(e,t,n)=>!e.isValid(t)&&t!=null&&!e.isValid(n)&&n!=null?!0:e.isEqual(t,n),n0=(e,t)=>{const i=[e.startOfYear(t)];for(;i.length<12;){const o=i[i.length-1];i.push(e.addMonths(o,1))}return i},GE=(e,t,n)=>n==="date"?e.startOfDay(e.date(void 0,t)):e.date(void 0,t),F4=["year","month","day"],Nj=e=>F4.includes(e),s0=(e,{format:t,views:n},i)=>{if(t!=null)return t;const o=e.formats;return nu(n,["year"])?o.year:nu(n,["month"])?o.month:nu(n,["day"])?o.dayOfMonth:nu(n,["month","year"])?`${o.month} ${o.year}`:nu(n,["day","month"])?`${o.month} ${o.dayOfMonth}`:i?/en/.test(e.getCurrentLocaleCode())?o.normalDateWithWeekday:o.normalDate:o.keyboardDate},B4=(e,t)=>{const n=e.startOfWeek(t);return[0,1,2,3,4,5,6].map(i=>e.addDays(n,i))},V4=["hours","minutes","seconds"],H4=e=>V4.includes(e),Lj=(e,t)=>t.getHours(e)*3600+t.getMinutes(e)*60+t.getSeconds(e),U4=(e,t)=>(n,i)=>e?t.isAfter(n,i):Lj(n,t)>Lj(i,t),ai={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},$4=e=>Math.max(...e.map(t=>ai[t.type]??1)),su=(e,t,n)=>{if(t===ai.year)return e.startOfYear(n);if(t===ai.month)return e.startOfMonth(n);if(t===ai.day)return e.startOfDay(n);let i=n;return t<ai.minutes&&(i=e.setMinutes(i,0)),t<ai.seconds&&(i=e.setSeconds(i,0)),t<ai.milliseconds&&(i=e.setMilliseconds(i,0)),i},q4=({props:e,adapter:t,granularity:n,timezone:i,getTodayDate:o})=>{let c=o?o():su(t,n,GE(t,i));e.minDate!=null&&t.isAfterDay(e.minDate,c)&&(c=su(t,n,e.minDate)),e.maxDate!=null&&t.isBeforeDay(e.maxDate,c)&&(c=su(t,n,e.maxDate));const d=U4(e.disableIgnoringDatePartForTimeValidation??!1,t);return e.minTime!=null&&d(e.minTime,c)&&(c=su(t,n,e.disableIgnoringDatePartForTimeValidation?e.minTime:wh(t,c,e.minTime))),e.maxTime!=null&&d(c,e.maxTime)&&(c=su(t,n,e.disableIgnoringDatePartForTimeValidation?e.maxTime:wh(t,c,e.maxTime))),c},QE=(e,t)=>{const n=e.formatTokenMap[t];if(n==null)throw new Error([`MUI X: The token "${t}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof n=="string"?{type:n,contentType:n==="meridiem"?"letter":"digit",maxLength:void 0}:{type:n.sectionType,contentType:n.contentType,maxLength:n.maxLength}},Uh=(e,t)=>{const n=[],i=e.date(void 0,"default"),o=e.startOfWeek(i),c=e.endOfWeek(i);let d=o;for(;e.isBefore(d,c);)n.push(d),d=e.addDays(d,1);return n.map(f=>e.formatByString(f,t))},KE=(e,t,n,i)=>{switch(n){case"month":return n0(e,e.date(void 0,t)).map(o=>e.formatByString(o,i));case"weekDay":return Uh(e,i);case"meridiem":{const o=e.date(void 0,t);return[e.startOfDay(o),e.endOfDay(o)].map(c=>e.formatByString(c,i))}default:return[]}},Fj="s",Y4=["0","1","2","3","4","5","6","7","8","9"],G4=e=>{const t=e.date(void 0);return e.formatByString(e.setSeconds(t,0),Fj)==="0"?Y4:Array.from({length:10}).map((i,o)=>e.formatByString(e.setSeconds(t,o),Fj))},Eo=(e,t)=>{if(t[0]==="0")return e;const n=[];let i="";for(let o=0;o<e.length;o+=1){i+=e[o];const c=t.indexOf(i);c>-1&&(n.push(c.toString()),i="")}return n.join("")},r0=(e,t)=>t[0]==="0"?e:e.split("").map(n=>t[Number(n)]).join(""),Bj=(e,t)=>{const n=Eo(e,t);return n!==" "&&!Number.isNaN(Number(n))},i0=(e,t)=>Number(e).toString().padStart(t,"0"),XE=(e,t,n,i,o)=>{if(o.type==="day"&&o.contentType==="digit-with-letter"){const d=e.setDate(n.longestMonth,t);return e.formatByString(d,o.format)}let c=t.toString();return o.hasLeadingZerosInInput&&(c=i0(c,o.maxLength)),r0(c,i)},a0=(e,t,n)=>{let i=e.value||e.placeholder;const o=t==="non-input"?e.hasLeadingZerosInFormat:e.hasLeadingZerosInInput;return t==="non-input"&&e.hasLeadingZerosInInput&&!e.hasLeadingZerosInFormat&&(i=Number(Eo(i,n)).toString()),["input-rtl","input-ltr"].includes(t)&&e.contentType==="digit"&&!o&&i.length===1&&(i=`${i}`),t==="input-rtl"&&(i=`${i}`),i},Vj=(e,t,n,i)=>e.formatByString(e.parse(t,n),i),Q4=(e,t)=>e.formatByString(e.date(void 0,"system"),t).length===4,ZE=(e,t,n,i)=>{if(t!=="digit")return!1;const o=e.date(void 0,"default");switch(n){case"year":return e.lib==="dayjs"&&i==="YY"?!0:e.formatByString(e.setYear(o,1),i).startsWith("0");case"month":return e.formatByString(e.startOfYear(o),i).length>1;case"day":return e.formatByString(e.startOfMonth(o),i).length>1;case"weekDay":return e.formatByString(e.startOfWeek(o),i).length>1;case"hours":return e.formatByString(e.setHours(o,1),i).length>1;case"minutes":return e.formatByString(e.setMinutes(o,1),i).length>1;case"seconds":return e.formatByString(e.setSeconds(o,1),i).length>1;default:throw new Error("Invalid section type")}},K4=(e,t,n)=>{const i=t.some(h=>h.type==="day"),o=[],c=[];for(let h=0;h<t.length;h+=1){const g=t[h];i&&g.type==="weekDay"||(o.push(g.format),c.push(a0(g,"non-input",n)))}const d=o.join(" "),f=c.join(" ");return e.parse(f,d)},X4=e=>e.map(t=>`${t.startSeparator}${t.value||t.placeholder}${t.endSeparator}`).join(""),Z4=(e,t,n)=>{const o=e.map(c=>{const d=a0(c,n?"input-rtl":"input-ltr",t);return`${c.startSeparator}${d}${c.endSeparator}`}).join("");return n?`${o}`:o},J4=(e,t,n)=>{const i=e.date(void 0,n),o=e.endOfYear(i),c=e.endOfDay(i),{maxDaysInMonth:d,longestMonth:f}=n0(e,i).reduce((h,g)=>{const m=e.getDaysInMonth(g);return m>h.maxDaysInMonth?{maxDaysInMonth:m,longestMonth:g}:h},{maxDaysInMonth:0,longestMonth:null});return{year:({format:h})=>({minimum:0,maximum:Q4(e,h)?9999:99}),month:()=>({minimum:1,maximum:e.getMonth(o)+1}),day:({currentDate:h})=>({minimum:1,maximum:e.isValid(h)?e.getDaysInMonth(h):d,longestMonth:f}),weekDay:({format:h,contentType:g})=>{if(g==="digit"){const m=Uh(e,h).map(Number);return{minimum:Math.min(...m),maximum:Math.max(...m)}}return{minimum:1,maximum:7}},hours:({format:h})=>{const g=e.getHours(c);return Eo(e.formatByString(e.endOfDay(i),h),t)!==g.toString()?{minimum:1,maximum:Number(Eo(e.formatByString(e.startOfDay(i),h),t))}:{minimum:0,maximum:g}},minutes:()=>({minimum:0,maximum:e.getMinutes(c)}),seconds:()=>({minimum:0,maximum:e.getSeconds(c)}),meridiem:()=>({minimum:0,maximum:1}),empty:()=>({minimum:0,maximum:0})}},eV=(e,t,n,i)=>{switch(t.type){case"year":return e.setYear(i,e.getYear(n));case"month":return e.setMonth(i,e.getMonth(n));case"weekDay":{let o=e.formatByString(n,t.format);t.hasLeadingZerosInInput&&(o=i0(o,t.maxLength));const c=Uh(e,t.format),d=c.indexOf(o),h=c.indexOf(t.value)-d;return e.addDays(n,h)}case"day":return e.setDate(i,e.getDate(n));case"meridiem":{const o=e.getHours(n)<12,c=e.getHours(i);return o&&c>=12?e.addHours(i,-12):!o&&c<12?e.addHours(i,12):i}case"hours":return e.setHours(i,e.getHours(n));case"minutes":return e.setMinutes(i,e.getMinutes(n));case"seconds":return e.setSeconds(i,e.getSeconds(n));default:return i}},Hj={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8,empty:9},Uj=(e,t,n,i,o)=>[...n].sort((c,d)=>Hj[c.type]-Hj[d.type]).reduce((c,d)=>!o||d.modified?eV(e,d,t,c):c,i),tV=()=>navigator.userAgent.toLowerCase().includes("android"),nV=(e,t)=>{const n={};if(!t)return e.forEach((h,g)=>{const m=g===0?null:g-1,b=g===e.length-1?null:g+1;n[g]={leftIndex:m,rightIndex:b}}),{neighbors:n,startIndex:0,endIndex:e.length-1};const i={},o={};let c=0,d=0,f=e.length-1;for(;f>=0;){d=e.findIndex((h,g)=>g>=c&&h.endSeparator?.includes(" ")&&h.endSeparator!==" / "),d===-1&&(d=e.length-1);for(let h=d;h>=c;h-=1)o[h]=f,i[f]=h,f-=1;c=d+1}return e.forEach((h,g)=>{const m=o[g],b=m===0?null:i[m-1],v=m===e.length-1?null:i[m+1];n[g]={leftIndex:b,rightIndex:v}}),{neighbors:n,startIndex:i[0],endIndex:i[e.length-1]}},vx=(e,t)=>{if(e==null)return null;if(e==="all")return"all";if(typeof e=="string"){const n=t.findIndex(i=>i.type===e);return n===-1?null:n}return e},sV=["value","referenceDate"],mi={emptyValue:null,getTodayValue:GE,getInitialReferenceValue:e=>{let{value:t,referenceDate:n}=e,i=bt(e,sV);return i.adapter.isValid(t)?t:n??q4(i)},cleanValue:N4,areValuesEqual:L4,isSameError:(e,t)=>e===t,hasError:e=>e!=null,defaultErrorState:null,getTimezone:(e,t)=>e.isValid(t)?e.getTimezone(t):null,setTimezone:(e,t,n)=>n==null?null:e.setTimezone(n,t)},rV={updateReferenceValue:(e,t,n)=>e.isValid(t)?t:n,getSectionsFromValue:(e,t)=>t(e),getV7HiddenInputValueFromSections:X4,getV6InputValueFromSections:Z4,parseValueStr:(e,t,n)=>n(e.trim(),t),getDateFromSection:e=>e,getDateSectionsFromValue:e=>e,updateDateInValue:(e,t,n)=>n,clearDateSections:e=>e.map(t=>ie({},t,{value:""}))};function iV(e){return as("MuiPickersToolbar",e)}os("MuiPickersToolbar",["root","title","content"]);const JE=y.createContext(()=>!0);function aV(){return y.useContext(JE)}const e2=y.createContext(null);function t2(){return y.useContext(e2)}const o0=y.createContext(null),nc=()=>{const e=y.useContext(o0);if(e==null)throw new Error("MUI X: The `usePickerContext` hook can only be called inside the context of a Picker component");return e},n2=y.createContext(null),s2=y.createContext({ownerState:{isPickerDisabled:!1,isPickerReadOnly:!1,isPickerValueEmpty:!1,isPickerOpen:!1,pickerVariant:"desktop",pickerOrientation:"portrait"},rootRefObject:{current:null},labelId:void 0,dismissViews:()=>{},hasUIView:!0,getCurrentViewMode:()=>"UI",triggerElement:null,viewContainerRole:null,defaultActionBarActions:[],onPopperExited:void 0});function r2(e){const{contextValue:t,actionsContextValue:n,privateContextValue:i,fieldPrivateContextValue:o,isValidContextValue:c,localeText:d,children:f}=e;return r.jsx(o0.Provider,{value:t,children:r.jsx(n2.Provider,{value:n,children:r.jsx(s2.Provider,{value:i,children:r.jsx(e2.Provider,{value:o,children:r.jsx(JE.Provider,{value:c,children:r.jsx(Hh,{localeText:d,children:f})})})})})})}const ys=()=>y.useContext(s2);function i2(){const{ownerState:e}=ys(),t=Yi();return y.useMemo(()=>ie({},e,{toolbarDirection:t?"rtl":"ltr"}),[e,t])}const oV=["children","className","classes","toolbarTitle","hidden","titleId","classes","landscapeDirection"],lV=e=>Fn({root:["root"],title:["title"],content:["content"]},iV,e),cV=Xe("div",{name:"MuiPickersToolbar",slot:"Root"})(({theme:e})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:e.spacing(2,3),variants:[{props:{pickerOrientation:"landscape"},style:{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"}}]})),uV=Xe("div",{name:"MuiPickersToolbar",slot:"Content",shouldForwardProp:e=>Do(e)&&e!=="landscapeDirection"})({display:"flex",flexWrap:"wrap",width:"100%",flex:1,justifyContent:"space-between",alignItems:"center",flexDirection:"row",variants:[{props:{pickerOrientation:"landscape"},style:{justifyContent:"flex-start",alignItems:"flex-start",flexDirection:"column"}},{props:{pickerOrientation:"landscape",landscapeDirection:"row"},style:{flexDirection:"row"}}]}),dV=y.forwardRef(function(t,n){const i=On({props:t,name:"MuiPickersToolbar"}),{children:o,className:c,classes:d,toolbarTitle:f,hidden:h,titleId:g,landscapeDirection:m}=i,b=bt(i,oV),v=i2(),j=lV(d);return h?null:r.jsxs(cV,ie({ref:n,className:xs(j.root,c),ownerState:v},b,{children:[r.jsx(M,{color:"text.secondary",variant:"overline",id:g,className:j.title,children:f}),r.jsx(uV,{className:j.content,ownerState:v,landscapeDirection:m,children:o})]}))}),fV=e=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:ie({},e)}}}}),a2={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"Open previous view",openNextView:"Open next view",calendarViewSwitchingButtonAriaLabel:e=>e==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",startDate:"Start date",startTime:"Start time",endDate:"End date",endTime:"End time",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",nextStepButtonLabel:"Next",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",timeRangePickerToolbarTitle:"Select time range",clockLabelText:(e,t)=>`Select ${e}. ${t?`Selected time is ${t}`:"No time selected"}`,hoursClockNumberText:e=>`${e} hours`,minutesClockNumberText:e=>`${e} minutes`,secondsClockNumberText:e=>`${e} seconds`,selectViewText:e=>`Select ${e}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:e=>`Week ${e}`,calendarWeekNumberText:e=>`${e}`,openDatePickerDialogue:e=>e?`Choose date, selected date is ${e}`:"Choose date",openTimePickerDialogue:e=>e?`Choose time, selected time is ${e}`:"Choose time",openRangePickerDialogue:e=>e?`Choose range, selected range is ${e}`:"Choose range",fieldClearLabel:"Clear",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:e=>"Y".repeat(e.digitAmount),fieldMonthPlaceholder:e=>e.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:e=>e.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa",year:"Year",month:"Month",day:"Day",weekDay:"Week day",hours:"Hours",minutes:"Minutes",seconds:"Seconds",meridiem:"Meridiem",empty:"Empty"},hV=a2;fV(a2);const l0=()=>{const e=y.useContext(bx);if(e===null)throw new Error(["MUI X: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(e.adapter===null)throw new Error(["MUI X: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const t=y.useMemo(()=>ie({},hV,e.localeText),[e.localeText]);return y.useMemo(()=>ie({},e,{localeText:t}),[e,t])},un=()=>l0().adapter,La=()=>l0().localeText,Sx=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],wx=["disablePast","disableFuture","minTime","maxTime","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],o2=["minDateTime","maxDateTime"],pV=[...Sx,...wx,...o2],l2=e=>pV.reduce((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t),{}),mV=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef","unstableStartFieldRef","unstableEndFieldRef","enableAccessibleFieldDOMStructure","disabled","readOnly","dateSeparator","autoFocus","focused"],c2=(e,t)=>y.useMemo(()=>{const n=ie({},e),i={},o=c=>{n.hasOwnProperty(c)&&(i[c]=n[c],delete n[c])};return mV.forEach(o),t==="date"?Sx.forEach(o):t==="time"?wx.forEach(o):t==="date-time"&&(Sx.forEach(o),wx.forEach(o),o2.forEach(o)),{forwardedProps:n,internalProps:i}},[e,t]),gV=({adapter:e,format:t})=>{let n=10,i=t,o=e.expandFormat(t);for(;o!==i;)if(i=o,o=e.expandFormat(i),n-=1,n<0)throw new Error("MUI X: The format expansion seems to be in an infinite loop. Please open an issue with the format passed to the component.");return o},xV=({adapter:e,expandedFormat:t})=>{const n=[],{start:i,end:o}=e.escapedCharacters,c=new RegExp(`(\\${i}[^\\${o}]*\\${o})+`,"g");let d=null;for(;d=c.exec(t);)n.push({start:d.index,end:c.lastIndex-1});return n},yV=(e,t,n,i)=>{switch(n.type){case"year":return t.fieldYearPlaceholder({digitAmount:e.formatByString(e.date(void 0,"default"),i).length,format:i});case"month":return t.fieldMonthPlaceholder({contentType:n.contentType,format:i});case"day":return t.fieldDayPlaceholder({format:i});case"weekDay":return t.fieldWeekDayPlaceholder({contentType:n.contentType,format:i});case"hours":return t.fieldHoursPlaceholder({format:i});case"minutes":return t.fieldMinutesPlaceholder({format:i});case"seconds":return t.fieldSecondsPlaceholder({format:i});case"meridiem":return t.fieldMeridiemPlaceholder({format:i});default:return i}},bV=({adapter:e,date:t,shouldRespectLeadingZeros:n,localeText:i,localizedDigits:o,now:c,token:d,startSeparator:f})=>{if(d==="")throw new Error("MUI X: Should not call `commitToken` with an empty token");const h=QE(e,d),g=ZE(e,h.contentType,h.type,d),m=n?g:h.contentType==="digit",b=e.isValid(t);let v=b?e.formatByString(t,d):"",j=null;if(m)if(g)j=v===""?e.formatByString(c,d).length:v.length;else{if(h.maxLength==null)throw new Error(`MUI X: The token ${d} should have a 'maxLength' property on it's adapter`);j=h.maxLength,b&&(v=r0(i0(Eo(v,o),j),o))}return ie({},h,{format:d,maxLength:j,value:v,placeholder:yV(e,i,h,d),hasLeadingZerosInFormat:g,hasLeadingZerosInInput:m,startSeparator:f,endSeparator:"",modified:!1})},vV=e=>{const{adapter:t,expandedFormat:n,escapedParts:i}=e,o=t.date(void 0),c=[];let d="";const f=Object.keys(t.formatTokenMap).sort((j,E)=>E.length-j.length),h=/^([a-zA-Z]+)/,g=new RegExp(`^(${f.join("|")})*$`),m=new RegExp(`^(${f.join("|")})`),b=j=>i.find(E=>E.start<=j&&E.end>=j);let v=0;for(;v<n.length;){const j=b(v),E=j!=null,S=h.exec(n.slice(v))?.[1];if(!E&&S!=null&&g.test(S)){let w=S;for(;w.length>0;){const C=m.exec(w)[1];w=w.slice(C.length),c.push(bV(ie({},e,{now:o,token:C,startSeparator:d}))),d=""}v+=S.length}else{const w=n[v];E&&j?.start===v||j?.end===v||(c.length===0?d+=w:(c[c.length-1].endSeparator+=w,c[c.length-1].isEndFormatSeparator=!0)),v+=1}}return c.length===0&&d.length>0&&c.push({type:"empty",contentType:"letter",maxLength:null,format:"",value:"",placeholder:"",hasLeadingZerosInFormat:!1,hasLeadingZerosInInput:!1,startSeparator:d,endSeparator:"",modified:!1}),c},SV=({isRtl:e,formatDensity:t,sections:n})=>n.map(i=>{const o=c=>{let d=c;return e&&d!==null&&d.includes(" ")&&(d=`${d}`),t==="spacious"&&["/",".","-"].includes(d)&&(d=` ${d} `),d};return i.startSeparator=o(i.startSeparator),i.endSeparator=o(i.endSeparator),i}),$j=e=>{let t=gV(e);e.isRtl&&e.enableAccessibleFieldDOMStructure&&(t=t.split(" ").reverse().join(" "));const n=xV(ie({},e,{expandedFormat:t})),i=vV(ie({},e,{expandedFormat:t,escapedParts:n}));return SV(ie({},e,{sections:i}))},c0=()=>y.useContext(o0),wV=()=>{const e=y.useContext(n2);if(e==null)throw new Error(["MUI X: The `usePickerActionsContext` can only be called in fields that are used as a slot of a Picker component"].join(`
`));return e};function jV(e){return as("MuiDatePickerToolbar",e)}os("MuiDatePickerToolbar",["root","title"]);const CV=["toolbarFormat","toolbarPlaceholder","className","classes"],TV=e=>Fn({root:["root"],title:["title"]},jV,e),kV=Xe(dV,{name:"MuiDatePickerToolbar",slot:"Root"})({}),EV=Xe(M,{name:"MuiDatePickerToolbar",slot:"Title"})({variants:[{props:{pickerOrientation:"landscape"},style:{margin:"auto 16px auto auto"}}]}),DV=y.forwardRef(function(t,n){const i=On({props:t,name:"MuiDatePickerToolbar"}),{toolbarFormat:o,toolbarPlaceholder:c="",className:d,classes:f}=i,h=bt(i,CV),g=un(),{value:m,views:b,orientation:v}=nc(),j=La(),E=i2(),S=TV(f),w=y.useMemo(()=>{if(!g.isValid(m))return c;const C=s0(g,{format:o,views:b},!0);return g.formatByString(m,C)},[m,o,c,g,b]);return r.jsx(kV,ie({ref:n,toolbarTitle:j.datePickerToolbarTitle,className:xs(S.root,d)},h,{children:r.jsx(EV,{variant:"h4",align:v==="landscape"?"left":"center",ownerState:E,className:S.title,children:w})}))}),yd=({props:e,value:t,timezone:n,adapter:i})=>{if(t===null)return null;const{shouldDisableDate:o,shouldDisableMonth:c,shouldDisableYear:d,disablePast:f,disableFuture:h,minDate:g,maxDate:m}=e,b=i.date(void 0,n);switch(!0){case!i.isValid(t):return"invalidDate";case!!(o&&o(t)):return"shouldDisableDate";case!!(c&&c(t)):return"shouldDisableMonth";case!!(d&&d(t)):return"shouldDisableYear";case!!(h&&i.isAfterDay(t,b)):return"disableFuture";case!!(f&&i.isBeforeDay(t,b)):return"disablePast";case!!(g&&i.isBeforeDay(t,g)):return"minDate";case!!(m&&i.isAfterDay(t,m)):return"maxDate";default:return null}};yd.valueManager=mi;function u2(e){const{props:t,validator:n,value:i,timezone:o,onError:c}=e,d=un(),f=y.useRef(n.valueManager.defaultErrorState),h=n({adapter:d,value:i,timezone:o,props:t}),g=n.valueManager.hasError(h);y.useEffect(()=>{c&&!n.valueManager.isSameError(h,f.current)&&c(h,i),f.current=h},[n,c,h,i]);const m=qe(b=>n({adapter:d,value:b,timezone:o,props:t}));return{validationError:h,hasValidationError:g,getValidationErrorForNewValue:m}}const MV=()=>l0().defaultDates,$h=e=>{const t=un(),n=y.useRef(void 0);return n.current===void 0&&(n.current=t.date(void 0,e)),n.current};function AV(e={}){const{enableAccessibleFieldDOMStructure:t=!0}=e;return y.useMemo(()=>({valueType:"date",validator:yd,internal_valueManager:mi,internal_fieldValueManager:rV,internal_enableAccessibleFieldDOMStructure:t,internal_useApplyDefaultValuesToFieldInternalProps:PV,internal_useOpenPickerButtonAriaLabel:RV}),[t])}function RV(e){const t=un(),n=La();return y.useMemo(()=>{const i=t.isValid(e)?t.format(e,"fullDate"):null;return n.openDatePickerDialogue(i)},[e,n,t])}function PV(e){const t=un(),n=bd(e);return y.useMemo(()=>ie({},e,n,{format:e.format??t.formats.keyboardDate}),[e,n,t])}function bd(e){const t=un(),n=MV();return y.useMemo(()=>({disablePast:e.disablePast??!1,disableFuture:e.disableFuture??!1,minDate:zj(t,e.minDate,n.minDate),maxDate:zj(t,e.maxDate,n.maxDate)}),[e.minDate,e.maxDate,e.disableFuture,e.disablePast,t,n])}function d2(e,t){const n=On({props:e,name:t}),i=bd(n),o=y.useMemo(()=>n.localeText?.toolbarTitle==null?n.localeText:ie({},n.localeText,{datePickerToolbarTitle:n.localeText.toolbarTitle}),[n.localeText]);return ie({},n,i,{localeText:o},z4({views:n.views,openTo:n.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{slots:ie({toolbar:DV},n.slots)})}function OV(e){return as("MuiPickerPopper",e)}os("MuiPickerPopper",["root","paper"]);function IV(e,t){return Array.isArray(t)?t.every(n=>e.indexOf(n)!==-1):e.indexOf(t)!==-1}const WV=e=>{setTimeout(e,0)},f2=(e=document)=>{const t=e.activeElement;return t?t.shadowRoot?f2(t.shadowRoot):t:null},Ds=e=>f2(pu(e)),_V="@media (pointer: fine)",zV=["PaperComponent","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],NV=e=>Fn({root:["root"],paper:["paper"]},OV,e),LV=Xe(AR,{name:"MuiPickerPopper",slot:"Root"})(({theme:e})=>({zIndex:e.zIndex.modal})),FV=Xe(Us,{name:"MuiPickerPopper",slot:"Paper"})({outline:0,transformOrigin:"top center",variants:[{props:({popperPlacement:e})=>new Set(["top","top-start","top-end"]).has(e),style:{transformOrigin:"bottom center"}}]});function BV(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function VV(e,t){const n=y.useRef(!1),i=y.useRef(!1),o=y.useRef(null),c=y.useRef(!1);y.useEffect(()=>{if(!e)return;function h(){c.current=!0}return document.addEventListener("mousedown",h,!0),document.addEventListener("touchstart",h,!0),()=>{document.removeEventListener("mousedown",h,!0),document.removeEventListener("touchstart",h,!0),c.current=!1}},[e]);const d=qe(h=>{if(!c.current)return;const g=i.current;i.current=!1;const m=pu(o.current);if(!o.current||"clientX"in h&&BV(h,m))return;if(n.current){n.current=!1;return}let b;h.composedPath?b=h.composedPath().indexOf(o.current)>-1:b=!m.documentElement.contains(h.target)||o.current.contains(h.target),!b&&!g&&t(h)}),f=h=>{h.defaultMuiPrevented||(i.current=!0)};return y.useEffect(()=>{if(e){const h=pu(o.current),g=()=>{n.current=!0};return h.addEventListener("touchstart",d),h.addEventListener("touchmove",g),()=>{h.removeEventListener("touchstart",d),h.removeEventListener("touchmove",g)}}},[e,d]),y.useEffect(()=>{if(e){const h=pu(o.current);return h.addEventListener("click",d),()=>{h.removeEventListener("click",d),i.current=!1}}},[e,d]),[o,f,f]}const HV=y.forwardRef((e,t)=>{const{PaperComponent:n,ownerState:i,children:o,paperSlotProps:c,paperClasses:d,onPaperClick:f,onPaperTouchStart:h}=e,g=bt(e,zV),m=$t({elementType:n,externalSlotProps:c,additionalProps:{tabIndex:-1,elevation:8,ref:t},className:d,ownerState:i});return r.jsx(n,ie({},g,m,{onClick:b=>{f(b),m.onClick?.(b)},onTouchStart:b=>{h(b),m.onTouchStart?.(b)},ownerState:i,children:o}))});function UV(e){const t=On({props:e,name:"MuiPickerPopper"}),{children:n,placement:i="bottom-start",slots:o,slotProps:c,classes:d}=t,{open:f,popupRef:h,reduceAnimations:g}=nc(),{ownerState:m,rootRefObject:b}=ys(),{dismissViews:v,getCurrentViewMode:j,onPopperExited:E,triggerElement:S,viewContainerRole:w}=ys();y.useEffect(()=>{function V(F){f&&F.key==="Escape"&&v()}return document.addEventListener("keydown",V),()=>{document.removeEventListener("keydown",V)}},[v,f]);const C=y.useRef(null);y.useEffect(()=>{w==="tooltip"||j()==="field"||(f?C.current=Ds(b.current):C.current&&C.current instanceof HTMLElement&&setTimeout(()=>{C.current instanceof HTMLElement&&C.current.focus()}))},[f,w,j,b]);const k=NV(d),R=qe(()=>{w==="tooltip"?WV(()=>{b.current?.contains(Ds(b.current))||h.current?.contains(Ds(h.current))||v()}):v()}),[O,I,P]=VV(f,R),W=y.useRef(null),L=Ys(W,h),z=Ys(L,O),q=V=>{V.key==="Escape"&&(V.stopPropagation(),v())},B=o?.desktopTransition??g?Eh:DR,U=o?.desktopTrapFocus??MR,re=o?.desktopPaper??FV,H=o?.popper??LV,$=$t({elementType:H,externalSlotProps:c?.popper,additionalProps:{transition:!0,role:w??void 0,open:f,placement:i,anchorEl:S,onKeyDown:q},className:k.root,ownerState:m}),N=y.useMemo(()=>ie({},m,{popperPlacement:$.placement}),[m,$.placement]);return r.jsx(H,ie({},$,{children:({TransitionProps:V})=>r.jsx(U,ie({open:f,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:w==="tooltip",isEnabled:()=>!0},c?.desktopTrapFocus,{children:r.jsx(B,ie({},V,c?.desktopTransition,{onExited:F=>{E?.(),c?.desktopTransition?.onExited?.(F),V?.onExited?.()},children:r.jsx(HV,{PaperComponent:re,ownerState:N,ref:z,onPaperClick:I,onPaperTouchStart:P,paperClasses:k.paper,paperSlotProps:c?.desktopPaper,children:n})}))}))}))}const $V="@media (prefers-reduced-motion: reduce)",Wl=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),qj=Wl&&Wl[1]?parseInt(Wl[1],10):null,Yj=Wl&&Wl[2]?parseInt(Wl[2],10):null,qV=qj&&qj<10||Yj&&Yj<13||!1;function h2(e){const t=cr($V,{defaultMatches:!1});return e??(t||qV)}const p2={hasNextStep:!1,hasSeveralSteps:!1,goToNextStep:()=>{},areViewsInSameStep:()=>!0};function YV(e){const{steps:t,isViewMatchingStep:n,onStepChange:i}=e;return o=>{if(t==null)return p2;const c=t.findIndex(f=>n(o.view,f)),d=c===-1||c===t.length-1?null:t[c+1];return{hasNextStep:d!=null,hasSeveralSteps:t.length>1,goToNextStep:()=>{d!=null&&i(ie({},o,{step:d}))},areViewsInSameStep:(f,h)=>{const g=t.find(b=>n(f,b)),m=t.find(b=>n(h,b));return g===m}}}}function m2({onChange:e,onViewChange:t,openTo:n,view:i,views:o,autoFocus:c,focusedView:d,onFocusedViewChange:f,getStepNavigation:h}){const g=y.useRef(n),m=y.useRef(o),b=y.useRef(o.includes(n)?n:o[0]),[v,j]=Fl({name:"useViews",state:"view",controlled:i,default:b.current}),E=y.useRef(c?v:null),[S,w]=Fl({name:"useViews",state:"focusedView",controlled:d,default:E.current}),C=h?h({setView:j,view:v,defaultView:b.current,views:o}):p2;y.useEffect(()=>{(g.current&&g.current!==n||m.current&&m.current.some(z=>!o.includes(z)))&&(j(o.includes(n)?n:o[0]),m.current=o,g.current=n)},[n,j,v,o]);const k=o.indexOf(v),R=o[k-1]??null,O=o[k+1]??null,I=qe((z,q)=>{w(q?z:B=>z===B?null:B),f?.(z,q)}),P=qe(z=>{I(z,!0),z!==v&&(j(z),t&&t(z))}),W=qe(()=>{O&&P(O)}),L=qe((z,q,B)=>{const U=q==="finish",re=B?o.indexOf(B)<o.length-1:!!O;e(z,U&&re?"partial":q,B);let $=null;if(B!=null&&B!==v?$=B:U&&($=v),$==null)return;const N=o[o.indexOf($)+1];N==null||!C.areViewsInSameStep($,N)||P(N)});return ie({},C,{view:v,setView:P,focusedView:S,setFocusedView:I,nextView:O,previousView:R,defaultView:o.includes(n)?n:o[0],goToNextView:W,setValueAndGoToNextView:L})}function Gj(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}function GV(e,t){const[n,i]=y.useState(Gj);return Hi(()=>{const o=()=>{i(Gj())};return window.addEventListener("orientationchange",o),()=>{window.removeEventListener("orientationchange",o)}},[]),IV(e,["hours","minutes","seconds"])?"portrait":t??n}const vd=({name:e,timezone:t,value:n,defaultValue:i,referenceDate:o,onChange:c,valueManager:d})=>{const f=un(),[h,g]=Fl({name:e,state:"value",controlled:n,default:i??d.emptyValue}),m=y.useMemo(()=>d.getTimezone(f,h),[f,d,h]),b=qe(S=>m==null?S:d.setTimezone(f,m,S)),v=y.useMemo(()=>t||m||(o?f.getTimezone(Array.isArray(o)?o[0]:o):"default"),[t,m,o,f]),j=y.useMemo(()=>d.setTimezone(f,v,h),[d,f,v,h]),E=qe((S,...w)=>{const C=b(S);g(C),c?.(C,...w)});return{value:j,handleValueChange:E,timezone:v}};function QV(e){const{props:t,valueManager:n,validator:i}=e,{value:o,defaultValue:c,onChange:d,referenceDate:f,timezone:h,onAccept:g,closeOnSelect:m,open:b,onOpen:v,onClose:j}=t,{current:E}=y.useRef(c),{current:S}=y.useRef(o!==void 0),{current:w}=y.useRef(b!==void 0),C=un(),{timezone:k,value:R,handleValueChange:O}=vd({name:"a picker component",timezone:h,value:o,defaultValue:E,referenceDate:f,onChange:d,valueManager:n}),[I,P]=y.useState(()=>({open:!1,lastExternalValue:R,clockShallowValue:void 0,lastCommittedValue:R,hasBeenModifiedSinceMount:!1})),{getValidationErrorForNewValue:W}=u2({props:t,validator:i,timezone:k,value:R,onError:t.onError}),L=qe(U=>{const re=typeof U=="function"?U(I.open):U;w||P(H=>ie({},H,{open:re})),re&&v&&v(),re||j?.()}),z=qe((U,re)=>{const{changeImportance:H="accept",skipPublicationIfPristine:$=!1,validationError:N,shortcut:V,shouldClose:F=H==="accept"}=re??{};let X,oe;!$&&!S&&!I.hasBeenModifiedSinceMount?(X=!0,oe=H==="accept"):(X=!n.areValuesEqual(C,U,R),oe=H==="accept"&&!n.areValuesEqual(C,U,I.lastCommittedValue)),P(De=>ie({},De,{clockShallowValue:X?void 0:De.clockShallowValue,lastCommittedValue:oe?U:De.lastCommittedValue,hasBeenModifiedSinceMount:!0}));let ue=null;const Te=()=>(ue||(ue={validationError:N??W(U)},V&&(ue.shortcut=V)),ue);X&&O(U,Te()),oe&&g&&g(U,Te()),F&&L(!1)});R!==I.lastExternalValue&&P(U=>ie({},U,{lastExternalValue:R,clockShallowValue:void 0,hasBeenModifiedSinceMount:!0}));const q=qe((U,re="partial")=>{if(re==="shallow"){P(H=>ie({},H,{clockShallowValue:U,hasBeenModifiedSinceMount:!0}));return}z(U,{changeImportance:re==="finish"&&m?"accept":"set"})});y.useEffect(()=>{if(w){if(b===void 0)throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");P(U=>ie({},U,{open:b}))}},[w,b]);const B=y.useMemo(()=>n.cleanValue(C,I.clockShallowValue===void 0?R:I.clockShallowValue),[C,n,I.clockShallowValue,R]);return{timezone:k,state:I,setValue:z,setValueFromView:q,setOpen:L,value:R,viewValue:B}}const KV=["className","sx"],g2=({ref:e,props:t,valueManager:n,valueType:i,variant:o,validator:c,onPopperExited:d,autoFocusView:f,rendererInterceptor:h,localeText:g,viewContainerRole:m,getStepNavigation:b})=>{const{views:v,view:j,openTo:E,onViewChange:S,viewRenderers:w,reduceAnimations:C,orientation:k,disableOpenPicker:R,closeOnSelect:O,disabled:I,readOnly:P,formatDensity:W,enableAccessibleFieldDOMStructure:L,selectedSections:z,onSelectedSectionsChange:q,format:B,label:U,autoFocus:re,name:H}=t,{className:$,sx:N}=t,V=bt(t,KV),F=Fx(),X=un(),oe=h2(C),ue=GV(v,k),{current:Te}=y.useRef(E??null),[De,ee]=y.useState(null),G=y.useRef(null),ae=y.useRef(null),ve=y.useRef(null),te=Ys(e,ve),{timezone:ye,state:Se,setOpen:Y,setValue:ce,setValueFromView:Ae,value:ne,viewValue:de}=QV({props:t,valueManager:n,validator:c}),{view:K,setView:Z,defaultView:be,focusedView:ke,setFocusedView:me,setValueAndGoToNextView:we,goToNextStep:J,hasNextStep:ge,hasSeveralSteps:We}=m2({view:j,views:v,openTo:E,onChange:Ae,onViewChange:S,autoFocus:f,getStepNavigation:b}),_e=qe(()=>ce(n.emptyValue)),Re=qe(()=>ce(n.getTodayValue(X,ye,i))),Fe=qe(()=>ce(ne)),Qe=qe(()=>ce(Se.lastCommittedValue,{skipPublicationIfPristine:!0})),He=qe(()=>{ce(ne,{skipPublicationIfPristine:!0})}),{hasUIView:Ze,viewModeLookup:et,timeViewsCount:xt}=y.useMemo(()=>v.reduce((hn,bs)=>{const Gs=w[bs]==null?"field":"UI";return hn.viewModeLookup[bs]=Gs,Gs==="UI"&&(hn.hasUIView=!0,H4(bs)&&(hn.timeViewsCount+=1)),hn},{hasUIView:!1,viewModeLookup:{},timeViewsCount:0}),[w,v]),yt=et[K],ct=qe(()=>yt),[ot,vt]=y.useState(yt==="UI"?K:null);ot!==K&&et[K]==="UI"&&vt(K),Hi(()=>{yt==="field"&&Se.open&&(Y(!1),setTimeout(()=>{ae?.current?.setSelectedSections(K),ae?.current?.focusField(K)}))},[K]),Hi(()=>{if(!Se.open)return;let hn=K;yt==="field"&&ot!=null&&(hn=ot),hn!==be&&et[hn]==="UI"&&et[be]==="UI"&&(hn=be),hn!==K&&Z(hn),me(hn,!0)},[Se.open]);const ft=y.useMemo(()=>({isPickerValueEmpty:n.areValuesEqual(X,ne,n.emptyValue),isPickerOpen:Se.open,isPickerDisabled:t.disabled??!1,isPickerReadOnly:t.readOnly??!1,pickerOrientation:ue,pickerVariant:o}),[X,n,ne,Se.open,ue,o,t.disabled,t.readOnly]),Jt=y.useMemo(()=>R||!Ze?"hidden":I||P?"disabled":"enabled",[R,Ze,I,P]),jn=qe(J),fn=y.useMemo(()=>O&&!We?[]:["cancel","nextOrAccept"],[O,We]),sn=y.useMemo(()=>({setValue:ce,setOpen:Y,clearValue:_e,setValueToToday:Re,acceptValueChanges:Fe,cancelValueChanges:Qe,setView:Z,goToNextStep:jn}),[ce,Y,_e,Re,Fe,Qe,Z,jn]),Gn=y.useMemo(()=>ie({},sn,{value:ne,timezone:ye,open:Se.open,views:v,view:ot,initialView:Te,disabled:I??!1,readOnly:P??!1,autoFocus:re??!1,variant:o,orientation:ue,popupRef:G,reduceAnimations:oe,triggerRef:ee,triggerStatus:Jt,hasNextStep:ge,fieldFormat:B??"",name:H,label:U,rootSx:N,rootRef:te,rootClassName:$}),[sn,ne,te,o,ue,oe,I,P,B,$,H,U,N,Jt,ge,ye,Se.open,ot,v,Te,re]),Cs=y.useMemo(()=>({dismissViews:He,ownerState:ft,hasUIView:Ze,getCurrentViewMode:ct,rootRefObject:ve,labelId:F,triggerElement:De,viewContainerRole:m,defaultActionBarActions:fn,onPopperExited:d}),[He,ft,Ze,ct,F,De,m,fn,d]),dr=y.useMemo(()=>({formatDensity:W,enableAccessibleFieldDOMStructure:L,selectedSections:z,onSelectedSectionsChange:q,fieldRef:ae}),[W,L,z,q,ae]);return{providerProps:{localeText:g,contextValue:Gn,privateContextValue:Cs,actionsContextValue:sn,fieldPrivateContextValue:dr,isValidContextValue:hn=>{const bs=c({adapter:X,value:hn,timezone:ye,props:t});return!n.hasError(bs)}},renderCurrentView:()=>{if(ot==null)return null;const hn=w[ot];if(hn==null)return null;const bs=ie({},V,{views:v,timezone:ye,value:de,onChange:we,view:ot,onViewChange:Z,showViewSwitcher:xt>1,timeViewsCount:xt},m==="tooltip"?{focusedView:null,onFocusedViewChange:()=>{}}:{focusedView:ke,onFocusedViewChange:me});return h?r.jsx(h,{viewRenderers:w,popperView:ot,rendererProps:bs}):hn(bs)},ownerState:ft}};function x2(e){return as("MuiPickersLayout",e)}const lo=os("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),XV=["actions"],ZV=Xe(Nt,{name:"MuiPickersLayout",slot:"ActionBar"})({});function JV(e){const{actions:t}=e,n=bt(e,XV),i=La(),{clearValue:o,setValueToToday:c,acceptValueChanges:d,cancelValueChanges:f,goToNextStep:h,hasNextStep:g}=nc();if(t==null||t.length===0)return null;const m=t?.map(b=>{switch(b){case"clear":return r.jsx(Ce,{onClick:o,children:i.clearButtonLabel},b);case"cancel":return r.jsx(Ce,{onClick:f,children:i.cancelButtonLabel},b);case"accept":return r.jsx(Ce,{onClick:d,children:i.okButtonLabel},b);case"today":return r.jsx(Ce,{onClick:c,children:i.todayButtonLabel},b);case"next":return r.jsx(Ce,{onClick:h,children:i.nextStepButtonLabel},b);case"nextOrAccept":return g?r.jsx(Ce,{onClick:h,children:i.nextStepButtonLabel},b):r.jsx(Ce,{onClick:d,children:i.okButtonLabel},b);default:return null}});return r.jsx(ZV,ie({},n,{children:m}))}const eH=y.memo(JV),Xu=36,qh=2,Yh=320,tH=280,u0=336,nH=["items","changeImportance"],sH=["getValue"],rH=Xe(wn,{name:"MuiPickersLayout",slot:"Shortcuts"})({});function iH(e){const{items:t,changeImportance:n="accept"}=e,i=bt(e,nH),{setValue:o}=wV(),c=aV();if(t==null||t.length===0)return null;const d=t.map(f=>{let{getValue:h}=f,g=bt(f,sH);const m=h({isValid:c});return ie({},g,{label:g.label,onClick:()=>{o(m,{changeImportance:n,shortcut:g})},disabled:!c(m)})});return r.jsx(rH,ie({dense:!0,sx:[{maxHeight:u0,maxWidth:200,overflow:"auto"},...Array.isArray(i.sx)?i.sx:[i.sx]]},i,{children:d.map(f=>r.jsx(it,{children:r.jsx(Ne,ie({},f))},f.id??f.label))}))}const aH=["ownerState"];function oH(e){return e.view!==null}const lH=(e,t)=>{const{pickerOrientation:n}=t;return Fn({root:["root",n==="landscape"&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},x2,e)},cH=e=>{const{ownerState:t,defaultActionBarActions:n}=ys(),{view:i}=nc(),o=Yi(),{children:c,slots:d,slotProps:f,classes:h}=e,g=y.useMemo(()=>ie({},t,{layoutDirection:o?"rtl":"ltr",hasShortcuts:!1}),[t,o]),m=lH(h,g),b=d?.actionBar??eH,v=$t({elementType:b,externalSlotProps:f?.actionBar,additionalProps:{actions:n},className:m.actionBar,ownerState:g}),j=bt(v,aH),E=r.jsx(b,ie({},j)),S=d?.toolbar,w=$t({elementType:S,externalSlotProps:f?.toolbar,className:m.toolbar,ownerState:g}),C=oH(w)&&S?r.jsx(S,ie({},w)):null,k=c,R=d?.tabs,O=i&&R?r.jsx(R,ie({className:m.tabs},f?.tabs)):null,I=d?.shortcuts??iH,P=$t({elementType:I,externalSlotProps:f?.shortcuts,className:m.shortcuts,ownerState:g}),W=Array.isArray(P?.items)&&P.items.length>0,L=i&&I?r.jsx(I,ie({},P)):null;return{toolbar:C,content:k,tabs:O,actionBar:E,shortcuts:L,ownerState:ie({},g,{hasShortcuts:W})}},uH=(e,t)=>{const{pickerOrientation:n}=t;return Fn({root:["root",n==="landscape"&&"landscape"],contentWrapper:["contentWrapper"]},x2,e)},dH=Xe("div",{name:"MuiPickersLayout",slot:"Root"})({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${lo.actionBar}`]:{gridColumn:"1 / 4",gridRow:3},variants:[{props:{pickerOrientation:"landscape",hasShortcuts:!1},style:{[`& .${lo.toolbar}`]:{gridColumn:1,gridRow:"1 / 3"}}},{props:{pickerOrientation:"landscape",hasShortcuts:!0},style:{[`& .${lo.toolbar}`]:{gridColumn:"2 / 4",gridRow:1,maxWidth:"max-content"},[`& .${lo.shortcuts}`]:{gridColumn:1,gridRow:2}}},{props:{pickerOrientation:"portrait"},style:{[`& .${lo.toolbar}`]:{gridColumn:"2 / 4",gridRow:1},[`& .${lo.shortcuts}`]:{gridColumn:1,gridRow:"2 / 3"}}},{props:{hasShortcuts:!0,layoutDirection:"rtl"},style:{[`& .${lo.shortcuts}`]:{gridColumn:4}}}]}),fH=Xe("div",{name:"MuiPickersLayout",slot:"ContentWrapper"})({gridColumn:"2 / 4",gridRow:2,display:"flex",flexDirection:"column"}),y2=y.forwardRef(function(t,n){const i=On({props:t,name:"MuiPickersLayout"}),{toolbar:o,content:c,tabs:d,actionBar:f,shortcuts:h,ownerState:g}=cH(i),{orientation:m,variant:b}=nc(),{sx:v,className:j,classes:E}=i,S=uH(E,g);return r.jsxs(dH,{ref:n,sx:v,className:xs(S.root,j),ownerState:g,children:[m==="landscape"?h:o,m==="landscape"?o:h,r.jsx(fH,{className:S.contentWrapper,ownerState:g,children:b==="desktop"?r.jsxs(y.Fragment,{children:[c,d]}):r.jsxs(y.Fragment,{children:[d,c]})}),f]})});function b2(e){const{steps:t}=e;return YV({steps:t,isViewMatchingStep:(n,i)=>i.views==null||i.views.includes(n),onStepChange:({step:n,defaultView:i,setView:o,view:c,views:d})=>{const f=n.views==null?i:n.views.find(h=>d.includes(h));f!==c&&o(f)}})}const hH=["props","steps"],pH=["ownerState"],mH=e=>{let{props:t,steps:n}=e,i=bt(e,hH);const{slots:o,slotProps:c,label:d,inputRef:f,localeText:h}=t,g=b2({steps:n}),{providerProps:m,renderCurrentView:b,ownerState:v}=g2(ie({},i,{props:t,localeText:h,autoFocusView:!0,viewContainerRole:"dialog",variant:"desktop",getStepNavigation:g})),j=m.privateContextValue.labelId,E=c?.toolbar?.hidden??!1,S=o.field,w=$t({elementType:S,externalSlotProps:c?.field,additionalProps:ie({},E&&{id:j}),ownerState:v}),C=bt(w,pH),k=o.layout??y2;let R=j;E&&(d?R=`${j}-label`:R=void 0);const O=ie({},c,{toolbar:ie({},c?.toolbar,{titleId:j}),popper:ie({"aria-labelledby":R},c?.popper)});return{renderPicker:()=>r.jsxs(r2,ie({},m,{children:[r.jsx(S,ie({},C,{slots:o,slotProps:O,inputRef:f})),r.jsx(UV,{slots:o,slotProps:O,children:r.jsx(k,ie({},O?.layout,{slots:o,slotProps:O,children:b()}))})]}))}},wl=e=>e.saveQuery!=null,v2=({stateResponse:{localizedDigits:e,sectionsValueBoundaries:t,state:n,timezone:i,setCharacterQuery:o,setTempAndroidValueStr:c,updateSectionValue:d}})=>{const f=un(),h=({keyPressed:b,sectionIndex:v},j,E)=>{const S=b.toLowerCase(),w=n.sections[v];if(n.characterQuery!=null&&(!E||E(n.characterQuery.value))&&n.characterQuery.sectionIndex===v){const k=`${n.characterQuery.value}${S}`,R=j(k,w);if(!wl(R))return o({sectionIndex:v,value:k,sectionType:w.type}),R}const C=j(S,w);return wl(C)&&!C.saveQuery?(o(null),null):(o({sectionIndex:v,value:S,sectionType:w.type}),wl(C)?null:C)},g=b=>{const v=(S,w,C)=>{const k=w.filter(R=>R.toLowerCase().startsWith(C));return k.length===0?{saveQuery:!1}:{sectionValue:k[0],shouldGoToNextSection:k.length===1}},j=(S,w,C,k)=>{const R=O=>KE(f,i,w.type,O);if(w.contentType==="letter")return v(w.format,R(w.format),S);if(C&&k!=null&&QE(f,C).contentType==="letter"){const O=R(C),I=v(C,O,S);return wl(I)?{saveQuery:!1}:ie({},I,{sectionValue:k(I.sectionValue,O)})}return{saveQuery:!1}};return h(b,(S,w)=>{switch(w.type){case"month":{const C=k=>Vj(f,k,f.formats.month,w.format);return j(S,w,f.formats.month,C)}case"weekDay":{const C=(k,R)=>R.indexOf(k).toString();return j(S,w,f.formats.weekday,C)}case"meridiem":return j(S,w);default:return{saveQuery:!1}}})},m=b=>{const v=({queryValue:E,skipIfBelowMinimum:S,section:w})=>{const C=Eo(E,e),k=Number(C),R=t[w.type]({currentDate:null,format:w.format,contentType:w.contentType});if(k>R.maximum)return{saveQuery:!1};if(S&&k<R.minimum)return{saveQuery:!0};const O=k*10>R.maximum||C.length===R.maximum.toString().length;return{sectionValue:XE(f,k,R,e,w),shouldGoToNextSection:O}};return h(b,(E,S)=>{if(S.contentType==="digit"||S.contentType==="digit-with-letter")return v({queryValue:E,skipIfBelowMinimum:!1,section:S});if(S.type==="month"){ZE(f,"digit","month","MM");const w=v({queryValue:E,skipIfBelowMinimum:!0,section:{type:S.type,format:"MM",hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2}});if(wl(w))return w;const C=Vj(f,w.sectionValue,"MM",S.format);return ie({},w,{sectionValue:C})}if(S.type==="weekDay"){const w=v({queryValue:E,skipIfBelowMinimum:!0,section:S});if(wl(w))return w;const C=Uh(f,S.format)[Number(w.sectionValue)-1];return ie({},w,{sectionValue:C})}return{saveQuery:!1}},E=>Bj(E,e))};return qe(b=>{const v=n.sections[b.sectionIndex],E=Bj(b.keyPressed,e)?m(ie({},b,{keyPressed:r0(b.keyPressed,e)})):g(b);if(E==null){c(null);return}d({section:v,newSectionValue:E.sectionValue,shouldGoToNextSection:E.shouldGoToNextSection})})},gH=5e3,S2=e=>{const t=un(),n=La(),i=Yi(),{manager:{validator:o,valueType:c,internal_valueManager:d,internal_fieldValueManager:f},internalPropsWithDefaults:h,internalPropsWithDefaults:{value:g,defaultValue:m,referenceDate:b,onChange:v,format:j,formatDensity:E="dense",selectedSections:S,onSelectedSectionsChange:w,shouldRespectLeadingZeros:C=!1,timezone:k,enableAccessibleFieldDOMStructure:R=!0},forwardedProps:{error:O}}=e,{value:I,handleValueChange:P,timezone:W}=vd({name:"a field component",timezone:k,value:g,defaultValue:m,referenceDate:b,onChange:v,valueManager:d}),L=y.useRef(I);y.useEffect(()=>{L.current=I},[I]);const{hasValidationError:z}=u2({props:h,validator:o,timezone:W,value:I,onError:h.onError}),q=y.useMemo(()=>O!==void 0?O:z,[z,O]),B=y.useMemo(()=>G4(t),[t]),U=y.useMemo(()=>J4(t,B,W),[t,B,W]),re=y.useCallback(K=>f.getSectionsFromValue(K,Z=>$j({adapter:t,localeText:n,localizedDigits:B,format:j,date:Z,formatDensity:E,shouldRespectLeadingZeros:C,enableAccessibleFieldDOMStructure:R,isRtl:i})),[f,j,n,B,i,C,t,E,R]),[H,$]=y.useState(()=>{const K=re(I),Z={sections:K,lastExternalValue:I,lastSectionsDependencies:{format:j,isRtl:i,locale:t.locale},tempValueStrAndroid:null,characterQuery:null},be=$4(K),ke=d.getInitialReferenceValue({referenceDate:b,value:I,adapter:t,props:h,granularity:be,timezone:W});return ie({},Z,{referenceValue:ke})}),[N,V]=Fl({controlled:S,default:null,name:"useField",state:"selectedSections"}),F=K=>{V(K),w?.(K)},X=y.useMemo(()=>vx(N,H.sections),[N,H.sections]),oe=X==="all"?0:X,ue=y.useMemo(()=>nV(H.sections,i&&!R),[H.sections,i,R]),Te=y.useMemo(()=>H.sections.every(K=>K.value===""),[H.sections]),De=K=>{const Z={validationError:o({adapter:t,value:K,timezone:W,props:h})};P(K,Z)},ee=(K,Z)=>{const be=[...H.sections];return be[K]=ie({},be[K],{value:Z,modified:!0}),be},G=y.useRef(null),ae=Ol(),ve=K=>{oe!=null&&(G.current={sectionIndex:oe,value:K},ae.start(0,()=>{G.current=null}))},te=()=>{d.areValuesEqual(t,I,d.emptyValue)?$(K=>ie({},K,{sections:K.sections.map(Z=>ie({},Z,{value:""})),tempValueStrAndroid:null,characterQuery:null})):($(K=>ie({},K,{characterQuery:null})),De(d.emptyValue))},ye=()=>{if(oe==null)return;const K=H.sections[oe];K.value!==""&&(ve(""),f.getDateFromSection(I,K)===null?$(Z=>ie({},Z,{sections:ee(oe,""),tempValueStrAndroid:null,characterQuery:null})):($(Z=>ie({},Z,{characterQuery:null})),De(f.updateDateInValue(I,K,null))))},Se=K=>{const Z=(ke,me)=>{const we=t.parse(ke,j);if(!t.isValid(we))return null;const J=$j({adapter:t,localeText:n,localizedDigits:B,format:j,date:we,formatDensity:E,shouldRespectLeadingZeros:C,enableAccessibleFieldDOMStructure:R,isRtl:i});return Uj(t,we,J,me,!1)},be=f.parseValueStr(K,H.referenceValue,Z);De(be)},Y=Ol(),ce=({section:K,newSectionValue:Z,shouldGoToNextSection:be})=>{ae.clear(),Y.clear();const ke=f.getDateFromSection(I,K);be&&oe<H.sections.length-1&&F(oe+1);const me=ee(oe,Z),we=f.getDateSectionsFromValue(me,K),J=K4(t,we,B);if(t.isValid(J)){const ge=Uj(t,J,we,f.getDateFromSection(H.referenceValue,K),!0);return ke==null&&Y.start(0,()=>{L.current===I&&$(We=>ie({},We,{sections:f.clearDateSections(H.sections,K),tempValueStrAndroid:null}))}),De(f.updateDateInValue(I,K,ge))}return we.every(ge=>ge.value!=="")&&(ke==null||t.isValid(ke))?(ve(Z),De(f.updateDateInValue(I,K,J))):ke!=null?(ve(Z),De(f.updateDateInValue(I,K,null))):$(ge=>ie({},ge,{sections:me,tempValueStrAndroid:null}))},Ae=K=>$(Z=>ie({},Z,{tempValueStrAndroid:K})),ne=qe(K=>{$(Z=>ie({},Z,{characterQuery:K}))});if(I!==H.lastExternalValue){const K=G.current!=null&&!t.isValid(f.getDateFromSection(I,H.sections[G.current.sectionIndex]));let Z;K?Z=ee(G.current.sectionIndex,G.current.value):Z=re(I),$(be=>ie({},be,{lastExternalValue:I,sections:Z,sectionsDependencies:{format:j,isRtl:i,locale:t.locale},referenceValue:K?be.referenceValue:f.updateReferenceValue(t,I,be.referenceValue),tempValueStrAndroid:null}))}if(i!==H.lastSectionsDependencies.isRtl||j!==H.lastSectionsDependencies.format||t.locale!==H.lastSectionsDependencies.locale){const K=re(I);$(Z=>ie({},Z,{lastSectionsDependencies:{format:j,isRtl:i,locale:t.locale},sections:K,tempValueStrAndroid:null,characterQuery:null}))}H.characterQuery!=null&&!q&&oe==null&&ne(null),H.characterQuery!=null&&H.sections[H.characterQuery.sectionIndex]?.type!==H.characterQuery.sectionType&&ne(null),y.useEffect(()=>{G.current!=null&&(G.current=null)});const de=Ol();return y.useEffect(()=>(H.characterQuery!=null&&de.start(gH,()=>ne(null)),()=>{}),[H.characterQuery,ne,de]),y.useEffect(()=>{H.tempValueStrAndroid!=null&&oe!=null&&ye()},[H.sections]),{activeSectionIndex:oe,areAllSectionsEmpty:Te,error:q,localizedDigits:B,parsedSelectedSections:X,sectionOrder:ue,sectionsValueBoundaries:U,state:H,timezone:W,value:I,clearValue:te,clearActiveSection:ye,setCharacterQuery:ne,setSelectedSections:F,setTempAndroidValueStr:Ae,updateSectionValue:ce,updateValueFromValueStr:Se,getSectionsFromValue:re}};function w2(e){const{manager:{internal_useApplyDefaultValuesToFieldInternalProps:t},internalProps:n,skipContextFieldRefAssignment:i}=e,o=c0(),c=t2(),d=Ys(n.unstableFieldRef,i?null:c?.fieldRef),f=o?.setValue,h=y.useCallback((m,b)=>f?.(m,{validationError:b.validationError,shouldClose:!1}),[f]),g=y.useMemo(()=>c!=null&&o!=null?ie({value:o.value,onChange:h,timezone:o.timezone,disabled:o.disabled,readOnly:o.readOnly,autoFocus:o.autoFocus&&!o.open,focused:o.open?!0:void 0,format:o.fieldFormat,formatDensity:c.formatDensity,enableAccessibleFieldDOMStructure:c.enableAccessibleFieldDOMStructure,selectedSections:c.selectedSections,onSelectedSectionsChange:c.onSelectedSectionsChange,unstableFieldRef:d},n):n,[o,c,n,h,d]);return t(g)}function d0(e){const{focused:t,domGetters:n,stateResponse:{parsedSelectedSections:i,state:o}}=e;if(!n.isReady())return;const c=pu(n.getRoot()).getSelection();if(!c)return;if(i==null){c.rangeCount>0&&c.getRangeAt(0).startContainer instanceof Node&&n.getRoot().contains(c.getRangeAt(0).startContainer)&&c.removeAllRanges(),t&&n.getRoot().blur();return}if(!n.getRoot().contains(Ds(n.getRoot())))return;const d=new window.Range;let f;i==="all"?f=n.getRoot():o.sections[i].type==="empty"?f=n.getSectionContainer(i):f=n.getSectionContent(i),d.selectNodeContents(f),f.focus(),c.removeAllRanges(),c.addRange(d)}function j2(e){const t=un(),{manager:{internal_fieldValueManager:n},internalPropsWithDefaults:{minutesStep:i,disabled:o,readOnly:c},stateResponse:{state:d,value:f,activeSectionIndex:h,parsedSelectedSections:g,sectionsValueBoundaries:m,localizedDigits:b,timezone:v,sectionOrder:j,clearValue:E,clearActiveSection:S,setSelectedSections:w,updateSectionValue:C}}=e;return qe(k=>{if(!o)switch(!0){case((k.ctrlKey||k.metaKey)&&String.fromCharCode(k.keyCode)==="A"&&!k.shiftKey&&!k.altKey):{k.preventDefault(),w("all");break}case k.key==="ArrowRight":{if(k.preventDefault(),g==null)w(j.startIndex);else if(g==="all")w(j.endIndex);else{const R=j.neighbors[g].rightIndex;R!==null&&w(R)}break}case k.key==="ArrowLeft":{if(k.preventDefault(),g==null)w(j.endIndex);else if(g==="all")w(j.startIndex);else{const R=j.neighbors[g].leftIndex;R!==null&&w(R)}break}case k.key==="Delete":{if(k.preventDefault(),c)break;g==null||g==="all"?E():S();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(k.key):{if(k.preventDefault(),c||h==null)break;g==="all"&&w(h);const R=d.sections[h],O=yH(t,v,R,k.key,m,b,n.getDateFromSection(f,R),{minutesStep:i});C({section:R,newSectionValue:O,shouldGoToNextSection:!1});break}}})}function xH(e){switch(e){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}}function yH(e,t,n,i,o,c,d,f){const h=xH(i),g=i==="Home",m=i==="End",b=n.value===""||g||m,v=()=>{const E=o[n.type]({currentDate:d,format:n.format,contentType:n.contentType}),S=k=>XE(e,k,E,c,n),w=n.type==="minutes"&&f?.minutesStep?f.minutesStep:1;let C;if(b){if(n.type==="year"&&!m&&!g)return e.formatByString(e.date(void 0,t),n.format);h>0||g?C=E.minimum:C=E.maximum}else C=parseInt(Eo(n.value,c),10)+h*w;return C%w!==0&&((h<0||g)&&(C+=w-(w+C)%w),(h>0||m)&&(C-=C%w)),C>E.maximum?S(E.minimum+(C-E.maximum-1)%(E.maximum-E.minimum+1)):C<E.minimum?S(E.maximum-(E.minimum-C-1)%(E.maximum-E.minimum+1)):S(C)},j=()=>{const E=KE(e,t,n.type,n.format);if(E.length===0)return n.value;if(b)return h>0||g?E[0]:E[E.length-1];const C=((E.indexOf(n.value)+h)%E.length+E.length)%E.length;return E[C]};return n.contentType==="digit"||n.contentType==="digit-with-letter"?v():j()}function bH(e){const{manager:t,focused:n,setFocused:i,domGetters:o,stateResponse:c,applyCharacterEditing:d,internalPropsWithDefaults:f,stateResponse:{parsedSelectedSections:h,sectionOrder:g,state:m,clearValue:b,setCharacterQuery:v,setSelectedSections:j,updateValueFromValueStr:E},internalPropsWithDefaults:{disabled:S=!1,readOnly:w=!1}}=e,C=j2({manager:t,internalPropsWithDefaults:f,stateResponse:c}),k=Ol(),R=qe(L=>{S||!o.isReady()||(i(!0),h==="all"?k.start(0,()=>{const z=document.getSelection().getRangeAt(0).startOffset;if(z===0){j(g.startIndex);return}let q=0,B=0;for(;B<z&&q<m.sections.length;){const U=m.sections[q];q+=1,B+=`${U.startSeparator}${U.value||U.placeholder}${U.endSeparator}`.length}j(q-1)}):n?o.getRoot().contains(L.target)||j(g.startIndex):(i(!0),j(g.startIndex)))}),O=qe(L=>{if(!o.isReady()||h!=="all")return;const q=L.target.textContent??"";o.getRoot().innerHTML=m.sections.map(B=>`${B.startSeparator}${B.value||B.placeholder}${B.endSeparator}`).join(""),d0({focused:n,domGetters:o,stateResponse:c}),q.length===0||q.charCodeAt(0)===10?(b(),j("all")):q.length>1?E(q):(h==="all"&&j(0),d({keyPressed:q,sectionIndex:0}))}),I=qe(L=>{if(w||h!=="all"){L.preventDefault();return}const z=L.clipboardData.getData("text");L.preventDefault(),v(null),E(z)}),P=qe(()=>{if(n||S||!o.isReady())return;const L=Ds(o.getRoot());i(!0),o.getSectionIndexFromDOMElement(L)!=null||j(g.startIndex)}),W=qe(()=>{setTimeout(()=>{if(!o.isReady())return;const L=Ds(o.getRoot());!o.getRoot().contains(L)&&(i(!1),j(null))})});return{onKeyDown:C,onBlur:W,onFocus:P,onClick:R,onPaste:I,onInput:O,contentEditable:h==="all",tabIndex:f.disabled||h===0?-1:0}}function vH(e){const{manager:{internal_fieldValueManager:t},stateResponse:{areAllSectionsEmpty:n,state:i,updateValueFromValueStr:o}}=e,c=qe(f=>{o(f.target.value)});return{value:y.useMemo(()=>n?"":t.getV7HiddenInputValueFromSections(i.sections),[n,i.sections,t]),onChange:c}}function SH(e){const{stateResponse:{setSelectedSections:t},internalPropsWithDefaults:{disabled:n=!1}}=e,i=y.useCallback(o=>c=>{n||c.isDefaultPrevented()||t(o)},[n,t]);return y.useCallback(o=>({"data-sectionindex":o,onClick:i(o)}),[i])}function wH(e){const t=un(),n=La(),{focused:i,domGetters:o,stateResponse:c,applyCharacterEditing:d,manager:{internal_fieldValueManager:f},stateResponse:{parsedSelectedSections:h,sectionsValueBoundaries:g,state:m,value:b,clearActiveSection:v,setCharacterQuery:j,setSelectedSections:E,updateSectionValue:S,updateValueFromValueStr:w},internalPropsWithDefaults:{disabled:C=!1,readOnly:k=!1}}=e,R=h==="all",O=!R&&!C&&!k,I=qe(B=>{if(!o.isReady())return;const U=m.sections[B];o.getSectionContent(B).innerHTML=U.value||U.placeholder,d0({focused:i,domGetters:o,stateResponse:c})}),P=qe(B=>{if(!o.isReady())return;const U=B.target,re=U.textContent??"",H=o.getSectionIndexFromDOMElement(U),$=m.sections[H];if(k){I(H);return}if(re.length===0){if($.value===""){I(H);return}const N=B.nativeEvent.inputType;if(N==="insertParagraph"||N==="insertLineBreak"){I(H);return}I(H),v();return}d({keyPressed:re,sectionIndex:H}),I(H)}),W=qe(B=>{B.preventDefault()}),L=qe(B=>{if(B.preventDefault(),k||C||typeof h!="number")return;const U=m.sections[h],re=B.clipboardData.getData("text"),H=/^[a-zA-Z]+$/.test(re),$=/^[0-9]+$/.test(re),N=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(re);U.contentType==="letter"&&H||U.contentType==="digit"&&$||U.contentType==="digit-with-letter"&&N?(j(null),S({section:U,newSectionValue:re,shouldGoToNextSection:!0})):!H&&!$&&(j(null),w(re))}),z=qe(B=>{B.preventDefault(),B.dataTransfer.dropEffect="none"}),q=y.useCallback(B=>()=>{C||E(B)},[C,E]);return y.useCallback((B,U)=>{const re=g[B.type]({currentDate:f.getDateFromSection(b,B),contentType:B.contentType,format:B.format});return{onInput:P,onPaste:L,onMouseUp:W,onDragOver:z,onFocus:q(U),"aria-readonly":k,"aria-valuenow":CH(B,t),"aria-valuemin":re.minimum,"aria-valuemax":re.maximum,"aria-valuetext":B.value?jH(B,t):n.empty,"aria-label":n[B.type],"aria-disabled":C,tabIndex:!O||R||U>0?-1:0,contentEditable:!R&&!C&&!k,role:"spinbutton","data-range-position":B.dateName||void 0,spellCheck:O?!1:void 0,autoCapitalize:O?"none":void 0,autoCorrect:O?"off":void 0,children:B.value||B.placeholder,inputMode:B.contentType==="letter"?"text":"numeric"}},[g,R,C,k,O,n,t,P,L,W,z,q,f,b])}function jH(e,t){if(e.value)switch(e.type){case"month":{if(e.contentType==="digit"){const i=t.setMonth(t.date(),Number(e.value)-1);return t.isValid(i)?t.format(i,"month"):""}const n=t.parse(e.value,e.format);return n&&t.isValid(n)?t.format(n,"month"):void 0}case"day":if(e.contentType==="digit"){const n=t.setDate(t.startOfYear(t.date()),Number(e.value));return t.isValid(n)?t.format(n,"dayOfMonthFull"):""}return e.value;case"weekDay":return;default:return}}function CH(e,t){if(e.value)switch(e.type){case"weekDay":return e.contentType==="letter"?void 0:Number(e.value);case"meridiem":{const n=t.parse(`01:00 ${e.value}`,`${t.formats.hours12h}:${t.formats.minutes} ${e.format}`);return n?t.getHours(n)>=12?1:0:void 0}case"day":return e.contentType==="digit-with-letter"?parseInt(e.value,10):Number(e.value);case"month":{if(e.contentType==="digit")return Number(e.value);const n=t.parse(e.value,e.format);return n?t.getMonth(n)+1:void 0}default:return e.contentType!=="letter"?Number(e.value):void 0}}const TH=e=>{const{props:t,manager:n,skipContextFieldRefAssignment:i,manager:{valueType:o,internal_useOpenPickerButtonAriaLabel:c}}=e,{internalProps:d,forwardedProps:f}=c2(t,o),h=w2({manager:n,internalProps:d,skipContextFieldRefAssignment:i}),{sectionListRef:g,onBlur:m,onClick:b,onFocus:v,onInput:j,onPaste:E,onKeyDown:S,onClear:w,clearable:C}=f,{disabled:k=!1,readOnly:R=!1,autoFocus:O=!1,focused:I,unstableFieldRef:P}=h,W=y.useRef(null),L=Ys(g,W),z=y.useMemo(()=>({isReady:()=>W.current!=null,getRoot:()=>W.current.getRoot(),getSectionContainer:K=>W.current.getSectionContainer(K),getSectionContent:K=>W.current.getSectionContent(K),getSectionIndexFromDOMElement:K=>W.current.getSectionIndexFromDOMElement(K)}),[W]),q=S2({manager:n,internalPropsWithDefaults:h,forwardedProps:f}),{areAllSectionsEmpty:B,error:U,parsedSelectedSections:re,sectionOrder:H,state:$,value:N,clearValue:V,setSelectedSections:F}=q,X=v2({stateResponse:q}),oe=c(N),[ue,Te]=y.useState(!1);function De(K=0){if(k||!W.current||Qj(W)!=null)return;const Z=vx(K,$.sections);Te(!0),W.current.getSectionContent(Z).focus()}const ee=bH({manager:n,internalPropsWithDefaults:h,stateResponse:q,applyCharacterEditing:X,focused:ue,setFocused:Te,domGetters:z}),G=vH({manager:n,stateResponse:q}),ae=SH({stateResponse:q,internalPropsWithDefaults:h}),ve=wH({manager:n,stateResponse:q,applyCharacterEditing:X,internalPropsWithDefaults:h,domGetters:z,focused:ue}),te=qe(K=>{S?.(K),ee.onKeyDown(K)}),ye=qe(K=>{m?.(K),ee.onBlur(K)}),Se=qe(K=>{v?.(K),ee.onFocus(K)}),Y=qe(K=>{K.isDefaultPrevented()||(b?.(K),ee.onClick(K))}),ce=qe(K=>{E?.(K),ee.onPaste(K)}),Ae=qe(K=>{j?.(K),ee.onInput(K)}),ne=qe((K,...Z)=>{K.preventDefault(),w?.(K,...Z),V(),Kj(W)?F(H.startIndex):De(0)}),de=y.useMemo(()=>$.sections.map((K,Z)=>{const be=ve(K,Z);return{container:ae(Z),content:ve(K,Z),before:{children:K.startSeparator},after:{children:K.endSeparator,"data-range-position":K.isEndFormatSeparator?be["data-range-position"]:void 0}}}),[$.sections,ae,ve]);return y.useEffect(()=>{if(W.current==null)throw new Error(["MUI X: The `sectionListRef` prop has not been initialized by `PickersSectionList`","You probably tried to pass a component to the `textField` slot that contains an `<input />` element instead of a `PickersSectionList`.","","If you want to keep using an `<input />` HTML element for the editing, please add the `enableAccessibleFieldDOMStructure={false}` prop to your Picker or Field component:","","<DatePicker enableAccessibleFieldDOMStructure={false} slots={{ textField: MyCustomTextField }} />","","Learn more about the field accessible DOM structure on the MUI documentation: https://mui.com/x/react-date-pickers/fields/#fields-to-edit-a-single-element"].join(`
`));O&&!k&&W.current&&W.current.getSectionContent(H.startIndex).focus()},[]),Hi(()=>{if(!(!ue||!W.current)){if(re==="all")W.current.getRoot().focus();else if(typeof re=="number"){const K=W.current.getSectionContent(re);K&&K.focus()}}},[re,ue]),Hi(()=>{d0({focused:ue,domGetters:z,stateResponse:q})}),y.useImperativeHandle(P,()=>({getSections:()=>$.sections,getActiveSectionIndex:()=>Qj(W),setSelectedSections:K=>{if(k||!W.current)return;const Z=vx(K,$.sections);Te((Z==="all"?0:Z)!==null),F(K)},focusField:De,isFieldFocused:()=>Kj(W)})),ie({},f,ee,{onBlur:ye,onClick:Y,onFocus:Se,onInput:Ae,onPaste:ce,onKeyDown:te,onClear:ne},G,{error:U,clearable:!!(C&&!B&&!R&&!k),focused:I??ue,sectionListRef:L,enableAccessibleFieldDOMStructure:!0,elements:de,areAllSectionsEmpty:B,disabled:k,readOnly:R,autoFocus:O,openPickerAriaLabel:oe})};function Qj(e){const t=Ds(e.current?.getRoot());return!t||!e.current||!e.current.getRoot().contains(t)?null:e.current.getSectionIndexFromDOMElement(t)}function Kj(e){const t=Ds(e.current?.getRoot());return!!e.current&&e.current.getRoot().contains(t)}const Pl=e=>e.replace(/[\u2066\u2067\u2068\u2069]/g,""),kH=(e,t,n)=>{let i=0,o=n?1:0;const c=[];for(let d=0;d<e.length;d+=1){const f=e[d],h=a0(f,n?"input-rtl":"input-ltr",t),g=`${f.startSeparator}${h}${f.endSeparator}`,m=Pl(g).length,b=g.length,v=Pl(h),j=o+(v===""?0:h.indexOf(v[0]))+f.startSeparator.length,E=j+v.length;c.push(ie({},f,{start:i,end:i+m,startInInput:j,endInInput:E})),i+=m,o+=b}return c},EH=e=>{const t=Yi(),n=Ol(),i=Ol(),{props:o,manager:c,skipContextFieldRefAssignment:d,manager:{valueType:f,internal_valueManager:h,internal_fieldValueManager:g,internal_useOpenPickerButtonAriaLabel:m}}=e,{internalProps:b,forwardedProps:v}=c2(o,f),j=w2({manager:c,internalProps:b,skipContextFieldRefAssignment:d}),{onFocus:E,onClick:S,onPaste:w,onBlur:C,onKeyDown:k,onClear:R,clearable:O,inputRef:I,placeholder:P}=v,{readOnly:W=!1,disabled:L=!1,autoFocus:z=!1,focused:q,unstableFieldRef:B}=j,U=y.useRef(null),re=Ys(I,U),H=S2({manager:c,internalPropsWithDefaults:j,forwardedProps:v}),{activeSectionIndex:$,areAllSectionsEmpty:N,error:V,localizedDigits:F,parsedSelectedSections:X,sectionOrder:oe,state:ue,value:Te,clearValue:De,clearActiveSection:ee,setCharacterQuery:G,setSelectedSections:ae,setTempAndroidValueStr:ve,updateSectionValue:te,updateValueFromValueStr:ye,getSectionsFromValue:Se}=H,Y=v2({stateResponse:H}),ce=m(Te),Ae=y.useMemo(()=>kH(ue.sections,F,t),[ue.sections,F,t]);function ne(){const He=U.current.selectionStart??0;let Ze;He<=Ae[0].startInInput||He>=Ae[Ae.length-1].endInInput?Ze=1:Ze=Ae.findIndex(xt=>xt.startInInput-xt.startSeparator.length>He);const et=Ze===-1?Ae.length-1:Ze-1;ae(et)}function de(He=0){Ds(U.current)!==U.current&&(U.current?.focus(),ae(He))}const K=qe(He=>{E?.(He);const Ze=U.current;n.start(0,()=>{!Ze||Ze!==U.current||$==null&&(Ze.value.length&&Number(Ze.selectionEnd)-Number(Ze.selectionStart)===Ze.value.length?ae("all"):ne())})}),Z=qe((He,...Ze)=>{He.isDefaultPrevented()||(S?.(He,...Ze),ne())}),be=qe(He=>{if(w?.(He),He.preventDefault(),W||L)return;const Ze=He.clipboardData.getData("text");if(typeof X=="number"){const et=ue.sections[X],xt=/^[a-zA-Z]+$/.test(Ze),yt=/^[0-9]+$/.test(Ze),ct=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(Ze);if(et.contentType==="letter"&&xt||et.contentType==="digit"&&yt||et.contentType==="digit-with-letter"&&ct){G(null),te({section:et,newSectionValue:Ze,shouldGoToNextSection:!0});return}if(xt||yt)return}G(null),ye(Ze)}),ke=qe(He=>{C?.(He),ae(null)}),me=qe(He=>{if(W)return;const Ze=He.target.value;if(Ze===""){De();return}const et=He.nativeEvent.data,xt=et&&et.length>1,yt=xt?et:Ze,ct=Pl(yt);if(X==="all"&&ae($),$==null||xt){ye(xt?et:ct);return}let ot;if(X==="all"&&ct.length===1)ot=ct;else{const vt=Pl(g.getV6InputValueFromSections(Ae,F,t));let ft=-1,Jt=-1;for(let Gn=0;Gn<vt.length;Gn+=1)ft===-1&&vt[Gn]!==ct[Gn]&&(ft=Gn),Jt===-1&&vt[vt.length-Gn-1]!==ct[ct.length-Gn-1]&&(Jt=Gn);const jn=Ae[$];if(ft<jn.start||vt.length-Jt-1>jn.end)return;const sn=ct.length-vt.length+jn.end-Pl(jn.endSeparator||"").length;ot=ct.slice(jn.start+Pl(jn.startSeparator||"").length,sn)}if(ot.length===0){tV()&&ve(yt),ee();return}Y({keyPressed:ot,sectionIndex:$})}),we=qe((He,...Ze)=>{He.preventDefault(),R?.(He,...Ze),De(),Xj(U)?ae(oe.startIndex):de(0)}),J=j2({manager:c,internalPropsWithDefaults:j,stateResponse:H}),ge=qe(He=>{k?.(He),J(He)}),We=y.useMemo(()=>P!==void 0?P:g.getV6InputValueFromSections(Se(h.emptyValue),F,t),[P,g,Se,h.emptyValue,F,t]),_e=y.useMemo(()=>ue.tempValueStrAndroid??g.getV6InputValueFromSections(ue.sections,F,t),[ue.sections,g,ue.tempValueStrAndroid,F,t]);y.useEffect(()=>{U.current&&U.current===Ds(U.current)&&ae("all")},[]),Hi(()=>{function He(){if(!U.current)return;if(X==null){U.current.scrollLeft&&(U.current.scrollLeft=0);return}if(U.current!==Ds(U.current))return;const Ze=U.current.scrollTop;if(X==="all")U.current.select();else{const et=Ae[X],xt=et.type==="empty"?et.startInInput-et.startSeparator.length:et.startInInput,yt=et.type==="empty"?et.endInInput+et.endSeparator.length:et.endInInput;(xt!==U.current.selectionStart||yt!==U.current.selectionEnd)&&U.current===Ds(U.current)&&U.current.setSelectionRange(xt,yt),i.start(0,()=>{U.current&&U.current===Ds(U.current)&&U.current.selectionStart===U.current.selectionEnd&&(U.current.selectionStart!==xt||U.current.selectionEnd!==yt)&&He()})}U.current.scrollTop=Ze}He()});const Re=y.useMemo(()=>$==null||ue.sections[$].contentType==="letter"?"text":"numeric",[$,ue.sections]),Qe=!(U.current&&U.current===Ds(U.current))&&N;return y.useImperativeHandle(B,()=>({getSections:()=>ue.sections,getActiveSectionIndex:()=>{const He=U.current.selectionStart??0,Ze=U.current.selectionEnd??0;if(He===0&&Ze===0)return null;const et=He<=Ae[0].startInInput?1:Ae.findIndex(xt=>xt.startInInput-xt.startSeparator.length>He);return et===-1?Ae.length-1:et-1},setSelectedSections:He=>ae(He),focusField:de,isFieldFocused:()=>Xj(U)})),ie({},v,{error:V,clearable:!!(O&&!N&&!W&&!L),onBlur:ke,onClick:Z,onFocus:K,onPaste:be,onKeyDown:ge,onClear:we,inputRef:re,enableAccessibleFieldDOMStructure:!1,placeholder:We,inputMode:Re,autoComplete:"off",value:Qe?"":_e,onChange:me,focused:q,disabled:L,readOnly:W,autoFocus:z,openPickerAriaLabel:ce})};function Xj(e){return e.current===Ds(e.current)}const DH=e=>{const t=t2();return(e.props.enableAccessibleFieldDOMStructure??t?.enableAccessibleFieldDOMStructure??!0?TH:EH)(e)},MH=e=>{const t=AV(e);return DH({manager:t,props:e})};function f0(e){const{ownerState:t}=ys(),n=Yi();return y.useMemo(()=>ie({},t,{isFieldDisabled:e.disabled??!1,isFieldReadOnly:e.readOnly??!1,isFieldRequired:e.required??!1,fieldDirection:n?"rtl":"ltr"}),[t,e.disabled,e.readOnly,e.required,n])}const AH=_a(r.jsx("path",{d:"M7 10l5 5 5-5z"})),RH=_a(r.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"})),PH=_a(r.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),OH=_a(r.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}));_a(r.jsxs(y.Fragment,{children:[r.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),r.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}));_a(r.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}));_a(r.jsxs(y.Fragment,{children:[r.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),r.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}));const IH=_a(r.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));function WH(e){return as("MuiPickersTextField",e)}os("MuiPickersTextField",["root","focused","disabled","error","required"]);function _H(e){return as("MuiPickersInputBase",e)}const _l=os("MuiPickersInputBase",["root","focused","disabled","error","notchedOutline","sectionContent","sectionBefore","sectionAfter","adornedStart","adornedEnd","input","inputSizeSmall","activeBar"]);function zH(e){return as("MuiPickersSectionList",e)}const Tl=os("MuiPickersSectionList",["root","section","sectionContent"]),NH=["slots","slotProps","elements","sectionListRef","classes"],C2=Xe("div",{name:"MuiPickersSectionList",slot:"Root"})({direction:"ltr /*! @noflip */",outline:"none"}),T2=Xe("span",{name:"MuiPickersSectionList",slot:"Section"})({}),k2=Xe("span",{name:"MuiPickersSectionList",slot:"SectionSeparator"})({whiteSpace:"pre"}),E2=Xe("span",{name:"MuiPickersSectionList",slot:"SectionContent"})({outline:"none"}),LH=e=>Fn({root:["root"],section:["section"],sectionContent:["sectionContent"]},zH,e);function FH(e){const{slots:t,slotProps:n,element:i,classes:o}=e,{ownerState:c}=ys(),d=t?.section??T2,f=$t({elementType:d,externalSlotProps:n?.section,externalForwardedProps:i.container,className:o.section,ownerState:c}),h=t?.sectionContent??E2,g=$t({elementType:h,externalSlotProps:n?.sectionContent,externalForwardedProps:i.content,additionalProps:{suppressContentEditableWarning:!0},className:o.sectionContent,ownerState:c}),m=t?.sectionSeparator??k2,b=$t({elementType:m,externalSlotProps:n?.sectionSeparator,externalForwardedProps:i.before,ownerState:ie({},c,{separatorPosition:"before"})}),v=$t({elementType:m,externalSlotProps:n?.sectionSeparator,externalForwardedProps:i.after,ownerState:ie({},c,{separatorPosition:"after"})}),j=y.useRef(null),E=Ys(g.ref,j),S=w=>{const C=w.relatedTarget,k=w.currentTarget.closest(`.${Tl.root}`);if(k&&C instanceof Node&&k.contains(C)){w.stopPropagation();return}};return r.jsxs(d,ie({},f,{children:[r.jsx(m,ie({},b)),r.jsx(h,ie({},g,{ref:E,onBlur:S})),r.jsx(m,ie({},v))]}))}const BH=y.forwardRef(function(t,n){const i=On({props:t,name:"MuiPickersSectionList"}),{slots:o,slotProps:c,elements:d,sectionListRef:f,classes:h}=i,g=bt(i,NH),m=LH(h),{ownerState:b}=ys(),v=y.useRef(null),j=Ys(n,v),E=C=>{if(!v.current)throw new Error(`MUI X: Cannot call sectionListRef.${C} before the mount of the component.`);return v.current};y.useImperativeHandle(f,()=>({getRoot(){return E("getRoot")},getSectionContainer(C){return E("getSectionContainer").querySelector(`.${Tl.section}[data-sectionindex="${C}"]`)},getSectionContent(C){return E("getSectionContent").querySelector(`.${Tl.section}[data-sectionindex="${C}"] .${Tl.sectionContent}`)},getSectionIndexFromDOMElement(C){const k=E("getSectionIndexFromDOMElement");if(C==null||!k.contains(C))return null;let R=null;return C.classList.contains(Tl.section)?R=C:C.classList.contains(Tl.sectionContent)&&(R=C.parentElement),R==null?null:Number(R.dataset.sectionindex)}}));const S=o?.root??C2,w=$t({elementType:S,externalSlotProps:c?.root,externalForwardedProps:g,additionalProps:{ref:j,suppressContentEditableWarning:!0},className:m.root,ownerState:b});return r.jsx(S,ie({},w,{children:w.contentEditable?d.map(({content:C,before:k,after:R})=>`${k.children}${C.children}${R.children}`).join(""):r.jsx(y.Fragment,{children:d.map((C,k)=>r.jsx(FH,{slots:o,slotProps:c,element:C,classes:m},k))})}))}),D2=y.createContext(null),Gh=()=>{const e=y.useContext(D2);if(e==null)throw new Error(["MUI X: The `usePickerTextFieldOwnerState` can only be called in components that are used inside a PickerTextField component"].join(`
`));return e},VH=["elements","areAllSectionsEmpty","defaultValue","label","value","onChange","id","autoFocus","endAdornment","startAdornment","renderSuffix","slots","slotProps","contentEditable","tabIndex","onInput","onPaste","onKeyDown","fullWidth","name","readOnly","inputProps","inputRef","sectionListRef","onFocus","onBlur","classes","ownerState"],HH=e=>Math.round(e*1e5)/1e5,Qh=Xe("div",{name:"MuiPickersInputBase",slot:"Root"})(({theme:e})=>ie({},e.typography.body1,{color:(e.vars||e).palette.text.primary,cursor:"text",padding:0,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",boxSizing:"border-box",letterSpacing:`${HH(.15/16)}em`,variants:[{props:{isInputInFullWidth:!0},style:{width:"100%"}}]})),h0=Xe(C2,{name:"MuiPickersInputBase",slot:"SectionsContainer"})(({theme:e})=>({padding:"4px 0 5px",fontFamily:e.typography.fontFamily,fontSize:"inherit",lineHeight:"1.4375em",flexGrow:1,outline:"none",display:"flex",flexWrap:"nowrap",overflow:"hidden",letterSpacing:"inherit",width:"182px",variants:[{props:{fieldDirection:"rtl"},style:{justifyContent:"end"}},{props:{inputSize:"small"},style:{paddingTop:1}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0},style:{color:"currentColor",opacity:0}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0,inputHasLabel:!1},style:e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:e.palette.mode==="light"?.42:.5}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0,inputHasLabel:!0,isLabelShrunk:!0},style:e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:e.palette.mode==="light"?.42:.5}}]})),UH=Xe(T2,{name:"MuiPickersInputBase",slot:"Section"})(({theme:e})=>({fontFamily:e.typography.fontFamily,fontSize:"inherit",letterSpacing:"inherit",lineHeight:"1.4375em",display:"inline-block",whiteSpace:"nowrap"})),$H=Xe(E2,{name:"MuiPickersInputBase",slot:"SectionContent",overridesResolver:(e,t)=>t.content})(({theme:e})=>({fontFamily:e.typography.fontFamily,lineHeight:"1.4375em",letterSpacing:"inherit",width:"fit-content",outline:"none"})),qH=Xe(k2,{name:"MuiPickersInputBase",slot:"Separator"})(()=>({whiteSpace:"pre",letterSpacing:"inherit"})),YH=Xe("input",{name:"MuiPickersInputBase",slot:"Input",overridesResolver:(e,t)=>t.hiddenInput})(ie({},PR)),GH=Xe("div",{name:"MuiPickersInputBase",slot:"ActiveBar"})(({theme:e,ownerState:t})=>({display:"none",position:"absolute",height:2,bottom:2,borderTopLeftRadius:2,borderTopRightRadius:2,transition:e.transitions.create(["width","left"],{duration:e.transitions.duration.shortest}),backgroundColor:(e.vars||e).palette.primary.main,'[data-active-range-position="start"] &, [data-active-range-position="end"] &':{display:"block"},'[data-active-range-position="start"] &':{left:t.sectionOffsets[0]},'[data-active-range-position="end"] &':{left:t.sectionOffsets[1]}})),QH=(e,t)=>{const{isFieldFocused:n,isFieldDisabled:i,isFieldReadOnly:o,hasFieldError:c,inputSize:d,isInputInFullWidth:f,inputColor:h,hasStartAdornment:g,hasEndAdornment:m}=t,b={root:["root",n&&!i&&"focused",i&&"disabled",o&&"readOnly",c&&"error",f&&"fullWidth",`color${RR(h)}`,d==="small"&&"inputSizeSmall",g&&"adornedStart",m&&"adornedEnd"],notchedOutline:["notchedOutline"],input:["input"],sectionsContainer:["sectionsContainer"],sectionContent:["sectionContent"],sectionBefore:["sectionBefore"],sectionAfter:["sectionAfter"],activeBar:["activeBar"]};return Fn(b,_H,e)};function Zj(e,t,n,i){if(e.content.id){const o=t.current?.querySelectorAll(`[data-sectionindex="${n}"] [data-range-position="${i}"]`);if(o)return Array.from(o).reduce((c,d)=>c+d.offsetWidth,0)}return 0}function KH(e,t){let n=0;if(t.current?.getAttribute("data-active-range-position")==="end")for(let o=e.length-1;o>=e.length/2;o-=1)n+=Zj(e[o],t,o,"end");else for(let o=0;o<e.length/2;o+=1)n+=Zj(e[o],t,o,"start");return{activeBarWidth:n,sectionOffsets:[t.current?.querySelector('[data-sectionindex="0"]')?.offsetLeft||0,t.current?.querySelector(`[data-sectionindex="${e.length/2}"]`)?.offsetLeft||0]}}const p0=y.forwardRef(function(t,n){const i=On({props:t,name:"MuiPickersInputBase"}),{elements:o,areAllSectionsEmpty:c,value:d,onChange:f,id:h,endAdornment:g,startAdornment:m,renderSuffix:b,slots:v,slotProps:j,contentEditable:E,tabIndex:S,onInput:w,onPaste:C,onKeyDown:k,name:R,readOnly:O,inputProps:I,inputRef:P,sectionListRef:W,onFocus:L,onBlur:z,classes:q,ownerState:B}=i,U=bt(i,VH),re=Gh(),H=y.useRef(null),$=y.useRef(null),N=y.useRef([]),V=Ys(n,H),F=Ys(I?.ref,P),X=EC();if(!X)throw new Error("MUI X: PickersInputBase should always be used inside a PickersTextField component");const oe=B??re,ue=Se=>{X.onFocus?.(Se),L?.(Se)},Te=Se=>{ue(Se)},De=Se=>{if(k?.(Se),Se.key==="Enter"&&!Se.defaultMuiPrevented){if(H.current?.dataset.multiInput)return;const Y=H.current?.closest("form"),ce=Y?.querySelector('[type="submit"]');if(!Y||!ce)return;Se.preventDefault(),Y.requestSubmit(ce)}},ee=Se=>{X.onBlur?.(Se),z?.(Se)};y.useEffect(()=>{X&&X.setAdornedStart(!!m)},[X,m]),y.useEffect(()=>{X&&(c?X.onEmpty():X.onFilled())},[X,c]);const G=QH(q,oe),ae=v?.root||Qh,ve=$t({elementType:ae,externalSlotProps:j?.root,externalForwardedProps:U,additionalProps:{"aria-invalid":X.error,ref:V},className:G.root,ownerState:oe}),te=v?.input||h0,ye=o.some(Se=>Se.content["data-range-position"]!==void 0);return y.useEffect(()=>{if(!ye||!oe.isPickerOpen)return;const{activeBarWidth:Se,sectionOffsets:Y}=KH(o,H);N.current=[Y[0],Y[1]],$.current&&($.current.style.width=`${Se}px`)},[o,ye,oe.isPickerOpen]),r.jsxs(ae,ie({},ve,{children:[m,r.jsx(BH,{sectionListRef:W,elements:o,contentEditable:E,tabIndex:S,className:G.sectionsContainer,onFocus:ue,onBlur:ee,onInput:w,onPaste:C,onKeyDown:De,slots:{root:te,section:UH,sectionContent:$H,sectionSeparator:qH},slotProps:{root:ie({},j?.input,{ownerState:oe}),sectionContent:{className:_l.sectionContent},sectionSeparator:({separatorPosition:Se})=>({className:Se==="before"?_l.sectionBefore:_l.sectionAfter})}}),g,b?b(ie({},X)):null,r.jsx(YH,ie({name:R,className:G.input,value:d,onChange:f,id:h,"aria-hidden":"true",tabIndex:-1,readOnly:O,required:X.required,disabled:X.disabled,onFocus:Te},I,{ref:F})),ye&&r.jsx(GH,{className:G.activeBar,ref:$,ownerState:{sectionOffsets:N.current}})]}))});function XH(e){return as("MuiPickersOutlinedInput",e)}const Fr=ie({},_l,os("MuiPickersOutlinedInput",["root","notchedOutline","input"])),ZH=["children","className","label","notched","shrink"],JH=Xe("fieldset",{name:"MuiPickersOutlinedInput",slot:"NotchedOutline"})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%",borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),Jj=Xe("span")(({theme:e})=>({fontFamily:e.typography.fontFamily,fontSize:"inherit"})),e8=Xe("legend",{shouldForwardProp:e=>Do(e)&&e!=="notched"})(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:{inputHasLabel:!1},style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:{inputHasLabel:!0},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:{inputHasLabel:!0,notched:!0},style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]}));function t8(e){const{className:t,label:n,notched:i}=e,o=bt(e,ZH),c=Gh();return r.jsx(JH,ie({"aria-hidden":!0,className:t},o,{ownerState:c,children:r.jsx(e8,{ownerState:c,notched:i,children:n?r.jsx(Jj,{children:n}):r.jsx(Jj,{className:"notranslate",children:""})})}))}const n8=["label","autoFocus","ownerState","classes","notched"],s8=Xe(Qh,{name:"MuiPickersOutlinedInput",slot:"Root"})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{padding:"0 14px",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Fr.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Fr.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${Fr.focused} .${Fr.notchedOutline}`]:{borderStyle:"solid",borderWidth:2},[`&.${Fr.disabled}`]:{[`& .${Fr.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled},"*":{color:(e.vars||e).palette.action.disabled}},[`&.${Fr.error} .${Fr.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},variants:Object.keys((e.vars??e).palette).filter(n=>(e.vars??e).palette[n]?.main??!1).map(n=>({props:{inputColor:n},style:{[`&.${Fr.focused}:not(.${Fr.error}) .${Fr.notchedOutline}`]:{borderColor:(e.vars||e).palette[n].main}}}))}}),r8=Xe(h0,{name:"MuiPickersOutlinedInput",slot:"SectionsContainer"})({padding:"16.5px 0",variants:[{props:{inputSize:"small"},style:{padding:"8.5px 0"}}]}),i8=e=>{const n=Fn({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},XH,e);return ie({},e,n)},M2=y.forwardRef(function(t,n){const i=On({props:t,name:"MuiPickersOutlinedInput"}),{label:o,classes:c,notched:d}=i,f=bt(i,n8),h=EC(),g=i8(c);return r.jsx(p0,ie({slots:{root:s8,input:r8},renderSuffix:m=>r.jsx(t8,{shrink:!!(d||m.adornedStart||m.focused||m.filled),notched:!!(d||m.adornedStart||m.focused||m.filled),className:g.notchedOutline,label:o!=null&&o!==""&&h?.required?r.jsxs(y.Fragment,{children:[o,"","*"]}):o})},f,{label:o,classes:g,ref:n}))});M2.muiName="Input";function a8(e){return as("MuiPickersFilledInput",e)}const co=ie({},_l,os("MuiPickersFilledInput",["root","underline","input"])),o8=["label","autoFocus","disableUnderline","hiddenLabel","classes"],l8=Xe(Qh,{name:"MuiPickersFilledInput",slot:"Root",shouldForwardProp:e=>Do(e)&&e!=="disableUnderline"})(({theme:e})=>{const t=e.palette.mode==="light",n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",i=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",c=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:i,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:i}},[`&.${co.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:i},[`&.${co.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:c},variants:[...Object.keys((e.vars??e).palette).filter(d=>(e.vars??e).palette[d].main).map(d=>({props:{inputColor:d,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[d]?.main}`}}})),{props:{disableUnderline:!1},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${co.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${co.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${co.disabled}, .${co.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${co.disabled}:before`]:{borderBottomStyle:"dotted"}}},{props:{hasStartAdornment:!0},style:{paddingLeft:12}},{props:{hasEndAdornment:!0},style:{paddingRight:12}}]}}),c8=Xe(h0,{name:"MuiPickersFilledInput",slot:"sectionsContainer",shouldForwardProp:e=>Do(e)&&e!=="hiddenLabel"})({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,variants:[{props:{inputSize:"small"},style:{paddingTop:21,paddingBottom:4}},{props:{hasStartAdornment:!0},style:{paddingLeft:0}},{props:{hasEndAdornment:!0},style:{paddingRight:0}},{props:{hiddenLabel:!0},style:{paddingTop:16,paddingBottom:17}},{props:{hiddenLabel:!0,inputSize:"small"},style:{paddingTop:8,paddingBottom:9}}]}),u8=(e,t)=>{const{inputHasUnderline:n}=t,o=Fn({root:["root",n&&"underline"],input:["input"]},a8,e);return ie({},e,o)},A2=y.forwardRef(function(t,n){const i=On({props:t,name:"MuiPickersFilledInput"}),{label:o,disableUnderline:c=!1,hiddenLabel:d=!1,classes:f}=i,h=bt(i,o8),g=Gh(),m=ie({},g,{inputHasUnderline:!c}),b=u8(f,m);return r.jsx(p0,ie({slots:{root:l8,input:c8},slotProps:{root:{disableUnderline:c},input:{hiddenLabel:d}}},h,{label:o,classes:b,ref:n,ownerState:m}))});A2.muiName="Input";function d8(e){return as("MuiPickersFilledInput",e)}const ru=ie({},_l,os("MuiPickersInput",["root","underline","input"])),f8=["label","autoFocus","disableUnderline","ownerState","classes"],h8=Xe(Qh,{name:"MuiPickersInput",slot:"Root",shouldForwardProp:e=>Do(e)&&e!=="disableUnderline"})(({theme:e})=>{let n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(n=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),{"label + &":{marginTop:16},variants:[...Object.keys((e.vars??e).palette).filter(i=>(e.vars??e).palette[i].main).map(i=>({props:{inputColor:i,inputHasUnderline:!0},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[i].main}`}}})),{props:{inputHasUnderline:!0},style:{"&::after":{background:"red",left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${ru.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${ru.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${ru.disabled}, .${ru.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${ru.disabled}:before`]:{borderBottomStyle:"dotted"}}}]}}),p8=(e,t)=>{const{inputHasUnderline:n}=t,o=Fn({root:["root",!n&&"underline"],input:["input"]},d8,e);return ie({},e,o)},R2=y.forwardRef(function(t,n){const i=On({props:t,name:"MuiPickersInput"}),{label:o,disableUnderline:c=!1,classes:d}=i,f=bt(i,f8),h=Gh(),g=ie({},h,{inputHasUnderline:!c}),m=p8(d,g);return r.jsx(p0,ie({slots:{root:h8},slotProps:{root:{disableUnderline:c}}},f,{ownerState:g,label:o,classes:m,ref:n}))});R2.muiName="Input";const m8=["onFocus","onBlur","className","classes","color","disabled","error","variant","required","hiddenLabel","InputProps","inputProps","inputRef","sectionListRef","elements","areAllSectionsEmpty","onClick","onKeyDown","onKeyUp","onPaste","onInput","endAdornment","startAdornment","tabIndex","contentEditable","focused","value","onChange","fullWidth","id","name","helperText","FormHelperTextProps","label","InputLabelProps","data-active-range-position"],g8={standard:R2,filled:A2,outlined:M2},x8=Xe(Xt,{name:"MuiPickersTextField",slot:"Root"})({maxWidth:"100%"}),y8=(e,t)=>{const{isFieldFocused:n,isFieldDisabled:i,isFieldRequired:o}=t;return Fn({root:["root",n&&!i&&"focused",i&&"disabled",o&&"required"]},WH,e)},P2=y.forwardRef(function(t,n){const i=On({props:t,name:"MuiPickersTextField"}),{onFocus:o,onBlur:c,className:d,classes:f,color:h="primary",disabled:g=!1,error:m=!1,variant:b="outlined",required:v=!1,hiddenLabel:j=!1,InputProps:E,inputProps:S,inputRef:w,sectionListRef:C,elements:k,areAllSectionsEmpty:R,onClick:O,onKeyDown:I,onKeyUp:P,onPaste:W,onInput:L,endAdornment:z,startAdornment:q,tabIndex:B,contentEditable:U,focused:re,value:H,onChange:$,fullWidth:N,id:V,name:F,helperText:X,FormHelperTextProps:oe,label:ue,InputLabelProps:Te,"data-active-range-position":De}=i,ee=bt(i,m8),G=y.useRef(null),ae=Ys(n,G),ve=Fx(V),te=X&&ve?`${ve}-helper-text`:void 0,ye=ue&&ve?`${ve}-label`:void 0,Se=f0({disabled:i.disabled,required:i.required,readOnly:E?.readOnly}),Y=y.useMemo(()=>ie({},Se,{isFieldValueEmpty:R,isFieldFocused:re??!1,hasFieldError:m??!1,inputSize:i.size??"medium",inputColor:h??"primary",isInputInFullWidth:N??!1,hasStartAdornment:!!(q??E?.startAdornment),hasEndAdornment:!!(z??E?.endAdornment),inputHasLabel:!!ue,isLabelShrunk:!!Te?.shrink}),[Se,R,re,m,i.size,h,N,q,z,E?.startAdornment,E?.endAdornment,ue,Te?.shrink]),ce=y8(f,Y),Ae=g8[b],ne={};return b==="outlined"?(Te&&typeof Te.shrink<"u"&&(ne.notched=Te.shrink),ne.label=ue):b==="filled"&&(ne.hiddenLabel=j),r.jsx(D2.Provider,{value:Y,children:r.jsxs(x8,ie({className:xs(ce.root,d),ref:ae,focused:re,disabled:g,variant:b,error:m,color:h,fullWidth:N,required:v,ownerState:Y},ee,{children:[ue!=null&&ue!==""&&r.jsx(En,ie({htmlFor:ve,id:ye},Te,{children:ue})),r.jsx(Ae,ie({elements:k,areAllSectionsEmpty:R,onClick:O,onKeyDown:I,onKeyUp:P,onInput:L,onPaste:W,onFocus:o,onBlur:c,endAdornment:z,startAdornment:q,tabIndex:B,contentEditable:U,value:H,onChange:$,id:ve,fullWidth:N,inputProps:S,inputRef:w,sectionListRef:C,label:ue,name:F,role:"group","aria-labelledby":ye,"aria-describedby":te,"aria-live":te?"polite":void 0,"data-active-range-position":De},ne,E)),X&&r.jsx(OR,ie({id:te},oe,{children:X}))]}))})}),b8=["enableAccessibleFieldDOMStructure"],v8=["InputProps","readOnly","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],S8=["onPaste","onKeyDown","inputMode","readOnly","InputProps","inputProps","inputRef","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],w8=["ownerState"],j8=["ownerState"],C8=["ownerState"],T8=["ownerState"],k8=["InputProps","inputProps"],Ag=()=>{},E8=e=>{let{enableAccessibleFieldDOMStructure:t}=e,n=bt(e,b8);if(t){const{InputProps:k,readOnly:R,onClear:O,clearable:I,clearButtonPosition:P,openPickerButtonPosition:W,openPickerAriaLabel:L}=n,z=bt(n,v8),q=ja>=6&&z?.slotProps?.input?Mu(z?.slotProps?.input,k):Ag;return{clearable:I,onClear:O,clearButtonPosition:P,openPickerButtonPosition:W,openPickerAriaLabel:L,textFieldProps:ie({},z,ja>=6&&z?.slotProps?.input?{slotProps:ie({},z?.slotProps,{input:B=>ie({},ui(q,B),{readOnly:R})})}:{InputProps:ie({},k??{},{readOnly:R})})}}const{onPaste:i,onKeyDown:o,inputMode:c,readOnly:d,InputProps:f,inputProps:h,inputRef:g,onClear:m,clearable:b,clearButtonPosition:v,openPickerButtonPosition:j,openPickerAriaLabel:E}=n,S=bt(n,S8),w=ja>=6&&S?.slotProps?.input?Mu(S?.slotProps?.input,f):Ag,C=ja>=6&&S?.slotProps?.htmlInput?Mu(S?.slotProps?.htmlInput,h):Ag;return{clearable:b,onClear:m,clearButtonPosition:v,openPickerButtonPosition:j,openPickerAriaLabel:E,textFieldProps:ie({},S,ja>=6&&(S?.slotProps?.input||S?.slotProps?.htmlInput)?{slotProps:ie({},S?.slotProps,{input:k=>ie({},ui(w,k),{readOnly:d}),htmlInput:k=>ie({},ui(C,k),{inputMode:c,onPaste:i,onKeyDown:o,ref:g})})}:{InputProps:ie({},f??{},{readOnly:d}),inputProps:ie({},h??{},{inputMode:c,onPaste:i,onKeyDown:o,ref:g})})}},m0=y.createContext({slots:{},slotProps:{},inputRef:void 0});function D8(e){const{fieldResponse:t,defaultOpenPickerIcon:n}=e,i=La(),o=c0(),c=y.useContext(m0),{textFieldProps:d,onClear:f,clearable:h,openPickerAriaLabel:g,clearButtonPosition:m="end",openPickerButtonPosition:b="end"}=E8(t),v=f0(d),j=qe(oe=>{oe.preventDefault(),o?.setOpen(ue=>!ue)}),E=o?o.triggerStatus:"hidden",S=h?m:null,w=E!=="hidden"?b:null,C=c.slots.textField??(t.enableAccessibleFieldDOMStructure===!1?Je:P2),k=c.slots.inputAdornment??hi,R=$t({elementType:k,externalSlotProps:c.slotProps.inputAdornment,additionalProps:{position:"start"},ownerState:ie({},v,{position:"start"})}),O=bt(R,w8),I=$t({elementType:k,externalSlotProps:c.slotProps.inputAdornment,additionalProps:{position:"end"},ownerState:ie({},v,{position:"end"})}),P=bt(I,j8),W=c.slots.openPickerButton??Ie,L=$t({elementType:W,externalSlotProps:c.slotProps.openPickerButton,additionalProps:{disabled:E==="disabled",onClick:j,"aria-label":g,edge:d.variant!=="standard"?w:!1},ownerState:v}),z=bt(L,C8),q=c.slots.openPickerIcon??n,B=$t({elementType:q,externalSlotProps:c.slotProps.openPickerIcon,ownerState:v}),U=c.slots.clearButton??Ie,re=$t({elementType:U,externalSlotProps:c.slotProps.clearButton,className:"clearButton",additionalProps:{title:i.fieldClearLabel,tabIndex:-1,onClick:f,disabled:t.disabled||t.readOnly,edge:d.variant!=="standard"&&S!==w?S:!1},ownerState:v}),H=bt(re,T8),$=c.slots.clearIcon??IH,N=$t({elementType:$,externalSlotProps:c.slotProps.clearIcon,additionalProps:{fontSize:"small"},ownerState:v});d.ref=Ys(d.ref,o?.rootRef);const V={},F=ui((ja>=6&&d?.slotProps?.input)??d.InputProps,v);o&&(V.ref=o.triggerRef),!F?.startAdornment&&(S==="start"||w==="start")&&(V.startAdornment=r.jsxs(k,ie({},O,{children:[w==="start"&&r.jsx(W,ie({},z,{children:r.jsx(q,ie({},B))})),S==="start"&&r.jsx(U,ie({},H,{children:r.jsx($,ie({},N))}))]}))),!F?.endAdornment&&(S==="end"||w==="end")&&(V.endAdornment=r.jsxs(k,ie({},P,{children:[S==="end"&&r.jsx(U,ie({},H,{children:r.jsx($,ie({},N))})),w==="end"&&r.jsx(W,ie({},z,{children:r.jsx(q,ie({},B))}))]}))),!V?.endAdornment&&!V?.startAdornment&&c.slots.inputAdornment&&(V.endAdornment=r.jsx(k,ie({},P))),S!=null&&(d.sx=[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(d.sx)?d.sx:[d.sx]]);const X=ja>=6&&d?.slotProps?.input?ui(Mu(F,V),v):ie({},F,V);return d.inputProps=ja>=6&&d?.slotProps?.htmlInput?ui(d.slotProps.htmlInput,v):d.inputProps,delete d?.slotProps?.input,t.enableAccessibleFieldDOMStructure&&delete d?.slotProps,r.jsx(C,ie({},d,{InputProps:X}))}function Mu(e,t){return e?t?n=>ie({},ui(t,n),ui(e,n)):e:t}function M8(e){const{ref:t,externalForwardedProps:n,slotProps:i}=e,o=y.useContext(m0),c=c0(),d=f0(n),{InputProps:f,inputProps:h}=n,g=bt(n,k8),m=$t({elementType:P2,externalSlotProps:Mu(o.slotProps.textField,i?.textField),externalForwardedProps:g,additionalProps:{ref:t,sx:c?.rootSx,label:c?.label,name:c?.name,className:c?.rootClassName,inputRef:o.inputRef},ownerState:d});return m.inputProps=ie({},h,m.inputProps),m.InputProps=ie({},f,m.InputProps),m}function A8(e){const{slots:t={},slotProps:n={},inputRef:i,children:o}=e,c=y.useMemo(()=>({inputRef:i,slots:{openPickerButton:t.openPickerButton,openPickerIcon:t.openPickerIcon,textField:t.textField,inputAdornment:t.inputAdornment,clearIcon:t.clearIcon,clearButton:t.clearButton},slotProps:{openPickerButton:n.openPickerButton,openPickerIcon:n.openPickerIcon,textField:n.textField,inputAdornment:n.inputAdornment,clearIcon:n.clearIcon,clearButton:n.clearButton}}),[i,t.openPickerButton,t.openPickerIcon,t.textField,t.inputAdornment,t.clearIcon,t.clearButton,n.openPickerButton,n.openPickerIcon,n.textField,n.inputAdornment,n.clearIcon,n.clearButton]);return r.jsx(m0.Provider,{value:c,children:o})}const R8=["slots","slotProps"],O2=y.forwardRef(function(t,n){const i=On({props:t,name:"MuiDateField"}),{slots:o,slotProps:c}=i,d=bt(i,R8),f=M8({slotProps:c,ref:n,externalForwardedProps:d}),h=MH(f);return r.jsx(A8,{slots:o,slotProps:c,inputRef:d.inputRef,children:r.jsx(D8,{fieldResponse:h,defaultOpenPickerIcon:OH})})}),I2=({shouldDisableDate:e,shouldDisableMonth:t,shouldDisableYear:n,minDate:i,maxDate:o,disableFuture:c,disablePast:d,timezone:f})=>{const h=un();return y.useCallback(g=>yd({adapter:h,value:g,timezone:f,props:{shouldDisableDate:e,shouldDisableMonth:t,shouldDisableYear:n,minDate:i,maxDate:o,disableFuture:c,disablePast:d}})!==null,[h,e,t,n,i,o,c,d,f])},P8=(e,t)=>(n,i)=>{switch(i.type){case"setVisibleDate":return ie({},n,{slideDirection:i.direction,currentMonth:i.month,isMonthSwitchingAnimating:!t.isSameMonth(i.month,n.currentMonth)&&!e&&!i.skipAnimation,focusedDay:i.focusedDay});case"changeMonthTimezone":{const o=i.newTimezone;if(t.getTimezone(n.currentMonth)===o)return n;let c=t.setTimezone(n.currentMonth,o);return t.getMonth(c)!==t.getMonth(n.currentMonth)&&(c=t.setMonth(c,t.getMonth(n.currentMonth))),ie({},n,{currentMonth:c})}case"finishMonthSwitchingAnimation":return ie({},n,{isMonthSwitchingAnimating:!1});default:throw new Error("missing support")}},O8=e=>{const{value:t,referenceDate:n,disableFuture:i,disablePast:o,maxDate:c,minDate:d,onMonthChange:f,onYearChange:h,reduceAnimations:g,shouldDisableDate:m,timezone:b,getCurrentMonthFromVisibleDate:v}=e,j=un(),E=y.useRef(P8(!!g,j)).current,S=y.useMemo(()=>mi.getInitialReferenceValue({value:t,adapter:j,timezone:b,props:e,referenceDate:n,granularity:ai.day}),[n,b]),[w,C]=y.useReducer(E,{isMonthSwitchingAnimating:!1,focusedDay:S,currentMonth:j.startOfMonth(S),slideDirection:"left"}),k=I2({shouldDisableDate:m,minDate:d,maxDate:c,disableFuture:i,disablePast:o,timezone:b});y.useEffect(()=>{C({type:"changeMonthTimezone",newTimezone:j.getTimezone(S)})},[S,j]);const R=qe(({target:I,reason:P})=>{if(P==="cell-interaction"&&w.focusedDay!=null&&j.isSameDay(I,w.focusedDay))return;const W=P==="cell-interaction";let L,z;if(P==="cell-interaction")L=v(I,w.currentMonth),z=I;else if(L=j.isSameMonth(I,w.currentMonth)?w.currentMonth:j.startOfMonth(I),z=I,k(z)){const U=j.startOfMonth(I),re=j.endOfMonth(I);z=Ku({adapter:j,date:z,minDate:j.isBefore(d,U)?U:d,maxDate:j.isAfter(c,re)?re:c,disablePast:o,disableFuture:i,isDateDisabled:k,timezone:b})}const q=!j.isSameMonth(w.currentMonth,L),B=!j.isSameYear(w.currentMonth,L);q&&f?.(L),B&&h?.(j.startOfYear(L)),C({type:"setVisibleDate",month:L,direction:j.isAfterDay(L,w.currentMonth)?"left":"right",focusedDay:w.focusedDay!=null&&z!=null&&j.isSameDay(z,w.focusedDay)?w.focusedDay:z,skipAnimation:W})}),O=y.useCallback(()=>{C({type:"finishMonthSwitchingAnimation"})},[]);return{referenceDate:S,calendarState:w,setVisibleDate:R,isDateDisabled:k,onMonthSwitchingAnimationEnd:O}},I8=e=>as("MuiPickersFadeTransitionGroup",e);os("MuiPickersFadeTransitionGroup",["root"]);const W8=["children"],_8=e=>Fn({root:["root"]},I8,e),z8=Xe(DC,{name:"MuiPickersFadeTransitionGroup",slot:"Root"})({display:"block",position:"relative"});function W2(e){const t=On({props:e,name:"MuiPickersFadeTransitionGroup"}),{className:n,reduceAnimations:i,transKey:o,classes:c}=t,{children:d}=t,f=bt(t,W8),h=_8(c),g=Ia();return i?d:r.jsx(z8,{className:xs(h.root,n),ownerState:f,children:r.jsx(Eh,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:g.transitions.duration.enteringScreen,enter:g.transitions.duration.enteringScreen,exit:0},children:d},o)})}function N8(e){return as("MuiPickersDay",e)}const uo=os("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]);function _2(e){const{disabled:t,selected:n,today:i,outsideCurrentMonth:o,day:c,disableMargin:d,disableHighlightToday:f,showDaysOutsideCurrentMonth:h}=e,g=un(),{ownerState:m}=ys();return y.useMemo(()=>ie({},m,{day:c,isDaySelected:n??!1,isDayDisabled:t??!1,isDayCurrent:i??!1,isDayOutsideMonth:o??!1,isDayStartOfWeek:g.isSameDay(c,g.startOfWeek(c)),isDayEndOfWeek:g.isSameDay(c,g.endOfWeek(c)),disableMargin:d??!1,disableHighlightToday:f??!1,showDaysOutsideCurrentMonth:h??!1}),[g,m,c,n,t,i,o,d,f,h])}const L8=["autoFocus","className","classes","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","children","isFirstVisibleCell","isLastVisibleCell","day","selected","disabled","today","outsideCurrentMonth","disableMargin","disableHighlightToday","showDaysOutsideCurrentMonth"],F8=(e,t)=>{const{isDaySelected:n,isDayDisabled:i,isDayCurrent:o,isDayOutsideMonth:c,disableMargin:d,disableHighlightToday:f,showDaysOutsideCurrentMonth:h}=t,g=c&&!h;return Fn({root:["root",n&&!g&&"selected",i&&"disabled",!d&&"dayWithMargin",!f&&o&&"today",c&&h&&"dayOutsideMonth",g&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},N8,e)},z2=({theme:e})=>ie({},e.typography.caption,{width:Xu,height:Xu,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:e.transitions.create("background-color",{duration:e.transitions.duration.short}),color:(e.vars||e).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ci(e.palette.primary.main,e.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.focusOpacity})`:ci(e.palette.primary.main,e.palette.action.focusOpacity),[`&.${uo.selected}`]:{willChange:"background-color",backgroundColor:(e.vars||e).palette.primary.dark}},[`&.${uo.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,fontWeight:e.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(e.vars||e).palette.primary.dark}},[`&.${uo.disabled}:not(.${uo.selected})`]:{color:(e.vars||e).palette.text.disabled},[`&.${uo.disabled}&.${uo.selected}`]:{opacity:.6},variants:[{props:{disableMargin:!1},style:{margin:`0 ${qh}px`}},{props:{isDayOutsideMonth:!0,showDaysOutsideCurrentMonth:!0},style:{color:(e.vars||e).palette.text.secondary}},{props:{disableHighlightToday:!1,isDayCurrent:!0},style:{[`&:not(.${uo.selected})`]:{border:`1px solid ${(e.vars||e).palette.text.secondary}`}}}]}),N2=(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableMargin&&t.dayWithMargin,!n.disableHighlightToday&&n.isDayCurrent&&t.today,!n.isDayOutsideMonth&&n.showDaysOutsideCurrentMonth&&t.dayOutsideMonth,n.isDayOutsideMonth&&!n.showDaysOutsideCurrentMonth&&t.hiddenDaySpacingFiller]},B8=Xe(IR,{name:"MuiPickersDay",slot:"Root",overridesResolver:N2})(z2),V8=Xe("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:N2})(({theme:e})=>ie({},z2({theme:e}),{opacity:0,pointerEvents:"none"})),iu=()=>{},H8=y.forwardRef(function(t,n){const i=On({props:t,name:"MuiPickersDay"}),{autoFocus:o=!1,className:c,classes:d,isAnimating:f,onClick:h,onDaySelect:g,onFocus:m=iu,onBlur:b=iu,onKeyDown:v=iu,onMouseDown:j=iu,onMouseEnter:E=iu,children:S,day:w,selected:C,disabled:k,today:R,outsideCurrentMonth:O,disableMargin:I,disableHighlightToday:P,showDaysOutsideCurrentMonth:W}=i,L=bt(i,L8),z=_2({day:w,selected:C,disabled:k,today:R,outsideCurrentMonth:O,disableMargin:I,disableHighlightToday:P,showDaysOutsideCurrentMonth:W}),q=F8(d,z),B=un(),U=y.useRef(null),re=Ys(U,n);Hi(()=>{o&&!k&&!f&&!O&&U.current.focus()},[o,k,f,O]);const H=N=>{j(N),O&&N.preventDefault()},$=N=>{N.defaultMuiPrevented=!0,k||g(w),O&&N.currentTarget.focus(),h&&h(N)};return O&&!W?r.jsx(V8,{className:xs(q.root,q.hiddenDaySpacingFiller,c),ownerState:z,role:L.role}):r.jsx(B8,ie({className:xs(q.root,c),ref:re,centerRipple:!0,disabled:k,tabIndex:C?0:-1,onKeyDown:N=>v(N,w),onFocus:N=>m(N,w),onBlur:N=>b(N,w),onMouseEnter:N=>E(N,w),onClick:$,onMouseDown:H},L,{ownerState:z,children:S??B.format(w,"dayOfMonth")}))}),U8=y.memo(H8),$8=e=>as("MuiPickersSlideTransition",e),Er=os("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),q8=["children","className","reduceAnimations","slideDirection","transKey","classes"],Y8=(e,t)=>{const{slideDirection:n}=t,i={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${n}`],exitActive:[`slideExitActiveLeft-${n}`]};return Fn(i,$8,e)},G8=Xe(DC,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`.${Er["slideEnter-left"]}`]:t["slideEnter-left"]},{[`.${Er["slideEnter-right"]}`]:t["slideEnter-right"]},{[`.${Er.slideEnterActive}`]:t.slideEnterActive},{[`.${Er.slideExit}`]:t.slideExit},{[`.${Er["slideExitActiveLeft-left"]}`]:t["slideExitActiveLeft-left"]},{[`.${Er["slideExitActiveLeft-right"]}`]:t["slideExitActiveLeft-right"]}]})(({theme:e})=>{const t=e.transitions.create("transform",{duration:e.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${Er["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${Er["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${Er.slideEnterActive}`]:{transform:"translate(0%)",transition:t},[`& .${Er.slideExit}`]:{transform:"translate(0%)"},[`& .${Er["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:t,zIndex:0},[`& .${Er["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:t,zIndex:0}}});function Q8(e){const t=On({props:e,name:"MuiPickersSlideTransition"}),{children:n,className:i,reduceAnimations:o,slideDirection:c,transKey:d,classes:f}=t,h=bt(t,q8),{ownerState:g}=ys(),m=ie({},g,{slideDirection:c}),b=Y8(f,m),v=Ia();if(o)return r.jsx("div",{className:xs(b.root,i),children:n});const j={exit:b.exit,enterActive:b.enterActive,enter:b.enter,exitActive:b.exitActive};return r.jsx(G8,{className:xs(b.root,i),childFactory:E=>y.cloneElement(E,{classNames:j}),role:"presentation",ownerState:m,children:r.jsx(WR,ie({mountOnEnter:!0,unmountOnExit:!0,timeout:v.transitions.duration.complex,classNames:j},h,{children:n}),d)})}const K8=e=>as("MuiDayCalendar",e);os("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const X8=["parentProps","day","focusedDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],Z8=["ownerState"],J8=e=>Fn({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},K8,e),L2=(Xu+qh*2)*6,eU=Xe("div",{name:"MuiDayCalendar",slot:"Root"})({}),tU=Xe("div",{name:"MuiDayCalendar",slot:"Header"})({display:"flex",justifyContent:"center",alignItems:"center"}),nU=Xe(M,{name:"MuiDayCalendar",slot:"WeekDayLabel"})(({theme:e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(e.vars||e).palette.text.secondary})),sU=Xe(M,{name:"MuiDayCalendar",slot:"WeekNumberLabel"})(({theme:e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(e.vars||e).palette.text.disabled})),rU=Xe(M,{name:"MuiDayCalendar",slot:"WeekNumber"})(({theme:e})=>ie({},e.typography.caption,{width:Xu,height:Xu,padding:0,margin:`0 ${qh}px`,color:(e.vars||e).palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),iU=Xe("div",{name:"MuiDayCalendar",slot:"LoadingContainer"})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:L2}),aU=Xe(Q8,{name:"MuiDayCalendar",slot:"SlideTransition"})({minHeight:L2}),oU=Xe("div",{name:"MuiDayCalendar",slot:"MonthContainer"})({overflow:"hidden"}),lU=Xe("div",{name:"MuiDayCalendar",slot:"WeekContainer"})({margin:`${qh}px 0`,display:"flex",justifyContent:"center"});function cU(e){let{parentProps:t,day:n,focusedDay:i,selectedDays:o,isDateDisabled:c,currentMonthNumber:d,isViewFocused:f}=e,h=bt(e,X8);const{disabled:g,disableHighlightToday:m,isMonthSwitchingAnimating:b,showDaysOutsideCurrentMonth:v,slots:j,slotProps:E,timezone:S}=t,w=un(),C=$h(S),k=i!=null&&w.isSameDay(n,i),R=f&&k,O=o.some(H=>w.isSameDay(H,n)),I=w.isSameDay(n,C),P=y.useMemo(()=>g||c(n),[g,c,n]),W=y.useMemo(()=>w.getMonth(n)!==d,[w,n,d]),L=_2({day:n,selected:O,disabled:P,today:I,outsideCurrentMonth:W,disableMargin:void 0,disableHighlightToday:m,showDaysOutsideCurrentMonth:v}),z=j?.day??U8,q=$t({elementType:z,externalSlotProps:E?.day,additionalProps:ie({disableHighlightToday:m,showDaysOutsideCurrentMonth:v,role:"gridcell",isAnimating:b,"data-timestamp":w.toJsDate(n).valueOf()},h),ownerState:ie({},L,{day:n,isDayDisabled:P,isDaySelected:O})}),B=bt(q,Z8),U=y.useMemo(()=>{const H=w.startOfMonth(w.setMonth(n,d));return v?w.isSameDay(n,w.startOfWeek(H)):w.isSameDay(n,H)},[d,n,v,w]),re=y.useMemo(()=>{const H=w.endOfMonth(w.setMonth(n,d));return v?w.isSameDay(n,w.endOfWeek(H)):w.isSameDay(n,H)},[d,n,v,w]);return r.jsx(z,ie({},B,{day:n,disabled:P,autoFocus:!W&&R,today:I,outsideCurrentMonth:W,isFirstVisibleCell:U,isLastVisibleCell:re,selected:O,tabIndex:k?0:-1,"aria-selected":O,"aria-current":I?"date":void 0}))}function uU(e){const t=On({props:e,name:"MuiDayCalendar"}),n=un(),{onFocusedDayChange:i,className:o,classes:c,currentMonth:d,selectedDays:f,focusedDay:h,loading:g,onSelectedDaysChange:m,onMonthSwitchingAnimationEnd:b,readOnly:v,reduceAnimations:j,renderLoading:E=()=>r.jsx("span",{children:"..."}),slideDirection:S,TransitionProps:w,disablePast:C,disableFuture:k,minDate:R,maxDate:O,shouldDisableDate:I,shouldDisableMonth:P,shouldDisableYear:W,dayOfWeekFormatter:L=Y=>n.format(Y,"weekdayShort").charAt(0).toUpperCase(),hasFocus:z,onFocusedViewChange:q,gridLabelId:B,displayWeekNumber:U,fixedWeekNumber:re,timezone:H}=t,$=$h(H),N=J8(c),V=Yi(),F=I2({shouldDisableDate:I,shouldDisableMonth:P,shouldDisableYear:W,minDate:R,maxDate:O,disablePast:C,disableFuture:k,timezone:H}),X=La(),oe=qe(Y=>{v||m(Y)}),ue=Y=>{F(Y)||(i(Y),q?.(!0))},Te=qe((Y,ce)=>{switch(Y.key){case"ArrowUp":ue(n.addDays(ce,-7)),Y.preventDefault();break;case"ArrowDown":ue(n.addDays(ce,7)),Y.preventDefault();break;case"ArrowLeft":{const Ae=n.addDays(ce,V?1:-1),ne=n.addMonths(ce,V?1:-1),de=Ku({adapter:n,date:Ae,minDate:V?Ae:n.startOfMonth(ne),maxDate:V?n.endOfMonth(ne):Ae,isDateDisabled:F,timezone:H});ue(de||Ae),Y.preventDefault();break}case"ArrowRight":{const Ae=n.addDays(ce,V?-1:1),ne=n.addMonths(ce,V?-1:1),de=Ku({adapter:n,date:Ae,minDate:V?n.startOfMonth(ne):Ae,maxDate:V?Ae:n.endOfMonth(ne),isDateDisabled:F,timezone:H});ue(de||Ae),Y.preventDefault();break}case"Home":ue(n.startOfWeek(ce)),Y.preventDefault();break;case"End":ue(n.endOfWeek(ce)),Y.preventDefault();break;case"PageUp":ue(n.addMonths(ce,1)),Y.preventDefault();break;case"PageDown":ue(n.addMonths(ce,-1)),Y.preventDefault();break}}),De=qe((Y,ce)=>ue(ce)),ee=qe((Y,ce)=>{h!=null&&n.isSameDay(h,ce)&&q?.(!1)}),G=n.getMonth(d),ae=n.getYear(d),ve=y.useMemo(()=>f.filter(Y=>!!Y).map(Y=>n.startOfDay(Y)),[n,f]),te=`${ae}-${G}`,ye=y.useMemo(()=>y.createRef(),[te]),Se=y.useMemo(()=>{const Y=n.getWeekArray(d);let ce=n.addMonths(d,1);for(;re&&Y.length<re;){const Ae=n.getWeekArray(ce),ne=n.isSameDay(Y[Y.length-1][0],Ae[0][0]);Ae.slice(ne?1:0).forEach(de=>{Y.length<re&&Y.push(de)}),ce=n.addMonths(ce,1)}return Y},[d,re,n]);return r.jsxs(eU,{role:"grid","aria-labelledby":B,className:N.root,children:[r.jsxs(tU,{role:"row",className:N.header,children:[U&&r.jsx(sU,{variant:"caption",role:"columnheader","aria-label":X.calendarWeekNumberHeaderLabel,className:N.weekNumberLabel,children:X.calendarWeekNumberHeaderText}),B4(n,$).map((Y,ce)=>r.jsx(nU,{variant:"caption",role:"columnheader","aria-label":n.format(Y,"weekday"),className:N.weekDayLabel,children:L(Y)},ce.toString()))]}),g?r.jsx(iU,{className:N.loadingContainer,children:E()}):r.jsx(aU,ie({transKey:te,onExited:b,reduceAnimations:j,slideDirection:S,className:xs(o,N.slideTransition)},w,{nodeRef:ye,children:r.jsx(oU,{ref:ye,role:"rowgroup",className:N.monthContainer,children:Se.map((Y,ce)=>r.jsxs(lU,{role:"row",className:N.weekContainer,"aria-rowindex":ce+1,children:[U&&r.jsx(rU,{className:N.weekNumber,role:"rowheader","aria-label":X.calendarWeekNumberAriaLabelText(n.getWeekNumber(Y[0])),children:X.calendarWeekNumberText(n.getWeekNumber(Y[0]))}),Y.map((Ae,ne)=>r.jsx(cU,{parentProps:t,day:Ae,selectedDays:ve,isViewFocused:z,focusedDay:h,onKeyDown:Te,onFocus:De,onBlur:ee,onDaySelect:oe,isDateDisabled:F,currentMonthNumber:G,"aria-colindex":ne+1},Ae.toString()))]},`week-${Y[0]}`))})}))]})}function F2(e){return as("MuiMonthCalendar",e)}const Ff=os("MuiMonthCalendar",["root","button","disabled","selected"]),dU=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],fU=(e,t)=>{const n={button:["button",t.isMonthDisabled&&"disabled",t.isMonthSelected&&"selected"]};return Fn(n,F2,e)},hU=Xe("button",{name:"MuiMonthCalendar",slot:"Button",overridesResolver:(e,t)=>[t.button,{[`&.${Ff.disabled}`]:t.disabled},{[`&.${Ff.selected}`]:t.selected}]})(({theme:e})=>ie({color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ci(e.palette.action.active,e.palette.action.hoverOpacity)},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ci(e.palette.action.active,e.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Ff.disabled}`]:{color:(e.vars||e).palette.text.secondary},[`&.${Ff.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,"&:focus, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}}})),pU=y.memo(function(t){const{autoFocus:n,classes:i,disabled:o,selected:c,value:d,onClick:f,onKeyDown:h,onFocus:g,onBlur:m,slots:b,slotProps:v}=t,j=bt(t,dU),E=y.useRef(null),{ownerState:S}=ys(),w=ie({},S,{isMonthDisabled:o,isMonthSelected:c}),C=fU(i,w);Hi(()=>{n&&E.current?.focus()},[n]);const k=b?.monthButton??hU,R=$t({elementType:k,externalSlotProps:v?.monthButton,externalForwardedProps:j,additionalProps:{disabled:o,ref:E,type:"button",role:"radio","aria-checked":c,onClick:O=>f(O,d),onKeyDown:O=>h(O,d),onFocus:O=>g(O,d),onBlur:O=>m(O,d)},ownerState:w,className:C.button});return r.jsx(k,ie({},R))}),mU=["autoFocus","className","currentMonth","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId","slots","slotProps"],gU=e=>Fn({root:["root"]},F2,e);function xU(e,t){const n=On({props:e,name:t}),i=bd(n);return ie({},n,i,{monthsPerRow:n.monthsPerRow??3})}const eC=(e,t,n,i,o)=>!!(e===t&&i&&o.isSameYear(n,i)),yU=Xe("div",{name:"MuiMonthCalendar",slot:"Root",shouldForwardProp:e=>Do(e)&&e!=="monthsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:16,padding:"8px 0",width:Yh,boxSizing:"border-box",variants:[{props:{monthsPerRow:3},style:{columnGap:24}},{props:{monthsPerRow:4},style:{columnGap:0}}]}),bU=y.forwardRef(function(t,n){const i=xU(t,"MuiMonthCalendar"),{autoFocus:o,className:c,currentMonth:d,classes:f,value:h,defaultValue:g,referenceDate:m,disabled:b,disableFuture:v,disablePast:j,maxDate:E,minDate:S,onChange:w,shouldDisableMonth:C,readOnly:k,onMonthFocus:R,hasFocus:O,onFocusedViewChange:I,monthsPerRow:P,timezone:W,gridLabelId:L,slots:z,slotProps:q}=i,B=bt(i,mU),{value:U,handleValueChange:re,timezone:H}=vd({name:"MonthCalendar",timezone:W,value:h,defaultValue:g,referenceDate:m,onChange:w,valueManager:mi}),$=$h(H),N=Yi(),V=un(),{ownerState:F}=ys(),X=y.useMemo(()=>mi.getInitialReferenceValue({value:U,adapter:V,props:i,timezone:H,referenceDate:m,granularity:ai.month}),[]),oe=gU(f),ue=y.useMemo(()=>V.getMonth($),[V,$]),Te=y.useMemo(()=>U!=null?V.getMonth(U):null,[U,V]),[De,ee]=y.useState(()=>Te||V.getMonth(X)),[G,ae]=Fl({name:"MonthCalendar",state:"hasFocus",controlled:O,default:o??!1}),ve=qe(ne=>{ae(ne),I&&I(ne)}),te=y.useCallback(ne=>{const de=V.startOfMonth(j&&V.isAfter($,S)?$:S),K=V.startOfMonth(v&&V.isBefore($,E)?$:E),Z=V.startOfMonth(ne);return V.isBefore(Z,de)||V.isAfter(Z,K)?!0:C?C(Z):!1},[v,j,E,S,$,C,V]),ye=qe((ne,de)=>{if(k)return;const K=U&&d&&!V.isSameYear(U,d)?V.setYear(U,V.getYear(d)):U,Z=V.setMonth(K??X,de);re(Z)}),Se=qe(ne=>{te(V.setMonth(U??d??X,ne))||(ee(ne),ve(!0),R&&R(ne))});y.useEffect(()=>{ee(ne=>Te!==null&&ne!==Te?Te:ne)},[Te]);const Y=qe((ne,de)=>{switch(ne.key){case"ArrowUp":Se((12+de-3)%12),ne.preventDefault();break;case"ArrowDown":Se((12+de+3)%12),ne.preventDefault();break;case"ArrowLeft":Se((12+de+(N?1:-1))%12),ne.preventDefault();break;case"ArrowRight":Se((12+de+(N?-1:1))%12),ne.preventDefault();break}}),ce=qe((ne,de)=>{Se(de)}),Ae=qe((ne,de)=>{De===de&&ve(!1)});return r.jsx(yU,ie({ref:n,className:xs(oe.root,c),ownerState:F,role:"radiogroup","aria-labelledby":L,monthsPerRow:P},B,{children:n0(V,d??U??X).map(ne=>{const de=V.getMonth(ne),K=V.format(ne,"monthShort"),Z=V.format(ne,"month"),be=eC(de,Te,ne,U,V),ke=b||te(ne);return r.jsx(pU,{selected:be,value:de,onClick:ye,onKeyDown:Y,autoFocus:G&&de===De,disabled:ke,tabIndex:de===De&&!ke?0:-1,onFocus:ce,onBlur:Ae,"aria-current":eC(de,ue,ne,$,V)?"date":void 0,"aria-label":Z,slots:z,slotProps:q,classes:f,children:K},K)})}))});function B2(e){return as("MuiYearCalendar",e)}const Bf=os("MuiYearCalendar",["root","button","disabled","selected"]),vU=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],SU=(e,t)=>{const n={button:["button",t.isYearDisabled&&"disabled",t.isYearSelected&&"selected"]};return Fn(n,B2,e)},wU=Xe("button",{name:"MuiYearCalendar",slot:"Button",overridesResolver:(e,t)=>[t.button,{[`&.${Bf.disabled}`]:t.disabled},{[`&.${Bf.selected}`]:t.selected}]})(({theme:e})=>ie({color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.focusOpacity})`:ci(e.palette.action.active,e.palette.action.focusOpacity)},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ci(e.palette.action.active,e.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Bf.disabled}`]:{color:(e.vars||e).palette.text.secondary},[`&.${Bf.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,"&:focus, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}}})),jU=y.memo(function(t){const{autoFocus:n,classes:i,disabled:o,selected:c,value:d,onClick:f,onKeyDown:h,onFocus:g,onBlur:m,slots:b,slotProps:v}=t,j=bt(t,vU),E=y.useRef(null),{ownerState:S}=ys(),w=ie({},S,{isYearDisabled:o,isYearSelected:c}),C=SU(i,w);Hi(()=>{n&&E.current?.focus()},[n]);const k=b?.yearButton??wU,R=$t({elementType:k,externalSlotProps:v?.yearButton,externalForwardedProps:j,additionalProps:{disabled:o,ref:E,type:"button",role:"radio","aria-checked":c,onClick:O=>f(O,d),onKeyDown:O=>h(O,d),onFocus:O=>g(O,d),onBlur:O=>m(O,d)},ownerState:w,className:C.button});return r.jsx(k,ie({},R))}),CU=["autoFocus","className","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsOrder","yearsPerRow","timezone","gridLabelId","slots","slotProps"],TU=e=>Fn({root:["root"]},B2,e);function kU(e,t){const n=On({props:e,name:t}),i=bd(n);return ie({},n,i,{yearsPerRow:n.yearsPerRow??3,yearsOrder:n.yearsOrder??"asc"})}const EU=Xe("div",{name:"MuiYearCalendar",slot:"Root",shouldForwardProp:e=>Do(e)&&e!=="yearsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:12,padding:"6px 0",overflowY:"auto",height:"100%",width:Yh,maxHeight:tH,boxSizing:"border-box",position:"relative",variants:[{props:{yearsPerRow:3},style:{columnGap:24}},{props:{yearsPerRow:4},style:{columnGap:0,padding:"0 2px"}}]}),DU=Xe("div",{name:"MuiYearCalendar",slot:"ButtonFiller"})({height:36,width:72}),MU=y.forwardRef(function(t,n){const i=kU(t,"MuiYearCalendar"),{autoFocus:o,className:c,classes:d,value:f,defaultValue:h,referenceDate:g,disabled:m,disableFuture:b,disablePast:v,maxDate:j,minDate:E,onChange:S,readOnly:w,shouldDisableYear:C,onYearFocus:k,hasFocus:R,onFocusedViewChange:O,yearsOrder:I,yearsPerRow:P,timezone:W,gridLabelId:L,slots:z,slotProps:q}=i,B=bt(i,CU),{value:U,handleValueChange:re,timezone:H}=vd({name:"YearCalendar",timezone:W,value:f,defaultValue:h,referenceDate:g,onChange:S,valueManager:mi}),$=$h(H),N=Yi(),V=un(),{ownerState:F}=ys(),X=y.useMemo(()=>mi.getInitialReferenceValue({value:U,adapter:V,props:i,timezone:H,referenceDate:g,granularity:ai.year}),[]),oe=TU(d),ue=y.useMemo(()=>V.getYear($),[V,$]),Te=y.useMemo(()=>U!=null?V.getYear(U):null,[U,V]),[De,ee]=y.useState(()=>Te||V.getYear(X)),[G,ae]=Fl({name:"YearCalendar",state:"hasFocus",controlled:R,default:o??!1}),ve=qe(me=>{ae(me),O&&O(me)}),te=y.useCallback(me=>{if(v&&V.isBeforeYear(me,$)||b&&V.isAfterYear(me,$)||E&&V.isBeforeYear(me,E)||j&&V.isAfterYear(me,j))return!0;if(!C)return!1;const we=V.startOfYear(me);return C(we)},[b,v,j,E,$,C,V]),ye=qe((me,we)=>{if(w)return;const J=V.setYear(U??X,we);re(J)}),Se=qe(me=>{te(V.setYear(U??X,me))||(ee(me),ve(!0),k?.(me))});y.useEffect(()=>{ee(me=>Te!==null&&me!==Te?Te:me)},[Te]);const Y=I!=="desc"?P*1:P*-1,ce=N&&I==="asc"||!N&&I==="desc"?-1:1,Ae=qe((me,we)=>{switch(me.key){case"ArrowUp":Se(we-Y),me.preventDefault();break;case"ArrowDown":Se(we+Y),me.preventDefault();break;case"ArrowLeft":Se(we-ce),me.preventDefault();break;case"ArrowRight":Se(we+ce),me.preventDefault();break}}),ne=qe((me,we)=>{Se(we)}),de=qe((me,we)=>{De===we&&ve(!1)}),K=y.useRef(null),Z=Ys(n,K);y.useEffect(()=>{if(o||K.current===null)return;const me=K.current.querySelector('[tabindex="0"]');if(!me)return;const we=me.offsetHeight,J=me.offsetTop,ge=K.current.clientHeight,We=K.current.scrollTop,_e=J+we;we>ge||J<We||(K.current.scrollTop=_e-ge/2-we/2)},[o]);const be=V.getYearRange([E,j]);I==="desc"&&be.reverse();let ke=P-be.length%P;return ke===P&&(ke=0),r.jsxs(EU,ie({ref:Z,className:xs(oe.root,c),ownerState:F,role:"radiogroup","aria-labelledby":L,yearsPerRow:P},B,{children:[be.map(me=>{const we=V.getYear(me),J=we===Te,ge=m||te(me);return r.jsx(jU,{selected:J,value:we,onClick:ye,onKeyDown:Ae,autoFocus:G&&we===De,disabled:ge,tabIndex:we===De&&!ge?0:-1,onFocus:ne,onBlur:de,"aria-current":ue===we?"date":void 0,slots:z,slotProps:q,classes:d,children:V.format(me,"year")},V.format(me,"year"))}),Array.from({length:ke},(me,we)=>r.jsx(DU,{},we))]}))}),AU=e=>as("MuiPickersCalendarHeader",e),RU=os("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]);function PU(e){return as("MuiPickersArrowSwitcher",e)}os("MuiPickersArrowSwitcher",["root","spacer","button","previousIconButton","nextIconButton","leftArrowIcon","rightArrowIcon"]);const OU=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel","labelId","classes"],IU=["ownerState"],WU=["ownerState"],_U=Xe("div",{name:"MuiPickersArrowSwitcher",slot:"Root"})({display:"flex"}),zU=Xe("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer"})(({theme:e})=>({width:e.spacing(3)})),tC=Xe(Ie,{name:"MuiPickersArrowSwitcher",slot:"Button"})({variants:[{props:{isButtonHidden:!0},style:{visibility:"hidden"}}]}),NU=e=>Fn({root:["root"],spacer:["spacer"],button:["button"],previousIconButton:["previousIconButton"],nextIconButton:["nextIconButton"],leftArrowIcon:["leftArrowIcon"],rightArrowIcon:["rightArrowIcon"]},PU,e),LU=y.forwardRef(function(t,n){const i=Yi(),o=On({props:t,name:"MuiPickersArrowSwitcher"}),{children:c,className:d,slots:f,slotProps:h,isNextDisabled:g,isNextHidden:m,onGoToNext:b,nextLabel:v,isPreviousDisabled:j,isPreviousHidden:E,onGoToPrevious:S,previousLabel:w,labelId:C,classes:k}=o,R=bt(o,OU),{ownerState:O}=ys(),I=NU(k),P={isDisabled:g,isHidden:m,goTo:b,label:v},W={isDisabled:j,isHidden:E,goTo:S,label:w},L=f?.previousIconButton??tC,z=$t({elementType:L,externalSlotProps:h?.previousIconButton,additionalProps:{size:"medium",title:W.label,"aria-label":W.label,disabled:W.isDisabled,edge:"end",onClick:W.goTo},ownerState:ie({},O,{isButtonHidden:W.isHidden??!1}),className:xs(I.button,I.previousIconButton)}),q=f?.nextIconButton??tC,B=$t({elementType:q,externalSlotProps:h?.nextIconButton,additionalProps:{size:"medium",title:P.label,"aria-label":P.label,disabled:P.isDisabled,edge:"start",onClick:P.goTo},ownerState:ie({},O,{isButtonHidden:P.isHidden??!1}),className:xs(I.button,I.nextIconButton)}),U=f?.leftArrowIcon??RH,re=$t({elementType:U,externalSlotProps:h?.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:O,className:I.leftArrowIcon}),H=bt(re,IU),$=f?.rightArrowIcon??PH,N=$t({elementType:$,externalSlotProps:h?.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:O,className:I.rightArrowIcon}),V=bt(N,WU);return r.jsxs(_U,ie({ref:n,className:xs(I.root,d),ownerState:O},R,{children:[r.jsx(L,ie({},z,{children:i?r.jsx($,ie({},V)):r.jsx(U,ie({},H))})),c?r.jsx(M,{variant:"subtitle1",component:"span",id:C,children:c}):r.jsx(zU,{className:I.spacer,ownerState:O}),r.jsx(q,ie({},B,{children:i?r.jsx(U,ie({},H)):r.jsx($,ie({},V))}))]}))});function FU(e,{disableFuture:t,maxDate:n,timezone:i}){const o=un();return y.useMemo(()=>{const c=o.date(void 0,i),d=o.startOfMonth(t&&o.isBefore(c,n)?c:n);return!o.isAfter(d,e)},[t,n,e,o,i])}function BU(e,{disablePast:t,minDate:n,timezone:i}){const o=un();return y.useMemo(()=>{const c=o.date(void 0,i),d=o.startOfMonth(t&&o.isAfter(c,n)?c:n);return!o.isBefore(d,e)},[t,n,e,o,i])}const VU=["slots","slotProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","classes","timezone","format"],HU=["ownerState"],UU=e=>Fn({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},AU,e),$U=Xe("div",{name:"MuiPickersCalendarHeader",slot:"Root"})({display:"flex",alignItems:"center",marginTop:12,marginBottom:4,paddingLeft:24,paddingRight:12,maxHeight:40,minHeight:40}),qU=Xe("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer"})(({theme:e})=>ie({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},e.typography.body1,{fontWeight:e.typography.fontWeightMedium})),YU=Xe("div",{name:"MuiPickersCalendarHeader",slot:"Label"})({marginRight:6}),GU=Xe(Ie,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton"})({marginRight:"auto",variants:[{props:{view:"year"},style:{[`.${RU.switchViewIcon}`]:{transform:"rotate(180deg)"}}}]}),QU=Xe(AH,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon"})(({theme:e})=>({willChange:"transform",transition:e.transitions.create("transform"),transform:"rotate(0deg)"})),KU=y.forwardRef(function(t,n){const i=La(),o=un(),c=On({props:t,name:"MuiPickersCalendarHeader"}),{slots:d,slotProps:f,currentMonth:h,disabled:g,disableFuture:m,disablePast:b,maxDate:v,minDate:j,onMonthChange:E,onViewChange:S,view:w,reduceAnimations:C,views:k,labelId:R,className:O,classes:I,timezone:P,format:W=`${o.formats.month} ${o.formats.year}`}=c,L=bt(c,VU),{ownerState:z}=ys(),q=UU(I),B=d?.switchViewButton??GU,U=$t({elementType:B,externalSlotProps:f?.switchViewButton,additionalProps:{size:"small","aria-label":i.calendarViewSwitchingButtonAriaLabel(w)},ownerState:ie({},z,{view:w}),className:q.switchViewButton}),re=d?.switchViewIcon??QU,H=$t({elementType:re,externalSlotProps:f?.switchViewIcon,ownerState:z,className:q.switchViewIcon}),$=bt(H,HU),N=()=>E(o.addMonths(h,1)),V=()=>E(o.addMonths(h,-1)),F=FU(h,{disableFuture:m,maxDate:v,timezone:P}),X=BU(h,{disablePast:b,minDate:j,timezone:P}),oe=()=>{if(!(k.length===1||!S||g))if(k.length===2)S(k.find(Te=>Te!==w)||k[0]);else{const Te=k.indexOf(w)!==0?0:1;S(k[Te])}};if(k.length===1&&k[0]==="year")return null;const ue=o.formatByString(h,W);return r.jsxs($U,ie({},L,{ownerState:z,className:xs(q.root,O),ref:n,children:[r.jsxs(qU,{role:"presentation",onClick:oe,ownerState:z,"aria-live":"polite",className:q.labelContainer,children:[r.jsx(W2,{reduceAnimations:C,transKey:ue,children:r.jsx(YU,{id:R,ownerState:z,className:q.label,children:ue})}),k.length>1&&!g&&r.jsx(B,ie({},U,{children:r.jsx(re,ie({},$))}))]}),r.jsx(Eh,{in:w==="day",appear:!C,enter:!C,children:r.jsx(LU,{slots:d,slotProps:f,onGoToPrevious:V,isPreviousDisabled:X,previousLabel:i.previousMonth,onGoToNext:N,isNextDisabled:F,nextLabel:i.nextMonth})})]}))}),XU=Xe("div")({overflow:"hidden",width:Yh,maxHeight:u0,display:"flex",flexDirection:"column",margin:"0 auto"}),ZU=e=>as("MuiDateCalendar",e);os("MuiDateCalendar",["root","viewTransitionContainer"]);const JU=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","classes","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsOrder","yearsPerRow","monthsPerRow","timezone"],e7=e=>Fn({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},ZU,e);function t7(e,t){const n=On({props:e,name:t}),i=h2(n.reduceAnimations),o=bd(n);return ie({},n,o,{loading:n.loading??!1,openTo:n.openTo??"day",views:n.views??["year","day"],reduceAnimations:i,renderLoading:n.renderLoading??(()=>r.jsx("span",{children:"..."}))})}const n7=Xe(XU,{name:"MuiDateCalendar",slot:"Root"})({display:"flex",flexDirection:"column",height:u0}),s7=Xe(W2,{name:"MuiDateCalendar",slot:"ViewTransitionContainer"})({}),r7=y.forwardRef(function(t,n){const i=un(),{ownerState:o}=ys(),c=Fx(),d=t7(t,"MuiDateCalendar"),{autoFocus:f,onViewChange:h,value:g,defaultValue:m,referenceDate:b,disableFuture:v,disablePast:j,onChange:E,onMonthChange:S,reduceAnimations:w,shouldDisableDate:C,shouldDisableMonth:k,shouldDisableYear:R,view:O,views:I,openTo:P,className:W,classes:L,disabled:z,readOnly:q,minDate:B,maxDate:U,disableHighlightToday:re,focusedView:H,onFocusedViewChange:$,showDaysOutsideCurrentMonth:N,fixedWeekNumber:V,dayOfWeekFormatter:F,slots:X,slotProps:oe,loading:ue,renderLoading:Te,displayWeekNumber:De,yearsOrder:ee,yearsPerRow:G,monthsPerRow:ae,timezone:ve}=d,te=bt(d,JU),{value:ye,handleValueChange:Se,timezone:Y}=vd({name:"DateCalendar",timezone:ve,value:g,defaultValue:m,referenceDate:b,onChange:E,valueManager:mi}),{view:ce,setView:Ae,focusedView:ne,setFocusedView:de,goToNextView:K,setValueAndGoToNextView:Z}=m2({view:O,views:I,openTo:P,onChange:Se,onViewChange:h,autoFocus:f,focusedView:H,onFocusedViewChange:$}),{referenceDate:be,calendarState:ke,setVisibleDate:me,isDateDisabled:we,onMonthSwitchingAnimationEnd:J}=O8({value:ye,referenceDate:b,reduceAnimations:w,onMonthChange:S,minDate:B,maxDate:U,shouldDisableDate:C,disablePast:j,disableFuture:v,timezone:Y,getCurrentMonthFromVisibleDate:(ft,Jt)=>i.isSameMonth(ft,Jt)?Jt:i.startOfMonth(ft)}),ge=z&&ye||B,We=z&&ye||U,_e=`${c}-grid-label`,Re=ne!==null,Fe=X?.calendarHeader??KU,Qe=$t({elementType:Fe,externalSlotProps:oe?.calendarHeader,additionalProps:{views:I,view:ce,currentMonth:ke.currentMonth,onViewChange:Ae,onMonthChange:ft=>me({target:ft,reason:"header-navigation"}),minDate:ge,maxDate:We,disabled:z,disablePast:j,disableFuture:v,reduceAnimations:w,timezone:Y,labelId:_e},ownerState:o}),He=qe(ft=>{const Jt=i.startOfMonth(ft),jn=i.endOfMonth(ft),fn=we(ft)?Ku({adapter:i,date:ft,minDate:i.isBefore(B,Jt)?Jt:B,maxDate:i.isAfter(U,jn)?jn:U,disablePast:j,disableFuture:v,isDateDisabled:we,timezone:Y}):ft;fn?(Z(fn,"finish"),me({target:fn,reason:"cell-interaction"})):(K(),me({target:Jt,reason:"cell-interaction"}))}),Ze=qe(ft=>{const Jt=i.startOfYear(ft),jn=i.endOfYear(ft),fn=we(ft)?Ku({adapter:i,date:ft,minDate:i.isBefore(B,Jt)?Jt:B,maxDate:i.isAfter(U,jn)?jn:U,disablePast:j,disableFuture:v,isDateDisabled:we,timezone:Y}):ft;fn?(Z(fn,"finish"),me({target:fn,reason:"cell-interaction"})):(K(),me({target:Jt,reason:"cell-interaction"}))}),et=qe(ft=>Se(ft&&wh(i,ft,ye??be),"finish",ce));y.useEffect(()=>{i.isValid(ye)&&me({target:ye,reason:"controlled-value-change"})},[ye]);const xt=e7(L),yt={disablePast:j,disableFuture:v,maxDate:U,minDate:B},ct={disableHighlightToday:re,readOnly:q,disabled:z,timezone:Y,gridLabelId:_e,slots:X,slotProps:oe},ot=y.useRef(ce);y.useEffect(()=>{ot.current!==ce&&(ne===ot.current&&de(ce,!0),ot.current=ce)},[ne,de,ce]);const vt=y.useMemo(()=>[ye],[ye]);return r.jsxs(n7,ie({ref:n,className:xs(xt.root,W),ownerState:o},te,{children:[r.jsx(Fe,ie({},Qe,{slots:X,slotProps:oe})),r.jsx(s7,{reduceAnimations:w,className:xt.viewTransitionContainer,transKey:ce,ownerState:o,children:r.jsxs("div",{children:[ce==="year"&&r.jsx(MU,ie({},yt,ct,{value:ye,onChange:Ze,shouldDisableYear:R,hasFocus:Re,onFocusedViewChange:ft=>de("year",ft),yearsOrder:ee,yearsPerRow:G,referenceDate:be})),ce==="month"&&r.jsx(bU,ie({},yt,ct,{currentMonth:ke.currentMonth,hasFocus:Re,className:W,value:ye,onChange:He,shouldDisableMonth:k,onFocusedViewChange:ft=>de("month",ft),monthsPerRow:ae,referenceDate:be})),ce==="day"&&r.jsx(uU,ie({},ke,yt,ct,{onMonthSwitchingAnimationEnd:J,hasFocus:Re,onFocusedDayChange:ft=>me({target:ft,reason:"cell-interaction"}),reduceAnimations:w,selectedDays:vt,onSelectedDaysChange:et,shouldDisableDate:C,shouldDisableMonth:k,shouldDisableYear:R,onFocusedViewChange:ft=>de("day",ft),showDaysOutsideCurrentMonth:N,fixedWeekNumber:V,dayOfWeekFormatter:F,displayWeekNumber:De,loading:ue,renderLoading:Te}))]})})]}))}),zl=({view:e,onViewChange:t,views:n,focusedView:i,onFocusedViewChange:o,value:c,defaultValue:d,referenceDate:f,onChange:h,className:g,classes:m,disableFuture:b,disablePast:v,minDate:j,maxDate:E,shouldDisableDate:S,shouldDisableMonth:w,shouldDisableYear:C,reduceAnimations:k,onMonthChange:R,monthsPerRow:O,onYearChange:I,yearsOrder:P,yearsPerRow:W,slots:L,slotProps:z,loading:q,renderLoading:B,disableHighlightToday:U,readOnly:re,disabled:H,showDaysOutsideCurrentMonth:$,dayOfWeekFormatter:N,sx:V,autoFocus:F,fixedWeekNumber:X,displayWeekNumber:oe,timezone:ue})=>r.jsx(r7,{view:e,onViewChange:t,views:n.filter(Nj),focusedView:i&&Nj(i)?i:null,onFocusedViewChange:o,value:c,defaultValue:d,referenceDate:f,onChange:h,className:g,classes:m,disableFuture:b,disablePast:v,minDate:j,maxDate:E,shouldDisableDate:S,shouldDisableMonth:w,shouldDisableYear:C,reduceAnimations:k,onMonthChange:R,monthsPerRow:O,onYearChange:I,yearsOrder:P,yearsPerRow:W,slots:L,slotProps:z,loading:q,renderLoading:B,disableHighlightToday:U,readOnly:re,disabled:H,showDaysOutsideCurrentMonth:$,dayOfWeekFormatter:N,sx:V,autoFocus:F,fixedWeekNumber:X,displayWeekNumber:oe,timezone:ue}),V2=y.forwardRef(function(t,n){const i=un(),o=d2(t,"MuiDesktopDatePicker"),c=ie({day:zl,month:zl,year:zl},o.viewRenderers),d=ie({},o,{closeOnSelect:o.closeOnSelect??!0,viewRenderers:c,format:s0(i,o,!1),yearsPerRow:o.yearsPerRow??4,slots:ie({field:O2},o.slots),slotProps:ie({},o.slotProps,{field:h=>ie({},ui(o.slotProps?.field,h),l2(o)),toolbar:ie({hidden:!0},o.slotProps?.toolbar)})}),{renderPicker:f}=mH({ref:n,props:d,valueManager:mi,valueType:"date",validator:yd,steps:null});return f()});V2.propTypes={autoFocus:T.bool,className:T.string,closeOnSelect:T.bool,dayOfWeekFormatter:T.func,defaultValue:T.object,disabled:T.bool,disableFuture:T.bool,disableHighlightToday:T.bool,disableOpenPicker:T.bool,disablePast:T.bool,displayWeekNumber:T.bool,enableAccessibleFieldDOMStructure:T.any,fixedWeekNumber:T.number,format:T.string,formatDensity:T.oneOf(["dense","spacious"]),inputRef:MC,label:T.node,loading:T.bool,localeText:T.object,maxDate:T.object,minDate:T.object,monthsPerRow:T.oneOf([3,4]),name:T.string,onAccept:T.func,onChange:T.func,onClose:T.func,onError:T.func,onMonthChange:T.func,onOpen:T.func,onSelectedSectionsChange:T.func,onViewChange:T.func,onYearChange:T.func,open:T.bool,openTo:T.oneOf(["day","month","year"]),orientation:T.oneOf(["landscape","portrait"]),readOnly:T.bool,reduceAnimations:T.bool,referenceDate:T.object,renderLoading:T.func,selectedSections:T.oneOfType([T.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),T.number]),shouldDisableDate:T.func,shouldDisableMonth:T.func,shouldDisableYear:T.func,showDaysOutsideCurrentMonth:T.bool,slotProps:T.object,slots:T.object,sx:T.oneOfType([T.arrayOf(T.oneOfType([T.func,T.object,T.bool])),T.func,T.object]),timezone:T.string,value:T.object,view:T.oneOf(["day","month","year"]),viewRenderers:T.shape({day:T.func,month:T.func,year:T.func}),views:T.arrayOf(T.oneOf(["day","month","year"]).isRequired),yearsOrder:T.oneOf(["asc","desc"]),yearsPerRow:T.oneOf([3,4])};const i7=Xe(Et)({[`& .${yw.container}`]:{outline:0},[`& .${yw.paper}`]:{outline:0,minWidth:Yh}}),a7=Xe(Dt)({"&:first-of-type":{padding:0}});function o7(e){const{children:t,slots:n,slotProps:i}=e,{open:o}=nc(),{dismissViews:c,onPopperExited:d}=ys(),f=n?.dialog??i7,h=n?.mobileTransition??Eh;return r.jsx(f,ie({open:o,onClose:()=>{c(),d?.()}},i?.dialog,{TransitionComponent:h,TransitionProps:i?.mobileTransition,PaperComponent:n?.mobilePaper,PaperProps:i?.mobilePaper,children:r.jsx(a7,{children:t})}))}const l7=["props","steps"],c7=["ownerState"],u7=e=>{let{props:t,steps:n}=e,i=bt(e,l7);const{slots:o,slotProps:c,label:d,inputRef:f,localeText:h}=t,g=b2({steps:n}),{providerProps:m,renderCurrentView:b,ownerState:v}=g2(ie({},i,{props:t,localeText:h,autoFocusView:!0,viewContainerRole:"dialog",variant:"mobile",getStepNavigation:g})),j=m.privateContextValue.labelId,E=c?.toolbar?.hidden??!1,S=o.field,w=$t({elementType:S,externalSlotProps:c?.field,additionalProps:ie({},E&&{id:j}),ownerState:v}),C=bt(w,c7),k=o.layout??y2;let R=j;E&&(d?R=`${j}-label`:R=void 0);const O=ie({},c,{toolbar:ie({},c?.toolbar,{titleId:j}),mobilePaper:ie({"aria-labelledby":R},c?.mobilePaper)});return{renderPicker:()=>r.jsxs(r2,ie({},m,{children:[r.jsx(S,ie({},C,{slots:o,slotProps:O,inputRef:f})),r.jsx(o7,{slots:o,slotProps:O,children:r.jsx(k,ie({},O?.layout,{slots:o,slotProps:O,children:b()}))})]}))}},H2=y.forwardRef(function(t,n){const i=un(),o=d2(t,"MuiMobileDatePicker"),c=ie({day:zl,month:zl,year:zl},o.viewRenderers),d=ie({},o,{viewRenderers:c,format:s0(i,o,!1),slots:ie({field:O2},o.slots),slotProps:ie({},o.slotProps,{field:h=>ie({},ui(o.slotProps?.field,h),l2(o)),toolbar:ie({hidden:!1},o.slotProps?.toolbar)})}),{renderPicker:f}=u7({ref:n,props:d,valueManager:mi,valueType:"date",validator:yd,steps:null});return f()});H2.propTypes={autoFocus:T.bool,className:T.string,closeOnSelect:T.bool,dayOfWeekFormatter:T.func,defaultValue:T.object,disabled:T.bool,disableFuture:T.bool,disableHighlightToday:T.bool,disableOpenPicker:T.bool,disablePast:T.bool,displayWeekNumber:T.bool,enableAccessibleFieldDOMStructure:T.any,fixedWeekNumber:T.number,format:T.string,formatDensity:T.oneOf(["dense","spacious"]),inputRef:MC,label:T.node,loading:T.bool,localeText:T.object,maxDate:T.object,minDate:T.object,monthsPerRow:T.oneOf([3,4]),name:T.string,onAccept:T.func,onChange:T.func,onClose:T.func,onError:T.func,onMonthChange:T.func,onOpen:T.func,onSelectedSectionsChange:T.func,onViewChange:T.func,onYearChange:T.func,open:T.bool,openTo:T.oneOf(["day","month","year"]),orientation:T.oneOf(["landscape","portrait"]),readOnly:T.bool,reduceAnimations:T.bool,referenceDate:T.object,renderLoading:T.func,selectedSections:T.oneOfType([T.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),T.number]),shouldDisableDate:T.func,shouldDisableMonth:T.func,shouldDisableYear:T.func,showDaysOutsideCurrentMonth:T.bool,slotProps:T.object,slots:T.object,sx:T.oneOfType([T.arrayOf(T.oneOfType([T.func,T.object,T.bool])),T.func,T.object]),timezone:T.string,value:T.object,view:T.oneOf(["day","month","year"]),viewRenderers:T.shape({day:T.func,month:T.func,year:T.func}),views:T.arrayOf(T.oneOf(["day","month","year"]).isRequired),yearsOrder:T.oneOf(["asc","desc"]),yearsPerRow:T.oneOf([3,4])};const d7=["desktopModeMediaQuery"],jh=y.forwardRef(function(t,n){const i=On({props:t,name:"MuiDatePicker"}),{desktopModeMediaQuery:o=_V}=i,c=bt(i,d7);return cr(o,{defaultMatches:!0})?r.jsx(V2,ie({ref:n},c)):r.jsx(H2,ie({ref:n},c))}),g0=({open:e,onClose:t,onAssign:n,workoutData:i,currentSchedule:o})=>{const[c,d]=y.useState(null),f=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],h=j=>{d(j)},g=()=>{c&&n&&(n(c,i),m())},m=()=>{d(null),t()},b=j=>o&&o[j]!==null&&o[j]!==void 0,v=j=>j?{upper:"Upper Body",lower:"Lower Body",full:"Full Body",push:"Push",pull:"Pull",legs:"Legs",cardio:"Cardio",hiit:"HIIT",yoga:"Yoga",mobility:"Mobility",stretch:"Stretching",rest:"Rest"}[j.toLowerCase()]||j:"";return r.jsxs(Et,{open:e,onClose:m,maxWidth:"sm",fullWidth:!0,children:[r.jsx(zt,{children:r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(zu,{color:"primary"}),r.jsx(M,{variant:"h6",children:"Assign to Day of Week"})]})}),r.jsxs(Dt,{children:[r.jsx(M,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Select which day of the week to assign this workout to. It will be suggested when you visit that day next week."}),r.jsx(wn,{sx:{pt:0},children:f.map(j=>{const E=b(j),S=c===j,w=o?.[j];return r.jsx(it,{disablePadding:!0,sx:{mb:1},children:r.jsx(Ur,{onClick:()=>h(j),selected:S,sx:{borderRadius:2,border:S?2:1,borderColor:S?"primary.main":"divider","&.Mui-selected":{backgroundColor:"primary.light","&:hover":{backgroundColor:"primary.light"}}},children:r.jsx(St,{primary:r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(M,{variant:"body1",fontWeight:500,children:j}),S&&r.jsx(Bl,{color:"primary",fontSize:"small"})]}),secondary:E&&w?r.jsx(Ne,{label:`Currently: ${v(w.sessionType)}`,size:"small",sx:{mt:.5},color:"info",variant:"outlined"}):"Not assigned"})})},j)})})]}),r.jsxs(Nt,{children:[r.jsx(Ce,{onClick:m,color:"inherit",children:"Cancel"}),r.jsxs(Ce,{onClick:g,variant:"contained",disabled:!c,children:["Assign to ",c]})]})]})};g0.propTypes={open:T.bool.isRequired,onClose:T.func.isRequired,onAssign:T.func.isRequired,workoutData:T.object,currentSchedule:T.object};const f7=60,h7=1500,Hn={STRENGTH:"strength",CARDIO:"cardio",YOGA:"yoga",REST:"rest"},rr={FULL:"full",UPPER:"upper",PUSH:"push",PULL:"pull",LEGS:"legs",CORE:"core"},Br={GENERAL:"general",RUNNING:"running",CYCLING:"cycling",SWIMMING:"swimming",HIIT:"hiit"},x0=({onNavigate:e})=>{const[t,n]=y.useState({show:!1,message:"",severity:"success"}),[i,o]=y.useState(!1),[c,d]=y.useState(null),[f,h]=y.useState(!1),[g,m]=y.useState(""),{isAutoAssignWeek:b,assignWorkoutToDay:v,weeklySchedule:j}=Po(),E={date:new Date,duration:"",notes:"",sessionName:"",sessionType:Hn.STRENGTH,workoutType:rr.FULL,cardioType:Br.GENERAL,numExercises:"",setsPerExercise:""},S=O=>{const I={};return O.date||(I.date="Date is required"),O.sessionType!==Hn.REST&&(O.duration?(isNaN(O.duration)||parseFloat(O.duration)<=0)&&(I.duration="Duration must be a positive number"):I.duration="Duration is required"),O.sessionType===Hn.STRENGTH&&(O.numExercises?(isNaN(O.numExercises)||parseInt(O.numExercises)<=0)&&(I.numExercises="Must be a positive number"):I.numExercises="Number of exercises is required",O.setsPerExercise?(isNaN(O.setsPerExercise)||parseInt(O.setsPerExercise)<=0)&&(I.setsPerExercise="Must be a positive number"):I.setsPerExercise="Sets per exercise is required"),I},w=async(O,{setSubmitting:I,resetForm:P})=>{try{const W=O.date.getTime(),L=O.sessionType===Hn.REST&&!O.duration?0:parseFloat(O.duration)*f7,z={date:W,duration:L,type:O.sessionType===Hn.STRENGTH?O.workoutType:O.sessionType===Hn.CARDIO?O.cardioType:O.sessionType,exercises:{},notes:O.notes.trim(),sessionName:O.sessionName.trim(),isManualLog:!0,sessionType:O.sessionType};if(O.sessionType===Hn.STRENGTH&&(z.numExercises=parseInt(O.numExercises),z.setsPerExercise=parseInt(O.setsPerExercise)),await Qx(z),O.sessionType!==Hn.REST){const q=await od();q.totalWorkouts+=1,q.totalTime+=z.duration,await Kx(q)}if(b()&&O.sessionType!==Hn.REST){const q=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(W).getDay()],B={sessionType:O.sessionType,sessionName:C(O.sessionType,O.workoutType,O.cardioType),date:new Date(W).toISOString()};await v(q,B),n({show:!0,message:`Activity logged and assigned to ${q}!`,severity:"success"})}else d({sessionType:O.sessionType,sessionName:C(O.sessionType,O.workoutType,O.cardioType),date:new Date(W).toISOString()}),n({show:!0,message:"Activity logged successfully!",severity:"success"});P(),setTimeout(()=>{e&&e("progress")},h7)}catch(W){console.error("Error saving activity:",W),n({show:!0,message:"Failed to save activity. Please try again.",severity:"error"})}finally{I(!1)}},C=(O,I,P)=>O===Hn.STRENGTH?{[rr.FULL]:"Full Body",[rr.UPPER]:"Upper Body",[rr.PUSH]:"Push",[rr.PULL]:"Pull",[rr.LEGS]:"Legs",[rr.CORE]:"Core"}[I]||"Strength":O===Hn.CARDIO?{[Br.GENERAL]:"Cardio",[Br.RUNNING]:"Running",[Br.CYCLING]:"Cycling",[Br.SWIMMING]:"Swimming",[Br.HIIT]:"HIIT"}[P]||"Cardio":{[Hn.YOGA]:"Yoga",[Hn.REST]:"Rest"}[O]||O,k=async O=>{if(c)try{await v(O,c),m(`Session assigned to ${O}`),h(!0),d(null)}catch(I){console.error("Error assigning session:",I),m("Failed to assign session"),h(!0)}},R=()=>"Log Activity";return r.jsx(Hh,{dateAdapter:t0,children:r.jsxs(A,{sx:{width:"100%",maxWidth:"700px",margin:"0 auto",padding:{xs:"1rem 0.75rem",sm:"1.5rem 1rem",md:"2rem 1rem"},boxSizing:"border-box"},children:[r.jsxs(gt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[r.jsx(A,{sx:{mb:1.5},children:r.jsx(M,{variant:"subtitle1",sx:{fontWeight:600},children:R()})}),t.show&&r.jsx(gt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:r.jsx(kt,{severity:t.severity,sx:{mb:3},onClose:()=>n({...t,show:!1}),children:t.message})}),r.jsx(Ge,{sx:{borderRadius:3,width:"100%",boxSizing:"border-box"},children:r.jsx(at,{sx:{p:{xs:2,sm:3},"&:last-child":{pb:{xs:2,sm:3}}},children:r.jsx(k4,{initialValues:E,validate:S,onSubmit:w,children:({errors:O,touched:I,isSubmitting:P,isValid:W,dirty:L,values:z,setFieldValue:q})=>r.jsx(YE,{children:r.jsxs(Le,{spacing:2,children:[r.jsx(Sl,{name:"date",children:()=>r.jsx(jh,{label:"Date",value:z.date,onChange:B=>q("date",B),slotProps:{textField:{fullWidth:!0,error:I.date&&!!O.date,helperText:I.date&&O.date,sx:{width:"100%"}}},sx:{width:"100%"}})}),r.jsxs(Xt,{fullWidth:!0,children:[r.jsx(En,{children:"Session Type"}),r.jsxs(cn,{value:z.sessionType,label:"Session Type",onChange:B=>q("sessionType",B.target.value),children:[r.jsx(Be,{value:Hn.STRENGTH,children:"Strength"}),r.jsx(Be,{value:Hn.CARDIO,children:"Cardio"}),r.jsx(Be,{value:Hn.YOGA,children:"Yoga"}),r.jsx(Be,{value:Hn.REST,children:"Rest Day"})]})]}),z.sessionType===Hn.STRENGTH&&r.jsxs(Xt,{fullWidth:!0,children:[r.jsx(En,{children:"Workout Type"}),r.jsxs(cn,{value:z.workoutType,label:"Workout Type",onChange:B=>q("workoutType",B.target.value),children:[r.jsx(Be,{value:rr.FULL,children:"Full Body"}),r.jsx(Be,{value:rr.UPPER,children:"Upper Body"}),r.jsx(Be,{value:rr.PUSH,children:"Push"}),r.jsx(Be,{value:rr.PULL,children:"Pull"}),r.jsx(Be,{value:rr.LEGS,children:"Legs"}),r.jsx(Be,{value:rr.CORE,children:"Core"})]})]}),z.sessionType===Hn.CARDIO&&r.jsxs(Xt,{fullWidth:!0,children:[r.jsx(En,{children:"Cardio Type"}),r.jsxs(cn,{value:z.cardioType,label:"Cardio Type",onChange:B=>q("cardioType",B.target.value),children:[r.jsx(Be,{value:Br.GENERAL,children:"General Cardio"}),r.jsx(Be,{value:Br.RUNNING,children:"Running"}),r.jsx(Be,{value:Br.CYCLING,children:"Cycling"}),r.jsx(Be,{value:Br.SWIMMING,children:"Swimming"}),r.jsx(Be,{value:Br.HIIT,children:"HIIT"})]})]}),z.sessionType!==Hn.REST&&r.jsx(Sl,{name:"duration",children:({field:B})=>r.jsx(Je,{...B,fullWidth:!0,type:"number",label:"Duration (minutes)",placeholder:"e.g., 45",error:I.duration&&!!O.duration,helperText:I.duration&&O.duration,variant:"outlined",inputProps:{min:0,step:1}})}),z.sessionType===Hn.STRENGTH&&r.jsxs(r.Fragment,{children:[r.jsx(Sl,{name:"numExercises",children:({field:B})=>r.jsx(Je,{...B,fullWidth:!0,type:"number",label:"Number of Exercises",placeholder:"e.g., 6",error:I.numExercises&&!!O.numExercises,helperText:I.numExercises&&O.numExercises,variant:"outlined",inputProps:{min:1,step:1}})}),r.jsx(Sl,{name:"setsPerExercise",children:({field:B})=>r.jsx(Je,{...B,fullWidth:!0,type:"number",label:"Sets per Exercise",placeholder:"e.g., 3",error:I.setsPerExercise&&!!O.setsPerExercise,helperText:I.setsPerExercise&&O.setsPerExercise,variant:"outlined",inputProps:{min:1,step:1}})})]}),r.jsx(Sl,{name:"sessionName",children:({field:B})=>r.jsx(Je,{...B,fullWidth:!0,label:"Session Name (optional)",placeholder:"e.g., Morning workout, Leg day, etc.",variant:"outlined"})}),r.jsx(Sl,{name:"notes",children:({field:B})=>r.jsx(Je,{...B,fullWidth:!0,multiline:!0,rows:4,label:"Notes (optional)",placeholder:"Add any notes about your session...",variant:"outlined"})}),r.jsx(Ce,{type:"submit",variant:"contained",fullWidth:!0,disabled:P||!W||!L,sx:{bgcolor:"primary.main","&:hover":{bgcolor:"primary.main",filter:"brightness(0.9)"},py:1.5,fontWeight:600,mt:2},children:P?"Logging...":`Log ${R().replace("Log ","")}`}),!b()&&c&&r.jsx(Ce,{variant:"outlined",fullWidth:!0,startIcon:r.jsx(zu,{}),onClick:()=>o(!0),sx:{mt:1,py:1.5,fontWeight:600},children:"Assign to Day of Week"})]})})})})})]}),r.jsx(Or,{open:f,autoHideDuration:3e3,onClose:()=>h(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:r.jsx(kt,{severity:"success",onClose:()=>h(!1),children:g})}),r.jsx(g0,{open:i,onClose:()=>o(!1),onAssign:k,workoutData:c,currentSchedule:j})]})})};x0.propTypes={onNavigate:T.func};const U2=({onNavigate:e})=>r.jsx(A,{children:r.jsx(x0,{onNavigate:e,hideBackButton:!0})});U2.propTypes={onNavigate:T.func};let Vf=null,nC=[];const p7="goodlift_custom_foods",m7=async()=>{if(Vf)return Vf;try{const n=await fetch("/goodlift/data/nutrition.json");if(!n.ok)throw new Error("Failed to load nutrition database");return Vf=(await n.json()).map(o=>({...o,_nameLower:o.name.toLowerCase(),_tagsLower:(o.tags||"").toLowerCase()})),Vf}catch(e){return console.error("Error loading nutrition database:",e),[]}},g7=()=>{try{const e=localStorage.getItem(p7);return nC=(e?JSON.parse(e):[]).map(n=>({...n,_nameLower:n._nameLower||n.name.toLowerCase(),_tagsLower:n._tagsLower||(n.tags||"").toLowerCase()})),nC}catch(e){return console.error("Error loading custom foods:",e),[]}},y0=e=>{if(e==null||isNaN(e))return"0";const t=[{value:.125,str:"1/8"},{value:.25,str:"1/4"},{value:.333,str:"1/3"},{value:.375,str:"3/8"},{value:.5,str:"1/2"},{value:.625,str:"5/8"},{value:.666,str:"2/3"},{value:.75,str:"3/4"},{value:.875,str:"7/8"}],n=Math.floor(e),i=e-n;if(i<.05)return n.toString();if(i>.95)return(n+1).toString();let o=null,c=1/0;for(const d of t){const f=Math.abs(i-d.value);f<c&&f<.05&&(c=f,o=d.str)}return o?n>0?`${n} ${o}`:o:e.toFixed(2)},$2=e=>{const t=[{label:e.standard_portion,grams:e.portion_grams,type:"standard",isStandard:!0},{label:"grams",grams:100,type:"grams",isStandard:!1}];if(e.volume_amount&&e.volume_unit){const n=`${y0(e.volume_amount)} ${e.volume_unit}`;t.push({label:n,grams:e.portion_grams,type:"volume",isStandard:!1,volumeAmount:e.volume_amount,volumeUnit:e.volume_unit})}return t},Zu=async(e,t={})=>{const{maxResults:n=50,includeCustom:i=!0}=t;if(!e||e.trim().length<2)return[];const o=await m7(),c=i?g7():[],d=[...o,...c],h=e.toLowerCase().trim().split(/\s+/);return d.map(m=>{const b=m._nameLower||m.name.toLowerCase(),v=m._tagsLower||(m.tags||"").toLowerCase();let j=0,E=0;for(const S of h)b===S?(j+=1e3,E++):b.startsWith(S)?(j+=500,E++):b.includes(S)?(j+=100,E++):v.includes(S)&&(j+=50,E++);return E<h.length?null:(j+=m.rank,{...m,searchScore:j})}).filter(m=>m!==null).sort((m,b)=>b.searchScore-m.searchScore).slice(0,n)},Ju=(e,t)=>{const n=t/100;return{calories:Math.round(e.calories*n),protein:Math.round(e.protein*n),carbs:Math.round(e.carbs*n),fat:Math.round(e.fat*n),fiber:Math.round(e.fiber*n)}},Ch=(e,t=1)=>{const n=e.portion_factor*t;return{calories:Math.round(e.calories*n),protein:Math.round(e.protein*n),carbs:Math.round(e.carbs*n),fat:Math.round(e.fat*n),fiber:Math.round(e.fiber*n)}},q2=({open:e,onClose:t,editRecipe:n=null,onSave:i})=>{const[o,c]=y.useState(""),[d,f]=y.useState(""),[h,g]=y.useState([]),[m,b]=y.useState(""),[v,j]=y.useState([]),[E,S]=y.useState(!1),[w,C]=y.useState("");y.useEffect(()=>{n?(c(n.name||""),f(n.description||""),g(n.foods||[])):(c(""),f(""),g([]))},[n,e]);const k=y.useCallback(async re=>{if(!re||re.trim().length<2){C("Please enter at least 2 characters to search");return}S(!0),C("");try{const H=await Zu(re,{maxResults:20});j(H)}catch(H){console.error("Error searching foods:",H),C("Failed to search foods. Please try again."),j([])}finally{S(!1)}},[]),R=(re,H)=>Ju(re,H),O=(re,H=100)=>{const $=R(re,H),N={id:`${Date.now()}-${Math.random().toString(36).slice(2,11)}`,foodId:re.id,name:re.name,grams:H,nutrition:$};g([...h,N]),b(""),j([])},I=re=>{g(h.filter(H=>H.id!==re))},P=(re,H,$)=>{const N=Math.max(1,parseFloat(H)||0);g(h.map(V=>{if(V.id===re){const F=Ju($,N);return{...V,grams:N,nutrition:F}}return V}))},W=()=>h.reduce((re,H)=>({calories:re.calories+H.nutrition.calories,protein:re.protein+H.nutrition.protein,carbs:re.carbs+H.nutrition.carbs,fat:re.fat+H.nutrition.fat,fiber:re.fiber+H.nutrition.fiber}),{calories:0,protein:0,carbs:0,fat:0,fiber:0}),L=()=>h.reduce((re,H)=>re+H.grams,0),z=async()=>{if(!o.trim()){C("Please enter a recipe name");return}if(h.length===0){C("Please add at least one food to the recipe");return}const re=W(),H=L(),$={id:n?.id||`recipe-${Date.now()}-${Math.random().toString(36).slice(2,11)}`,name:o.trim(),description:d.trim(),foods:h,totalNutrition:re,totalWeight:H,createdAt:n?.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()};try{await JC($),i&&i($),q()}catch(N){console.error("Error saving recipe:",N),C("Failed to save recipe. Please try again.")}},q=()=>{c(""),f(""),g([]),b(""),j([]),C(""),t()},B=W(),U=L();return r.jsxs(Et,{open:e,onClose:q,maxWidth:"md",fullWidth:!0,children:[r.jsx(zt,{children:n?"Edit Recipe":"Create New Recipe"}),r.jsx(Dt,{children:r.jsxs(A,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1},children:[r.jsx(Je,{fullWidth:!0,label:"Recipe Name",value:o,onChange:re=>c(re.target.value),placeholder:"e.g., Protein Smoothie, Chicken Salad",required:!0,size:"small"}),r.jsx(Je,{fullWidth:!0,label:"Description (optional)",value:d,onChange:re=>f(re.target.value),placeholder:"Brief description of the recipe",multiline:!0,rows:2,size:"small"}),r.jsxs(A,{children:[r.jsx(M,{variant:"subtitle2",gutterBottom:!0,sx:{fontWeight:600},children:"Add Foods"}),r.jsxs(A,{sx:{display:"flex",gap:1,mb:2},children:[r.jsx(Je,{fullWidth:!0,placeholder:"Enter food name to search...",size:"small",value:m,onChange:re=>b(re.target.value),onKeyPress:re=>{re.key==="Enter"&&k(m)},InputProps:{startAdornment:r.jsx(hi,{position:"start",children:r.jsx(Bi,{fontSize:"small",color:"action"})})}}),r.jsx(Ce,{variant:"contained",onClick:()=>k(m),disabled:E||m.trim().length<2,sx:{minWidth:100},children:E?r.jsx(Ma,{size:20,color:"inherit"}):"Search"})]}),w&&r.jsx(kt,{severity:"error",sx:{mb:2},onClose:()=>C(""),children:w}),v.length>0&&r.jsx(Us,{variant:"outlined",sx:{maxHeight:250,overflow:"auto",mb:2},children:r.jsx(wn,{disablePadding:!0,children:v.map((re,H)=>{const $=R(re,100);return r.jsxs(A,{children:[H>0&&r.jsx(ln,{}),r.jsx(it,{button:!0,onClick:()=>O(re),sx:{py:1.5},children:r.jsx(St,{primary:r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[r.jsx(M,{variant:"body2",sx:{fontWeight:500,flex:1},children:re.name}),re.isCustom&&r.jsx(Ne,{label:"Custom",size:"small",color:"info",sx:{height:20,fontSize:"0.7rem",fontWeight:600}})]}),secondary:r.jsxs(A,{component:"span",sx:{display:"flex",gap:.5,mt:.5,flexWrap:"wrap"},children:[r.jsx(Ne,{label:`${$.calories.toFixed(0)} cal`,size:"small",sx:{height:20,fontSize:"0.7rem"}}),r.jsx(Ne,{label:`P: ${$.protein.toFixed(1)}g`,size:"small",color:"primary",sx:{height:20,fontSize:"0.7rem"}})]})})})]},re.id)})})}),!E&&v.length===0&&m.trim().length>=2&&!w&&r.jsx(kt,{severity:"info",sx:{mb:2},children:"No foods found."})]}),h.length>0&&r.jsxs(A,{children:[r.jsxs(M,{variant:"subtitle2",gutterBottom:!0,sx:{fontWeight:600},children:["Recipe Ingredients (",h.length,")"]}),r.jsx(wn,{disablePadding:!0,sx:{border:1,borderColor:"divider",borderRadius:1},children:h.map((re,H)=>r.jsxs(A,{children:[H>0&&r.jsx(ln,{}),r.jsx(it,{sx:{py:1},children:r.jsx(St,{primary:r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:.75,mb:.25},children:[r.jsx(M,{variant:"body2",sx:{fontWeight:500,flex:1,fontSize:"0.875rem"},children:re.name}),r.jsx(Je,{type:"number",value:re.grams,onChange:$=>P(re.id,$.target.value,{fdcId:re.fdcId,description:re.name,foodNutrients:Object.keys(NUTRIENT_IDS).map(N=>({nutrientId:NUTRIENT_IDS[N],value:re.grams>0?re.nutrition[N.toLowerCase()]/(re.grams/100):0}))}),size:"small",sx:{width:80},InputProps:{endAdornment:r.jsx(M,{variant:"caption",sx:{ml:.5},children:"g"})},inputProps:{min:1,step:1}}),r.jsx(Ie,{edge:"end",onClick:()=>I(re.id),color:"error",size:"small",children:r.jsx(jo,{fontSize:"small"})})]}),secondary:r.jsxs(A,{component:"span",sx:{display:"flex",gap:.4,flexWrap:"wrap",mt:.5},children:[r.jsx(Ne,{label:`${re.nutrition.calories.toFixed(0)} cal`,size:"small",sx:{height:18,fontSize:"0.65rem"}}),r.jsx(Ne,{label:`P: ${re.nutrition.protein.toFixed(1)}g`,size:"small",color:"primary",sx:{height:18,fontSize:"0.65rem"}}),r.jsx(Ne,{label:`C: ${re.nutrition.carbs.toFixed(1)}g`,size:"small",color:"secondary",sx:{height:18,fontSize:"0.65rem"}}),r.jsx(Ne,{label:`F: ${re.nutrition.fat.toFixed(1)}g`,size:"small",color:"warning",sx:{height:18,fontSize:"0.65rem"}})]})})})]},re.id))})]}),h.length>0&&r.jsxs(A,{sx:{p:2,bgcolor:"primary.50",borderRadius:1,border:1,borderColor:"primary.200"},children:[r.jsxs(M,{variant:"subtitle2",gutterBottom:!0,sx:{fontWeight:600,mb:1},children:["Total Recipe Nutrition (",U,"g)"]}),r.jsxs(A,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:[r.jsx(Ne,{label:`${B.calories.toFixed(0)} cal`,size:"small"}),r.jsx(Ne,{label:`Protein: ${B.protein.toFixed(1)}g`,color:"primary",size:"small"}),r.jsx(Ne,{label:`Carbs: ${B.carbs.toFixed(1)}g`,color:"secondary",size:"small"}),r.jsx(Ne,{label:`Fat: ${B.fat.toFixed(1)}g`,color:"warning",size:"small"}),r.jsx(Ne,{label:`Fiber: ${B.fiber.toFixed(1)}g`,color:"success",size:"small"})]})]}),w&&r.jsx(M,{color:"error",variant:"body2",children:w})]})}),r.jsxs(Nt,{sx:{px:3,pb:2},children:[r.jsx(Ce,{onClick:q,size:"small",children:"Cancel"}),r.jsx(Ce,{onClick:z,variant:"contained",size:"small",children:n?"Update Recipe":"Save Recipe"})]})]})};q2.propTypes={open:T.bool.isRequired,onClose:T.func.isRequired,editRecipe:T.object,onSave:T.func};const Y2=({recipes:e,onEdit:t,onRecipesUpdate:n,onAddToLog:i})=>{const[o,c]=y.useState(!1),[d,f]=y.useState(null),[h,g]=y.useState(!1),[m,b]=y.useState(null),[v,j]=y.useState(1),E=k=>{f(k),c(!0)},S=async()=>{if(d)try{await $O(d.id),n&&n()}catch(k){console.error("Error deleting recipe:",k)}c(!1),f(null)},w=k=>{b(k),j(1),g(!0)},C=()=>{if(m&&v>0){const k=v,R={calories:m.totalNutrition.calories*k,protein:m.totalNutrition.protein*k,carbs:m.totalNutrition.carbs*k,fat:m.totalNutrition.fat*k,fiber:m.totalNutrition.fiber*k},O={id:`${Date.now()}-${Math.random().toString(36).slice(2,11)}`,date:new Date().toISOString(),foodName:`${m.name} (${v}x portion)`,grams:m.totalWeight*k,nutrition:R,isRecipe:!0,recipeId:m.id,portionSize:v};i&&i(O),g(!1),b(null),j(1)}};return e.length===0?r.jsx(Ge,{children:r.jsx(at,{sx:{py:2,"&:last-child":{pb:2}},children:r.jsx(M,{color:"text.secondary",align:"center",sx:{py:2,fontSize:"0.9rem"},children:'No saved recipes yet. Click "Create New Recipe" to get started.'})})}):r.jsxs(r.Fragment,{children:[r.jsx(Ge,{children:r.jsxs(at,{sx:{py:2,"&:last-child":{pb:2}},children:[r.jsxs(M,{variant:"h6",gutterBottom:!0,children:["Saved Recipes (",e.length,")"]}),r.jsx(wn,{disablePadding:!0,children:e.map((k,R)=>r.jsxs(A,{children:[R>0&&r.jsx(ln,{sx:{my:1}}),r.jsx(it,{sx:{px:0,py:1},secondaryAction:r.jsxs(A,{children:[r.jsx(Ie,{edge:"end",onClick:()=>w(k),color:"primary",size:"small",sx:{mr:.5},children:r.jsx($n,{fontSize:"small"})}),r.jsx(Ie,{edge:"end",onClick:()=>t(k),size:"small",sx:{mr:.5},children:r.jsx(Da,{fontSize:"small"})}),r.jsx(Ie,{edge:"end",onClick:()=>E(k),color:"error",size:"small",children:r.jsx(jo,{fontSize:"small"})})]}),children:r.jsx(St,{primary:r.jsxs(A,{children:[r.jsx(M,{variant:"body2",sx:{fontWeight:600},children:k.name}),k.description&&r.jsx(M,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:k.description})]}),secondary:r.jsxs(A,{component:"span",sx:{mt:.5,display:"block"},children:[r.jsxs(M,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:[k.foods?.length||0," ingredient",k.foods?.length!==1?"s":"","  ",k.totalWeight,"g total"]}),r.jsxs(A,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:[r.jsx(Ne,{label:`${k.totalNutrition.calories.toFixed(0)} cal`,size:"small",sx:{height:20,fontSize:"0.7rem"}}),r.jsx(Ne,{label:`P: ${k.totalNutrition.protein.toFixed(1)}g`,size:"small",color:"primary",sx:{height:20,fontSize:"0.7rem"}}),r.jsx(Ne,{label:`C: ${k.totalNutrition.carbs.toFixed(1)}g`,size:"small",color:"secondary",sx:{height:20,fontSize:"0.7rem"}}),r.jsx(Ne,{label:`F: ${k.totalNutrition.fat.toFixed(1)}g`,size:"small",color:"warning",sx:{height:20,fontSize:"0.7rem"}})]})]})})})]},k.id))})]})}),r.jsxs(Et,{open:o,onClose:()=>c(!1),children:[r.jsx(zt,{children:"Delete Recipe"}),r.jsx(Dt,{children:r.jsxs(M,{children:['Are you sure you want to delete "',d?.name,'"? This action cannot be undone.']})}),r.jsxs(Nt,{children:[r.jsx(Ce,{onClick:()=>c(!1),size:"small",children:"Cancel"}),r.jsx(Ce,{onClick:S,color:"error",variant:"contained",size:"small",children:"Delete"})]})]}),r.jsxs(Et,{open:h,onClose:()=>g(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(zt,{children:"Add Recipe to Log"}),r.jsx(Dt,{children:m&&r.jsxs(A,{sx:{pt:1},children:[r.jsx(M,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600},children:m.name}),r.jsxs(M,{variant:"body2",color:"text.secondary",gutterBottom:!0,sx:{mb:2},children:["Full recipe: ",m.totalWeight,"g"]}),r.jsx(Je,{fullWidth:!0,type:"number",label:"Portion Size",value:v,onChange:k=>j(Math.max(.01,parseFloat(k.target.value)||0)),helperText:"1 = full recipe, 0.5 = half recipe, 2 = double recipe",inputProps:{min:.01,step:.25},size:"small",sx:{mb:2}}),r.jsxs(M,{variant:"body2",color:"text.secondary",gutterBottom:!0,sx:{mb:1},children:["Nutrition for ",v,"x portion (",(m.totalWeight*v).toFixed(0),"g):"]}),r.jsxs(A,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:[r.jsx(Ne,{label:`${(m.totalNutrition.calories*v).toFixed(0)} cal`,size:"small"}),r.jsx(Ne,{label:`Protein: ${(m.totalNutrition.protein*v).toFixed(1)}g`,color:"primary",size:"small"}),r.jsx(Ne,{label:`Carbs: ${(m.totalNutrition.carbs*v).toFixed(1)}g`,color:"secondary",size:"small"}),r.jsx(Ne,{label:`Fat: ${(m.totalNutrition.fat*v).toFixed(1)}g`,color:"warning",size:"small"}),r.jsx(Ne,{label:`Fiber: ${(m.totalNutrition.fiber*v).toFixed(1)}g`,color:"success",size:"small"})]})]})}),r.jsxs(Nt,{sx:{px:3,pb:2},children:[r.jsx(Ce,{onClick:()=>g(!1),size:"small",children:"Cancel"}),r.jsx(Ce,{onClick:C,variant:"contained",size:"small",children:"Add to Log"})]})]})]})};Y2.propTypes={recipes:T.array.isRequired,onEdit:T.func.isRequired,onRecipesUpdate:T.func.isRequired,onAddToLog:T.func.isRequired};const x7=.25,sC=1,au=100,G2=({open:e,onClose:t,onSave:n,onFavoritesChange:i})=>{const[o,c]=y.useState(0),[d,f]=y.useState(""),[h,g]=y.useState([]),[m,b]=y.useState([]),[v,j]=y.useState(!1),[E,S]=y.useState(""),w=y.useRef(null),[C,k]=y.useState([]),[R,O]=y.useState(new Set);y.useEffect(()=>{e&&(f(""),g([]),b([]),S(""),c(0),k([]),O(new Set))},[e]);const I=y.useCallback(F=>{try{const X=F.trim();if(X.length>=2&&!h.includes(X)){const oe=[...h,X];g(oe),f(""),W(oe)}}catch(X){console.error("Error adding search term:",X),S("Failed to add search term. Please try again.")}},[h]),P=y.useCallback(F=>{try{const X=h.filter(oe=>oe!==F);g(X),X.length===0?b([]):W(X)}catch(X){console.error("Error removing search term:",X),S("Failed to remove search term. Please try again.")}},[h]),W=y.useCallback(async F=>{if(!F||F.length===0){b([]);return}j(!0),S("");try{const X=F.map(Te=>Zu(Te,{maxResults:20})),oe=await Promise.all(X),ue=new Map;oe.forEach((Te,De)=>{Te.forEach(ee=>{const G=ee.id||ee.fdcId;ue.has(G)||ue.set(G,{...ee,searchTerm:F[De]})})}),b(Array.from(ue.values()))}catch(X){console.error("Error searching foods:",X),S("Unable to load the food database. Please try again."),b([])}finally{j(!1)}},[]),L=y.useCallback(async F=>{if(!F||F.trim().length<2){b([]);return}j(!0),S("");try{const X=await Zu(F,{maxResults:20});b(X)}catch(X){console.error("Error searching foods:",X),S("Unable to load the food database. Please try again."),b([])}finally{j(!1)}},[]);y.useEffect(()=>{if(w.current&&clearTimeout(w.current),!(h.length>0)){if(!d||d.trim().length<2){b([]);return}return w.current=setTimeout(()=>{L(d)},300),()=>{w.current&&(clearTimeout(w.current),w.current=null)}}},[d,h,L]);const z=F=>{try{const X=F.id||F.fdcId,oe=new Set(R);if(oe.has(X))oe.delete(X),k(ue=>ue.filter(Te=>(Te.food.id||Te.food.fdcId)!==X));else{oe.add(X);const ue={id:crypto.randomUUID(),food:F,portionType:"standard",portionQuantity:1,grams:F.portion_grams||au};k(Te=>[...Te,ue])}O(oe)}catch(X){console.error("Error toggling food selection:",X),S("Failed to select food. Please try again.")}},q=F=>{try{const X=C.find(oe=>oe.id===F);if(X){const oe=X.food.id||X.food.fdcId;O(ue=>{const Te=new Set(ue);return Te.delete(oe),Te})}k(C.filter(oe=>oe.id!==F))}catch(X){console.error("Error removing meal item:",X),S("Failed to remove item. Please try again.")}},B=(F,X)=>{try{k(C.map(oe=>{if(oe.id!==F)return oe;const ue=oe.food;let Te=oe.grams,De=1;return X==="standard"?(Te=ue.portion_grams||au,De=1):X==="grams"?(Te=au,De=1):X==="volume"&&(Te=ue.portion_grams||au,De=1),{...oe,portionType:X,grams:Te,portionQuantity:De}}))}catch(oe){console.error("Error changing portion type:",oe),S("Failed to change portion type. Please try again.")}},U=(F,X)=>{try{const oe=Math.max(x7,parseFloat(X)||1);k(C.map(ue=>{if(ue.id!==F)return ue;const De=(ue.food.portion_grams||au)*oe;return{...ue,portionQuantity:oe,grams:De}}))}catch(oe){console.error("Error updating portion quantity:",oe),S("Failed to update quantity. Please try again.")}},re=(F,X)=>{try{const oe=Math.max(sC,parseFloat(X)||sC);k(C.map(ue=>ue.id===F?{...ue,grams:oe,portionType:"grams",portionQuantity:1}:ue))}catch(oe){console.error("Error updating meal item grams:",oe),S("Failed to update quantity. Please try again.")}},H=F=>{const{food:X,grams:oe,portionType:ue,portionQuantity:Te=1}=F;return ue==="standard"||ue==="volume"?Ch(X,Te):Ju(X,oe)},$=()=>{if(C.length!==0)try{C.forEach(F=>{try{const X=H(F),oe={id:`${Date.now()}-${Math.random().toString(36).slice(2,11)}`,date:new Date().toISOString(),foodName:F.food.name,grams:F.grams,portionType:F.portionType,portionQuantity:F.portionQuantity,nutrition:X};n(oe)}catch(X){console.error("Error saving meal item:",F,X)}}),t()}catch(F){console.error("Error saving meal:",F),S("Failed to save meal. Please try again.")}},N=async(F,X)=>{X&&X.stopPropagation();try{ch(F)?await nT(F.fdcId||F.id):await tT(F),i&&i()}catch(oe){console.error("Error toggling favorite:",oe)}},V=(F,X,oe=!1)=>{try{const ue=Ch(F,1),Te=ch(F);return r.jsx(gt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.15},children:r.jsxs(it,{button:!0,onClick:De=>{De.preventDefault(),X()},sx:{py:1,px:2,"&:hover":{backgroundColor:"action.hover"},transition:"background-color 0.2s, border-color 0.2s, margin-left 0.3s",cursor:"pointer",display:"flex",alignItems:"center",borderLeft:oe?"4px solid":"none",borderLeftColor:oe?"success.main":"transparent",marginLeft:oe?1:0,backgroundColor:oe?"success.50":"transparent"},children:[r.jsx(St,{primary:r.jsx(M,{variant:"body2",sx:{fontWeight:500,color:"text.primary"},children:F.name||F.foodName||"Unknown Food"}),secondary:r.jsx(M,{variant:"caption",sx:{color:"text.secondary"},children:"per one serving"}),sx:{flex:1}}),r.jsxs(M,{variant:"body2",sx:{fontWeight:600,color:"text.primary",minWidth:60,textAlign:"right",mr:1},children:[ue.calories," cal"]}),r.jsx(Ie,{size:"small",onClick:De=>N(F,De),sx:{color:Te?"warning.main":"action.disabled","&:hover":{color:"warning.main"}},children:Te?r.jsx(pi,{fontSize:"small"}):r.jsx(Vl,{fontSize:"small"})})]})})}catch(ue){return console.error("Error rendering search result item:",F,ue),r.jsx(it,{sx:{py:1,px:2},children:r.jsx(St,{primary:r.jsx(M,{variant:"body2",color:"error",children:"Error loading food item"})})})}};return r.jsxs(Et,{open:e,onClose:t,fullScreen:!0,PaperProps:{sx:{bgcolor:"background.default",backgroundImage:"none"}},children:[r.jsxs(zt,{sx:{borderBottom:"1px solid",borderColor:"divider",display:"flex",alignItems:"center",justifyContent:"space-between",px:3,py:2},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(mu,{color:"primary"}),r.jsx(M,{variant:"h6",sx:{fontWeight:600},children:"Log a Meal"})]}),r.jsx(Ie,{onClick:t,edge:"end",children:r.jsx(Yr,{})})]}),r.jsxs(Dt,{sx:{p:0,overflow:"hidden",display:"flex",flexDirection:"column"},children:[r.jsx(A,{sx:{borderBottom:1,borderColor:"divider",px:3,pt:2},children:r.jsxs(Wa,{value:o,onChange:(F,X)=>c(X),sx:{"& .MuiTab-root":{minHeight:48,fontSize:"0.875rem",fontWeight:600}},children:[r.jsx(ws,{icon:r.jsx(Bi,{fontSize:"small"}),label:"Search Food",iconPosition:"start"}),r.jsx(ws,{icon:r.jsx(mu,{fontSize:"small"}),label:`My Meal (${C.length})`,iconPosition:"start"})]})}),r.jsxs(A,{sx:{flex:1,overflow:"auto",p:3},children:[o===0&&r.jsxs(A,{children:[r.jsxs(A,{sx:{mb:2},children:[r.jsx(Je,{fullWidth:!0,placeholder:"Type food names and press Enter or comma to add multiple searches...",value:d,onChange:F=>{const X=F.target.value;if(X.includes(",")){const oe=X.split(",");if(oe.length>1){const ue=oe[0].trim();ue.length>=2&&I(ue),f(oe.slice(1).join(","))}}else f(X)},onKeyDown:F=>{F.key==="Enter"&&(F.preventDefault(),d.trim().length>=2&&I(d))},InputProps:{startAdornment:r.jsx(hi,{position:"start",children:r.jsx(Bi,{color:"primary"})})},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"background.paper"}}}),h.length>0&&r.jsx(A,{sx:{display:"flex",gap:1,mt:1,flexWrap:"wrap"},children:h.map((F,X)=>r.jsx(Ne,{label:F,onDelete:()=>P(F),color:"primary",size:"small",sx:{fontWeight:500,animation:"fadeIn 0.3s ease-in","@keyframes fadeIn":{from:{opacity:0,transform:"scale(0.8)"},to:{opacity:1,transform:"scale(1)"}}}},X))}),h.length===0&&d.length===0&&r.jsx(M,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:" Tip: Enter multiple food names separated by comma or press Enter to search for all at once"})]}),E&&r.jsx(kt,{severity:"error",sx:{mb:2},onClose:()=>S(""),children:E}),v&&r.jsx(A,{sx:{display:"flex",justifyContent:"center",py:4},children:r.jsx(Ma,{})}),R.size>0&&r.jsx(A,{sx:{mb:2},children:r.jsx(kt,{severity:"success",sx:{animation:"fadeIn 0.3s ease-out"},children:r.jsxs(M,{variant:"body2",sx:{fontWeight:500},children:[R.size," food",R.size!==1?"s":""," added to meal - Click on a food below to remove it"]})})}),!v&&m.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs(M,{variant:"body2",color:"text.secondary",sx:{mb:1,fontWeight:500},children:["Found ",m.length," result",m.length!==1?"s":""," - Click to add to meal"]}),r.jsx(Us,{variant:"outlined",sx:{borderRadius:2},children:r.jsx(wn,{disablePadding:!0,children:m.map((F,X)=>{const oe=F.id||F.fdcId||`temp-${F.name}-${X}`,ue=R.has(oe);return r.jsxs(A,{children:[X>0&&r.jsx(ln,{}),V(F,()=>z(F),ue)]},oe)})})})]}),!v&&m.length===0&&(d.trim().length>=2||h.length>0)&&!E&&r.jsxs(kt,{severity:"info",children:[r.jsxs(M,{variant:"body2",sx:{fontWeight:500,mb:1},children:["No foods found",d?` for "${d}"`:""]}),r.jsx(M,{variant:"body2",color:"text.secondary",children:"Try simpler terms or check for spelling mistakes"})]})]}),o===1&&r.jsxs(A,{children:[r.jsx(M,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"My Meal"}),C.length===0?r.jsxs(Us,{sx:{p:4,textAlign:"center",bgcolor:"background.default",borderRadius:2},children:[r.jsx(mu,{sx:{fontSize:48,color:"text.secondary",mb:2}}),r.jsx(M,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:"No foods added yet"}),r.jsx(M,{variant:"body2",color:"text.secondary",children:'Search for foods in the "Search Food" tab and click to add them here'})]}):r.jsxs(r.Fragment,{children:[r.jsx(Us,{variant:"outlined",sx:{borderRadius:2,mb:2},children:r.jsx(wn,{disablePadding:!0,children:C.map((F,X)=>{const Te=!!$2(F.food).find(ee=>ee.type==="volume"),De=()=>F.portionType==="grams"?`${F.grams}g`:F.portionType==="volume"&&Te?`${y0(F.food.volume_amount*F.portionQuantity)} ${F.food.volume_unit}`:F.portionQuantity===1?F.food.standard_portion:`${F.portionQuantity}  ${F.food.standard_portion}`;return r.jsxs(A,{children:[X>0&&r.jsx(ln,{}),r.jsxs(it,{sx:{py:1.5,px:2,alignItems:"flex-start"},children:[r.jsx(St,{primary:r.jsxs(A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:.5},children:[r.jsx(M,{variant:"body2",sx:{fontWeight:600},children:F.food.name}),r.jsx(M,{variant:"body2",sx:{fontWeight:600,color:"text.secondary"},children:De()})]}),secondary:r.jsxs(A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[r.jsxs(A,{sx:{display:"flex",gap:1,alignItems:"center",flexWrap:"wrap"},children:[r.jsxs(To,{value:F.portionType,exclusive:!0,onChange:(ee,G)=>G&&B(F.id,G),size:"small",sx:{flexWrap:"wrap"},children:[r.jsx(ss,{value:"standard",sx:{px:1,py:.25,fontSize:"0.7rem"},children:F.food.standard_portion}),r.jsx(ss,{value:"grams",sx:{px:1,py:.25,fontSize:"0.7rem"},children:"grams"}),Te&&r.jsx(ss,{value:"volume",sx:{px:1,py:.25,fontSize:"0.7rem"},children:F.food.volume_unit})]}),F.portionType==="grams"?r.jsx(Je,{type:"number",value:F.grams,onChange:ee=>re(F.id,parseFloat(ee.target.value)||0),size:"small",inputProps:{min:1,step:1,style:{padding:"4px 8px",width:"60px"}},sx:{width:80}}):r.jsx(yo,{value:F.portionQuantity,options:[{label:"1/4",value:.25},{label:"1/2",value:.5},{label:"3/4",value:.75},{label:"1",value:1},{label:"1.5",value:1.5},{label:"2",value:2},{label:"2.5",value:2.5},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5}],onChange:ee=>U(F.id,ee),minValueWidth:"40px",useArrows:!0,sx:{minWidth:100}})]}),r.jsx(A,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:(()=>{const ee=H(F);return r.jsxs(r.Fragment,{children:[r.jsx(Ne,{label:`${ee.calories} cal`,size:"small",sx:{height:20,fontSize:"0.7rem"}}),r.jsx(Ne,{label:`P: ${ee.protein}g`,size:"small",color:"primary",sx:{height:20,fontSize:"0.7rem"}}),r.jsx(Ne,{label:`C: ${ee.carbs}g`,size:"small",color:"secondary",sx:{height:20,fontSize:"0.7rem"}}),r.jsx(Ne,{label:`F: ${ee.fat}g`,size:"small",color:"warning",sx:{height:20,fontSize:"0.7rem"}}),r.jsx(Ne,{label:`Fiber: ${ee.fiber}g`,size:"small",color:"success",sx:{height:20,fontSize:"0.7rem"}})]})})()})]})}),r.jsx(Ie,{edge:"end",onClick:()=>q(F.id),color:"error",size:"small",sx:{ml:1,mt:.5},children:r.jsx(Yr,{fontSize:"small"})})]})]},F.id)})})}),r.jsxs(Us,{sx:{p:2,bgcolor:"primary.50",borderRadius:2},children:[r.jsx(M,{variant:"subtitle2",gutterBottom:!0,sx:{fontWeight:600,color:"primary.main"},children:"Total Nutrition"}),r.jsx(A,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:(()=>{const F=C.reduce((X,oe)=>{const ue=H(oe);return{calories:X.calories+ue.calories,protein:X.protein+ue.protein,carbs:X.carbs+ue.carbs,fat:X.fat+ue.fat,fiber:X.fiber+ue.fiber}},{calories:0,protein:0,carbs:0,fat:0,fiber:0});return r.jsxs(r.Fragment,{children:[r.jsx(Ne,{label:`${F.calories} cal`,size:"medium",sx:{fontWeight:600}}),r.jsx(Ne,{label:`P: ${F.protein}g`,size:"medium",color:"primary",sx:{fontWeight:600}}),r.jsx(Ne,{label:`C: ${F.carbs}g`,size:"medium",color:"secondary",sx:{fontWeight:600}}),r.jsx(Ne,{label:`F: ${F.fat}g`,size:"medium",color:"warning",sx:{fontWeight:600}}),r.jsx(Ne,{label:`Fiber: ${F.fiber}g`,size:"medium",color:"success",sx:{fontWeight:600}})]})})()})]})]})]})]}),r.jsxs(A,{sx:{borderTop:"1px solid",borderColor:"divider",p:2,bgcolor:"background.paper",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(Ce,{onClick:t,variant:"outlined",children:"Cancel"}),r.jsxs(Ce,{onClick:$,variant:"contained",disabled:C.length===0,startIcon:r.jsx($n,{}),children:["Log Meal (",C.length," item",C.length!==1?"s":"",")"]})]})]})]})};G2.propTypes={open:T.bool.isRequired,onClose:T.func.isRequired,onSave:T.func.isRequired,recentFoods:T.array,favoriteFoods:T.array,onFavoritesChange:T.func};const y7=.25,rC=1,ou=100,Q2=({open:e,onClose:t,onSave:n,onFavoritesChange:i})=>{const[o,c]=y.useState(0),[d,f]=y.useState(""),[h,g]=y.useState([]),[m,b]=y.useState([]),[v,j]=y.useState(!1),[E,S]=y.useState(""),w=y.useRef(null),[C,k]=y.useState([]),[R,O]=y.useState(""),[I,P]=y.useState(""),[W,L]=y.useState(new Set);y.useEffect(()=>{e&&(f(""),g([]),b([]),S(""),c(0),k([]),L(new Set),O(""),P(""))},[e]);const z=y.useCallback(ee=>{try{const G=ee.trim();if(G.length>=2&&!h.includes(G)){const ae=[...h,G];g(ae),f(""),B(ae)}}catch(G){console.error("Error adding search term:",G),S("Failed to add search term. Please try again.")}},[h]),q=y.useCallback(ee=>{try{const G=h.filter(ae=>ae!==ee);g(G),G.length===0?b([]):B(G)}catch(G){console.error("Error removing search term:",G),S("Failed to remove search term. Please try again.")}},[h]),B=y.useCallback(async ee=>{if(!ee||ee.length===0){b([]);return}j(!0),S("");try{const G=ee.map(te=>Zu(te,{maxResults:20})),ae=await Promise.all(G),ve=new Map;ae.forEach((te,ye)=>{te.forEach(Se=>{const Y=Se.id||Se.fdcId;ve.has(Y)||ve.set(Y,{...Se,searchTerm:ee[ye]})})}),b(Array.from(ve.values()))}catch(G){console.error("Error searching foods:",G),S("Unable to load the food database. Please try again."),b([])}finally{j(!1)}},[]),U=y.useCallback(async ee=>{if(!ee||ee.trim().length<2){b([]);return}j(!0),S("");try{const G=await Zu(ee,{maxResults:20});b(G)}catch(G){console.error("Error searching foods:",G),S("Unable to load the food database. Please try again."),b([])}finally{j(!1)}},[]);y.useEffect(()=>{if(w.current&&clearTimeout(w.current),!(h.length>0)){if(!d||d.trim().length<2){b([]);return}return w.current=setTimeout(()=>{U(d)},300),()=>{w.current&&(clearTimeout(w.current),w.current=null)}}},[d,h,U]);const re=ee=>{try{const G=ee.id||ee.fdcId,ae=new Set(W);if(ae.has(G))ae.delete(G),k(ve=>ve.filter(te=>(te.food.id||te.food.fdcId)!==G));else{ae.add(G);const ve={id:crypto.randomUUID(),food:ee,portionType:"standard",portionQuantity:1,grams:ee.portion_grams||ou};k(te=>[...te,ve])}L(ae)}catch(G){console.error("Error toggling food selection:",G),S("Failed to select food. Please try again.")}},H=ee=>{try{const G=C.find(ae=>ae.id===ee);if(G){const ae=G.food.id||G.food.fdcId;L(ve=>{const te=new Set(ve);return te.delete(ae),te})}k(C.filter(ae=>ae.id!==ee))}catch(G){console.error("Error removing recipe item:",G),S("Failed to remove item. Please try again.")}},$=(ee,G)=>{try{k(C.map(ae=>{if(ae.id!==ee)return ae;const ve=ae.food;let te=ae.grams,ye=1;return G==="standard"?(te=ve.portion_grams||ou,ye=1):G==="grams"?(te=ou,ye=1):G==="volume"&&(te=ve.portion_grams||ou,ye=1),{...ae,portionType:G,grams:te,portionQuantity:ye}}))}catch(ae){console.error("Error changing portion type:",ae),S("Failed to change portion type. Please try again.")}},N=(ee,G)=>{try{const ae=Math.max(y7,parseFloat(G)||1);k(C.map(ve=>{if(ve.id!==ee)return ve;const ye=(ve.food.portion_grams||ou)*ae;return{...ve,portionQuantity:ae,grams:ye}}))}catch(ae){console.error("Error updating portion quantity:",ae),S("Failed to update quantity. Please try again.")}},V=(ee,G)=>{try{const ae=Math.max(rC,parseFloat(G)||rC);k(C.map(ve=>ve.id===ee?{...ve,grams:ae,portionType:"grams",portionQuantity:1}:ve))}catch(ae){console.error("Error updating recipe item grams:",ae),S("Failed to update quantity. Please try again.")}},F=ee=>{const{food:G,grams:ae,portionType:ve,portionQuantity:te=1}=ee;return ve==="standard"||ve==="volume"?Ch(G,te):Ju(G,ae)},X=()=>C.reduce((ee,G)=>{const ae=F(G);return{calories:ee.calories+ae.calories,protein:ee.protein+ae.protein,carbs:ee.carbs+ae.carbs,fat:ee.fat+ae.fat,fiber:ee.fiber+ae.fiber}},{calories:0,protein:0,carbs:0,fat:0,fiber:0}),oe=()=>C.reduce((ee,G)=>ee+G.grams,0),ue=async()=>{if(!R.trim()){S("Please enter a recipe name");return}if(C.length===0){S("Please add at least one food to the recipe");return}try{const ee=X(),G=oe(),ae=C.map(te=>{const ye=F(te);return{id:te.id,foodId:te.food.id||te.food.fdcId,name:te.food.name,grams:te.grams,portionType:te.portionType,portionQuantity:te.portionQuantity,nutrition:ye}}),ve={id:`recipe-${Date.now()}-${Math.random().toString(36).slice(2,11)}`,name:R.trim(),description:I.trim(),foods:ae,totalNutrition:ee,totalWeight:G,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await JC(ve),n&&n(ve),t()}catch(ee){console.error("Error saving recipe:",ee),S("Failed to save recipe. Please try again.")}},Te=async(ee,G)=>{G&&G.stopPropagation();try{ch(ee)?await nT(ee.fdcId||ee.id):await tT(ee),i&&i()}catch(ae){console.error("Error toggling favorite:",ae)}},De=(ee,G,ae=!1)=>{try{const ve=Ch(ee,1),te=ch(ee);return r.jsx(gt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.15},children:r.jsxs(it,{button:!0,onClick:ye=>{ye.preventDefault(),G()},sx:{py:1,px:2,"&:hover":{backgroundColor:"action.hover"},transition:"background-color 0.2s, border-color 0.2s, margin-left 0.3s",cursor:"pointer",display:"flex",alignItems:"center",borderLeft:ae?"4px solid":"none",borderLeftColor:ae?"success.main":"transparent",marginLeft:ae?1:0,backgroundColor:ae?"success.50":"transparent"},children:[r.jsx(St,{primary:r.jsx(M,{variant:"body2",sx:{fontWeight:500,color:"text.primary"},children:ee.name||ee.foodName||"Unknown Food"}),secondary:r.jsx(M,{variant:"caption",sx:{color:"text.secondary"},children:"per one serving"}),sx:{flex:1}}),r.jsxs(M,{variant:"body2",sx:{fontWeight:600,color:"text.primary",minWidth:60,textAlign:"right",mr:1},children:[ve.calories," cal"]}),r.jsx(Ie,{size:"small",onClick:ye=>Te(ee,ye),sx:{color:te?"warning.main":"action.disabled","&:hover":{color:"warning.main"}},children:te?r.jsx(pi,{fontSize:"small"}):r.jsx(Vl,{fontSize:"small"})})]})})}catch(ve){return console.error("Error rendering search result item:",ee,ve),r.jsx(it,{sx:{py:1,px:2},children:r.jsx(St,{primary:r.jsx(M,{variant:"body2",color:"error",children:"Error loading food item"})})})}};return r.jsxs(Et,{open:e,onClose:t,fullScreen:!0,PaperProps:{sx:{bgcolor:"background.default",backgroundImage:"none"}},children:[r.jsxs(zt,{sx:{borderBottom:"1px solid",borderColor:"divider",display:"flex",alignItems:"center",justifyContent:"space-between",px:3,py:2},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(gu,{color:"primary"}),r.jsx(M,{variant:"h6",sx:{fontWeight:600},children:"Create Recipe"})]}),r.jsx(Ie,{onClick:t,edge:"end",children:r.jsx(Yr,{})})]}),r.jsxs(Dt,{sx:{p:0,overflow:"hidden",display:"flex",flexDirection:"column"},children:[r.jsxs(A,{sx:{px:3,pt:2,pb:1,borderBottom:1,borderColor:"divider"},children:[r.jsx(Je,{fullWidth:!0,label:"Recipe Name",value:R,onChange:ee=>O(ee.target.value),placeholder:"e.g., Protein Smoothie, Chicken Salad",size:"small",required:!0,sx:{mb:1}}),r.jsx(Je,{fullWidth:!0,label:"Description (optional)",value:I,onChange:ee=>P(ee.target.value),placeholder:"Brief description of the recipe",size:"small",multiline:!0,rows:2})]}),r.jsx(A,{sx:{borderBottom:1,borderColor:"divider",px:3},children:r.jsxs(Wa,{value:o,onChange:(ee,G)=>c(G),sx:{"& .MuiTab-root":{minHeight:48,fontSize:"0.875rem",fontWeight:600}},children:[r.jsx(ws,{icon:r.jsx(Bi,{fontSize:"small"}),label:"Search Food",iconPosition:"start"}),r.jsx(ws,{icon:r.jsx(gu,{fontSize:"small"}),label:`Recipe Items (${C.length})`,iconPosition:"start"})]})}),r.jsxs(A,{sx:{flex:1,overflow:"auto",p:3},children:[o===0&&r.jsxs(A,{children:[r.jsxs(A,{sx:{mb:2},children:[r.jsx(Je,{fullWidth:!0,placeholder:"Type food names and press Enter or comma to add multiple searches...",value:d,onChange:ee=>{const G=ee.target.value;if(G.includes(",")){const ae=G.split(",");if(ae.length>1){const ve=ae[0].trim();ve.length>=2&&z(ve),f(ae.slice(1).join(","))}}else f(G)},onKeyDown:ee=>{ee.key==="Enter"&&(ee.preventDefault(),d.trim().length>=2&&z(d))},InputProps:{startAdornment:r.jsx(hi,{position:"start",children:r.jsx(Bi,{color:"primary"})})},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"background.paper"}}}),h.length>0&&r.jsx(A,{sx:{display:"flex",gap:1,mt:1,flexWrap:"wrap"},children:h.map((ee,G)=>r.jsx(Ne,{label:ee,onDelete:()=>q(ee),color:"primary",size:"small",sx:{fontWeight:500,animation:"fadeIn 0.3s ease-in","@keyframes fadeIn":{from:{opacity:0,transform:"scale(0.8)"},to:{opacity:1,transform:"scale(1)"}}}},G))}),h.length===0&&d.length===0&&r.jsx(M,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:" Tip: Enter multiple food names separated by comma or press Enter to search for all at once"})]}),E&&r.jsx(kt,{severity:"error",sx:{mb:2},onClose:()=>S(""),children:E}),v&&r.jsx(A,{sx:{display:"flex",justifyContent:"center",py:4},children:r.jsx(Ma,{})}),W.size>0&&r.jsx(A,{sx:{mb:2},children:r.jsx(kt,{severity:"success",sx:{animation:"fadeIn 0.3s ease-out"},children:r.jsxs(M,{variant:"body2",sx:{fontWeight:500},children:[W.size," ingredient",W.size!==1?"s":""," added to recipe - Click on a food below to remove it"]})})}),!v&&m.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs(M,{variant:"body2",color:"text.secondary",sx:{mb:1,fontWeight:500},children:["Found ",m.length," result",m.length!==1?"s":""," - Click to add to recipe"]}),r.jsx(Us,{variant:"outlined",sx:{borderRadius:2},children:r.jsx(wn,{disablePadding:!0,children:m.map((ee,G)=>{const ae=ee.id||ee.fdcId||`temp-${ee.name}-${G}`,ve=W.has(ae);return r.jsxs(A,{children:[G>0&&r.jsx(ln,{}),De(ee,()=>re(ee),ve)]},ae)})})})]}),!v&&m.length===0&&(d.trim().length>=2||h.length>0)&&!E&&r.jsxs(kt,{severity:"info",children:[r.jsxs(M,{variant:"body2",sx:{fontWeight:500,mb:1},children:["No foods found",d?` for "${d}"`:""]}),r.jsx(M,{variant:"body2",color:"text.secondary",children:"Try simpler terms or check for spelling mistakes"})]})]}),o===1&&r.jsxs(A,{children:[r.jsx(M,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Recipe Ingredients"}),C.length===0?r.jsxs(Us,{sx:{p:4,textAlign:"center",bgcolor:"background.default",borderRadius:2},children:[r.jsx(gu,{sx:{fontSize:48,color:"text.secondary",mb:2}}),r.jsx(M,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:"No ingredients added yet"}),r.jsx(M,{variant:"body2",color:"text.secondary",children:'Search for foods in the "Search Food" tab and click to add them here'})]}):r.jsxs(r.Fragment,{children:[r.jsx(Us,{variant:"outlined",sx:{borderRadius:2,mb:2},children:r.jsx(wn,{disablePadding:!0,children:C.map((ee,G)=>{const te=!!$2(ee.food).find(Se=>Se.type==="volume"),ye=()=>ee.portionType==="grams"?`${ee.grams}g`:ee.portionType==="volume"&&te?`${y0(ee.food.volume_amount*ee.portionQuantity)} ${ee.food.volume_unit}`:ee.portionQuantity===1?ee.food.standard_portion:`${ee.portionQuantity}  ${ee.food.standard_portion}`;return r.jsxs(A,{children:[G>0&&r.jsx(ln,{}),r.jsxs(it,{sx:{py:1.5,px:2,alignItems:"flex-start"},children:[r.jsx(St,{primary:r.jsxs(A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:.5},children:[r.jsx(M,{variant:"body2",sx:{fontWeight:600},children:ee.food.name}),r.jsx(M,{variant:"body2",sx:{fontWeight:600,color:"text.secondary"},children:ye()})]}),secondary:r.jsxs(A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[r.jsxs(A,{sx:{display:"flex",gap:1,alignItems:"center",flexWrap:"wrap"},children:[r.jsxs(To,{value:ee.portionType,exclusive:!0,onChange:(Se,Y)=>Y&&$(ee.id,Y),size:"small",sx:{flexWrap:"wrap"},children:[r.jsx(ss,{value:"standard",sx:{px:1,py:.25,fontSize:"0.7rem"},children:ee.food.standard_portion}),r.jsx(ss,{value:"grams",sx:{px:1,py:.25,fontSize:"0.7rem"},children:"grams"}),te&&r.jsx(ss,{value:"volume",sx:{px:1,py:.25,fontSize:"0.7rem"},children:ee.food.volume_unit})]}),ee.portionType==="grams"?r.jsx(Je,{type:"number",value:ee.grams,onChange:Se=>V(ee.id,parseFloat(Se.target.value)||0),size:"small",inputProps:{min:1,step:1,style:{padding:"4px 8px",width:"60px"}},sx:{width:80}}):r.jsx(yo,{value:ee.portionQuantity,options:[{label:"1/4",value:.25},{label:"1/2",value:.5},{label:"3/4",value:.75},{label:"1",value:1},{label:"1.5",value:1.5},{label:"2",value:2},{label:"2.5",value:2.5},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5}],onChange:Se=>N(ee.id,Se),minValueWidth:"40px",useArrows:!0,sx:{minWidth:100}})]}),r.jsx(A,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:(()=>{const Se=F(ee);return r.jsxs(r.Fragment,{children:[r.jsx(Ne,{label:`${Se.calories} cal`,size:"small",sx:{height:20,fontSize:"0.7rem"}}),r.jsx(Ne,{label:`P: ${Se.protein}g`,size:"small",color:"primary",sx:{height:20,fontSize:"0.7rem"}}),r.jsx(Ne,{label:`C: ${Se.carbs}g`,size:"small",color:"secondary",sx:{height:20,fontSize:"0.7rem"}}),r.jsx(Ne,{label:`F: ${Se.fat}g`,size:"small",color:"warning",sx:{height:20,fontSize:"0.7rem"}}),r.jsx(Ne,{label:`Fiber: ${Se.fiber}g`,size:"small",color:"success",sx:{height:20,fontSize:"0.7rem"}})]})})()})]})}),r.jsx(Ie,{edge:"end",onClick:()=>H(ee.id),color:"error",size:"small",sx:{ml:1,mt:.5},children:r.jsx(Yr,{fontSize:"small"})})]})]},ee.id)})})}),r.jsxs(Us,{sx:{p:2,bgcolor:"primary.50",borderRadius:2},children:[r.jsxs(M,{variant:"subtitle2",gutterBottom:!0,sx:{fontWeight:600,color:"primary.main"},children:["Total Recipe Nutrition (",oe(),"g)"]}),r.jsx(A,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:(()=>{const ee=X();return r.jsxs(r.Fragment,{children:[r.jsx(Ne,{label:`${ee.calories} cal`,size:"medium",sx:{fontWeight:600}}),r.jsx(Ne,{label:`P: ${ee.protein}g`,size:"medium",color:"primary",sx:{fontWeight:600}}),r.jsx(Ne,{label:`C: ${ee.carbs}g`,size:"medium",color:"secondary",sx:{fontWeight:600}}),r.jsx(Ne,{label:`F: ${ee.fat}g`,size:"medium",color:"warning",sx:{fontWeight:600}}),r.jsx(Ne,{label:`Fiber: ${ee.fiber}g`,size:"medium",color:"success",sx:{fontWeight:600}})]})})()})]})]})]})]}),r.jsxs(A,{sx:{borderTop:"1px solid",borderColor:"divider",p:2,bgcolor:"background.paper",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(Ce,{onClick:t,variant:"outlined",children:"Cancel"}),r.jsxs(Ce,{onClick:ue,variant:"contained",disabled:C.length===0||!R.trim(),startIcon:r.jsx(Ni,{}),children:["Save Recipe (",C.length," item",C.length!==1?"s":"",")"]})]})]})]})};Q2.propTypes={open:T.bool.isRequired,onClose:T.func.isRequired,onSave:T.func,onFavoritesChange:T.func};const K2=()=>{const[e,t]=y.useState(0),[n,i]=y.useState([]),[o,c]=y.useState(!1),[d,f]=y.useState(null),[h,g]=y.useState(100),[m,b]=y.useState({calories:2e3,protein:150,carbs:250,fat:65,fiber:25}),[v,j]=y.useState(!1),[E,S]=y.useState([]),[w,C]=y.useState(!1),[k,R]=y.useState(!1),[O,I]=y.useState(null),[P,W]=y.useState(!1),[L,z]=y.useState([]);y.useEffect(()=>{U(),re(),q(),B()},[]);const q=()=>{const te=Zx();S(te)},B=()=>{const te=Ph();z(te)},U=()=>{const te=lh(),ye=new Date().toDateString(),Se=te.filter(Y=>new Date(Y.date).toDateString()===ye);i(Se)},re=()=>{const te=VO();te&&b(te)},H=(te,ye)=>Ju(te,ye),$=()=>{if(!d||h<=0)return;const te=H(d,h),ye={id:`${Date.now()}-${Math.random().toString(36).slice(2,11)}`,date:new Date().toISOString(),foodName:d.name,grams:h,nutrition:te};ig(ye),U(),c(!1),f(null)},N=te=>{BO(te),U()},V=()=>{HO(m),j(!1)},F=()=>{R(!0)},X=te=>{I(te),C(!0)},oe=()=>{q()},ue=te=>{ig(te),U(),t(0)},Te=te=>{ig(te),U()},De=()=>{const te=lh(),ye=new Date;ye.setDate(ye.getDate()-30);const Se=te.filter(ce=>new Date(ce.date)>=ye),Y=new Map;return Se.forEach(ce=>{Y.has(ce.foodName)||Y.set(ce.foodName,{name:ce.foodName,grams:ce.grams,calories:ce.nutrition.calories/ce.grams*100,protein:ce.nutrition.protein/ce.grams*100,carbs:ce.nutrition.carbs/ce.grams*100,fat:ce.nutrition.fat/ce.grams*100,fiber:ce.nutrition.fiber/ce.grams*100})}),Array.from(Y.values()).slice(0,20)},G=n.reduce((te,ye)=>({calories:te.calories+ye.nutrition.calories,protein:te.protein+ye.nutrition.protein,carbs:te.carbs+ye.nutrition.carbs,fat:te.fat+ye.nutrition.fat,fiber:te.fiber+ye.nutrition.fiber}),{calories:0,protein:0,carbs:0,fat:0,fiber:0}),ae=({label:te,current:ye,goal:Se,unit:Y="g",color:ce="primary"})=>{const Ae=Se>0?Math.min(ye/Se*100,100):0;return r.jsxs(A,{sx:{mb:0},children:[r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",mb:.3},children:[r.jsx(M,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.85rem"},children:te}),r.jsxs(M,{variant:"body2",fontWeight:"bold",sx:{fontSize:"0.85rem"},children:[ye.toFixed(1)," / ",Se," ",Y]})]}),r.jsx(ur,{variant:"determinate",value:Ae,color:ce,sx:{height:6,borderRadius:1}})]})};ae.propTypes={label:T.string.isRequired,current:T.number.isRequired,goal:T.number.isRequired,unit:T.string,color:T.string};const ve=({current:te,goal:ye})=>{const Se=ye>0?Math.min(te/ye*100,100):0,Y=Math.max(ye-te,0);return r.jsx(Ge,{sx:{mb:2},children:r.jsxs(at,{sx:{py:3,display:"flex",flexDirection:"column",alignItems:"center"},children:[r.jsxs(A,{sx:{position:"relative",display:"inline-flex",mb:2},children:[r.jsx(Ma,{variant:"determinate",value:100,size:120,thickness:4,sx:{color:"grey.200",position:"absolute"}}),r.jsx(Ma,{variant:"determinate",value:Se,size:120,thickness:4,sx:{color:Se<80?"primary.main":Se<100?"warning.main":"success.main"}}),r.jsxs(A,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[r.jsx(M,{variant:"h5",component:"div",sx:{fontWeight:700},children:te.toFixed(0)}),r.jsxs(M,{variant:"caption",color:"text.secondary",children:["of ",ye," kcal"]})]})]}),r.jsxs(M,{variant:"body2",color:"text.secondary",children:[Y.toFixed(0)," kcal remaining"]})]})})};return ve.propTypes={current:T.number.isRequired,goal:T.number.isRequired},r.jsxs(A,{children:[r.jsx(A,{sx:{mb:2},children:r.jsx(Ce,{variant:"contained",size:"large",fullWidth:!0,startIcon:r.jsx($n,{}),onClick:()=>W(!0),sx:{py:1.5,fontWeight:600,fontSize:"1rem",boxShadow:2,"&:hover":{boxShadow:4}},children:"Log a Meal"})}),r.jsx(A,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:r.jsxs(Wa,{value:e,onChange:(te,ye)=>t(ye),sx:{"& .MuiTab-root":{minHeight:48,fontSize:"0.875rem",fontWeight:600}},children:[r.jsx(ws,{icon:r.jsx(mu,{fontSize:"small"}),label:"Food Diary",iconPosition:"start"}),r.jsx(ws,{icon:r.jsx(gu,{fontSize:"small"}),label:"My Recipes",iconPosition:"start"})]})}),e===0&&r.jsxs(r.Fragment,{children:[r.jsx(ve,{current:G.calories,goal:m.calories}),r.jsx(Ge,{sx:{mb:2},children:r.jsxs(at,{sx:{py:2,"&:last-child":{pb:2}},children:[r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1.5},children:[r.jsxs(M,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(qr,{fontSize:"small"})," Today's Progress"]}),r.jsx(Ce,{variant:"outlined",size:"small",onClick:()=>j(!0),children:"Set Goals"})]}),r.jsxs(Kt,{container:!0,spacing:1.5,children:[r.jsx(Kt,{item:!0,xs:12,children:r.jsx(ae,{label:"Calories",current:G.calories,goal:m.calories,unit:"kcal",color:"primary"})}),r.jsx(Kt,{item:!0,xs:12,children:r.jsx(ae,{label:"Protein",current:G.protein,goal:m.protein,color:"primary"})}),r.jsx(Kt,{item:!0,xs:12,children:r.jsx(ae,{label:"Carbs",current:G.carbs,goal:m.carbs,color:"secondary"})}),r.jsx(Kt,{item:!0,xs:12,children:r.jsx(ae,{label:"Fat",current:G.fat,goal:m.fat,color:"warning"})}),r.jsx(Kt,{item:!0,xs:12,children:r.jsx(ae,{label:"Fiber",current:G.fiber,goal:m.fiber,color:"success"})})]})]})}),r.jsx(Ge,{children:r.jsxs(at,{sx:{py:2,"&:last-child":{pb:2}},children:[r.jsx(M,{variant:"h6",gutterBottom:!0,children:"Today's Entries"}),n.length===0?r.jsx(M,{color:"text.secondary",align:"center",sx:{py:2,fontSize:"0.9rem"},children:"No entries yet. Type in the search box above to add foods."}):r.jsx(wn,{disablePadding:!0,children:n.map((te,ye)=>r.jsxs(A,{children:[ye>0&&r.jsx(ln,{sx:{my:.5}}),r.jsx(it,{sx:{px:0,py:1},secondaryAction:r.jsx(Ie,{edge:"end",onClick:()=>N(te.id),color:"error",size:"small",children:r.jsx(jo,{fontSize:"small"})}),children:r.jsx(St,{primary:r.jsxs(M,{variant:"body2",sx:{fontWeight:500},children:[te.foodName," (",te.grams,"g)"]}),secondary:r.jsxs(A,{component:"span",sx:{display:"flex",gap:.5,flexWrap:"wrap",mt:.5},children:[r.jsx(Ne,{label:`${te.nutrition.calories.toFixed(0)} cal`,size:"small",sx:{height:20,fontSize:"0.7rem"}}),r.jsx(Ne,{label:`P: ${te.nutrition.protein.toFixed(1)}g`,size:"small",color:"primary",sx:{height:20,fontSize:"0.7rem"}}),r.jsx(Ne,{label:`C: ${te.nutrition.carbs.toFixed(1)}g`,size:"small",color:"secondary",sx:{height:20,fontSize:"0.7rem"}}),r.jsx(Ne,{label:`F: ${te.nutrition.fat.toFixed(1)}g`,size:"small",color:"warning",sx:{height:20,fontSize:"0.7rem"}})]})})})]},te.id))})]})}),r.jsxs(Et,{open:o,onClose:()=>c(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(zt,{sx:{pb:1},children:"Add Food Entry"}),r.jsx(Dt,{sx:{py:2},children:d&&r.jsxs(A,{children:[r.jsx(M,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:500},children:d.name}),r.jsxs(M,{variant:"body2",color:"text.secondary",gutterBottom:!0,sx:{mb:2},children:["Standard portion: ",d.standard_portion||"100g"]}),r.jsx(Je,{fullWidth:!0,type:"number",label:"Amount (grams)",value:h,onChange:te=>g(Math.max(1,parseFloat(te.target.value)||0)),sx:{mb:2},inputProps:{min:1,step:1},helperText:"Enter the amount in grams you consumed",size:"small"}),r.jsxs(M,{variant:"body2",color:"text.secondary",gutterBottom:!0,sx:{mb:1},children:["Nutrition for ",h,"g:"]}),r.jsx(A,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:(()=>{const te=H(d,h);return r.jsxs(r.Fragment,{children:[r.jsx(Ne,{label:`${te.calories.toFixed(0)} cal`,size:"small"}),r.jsx(Ne,{label:`Protein: ${te.protein.toFixed(1)}g`,color:"primary",size:"small"}),r.jsx(Ne,{label:`Carbs: ${te.carbs.toFixed(1)}g`,color:"secondary",size:"small"}),r.jsx(Ne,{label:`Fat: ${te.fat.toFixed(1)}g`,color:"warning",size:"small"}),r.jsx(Ne,{label:`Fiber: ${te.fiber.toFixed(1)}g`,color:"success",size:"small"})]})})()})]})}),r.jsxs(Nt,{sx:{px:3,pb:2},children:[r.jsx(Ce,{onClick:()=>c(!1),size:"small",children:"Cancel"}),r.jsx(Ce,{onClick:$,variant:"contained",size:"small",children:"Add Entry"})]})]}),r.jsxs(Et,{open:v,onClose:()=>j(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(zt,{sx:{pb:1},children:"Set Daily Goals"}),r.jsx(Dt,{sx:{py:2},children:r.jsxs(A,{sx:{display:"flex",flexDirection:"column",gap:1.5,mt:1},children:[r.jsx(Je,{fullWidth:!0,type:"number",label:"Calories (kcal)",value:m.calories,onChange:te=>b({...m,calories:Math.max(0,parseFloat(te.target.value)||0)}),inputProps:{min:0,step:50},size:"small"}),r.jsx(Je,{fullWidth:!0,type:"number",label:"Protein (g)",value:m.protein,onChange:te=>b({...m,protein:Math.max(0,parseFloat(te.target.value)||0)}),inputProps:{min:0,step:5},size:"small"}),r.jsx(Je,{fullWidth:!0,type:"number",label:"Carbs (g)",value:m.carbs,onChange:te=>b({...m,carbs:Math.max(0,parseFloat(te.target.value)||0)}),inputProps:{min:0,step:5},size:"small"}),r.jsx(Je,{fullWidth:!0,type:"number",label:"Fat (g)",value:m.fat,onChange:te=>b({...m,fat:Math.max(0,parseFloat(te.target.value)||0)}),inputProps:{min:0,step:5},size:"small"}),r.jsx(Je,{fullWidth:!0,type:"number",label:"Fiber (g)",value:m.fiber,onChange:te=>b({...m,fiber:Math.max(0,parseFloat(te.target.value)||0)}),inputProps:{min:0,step:5},size:"small"})]})}),r.jsxs(Nt,{sx:{px:3,pb:2},children:[r.jsx(Ce,{onClick:()=>j(!1),size:"small",children:"Cancel"}),r.jsx(Ce,{onClick:V,variant:"contained",size:"small",children:"Save Goals"})]})]})]}),e===1&&r.jsxs(r.Fragment,{children:[r.jsx(A,{sx:{mb:2,display:"flex",justifyContent:"flex-end"},children:r.jsx(Ce,{variant:"contained",startIcon:r.jsx($n,{}),onClick:F,size:"small",children:"Create New Recipe"})}),r.jsx(Y2,{recipes:E,onEdit:X,onRecipesUpdate:q,onAddToLog:ue}),r.jsx(q2,{open:w,onClose:()=>{C(!1),I(null)},editRecipe:O,onSave:oe}),r.jsx(Q2,{open:k,onClose:()=>R(!1),onSave:oe,onFavoritesChange:B})]}),r.jsx(G2,{open:P,onClose:()=>W(!1),onSave:Te,recentFoods:De(),favoriteFoods:L,onFavoritesChange:B})]})};K2.propTypes={onNavigate:T.func};const X2=({onNavigate:e,loading:t=!1,workoutType:n,selectedEquipment:i,equipmentOptions:o,onWorkoutTypeChange:c,onEquipmentChange:d,onStartWorkout:f,onCustomize:h})=>{const[g,m]=y.useState(0),b=cr(`(min-width: ${Xl.desktop}px)`),v=(E,S)=>{m(S)},j=E=>{m(E)};return r.jsxs(A,{sx:{padding:{xs:1.5,sm:1.5,md:2,lg:3},paddingTop:{xs:.5,sm:.5,md:1,lg:1.5},maxWidth:b?"1400px":"1200px",margin:"0 auto",minHeight:"calc(100vh - 48px)",paddingBottom:{xs:"80px",md:"2rem"}},children:[r.jsx(A,{sx:{borderBottom:1,borderColor:"divider",mb:1.5},children:r.jsxs(Wa,{value:g,onChange:v,variant:"fullWidth",sx:{maxWidth:b?"600px":"100%",margin:b?"0 auto":"0","& .MuiTab-root":{minHeight:48,fontSize:{xs:"0.8rem",sm:"0.9rem",lg:"1rem"},fontWeight:600,transition:"color 0.3s ease",py:1,"&.Mui-selected":{color:g===0?"primary.main":g===1?"secondary.main":g===2?"success.main":"warning.main"}},"& .MuiTabs-indicator":{height:2,borderRadius:"2px 2px 0 0",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",backgroundColor:g===0?"primary.main":g===1?"secondary.main":g===2?"success.main":"warning.main"}},children:[r.jsx(ws,{icon:r.jsx(Nn,{sx:{fontSize:"1.1rem"}}),label:r.jsx(A,{sx:{display:{xs:"none",sm:"block"}},children:"Strength"}),iconPosition:"start"}),r.jsx(ws,{icon:r.jsx(Ui,{sx:{fontSize:"1.1rem"}}),label:r.jsx(A,{sx:{display:{xs:"none",sm:"block"}},children:"Mobility"}),iconPosition:"start"}),r.jsx(ws,{icon:r.jsx(_R,{sx:{fontSize:"1.1rem"}}),label:r.jsx(A,{sx:{display:{xs:"none",sm:"block"}},children:"Activity"}),iconPosition:"start"}),r.jsx(ws,{icon:r.jsx(mu,{sx:{fontSize:"1.1rem"}}),label:r.jsx(A,{sx:{display:{xs:"none",sm:"block"}},children:"Nutrition"}),iconPosition:"start"})]})}),r.jsxs(A,{sx:{mt:1},children:[g===0&&r.jsx(uy,{onNavigate:e,loading:t,workoutType:n,selectedEquipment:i,equipmentOptions:o,onWorkoutTypeChange:c,onEquipmentChange:d,onStartWorkout:f,onCustomize:h,onTabChange:j}),g===1&&r.jsx(xE,{onNavigate:e}),g===2&&r.jsx(U2,{onNavigate:e}),g===3&&r.jsx(K2,{onNavigate:e})]})]})};X2.propTypes={onNavigate:T.func,loading:T.bool,workoutType:T.string,selectedEquipment:T.instanceOf(Set),equipmentOptions:T.array,onWorkoutTypeChange:T.func,onEquipmentChange:T.func,onStartWorkout:T.func,onCustomize:T.func};const Z2=e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=e%60;return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},b7=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),J2=e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60);return t>0?`${t}h ${n}m`:`${n}m`},Ca=e=>{if(typeof e=="string"){const t=e.toLowerCase();return t.includes("upper")?"upper":t.includes("lower")?"lower":"full"}if(e?.type)return Ca(e.type);if(e?.["Primary Muscle"]){const t=e["Primary Muscle"].toLowerCase();if(t.includes("upper"))return"upper";if(t.includes("lower"))return"lower"}return"full"},eD=({onClose:e})=>{const t=[{text:"Take it easy! See a friend!",icon:r.jsx(zR,{sx:{fontSize:48}})},{text:"Rest up! Read a book!",icon:r.jsx(gu,{sx:{fontSize:48}})},{text:"Relax and recover! Try some gentle stretching!",icon:r.jsx(gi,{sx:{fontSize:48}})},{text:"Your body needs rest! Enjoy your day off!",icon:r.jsx(Dh,{sx:{fontSize:48}})}],n=t[Math.floor(Math.random()*t.length)];return r.jsx(A,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(0, 0, 0, 0.5)",zIndex:1300,p:2},onClick:e,children:r.jsx(gt.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{type:"spring",stiffness:260,damping:20},children:r.jsxs(Us,{sx:{p:4,maxWidth:400,textAlign:"center",borderRadius:4,background:"linear-gradient(135deg, rgba(19, 70, 134, 0.1) 0%, rgba(237, 63, 39, 0.1) 100%)"},onClick:i=>i.stopPropagation(),children:[r.jsx(gt.div,{animate:{y:[0,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:r.jsx(A,{sx:{color:"primary.main",mb:2},children:n.icon})}),r.jsx(M,{variant:"h5",sx:{fontWeight:700,mb:2,color:"text.primary"},children:"It's a Rest Day! "}),r.jsx(M,{variant:"body1",sx:{color:"text.secondary",mb:3},children:n.text}),r.jsx(A,{sx:{display:"inline-block",px:3,py:1,borderRadius:2,bgcolor:"primary.main",color:"white",cursor:"pointer",fontWeight:600,transition:"background-color 0.2s ease, opacity 0.15s ease","&:hover":{bgcolor:"primary.dark"},"&:active":{opacity:.8}},onClick:e,children:"Got it!"})]})})})};eD.propTypes={onClose:T.func.isRequired};const tD=({onStartWorkout:e,onNavigate:t})=>{const{weeklySchedule:n,currentWeek:i,deloadWeekActive:o,getWorkoutSuggestion:c}=Po(),[d,f]=y.useState(null),[h,g]=y.useState([]),[m,b]=y.useState(!1);y.useEffect(()=>{(async()=>{const P=await Kr();g(P)})()},[]);const v=[{name:"Sunday",abbrev:"SUN"},{name:"Monday",abbrev:"MON"},{name:"Tuesday",abbrev:"TUE"},{name:"Wednesday",abbrev:"WED"},{name:"Thursday",abbrev:"THU"},{name:"Friday",abbrev:"FRI"},{name:"Saturday",abbrev:"SAT"}],j=I=>{if(!I)return r.jsx(Nn,{});const P=I.toLowerCase();return P.includes("cardio")||P.includes("hiit")?r.jsx(Ui,{}):P.includes("yoga")||P.includes("mobility")||P.includes("stretch")?r.jsx(gi,{}):P.includes("rest")?r.jsx(Dh,{}):r.jsx(Nn,{})},E=I=>{if(!I)return"primary";const P=I.toLowerCase();return P.includes("cardio")||P.includes("hiit")?"error":P.includes("yoga")||P.includes("mobility")||P.includes("stretch")?"secondary":P.includes("rest")?"default":"primary"},S=I=>I?{upper:"Upper Body",lower:"Lower Body",full:"Full Body",push:"Push",pull:"Pull",legs:"Legs",cardio:"Cardio",hiit:"HIIT",yoga:"Yoga",mobility:"Mobility",stretch:"Stretching",rest:"Rest"}[I.toLowerCase()]||I:"Not assigned",w=I=>{f(I)},C=()=>{f(null)},k=()=>{if(d&&n[d]){const I=n[d],P=(I.sessionType||"").toLowerCase();if(P.includes("rest")){C(),b(!0);return}if(P.includes("cardio")||P.includes("hiit")||P.includes("yoga")||P.includes("mobility")||P.includes("stretch")){C(),t&&t("timer");return}e&&e(I)}C()},O=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date().getDay()];return r.jsxs(A,{sx:{width:"100%",maxWidth:800,mx:"auto",p:2},children:[m&&r.jsx(eD,{onClose:()=>b(!1)}),r.jsxs(A,{sx:{mb:3,textAlign:"center"},children:[r.jsxs(M,{variant:"h5",fontWeight:700,gutterBottom:!0,children:["Week ",i," Schedule"]}),o&&r.jsx(Ne,{label:"Deload Week - Recovery Focus",color:"warning",icon:r.jsx(NR,{}),sx:{mt:1}})]}),r.jsx(Le,{spacing:2,children:v.map((I,P)=>{const W=n[I.name],L=I.name===O,z=W?null:c(I.name,h);return r.jsx(gt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:P*.05},children:r.jsx(Ge,{sx:{borderRadius:2,border:L?2:1,borderColor:L?"primary.main":"divider",boxShadow:L?3:1,cursor:W?"pointer":"default",transition:"all 0.2s ease","&:hover":W?{transform:"translateY(-2px)",boxShadow:4}:{}},onClick:()=>W&&w(I.name),children:r.jsx(at,{children:r.jsxs(A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:2,flex:1},children:[r.jsxs(A,{sx:{minWidth:60,textAlign:"center"},children:[r.jsx(M,{variant:"overline",fontWeight:700,color:L?"primary.main":"text.secondary",children:I.abbrev}),L&&r.jsx(M,{variant:"caption",display:"block",color:"primary.main",children:"Today"})]}),r.jsx(A,{sx:{flex:1},children:W?r.jsxs(r.Fragment,{children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[j(W.sessionType),r.jsx(M,{variant:"body1",fontWeight:600,children:W.sessionName||S(W.sessionType)})]}),W.exercises&&W.exercises.length>0&&r.jsxs(M,{variant:"caption",color:"text.secondary",children:[W.exercises.length," exercises"]})]}):r.jsxs(A,{children:[r.jsx(M,{variant:"body2",color:"text.secondary",children:"No workout assigned"}),z&&r.jsxs(M,{variant:"caption",color:"info.main",children:["Suggestion: ",S(z.type||z.workoutType)]})]})}),W&&r.jsx(Ne,{label:S(W.sessionType),color:E(W.sessionType),size:"small",variant:"outlined"})]}),W&&r.jsx(Ie,{color:"primary",sx:{ml:1},onClick:q=>{q.stopPropagation(),w(I.name)},children:r.jsx(Vi,{})})]})})})},I.name)})}),r.jsx(Et,{open:!!d,onClose:C,maxWidth:"sm",fullWidth:!0,children:d&&n[d]&&r.jsxs(r.Fragment,{children:[r.jsx(zt,{children:r.jsxs(A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs(M,{variant:"h6",children:[d," - ",n[d].sessionName||S(n[d].sessionType)]}),r.jsx(Ie,{onClick:C,size:"small",children:r.jsx(Yr,{})})]})}),r.jsx(Dt,{children:n[d].exercises&&n[d].exercises.length>0?r.jsxs(r.Fragment,{children:[r.jsx(M,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Exercises in this workout:"}),r.jsx(wn,{dense:!0,children:n[d].exercises.map((I,P)=>r.jsxs(A,{children:[r.jsx(it,{children:r.jsx(St,{primary:I.name||I.exerciseName,secondary:I.muscleGroup||I.category||""})}),P<n[d].exercises.length-1&&r.jsx(ln,{})]},P))})]}):r.jsxs(M,{variant:"body2",color:"text.secondary",children:["This is a ",S(n[d].sessionType)," session.",(n[d].sessionType.toLowerCase().includes("cardio")||n[d].sessionType.toLowerCase().includes("yoga"))&&" Choose your specific workout when ready to start."]})}),r.jsxs(Nt,{children:[r.jsx(Ce,{onClick:C,color:"inherit",children:"Close"}),r.jsx(Ce,{onClick:k,variant:"contained",startIcon:r.jsx(Vi,{}),children:"Start Workout"})]})]})})]})};tD.propTypes={onStartWorkout:T.func,onNavigate:T.func};const nD=y.memo(({todaysWorkout:e,nextWorkouts:t=[],lastWorkout:n,onQuickStart:i,onNavigate:o,loading:c=!1})=>{const[d,f]=y.useState("");y.useEffect(()=>{const v={weekday:"long",year:"numeric",month:"long",day:"numeric"};f(new Date().toLocaleDateString("en-US",v))},[]);const h=n&&n.date,m=(()=>{if(!h)return null;const v=new Date(n.date),E=Math.abs(new Date-v);return Math.ceil(E/xW.MILLISECONDS_PER_DAY)})(),b=[{title:"Workouts",icon:r.jsx(Nn,{fontSize:"large"}),description:"Start a workout",color:"primary",action:()=>o("selection")},{title:"Plans",icon:r.jsx(zu,{fontSize:"large"}),description:"View weekly plan",color:"info",action:()=>o("plans")},{title:"HIIT",icon:r.jsx(rd,{fontSize:"large"}),description:"High intensity training",color:"error",action:()=>o("hiit")},{title:"Stretching",icon:r.jsx(gi,{fontSize:"large"}),description:"Mobility & stretching",color:"secondary",action:()=>o("stretch")},{title:"Cardio",icon:r.jsx(Ui,{fontSize:"large"}),description:"Track cardio activity",color:"warning",action:()=>o("cardio")}];return r.jsxs(A,{sx:{padding:{xs:"1rem",sm:"2rem",md:"3rem"},maxWidth:"1200px",margin:"0 auto",minHeight:"calc(100vh - 60px)"},children:[r.jsx(A,{sx:{mb:4,textAlign:"center"},children:r.jsx(M,{variant:"h5",sx:{fontWeight:600,color:"text.secondary",fontSize:{xs:"1rem",sm:"1.25rem"}},children:d})}),e&&r.jsx(Ge,{sx:{mb:4,borderRadius:3,boxShadow:"0 4px 16px rgba(19, 70, 134, 0.12)",background:"linear-gradient(135deg, rgba(19, 70, 134, 0.05) 0%, rgba(237, 63, 39, 0.05) 100%)"},children:r.jsxs(at,{sx:{p:3},children:[r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"start",mb:2},children:[r.jsxs(A,{children:[r.jsx(M,{variant:"overline",sx:{color:"primary.main",fontWeight:600,letterSpacing:1},children:"TODAY'S WORKOUT"}),r.jsxs(M,{variant:"h4",sx:{fontWeight:700,color:"text.primary",mt:1},children:[e.type!=="rest"?Uw(e.type):"Rest Day",e.focus&&e.type!=="rest"&&r.jsx(Ne,{label:e.focus,size:"small",sx:{ml:1,textTransform:"capitalize"}})]})]}),m!==null&&r.jsx(Ne,{label:m===0?"Today":`${m}d ago`,size:"small",color:"primary",variant:"outlined"})]}),e.type!=="rest"?r.jsxs(r.Fragment,{children:[h&&r.jsxs(M,{variant:"body1",sx:{color:"text.secondary",mb:1},children:["Last session: ",J2(n.duration||0),n.exercises&&`  ${n.exercises.length} exercises`]}),e.estimatedDuration&&r.jsxs(M,{variant:"body1",sx:{color:"text.secondary",mb:2},children:["Estimated: ~",e.estimatedDuration," min"]}),r.jsx(Ce,{variant:"contained",size:"large",startIcon:r.jsx(Vi,{}),onClick:i,disabled:c,sx:{mt:1},children:"START WORKOUT"})]}):r.jsx(M,{variant:"body1",sx:{color:"text.secondary"},children:"Recovery is key to growth. Take it easy today!"}),t.length>0&&r.jsxs(A,{sx:{mt:3,pt:3,borderTop:"1px solid",borderColor:"divider"},children:[r.jsx(M,{variant:"caption",sx:{color:"text.secondary",fontWeight:600,textTransform:"uppercase",letterSpacing:.5},children:"Coming Up:"}),r.jsx(Le,{spacing:.5,sx:{mt:1},children:t.slice(0,2).map((v,j)=>v.type!=="rest"&&r.jsx(A,{sx:{display:"flex",alignItems:"center",pl:1,borderLeft:"2px solid",borderColor:"primary.main"},children:r.jsxs(M,{variant:"body2",sx:{color:"text.primary"},children:[r.jsxs("strong",{children:[v.day,":"]})," ",Uw(v.type)]})},j))})]})]})}),r.jsx(A,{sx:{mb:4},children:r.jsxs(LR,{defaultExpanded:!1,sx:{borderRadius:2,"&:before":{display:"none"},boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[r.jsxs(FR,{expandIcon:r.jsx(sd,{}),sx:{"& .MuiAccordionSummary-content":{alignItems:"center",gap:1}},children:[r.jsx(zu,{color:"primary"}),r.jsx(M,{variant:"h6",fontWeight:600,children:"Weekly Schedule"})]}),r.jsx(BR,{children:r.jsx(tD,{onStartWorkout:v=>{if(console.log("Start workout from schedule:",v),i){const j=(v.sessionType||"full").toLowerCase();i(j)}},onNavigate:o})})]})}),r.jsxs(A,{children:[r.jsx(M,{variant:"h5",sx:{fontWeight:700,color:"text.primary",mb:3},children:"Quick Access"}),r.jsx(Kt,{container:!0,spacing:2,children:b.map((v,j)=>r.jsx(Kt,{item:!0,xs:6,sm:4,md:2.4,children:r.jsx(Ge,{sx:{height:"100%",cursor:"pointer",transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.15)"}},onClick:v.action,children:r.jsxs(at,{sx:{textAlign:"center",p:3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"150px"},children:[r.jsx(A,{sx:{color:`${v.color}.main`,mb:1.5},children:v.icon}),r.jsx(M,{variant:"h6",sx:{fontWeight:600,mb:.5,fontSize:{xs:"1rem",sm:"1.25rem"}},children:v.title}),r.jsx(M,{variant:"caption",sx:{color:"text.secondary",fontSize:{xs:"0.7rem",sm:"0.75rem"}},children:v.description})]})})},j))})]})]})});nD.displayName="TodayView";nD.propTypes={todaysWorkout:T.shape({day:T.string,type:T.string,focus:T.string,estimatedDuration:T.number,description:T.string}),nextWorkouts:T.arrayOf(T.shape({day:T.string,type:T.string,description:T.string})),lastWorkout:T.shape({date:T.string,duration:T.number,exercises:T.array}),onQuickStart:T.func.isRequired,onNavigate:T.func.isRequired,loading:T.bool};const jx=({type:e,workoutType:t,defaultDuration:n=5,onComplete:i,onSkip:o})=>{const[c,d]=y.useState("ready"),[f,h]=y.useState(n),[g,m]=y.useState(n*60),b=y.useRef(null),v=y.useRef(null),j=y.useRef(null);y.useEffect(()=>()=>{b.current&&clearInterval(b.current)},[]);const S=(()=>{if(e==="warmup"){const W="Recommended: 5-10 minutes of dynamic stretching",L={upper:"Focus on shoulder circles, arm swings, chest openers, and back rotations",lower:"Focus on leg swings, hip circles, knee lifts, and ankle rotations",full:"Focus on full body movement - jumping jacks, arm circles, leg swings, and torso twists"};return{main:W,specific:L[t]||L.full}}else{const W="Recommended: 5-10 minutes of static stretching",L={upper:"Hold stretches for 20-30 seconds - focus on shoulders, chest, back, and triceps",lower:"Hold stretches for 20-30 seconds - focus on quads, hamstrings, glutes, and calves",full:"Hold stretches for 20-30 seconds - focus on all major muscle groups you trained"};return{main:W,specific:L[t]||L.full}}})(),w=()=>{if(c==="ready"||c==="completed"){const W=f*60;m(W),d("running"),v.current=Date.now(),b.current=setInterval(()=>{const L=Math.floor((Date.now()-v.current)/1e3),z=W-L;z<=0?(clearInterval(b.current),m(0),d("completed"),on.playBeep(880,300),setTimeout(()=>on.playBeep(1046,300),350)):m(z)},1e3)}else if(c==="paused"){d("running");const W=Date.now()-j.current;v.current=v.current+W;const L=f*60;b.current=setInterval(()=>{const z=Math.floor((Date.now()-v.current)/1e3),q=L-z;q<=0?(clearInterval(b.current),m(0),d("completed"),on.playBeep(880,300),setTimeout(()=>on.playBeep(1046,300),350)):m(q)},1e3)}},C=()=>{c==="running"&&(d("paused"),j.current=Date.now(),b.current&&clearInterval(b.current))},k=()=>{b.current&&clearInterval(b.current),d("ready"),m(f*60)},R=()=>{b.current&&clearInterval(b.current),i()},O=()=>{b.current&&clearInterval(b.current),o()},I=W=>{const L=Math.floor(W/60),z=W%60;return`${L}:${z.toString().padStart(2,"0")}`},P=(f*60-g)/(f*60)*100;return r.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},style:{width:"100%",maxWidth:"600px",margin:"0 auto",padding:"0.5rem"},children:r.jsx(Ge,{sx:{borderRadius:2,boxShadow:3,bgcolor:"background.paper"},children:r.jsxs(at,{sx:{p:3},children:[r.jsxs(A,{sx:{textAlign:"center",mb:3},children:[r.jsx(A,{sx:{display:"flex",justifyContent:"center",mb:2},children:e==="warmup"?r.jsx(Nn,{sx:{fontSize:48,color:"warning.main"}}):r.jsx(gi,{sx:{fontSize:48,color:"info.main"}})}),r.jsx(M,{variant:"h5",sx:{fontWeight:600,mb:1},children:e==="warmup"?"Warm-Up Time":"Cool-Down Time"}),r.jsx(M,{variant:"body2",color:"text.secondary",sx:{mb:1},children:S.main}),r.jsx(M,{variant:"body2",color:"text.secondary",sx:{fontStyle:"italic"},children:S.specific})]}),c==="ready"&&r.jsxs(A,{sx:{mb:3},children:[r.jsx(M,{variant:"body2",color:"text.secondary",sx:{mb:1,textAlign:"center"},children:"Select Duration"}),r.jsx(Le,{direction:"row",spacing:1,justifyContent:"center",children:[5,7,10].map(W=>r.jsx(Ne,{label:`${W} min`,onClick:()=>{h(W),m(W*60)},color:f===W?"primary":"default",variant:f===W?"filled":"outlined",sx:{minWidth:70,cursor:"pointer"}},W))})]}),r.jsxs(A,{sx:{textAlign:"center",mb:3},children:[r.jsx(M,{variant:"h1",sx:{fontWeight:700,fontSize:{xs:"3rem",sm:"4rem"},color:c==="completed"?"success.main":"text.primary"},children:I(g)}),c==="completed"&&r.jsx(M,{variant:"body1",color:"success.main",sx:{mt:1,fontWeight:600},children:" Time Complete!"})]}),(c==="running"||c==="paused"||c==="completed")&&r.jsxs(A,{sx:{mb:3},children:[r.jsx(ur,{variant:"determinate",value:P,sx:{height:10,borderRadius:5,bgcolor:"rgba(0, 0, 0, 0.1)","& .MuiLinearProgress-bar":{bgcolor:e==="warmup"?"warning.main":"info.main",borderRadius:5}}}),r.jsxs(M,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5,textAlign:"center"},children:[Math.round(P),"% complete"]})]}),r.jsxs(Le,{direction:"row",spacing:1,justifyContent:"center",sx:{mb:2},children:[(c==="ready"||c==="paused")&&r.jsx(Ce,{variant:"contained",size:"large",startIcon:r.jsx(Vi,{}),onClick:w,sx:{minWidth:140},children:c==="paused"?"Resume":"Start Timer"}),c==="running"&&r.jsx(Ce,{variant:"contained",size:"large",startIcon:r.jsx(Lx,{}),onClick:C,sx:{minWidth:140},children:"Pause"}),(c==="running"||c==="paused")&&r.jsx(Ie,{onClick:k,color:"primary",size:"large",sx:{border:"1px solid",borderColor:"primary.main"},children:r.jsx(VR,{})})]}),r.jsxs(Le,{direction:"row",spacing:2,sx:{mt:3},children:[r.jsxs(Ce,{variant:"outlined",fullWidth:!0,onClick:O,startIcon:r.jsx(Co,{}),children:["Skip ",e==="warmup"?"Warm-Up":"Cool-Down"]}),(c==="completed"||c==="running"||c==="paused")&&r.jsx(Ce,{variant:"contained",fullWidth:!0,onClick:R,color:"success",children:"Mark Complete"})]})]})})})};jx.propTypes={type:T.oneOf(["warmup","cooldown"]).isRequired,workoutType:T.oneOf(["upper","lower","full"]).isRequired,defaultDuration:T.number,onComplete:T.func.isRequired,onSkip:T.func.isRequired};const v7=(e,t,n)=>{if(!e||!t||!n)return null;const i=t-n;if(i===0){const o=e+5;return{message:`Great job! Try ${o}lbs next set`,suggestedWeight:o,type:"success"}}if(i>=2){const o=e+10;return{message:`Excellent! You exceeded target by ${i} reps. Try ${o}lbs next set`,suggestedWeight:o,type:"excellent"}}if(i===1){const o=e+5;return{message:`Nice! Try ${o}lbs next set`,suggestedWeight:o,type:"good"}}return t<n?{message:`Keep going! Try ${e}lbs again to hit ${n} reps`,suggestedWeight:e,type:"maintain"}:null},S7=(e,t,n=3)=>{if(!e||!Array.isArray(e)||e.length<n||!t||t<=0)return!1;const i=t*e.length,o=e.reduce((d,f)=>d+(f.reps||0),0),c=i*.8;return o<=c};class w7{constructor(){this.maxPinnedExercises=10}getExerciseProgression(t,n,i="weight"){if(!t||!Array.isArray(t))return[];const o=[];return t.forEach(c=>{if(!c.exercises||!c.exercises[n])return;const f=c.exercises[n].sets||[];if(f.length===0)return;let h;i==="weight"?h=Math.max(...f.map(g=>g.weight||0)):i==="reps"&&(h=Math.max(...f.map(g=>g.reps||0))),h>0&&o.push({date:new Date(c.date),value:h,workout:c})}),o.sort((c,d)=>c.date-d.date),o}getUniqueExercises(t){if(!t||!Array.isArray(t))return[];const n=new Set;return t.forEach(i=>{i.exercises&&Object.keys(i.exercises).forEach(o=>{n.add(o)})}),Array.from(n).sort()}formatProgressionForChart(t,n,i="weight"){if(!t||t.length===0)return{labels:[],datasets:[{label:n,data:[],fill:!0,backgroundColor:"rgba(19, 70, 134, 0.2)",borderColor:"rgb(19, 70, 134)",tension:.4,pointBackgroundColor:"rgb(19, 70, 134)",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6}],minValue:0};const o=t.slice(-10),c=o.map((h,g)=>`Session ${g+1}`),d=o.map(h=>h.value);let f=0;if(i==="weight"&&d.length>0){const h=Math.min(...d);f=Math.max(0,h-5)}return{labels:c,datasets:[{label:n,data:d,fill:!0,backgroundColor:"rgba(19, 70, 134, 0.2)",borderColor:"rgb(19, 70, 134)",tension:.4,pointBackgroundColor:"rgb(19, 70, 134)",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6}],minValue:f}}async getPinnedExercises(){return await EO()}async setPinnedExercises(t){if(!Array.isArray(t))throw new Error("Pinned exercises must be an array");const n=t.slice(0,this.maxPinnedExercises);await DO(n)}async addPinnedExercise(t,n="weight"){try{const i=await this.getPinnedExercises();return i.some(o=>o.exerciseName===t)||i.length>=this.maxPinnedExercises?!1:(i.push({exerciseName:t,trackingMode:n}),await this.setPinnedExercises(i),!0)}catch(i){return console.error("Error adding pinned exercise:",i),!1}}async removePinnedExercise(t){try{const i=(await this.getPinnedExercises()).filter(o=>o.exerciseName!==t);await this.setPinnedExercises(i)}catch(n){throw console.error("Error removing pinned exercise:",n),n}}async updatePinnedExerciseMode(t,n){try{const o=(await this.getPinnedExercises()).map(c=>c.exerciseName===t?{...c,trackingMode:n}:c);await this.setPinnedExercises(o)}catch(i){throw console.error("Error updating pinned exercise mode:",i),i}}async isExercisePinned(t){return(await this.getPinnedExercises()).some(i=>i.exerciseName===t)}async getAvailableExercisesForPinning(t){const n=this.getUniqueExercises(t),i=await this.getPinnedExercises(),o=new Set(i.map(c=>c.exerciseName));return n.filter(c=>!o.has(c))}calculateStats(t,n="all"){if(!t||!Array.isArray(t))return{workoutsThisWeek:0,totalVolume:0,currentStreak:0,avgDuration:0};const i=new Date,o=t.filter(b=>{const v=new Date(b.date);if(n==="week"){const j=new Date(i.getTime()-6048e5);return v>=j}else if(n==="month"){const j=new Date(i.getTime()-2592e6);return v>=j}return!0}),c=new Date(i.getTime()-10080*60*1e3),d=t.filter(b=>new Date(b.date)>=c).length;let f=0;o.forEach(b=>{b.exercises&&Object.values(b.exercises).forEach(v=>{v.sets&&Array.isArray(v.sets)&&v.sets.forEach(j=>{f+=(j.weight||0)*(j.reps||0)})})});const h=this.calculateStreak(t),g=o.reduce((b,v)=>b+(v.duration||0),0),m=o.length>0?Math.round(g/o.length/60):0;return{workoutsThisWeek:d,totalVolume:f,currentStreak:h,avgDuration:m}}calculateStreak(t){if(!t||t.length===0)return 0;const n=[...t].sort((c,d)=>new Date(d.date)-new Date(c.date));let i=0,o=new Date;o.setHours(0,0,0,0);for(const c of n){const d=new Date(c.date);d.setHours(0,0,0,0);const f=Math.floor((o-d)/(1e3*60*60*24));if(f===i)i++;else if(f>i)break}return i}getProgressionSummary(t,n,i="weight"){const o=this.getExerciseProgression(t,n,i);if(o.length===0)return{current:0,best:0,trend:"none",improvement:0};const c=o.map(m=>m.value),d=c[c.length-1],f=Math.max(...c);let h="stable";if(c.length>=4){const m=c.slice(-4,-1).reduce((b,v)=>b+v,0)/3;d>m*1.05?h="up":d<m*.95&&(h="down")}const g=c.length>=2?(d-c[0])/c[0]*100:0;return{current:d,best:f,trend:h,improvement:Math.round(g)}}getLatestPerformance(t,n,i="weight"){if(!t||!Array.isArray(t)||t.length===0)return null;const o=[...t].sort((c,d)=>new Date(d.date)-new Date(c.date));for(const c of o)if(c.exercises&&c.exercises[n]){const d=c.exercises[n];if(d.sets&&d.sets.length>0){let f;return i==="reps"?f=d.sets.reduce((h,g)=>{const m=g.reps||0,b=h.reps||0;return m>b?g:h},d.sets[0]):f=d.sets.reduce((h,g)=>{const m=g.weight||0,b=h.weight||0;return m>b?g:h},d.sets[0]),{weight:f.weight||0,reps:f.reps||0,date:c.date}}}return null}updatePinnedExercisesWithLatestPerformance(t,n){return!Array.isArray(t)||t.length===0?[]:t.map(i=>{const o=this.getLatestPerformance(n,i.exerciseName,i.trackingMode||"weight");return o?{...i,lastWeight:o.weight,lastReps:o.reps,lastDate:o.date}:i})}async syncPinnedExercisesWithHistory(t){try{const n=await this.getPinnedExercises(),i=this.updatePinnedExercisesWithLatestPerformance(n,t);return await this.setPinnedExercises(i),i}catch(n){throw console.error("Error syncing pinned exercises with history:",n),n}}}const mo=new w7,j7=50,sD=({open:e,onClose:t,currentExercise:n,onSwap:i})=>{const[o,c]=y.useState([]),[d,f]=y.useState(""),[h,g]=y.useState(!0),[m,b]=y.useState(null);y.useEffect(()=>{(async()=>{try{b(null);const C=await fetch(Oo);if(!C.ok)throw new Error(`Failed to load exercises: ${C.status}`);const k=await C.json();c(k)}catch(C){console.error("Failed to load exercises:",C),b("Unable to load exercises. Please try again.")}finally{g(!1)}})()},[]);const v=()=>{if(!o.length)return[];const w=n?.["Primary Muscle"],C=n?.["Exercise Name"];let k=o.filter(R=>R["Exercise Name"]!==C);if(d){const R=d.toLowerCase().split(" ").filter(O=>O);k=k.filter(O=>{const I=[O["Exercise Name"],O["Primary Muscle"],O.Equipment||""].join(" ").toLowerCase();return R.every(P=>I.includes(P))})}else k=k.filter(R=>R["Primary Muscle"]===w);return k.slice(0,j7)},j=w=>{i(w),t(),f("")},E=()=>{t(),f(""),b(null)},S=v();return r.jsxs(Et,{open:e,onClose:E,fullWidth:!0,maxWidth:"sm",PaperProps:{sx:{maxHeight:"80vh"}},children:[r.jsxs(zt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(Nu,{color:"primary"}),r.jsx(M,{variant:"h6",children:"Swap Exercise"})]}),r.jsx(Ie,{onClick:E,size:"small",children:r.jsx(Yr,{})})]}),r.jsxs(Dt,{dividers:!0,children:[r.jsxs(A,{sx:{mb:2},children:[r.jsxs(M,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["Current: ",r.jsx("strong",{children:n?.["Exercise Name"]})]}),r.jsx(Je,{fullWidth:!0,size:"small",placeholder:"Search exercises...",value:d,onChange:w=>f(w.target.value),InputProps:{startAdornment:r.jsx(Bi,{sx:{mr:1,color:"text.secondary"}})},autoFocus:!0}),!d&&r.jsxs(M,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:["Showing ",n?.["Primary Muscle"]," exercises. Search to see all."]})]}),m&&r.jsx(kt,{severity:"error",sx:{mb:2},children:m}),h?r.jsx(M,{children:"Loading exercises..."}):S.length===0?r.jsx(M,{color:"text.secondary",children:"No exercises found"}):r.jsx(wn,{sx:{maxHeight:"40vh",overflow:"auto"},children:S.map((w,C)=>r.jsx(it,{disablePadding:!0,children:r.jsx(Ur,{onClick:()=>j(w),children:r.jsx(St,{primary:w["Exercise Name"],secondary:r.jsxs(A,{sx:{display:"flex",gap:.5,mt:.5},children:[r.jsx(Ne,{label:w["Primary Muscle"],size:"small",color:"primary",variant:"outlined"}),w.Equipment&&r.jsx(Ne,{label:w.Equipment,size:"small",variant:"outlined"})]})})})},C))})]}),r.jsx(Nt,{children:r.jsx(Ce,{onClick:E,children:"Cancel"})})]})};sD.propTypes={open:T.bool.isRequired,onClose:T.func.isRequired,currentExercise:T.object,onSwap:T.func.isRequired};const rD=({open:e,onClose:t,onOverride:n,onSaveAsNew:i,originalWorkoutName:o,hasExistingWorkout:c})=>{const[d,f]=y.useState(""),[h,g]=y.useState(!1),m=()=>{h&&d.trim()?(i(d.trim()),f(""),g(!1)):g(!0)},b=()=>{f(""),g(!1),t()};return r.jsxs(Et,{open:e,onClose:b,maxWidth:"sm",fullWidth:!0,children:[r.jsxs(zt,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(Ni,{color:"primary"}),r.jsx(M,{variant:"h6",children:"Save Workout Changes"})]}),r.jsxs(Dt,{children:[r.jsx(M,{variant:"body1",sx:{mb:2},children:"You've made changes to this workout (swapped exercises or added sets). Would you like to save these changes?"}),h&&r.jsx(Je,{fullWidth:!0,label:"New Workout Name",value:d,onChange:v=>f(v.target.value),placeholder:"Enter a name for the new workout",autoFocus:!0,sx:{mt:2}})]}),r.jsxs(Nt,{sx:{p:2,gap:1},children:[r.jsx(Ce,{onClick:b,startIcon:r.jsx(Yr,{}),children:"Don't Save"}),c&&r.jsxs(Ce,{variant:"outlined",onClick:n,startIcon:r.jsx(Ni,{}),children:['Override "',o,'"']}),r.jsx(Ce,{variant:"contained",onClick:m,startIcon:r.jsx($n,{}),children:h?"Save":"Save as New"})]})]})};rD.propTypes={open:T.bool.isRequired,onClose:T.func.isRequired,onOverride:T.func.isRequired,onSaveAsNew:T.func.isRequired,originalWorkoutName:T.string,hasExistingWorkout:T.bool};const C7=zx`
  from {
    transform: rotate(360deg);
  }
  to {
    transform: rotate(0deg);
  }
`,iD=({workoutPlan:e,onComplete:t,onExit:n,supersetConfig:i=[2,2,2,2],setsPerSuperset:o=3,savedWorkoutId:c=null,savedWorkoutName:d=null,onSetComplete:f=null,onProgressUpdate:h=null,initialProgress:g=null})=>{const[m,b]=y.useState(e),[v,j]=y.useState(g?.currentStepIndex??0),[E,S]=y.useState(g?.workoutData??[]),[w,C]=y.useState(g?.elapsedTime??0),[k,R]=y.useState(null),[O,I]=y.useState(null),[P,W]=y.useState(!1),[L,z]=y.useState(!1),[q,B]=y.useState(""),[U,re]=y.useState({}),[H,$]=y.useState({}),[N,V]=y.useState(null),[F,X]=y.useState(!1),[oe,ue]=y.useState(""),[Te,De]=y.useState(""),[ee,G]=y.useState(new Set),[ae,ve]=y.useState({}),[te,ye]=y.useState({}),[Se,Y]=y.useState(!1),[ce,Ae]=y.useState(!1),[ne,de]=y.useState(!1),[K,Z]=y.useState(!1),[be,ke]=y.useState(!1),[me,we]=y.useState(!1),[J,ge]=y.useState(null),[We,_e]=y.useState(!1),Re=y.useRef(null),Fe=y.useRef(null),Qe=y.useRef(null),[He,Ze]=y.useState("48px"),[et,xt]=y.useState(null),[yt,ct]=y.useState(!1),[ot,vt]=y.useState(g?.currentPhase??"warmup"),[ft,Jt]=y.useState(!1),[jn,fn]=y.useState(!1),[sn,Gn]=y.useState(!1),[Cs,dr]=y.useState(!1),[Ir,yi]=y.useState("full"),hn=Ia(),bs=cr(hn.breakpoints.up("sm")),Gs=cr("(orientation: landscape)"),qt=bs&&Gs,Qs=E.length;y.useEffect(()=>{h&&h({currentStepIndex:v,workoutData:E,elapsedTime:w,currentPhase:ot})},[v,Qs,w,ot,h]);const An=y.useMemo(()=>{const Pe=[];let Ve=0;for(const nt of i){const st=[];for(let ht=0;ht<nt&&Ve<m.length;ht++)m[Ve]&&st.push(m[Ve]),Ve++;if(st.length===0)continue;const Ct=Math.max(...st.map(ht=>ht.sets||o||3));for(let ht=1;ht<=Ct;ht++)for(const rn of st)Pe.push({exercise:rn,setNumber:ht,totalSets:Ct})}return Pe},[m,i,o]),No=y.useMemo(()=>{const Pe=new Set;let Ve=0,nt=0;const st=i.length;let Ct=0;for(const ht of i){const rn=[];for(let gn=0;gn<ht&&nt<m.length;gn++)m[nt]&&rn.push(m[nt]),nt++;if(rn.length===0){Ct++;continue}const Lt=Math.max(...rn.map(gn=>gn.sets||o||3)),ds=rn.length===1,mr=Ct===st-1;for(let gn=1;gn<=Lt;gn++){Ve+=rn.length;const wt=gn===Lt;ds?(!wt||!mr)&&Pe.add(Ve-1):wt&&!mr&&Pe.add(Ve-1)}Ct++}return Pe},[m,i,o]);y.useEffect(()=>{const Pe=Ca(m[0]);yi(Pe);const Ve=localStorage.getItem("goodlift_stretch_prefs");(Ve?JSON.parse(Ve):{showWarmup:!0}).showWarmup||(fn(!0),vt("exercise"))},[m]),y.useEffect(()=>(Re.current=Date.now(),Fe.current=setInterval(()=>{const Ve=Math.floor((Date.now()-Re.current)/1e3);C(Ve)},1e3),(async()=>{const Ve={},nt={},st=[...new Set(m.map(ht=>ht["Exercise Name"]))],Ct=await Kr();await Promise.all(st.map(async ht=>{const[rn,Lt]=await Promise.all([bo(ht),ka(ht)]);Ve[ht]={weight:rn??null,reps:Lt?Ea(Lt):is};const ds=mo.getExerciseProgression(Ct,ht,"weight");if(ds.length>0){const gn=ds[ds.length-1].workout?.exercises?.[ht];if(gn?.sets&&gn.sets.length>0){const wt=gn.sets.reduce((Qi,Va)=>{const Cn=Va.weight||0,Ha=Qi.weight||0;return Cn>Ha?Va:Qi},gn.sets[0]);nt[ht]={weight:wt.weight||0,reps:wt.reps||0}}}})),re(Ve),$(nt)})(),()=>{Fe.current&&clearInterval(Fe.current)}),[m]),y.useEffect(()=>{const Pe=An[v];if(Pe?.exercise?.["Exercise Name"]){const Ve=Pe.exercise["Exercise Name"],nt=U[Ve],st=ae[Ve]??nt?.weight??null,Ct=te[Ve]??nt?.reps??is;R(st),I(Ct),ue(st??""),De(Ct??""),V(null),X(!1)}window.scrollTo({top:0,behavior:"smooth"})},[v,U,An,ae,te]);const Qn=An[v],At=Qn?.exercise?.["Exercise Name"],Ut=Qn?.exercise?.Equipment?.toLowerCase()==="bodyweight",Wr=Qn?.exercise?.["Webp File"];y.useEffect(()=>{const Pe=()=>{const st=Qe.current;if(!st||!At)return;const Ct=st.parentElement;if(!Ct)return;const ht=Ct.clientWidth,rn=window.innerWidth<600?12:24,Lt=ht-rn*2,mr=window.innerHeight>window.innerWidth?window.innerHeight*.12:window.innerHeight*.18;if(Lt<=0)return;const gn=window.innerWidth<600?24:window.innerWidth<1024?36:48,wt=window.innerWidth<600?56:window.innerWidth<1024?80:110,Qi=At,Va=Lt*.95,Cn=document.createElement("div");Cn.style.visibility="hidden",Cn.style.position="absolute",Cn.style.fontFamily=getComputedStyle(st).fontFamily,Cn.style.fontWeight="700",Cn.style.lineHeight="1.15",Cn.style.width=Va+"px",Cn.style.wordBreak="break-word",Cn.style.overflowWrap="break-word",Cn.style.whiteSpace="normal",Cn.style.textAlign="center",Cn.textContent=Qi,document.body.appendChild(Cn);let Ha=gn,Fo=wt,ic=gn;for(;Ha<=Fo;){const Bo=Math.floor((Ha+Fo)/2);Cn.style.fontSize=Bo+"px",Cn.scrollHeight<=mr?(ic=Bo,Ha=Bo+1):Fo=Bo-1}document.body.removeChild(Cn);const ac=Math.max(gn,Math.min(ic,wt));Ze(`${ac}px`)};Pe();const Ve=()=>Pe();window.addEventListener("resize",Ve),window.addEventListener("orientationchange",Ve);const nt=setTimeout(Pe,100);return()=>{window.removeEventListener("resize",Ve),window.removeEventListener("orientationchange",Ve),clearTimeout(nt)}},[At]),y.useEffect(()=>{if(At){const Pe="/goodlift/";let Ve;Wr?Ve=`${Pe}demos/${Wr}`:Ve=`${Pe}work-icon.svg`,xt(Ve),ct(!1)}},[At,Wr]);const Ks=()=>{yt||(ct(!0),xt("/goodlift/work-icon.svg"))},In=async Pe=>{const Ve={};Pe.forEach(({exerciseName:nt,setNumber:st,weight:Ct,reps:ht})=>{Ve[nt]||(Ve[nt]=[]),Ve[nt].push({setNumber:st,weight:Ct,reps:ht})});for(const[nt,st]of Object.entries(Ve)){const Ct=U[nt]||{weight:null,reps:null},ht=Ct.reps??0,rn=Ct.weight,Lt=st.map(wt=>wt.reps).filter(wt=>typeof wt=="number"&&!isNaN(wt));if(Lt.length===0)continue;const ds=Math.min(...Lt),mr=Lt.every(wt=>wt>=ht);if(Lt.every(wt=>wt>ht)&&ds>0&&await oh(nt,ds),mr){const wt=st[st.length-1].weight;typeof wt=="number"&&!isNaN(wt)&&wt>=0&&wt!==rn&&await $r(nt,wt)}}},Kn=()=>{Jt(!0),vt("exercise")},fr=()=>{fn(!0),vt("exercise")},Fa=()=>{Gn(!0),vt("complete")},sc=()=>{dr(!0),vt("complete")},rc=()=>{if(Se)return;if(ce&&c){Z(!0);return}Y(!0);const Pe=Math.floor((Date.now()-Re.current)/1e3);Fe.current&&clearInterval(Fe.current);const Ve={date:new Date().toISOString(),type:m[0]?.["Primary Muscle"]||"unknown",duration:Pe,exercises:{},warmupCompleted:ft,warmupSkipped:jn,cooldownCompleted:sn,cooldownSkipped:Cs,totalDuration:Pe,hasModifications:ce,modifiedWorkoutPlan:ce?m:void 0};E.forEach(nt=>{const{exerciseName:st,setNumber:Ct,weight:ht,reps:rn}=nt;Ve.exercises[st]||(Ve.exercises[st]={sets:[]}),Ve.exercises[st].sets.push({set:Ct,weight:ht,reps:rn})}),t(Ve)},Lo=async Pe=>{Pe.preventDefault();const Ve=Pe.target.closest("form")||document.querySelector("form"),nt=Ve?.querySelector("#weight-select"),st=Ve?.querySelector("#reps-select");if(!nt||!st){console.error("Form inputs not found");return}const Ct=Math.max(0,parseFloat(nt.value)||0),ht=parseInt(st.value,10),rn=ht>0?ht:0,Lt=Qn.exercise["Exercise Name"],ds=ae[Lt]??U[Lt]?.weight;Ct!==ds&&ds!==null&&ds!==void 0&&(G(wt=>new Set(wt).add(Lt)),ve(wt=>({...wt,[Lt]:Ct})));const mr={exerciseName:Lt,setNumber:Qn.setNumber,weight:Ct,reps:rn},gn=[...E,mr];if(S(gn),O&&rn>0&&!ee.has(Lt)){const wt=v7(Ct,rn,O);wt&&(V(wt),X(!0),setTimeout(()=>X(!1),5e3))}if(v+1>=An.length){await In(gn);const wt=localStorage.getItem("goodlift_stretch_prefs");(wt?JSON.parse(wt):{showCooldown:!0}).showCooldown?vt("cooldown"):(dr(!0),vt("complete"))}else f&&No.has(v)&&f(),j(wt=>wt+1)},Xr=()=>{v>0&&(j(Pe=>Pe-1),S(Pe=>Pe.slice(0,-1)))},Ba=()=>{window.confirm("Are you sure you want to exit? Your progress will not be saved.")&&(Fe.current&&clearInterval(Fe.current),n())},hr=()=>{E.length>0?_e(!0):Ba()},_r=async()=>{_e(!1),await In(E);const Pe=Math.floor((Date.now()-Re.current)/1e3);Fe.current&&clearInterval(Fe.current);const Ve={date:new Date().toISOString(),type:m[0]?.["Primary Muscle"]||"unknown",duration:Pe,exercises:{},isPartial:!0};E.forEach(nt=>{const{exerciseName:st,setNumber:Ct,weight:ht,reps:rn}=nt;Ve.exercises[st]||(Ve.exercises[st]={sets:[]}),Ve.exercises[st].sets.push({set:Ct,weight:ht,reps:rn})}),t(Ve)},bi=()=>{_e(!1),Fe.current&&clearInterval(Fe.current),n()},Zr=()=>{try{const Pe=Ca(m[0]);yu({name:`${Pe.charAt(0).toUpperCase()+Pe.slice(1)} Body Workout`,type:Pe,equipment:"all",exercises:m}),W(!0),z(!0)}catch(Pe){console.error("Error saving to favorites:",Pe),alert("Failed to save workout to favorites")}},pn=Pe=>{const Ve=parseFloat(oe)||0;let nt;Pe>0?nt=AW(Ve):nt=RW(Ve),ue(nt.toString())},fe=Pe=>{const Ve=parseInt(Te,10)||0,nt=Math.max(0,Ve+Pe);De(nt.toString())},ze=()=>{N?.suggestedWeight&&(ue(N.suggestedWeight.toString()),X(!1))},tt=()=>{if(window.confirm("Skip all remaining sets of this exercise?")){let Pe=v+1;const Ve=Qn.exercise["Exercise Name"];for(;Pe<An.length&&An[Pe].exercise["Exercise Name"]===Ve;)Pe++;Pe>=An.length?vt("cooldown"):j(Pe)}},mn=Pe=>{const Ve=Qn.exercise["Exercise Name"],nt=m.map(st=>st["Exercise Name"]===Ve?{...Pe,sets:st.sets}:st);b(nt),Ae(!0),B(`Swapped to ${Pe["Exercise Name"]}`),z(!0)},cs=()=>{ke(!0)},Jr=()=>{const Pe=m.map(Ve=>({...Ve,sets:(Ve.sets||o)+1}));b(Pe),Ae(!0),ke(!1),B("Added extra set to each exercise"),z(!0)},ei=()=>{ge(O||is),we(!0)},us=async Pe=>{if(!At)return;const Ve=O||is,nt=parseFloat(oe)||k||0;let st=nt;if(nt>0&&Ve!==Pe){const ht=ly(nt,Ve,Pe);ht!==null&&(st=ht,ue(ht.toString()))}I(Pe),ye(ht=>({...ht,[At]:Pe})),st!==nt&&(R(st),ve(ht=>({...ht,[At]:st}))),Ae(!0),await oh(At,Pe),st!==nt&&await $r(At,st);const Ct=Pe<Ve?"increased":"decreased";B(st!==nt?`Target: ${Pe} reps, weight ${Ct} to ${st} lbs`:`Target updated to ${Pe} reps`),z(!0),we(!1)},Ps=Pe=>{const Ve=new Set(Pe.map(nt=>nt.Equipment).filter(Boolean));return Ve.size===0?"all":Ve.size===1?[...Ve][0].toLowerCase():"mixed"},pr=async()=>{try{await yu({id:c,name:d||"Modified Workout",type:Ca(m[0]),equipment:Ps(m),exercises:m}),Z(!1),B("Workout updated!"),z(!0)}catch(Pe){console.error("Error saving workout:",Pe)}},Ts=async Pe=>{try{await yu({name:Pe,type:Ca(m[0]),equipment:Ps(m),exercises:m}),Z(!1),B("Saved as new workout!"),z(!0)}catch(Ve){console.error("Error saving workout:",Ve)}};if(!Qn&&ot==="exercise")return null;if(ot==="warmup"){const Pe=localStorage.getItem("goodlift_stretch_prefs"),Ve=Pe?JSON.parse(Pe):{defaultWarmupDuration:5};return r.jsxs("div",{className:"screen",style:{paddingBottom:"100px",padding:"0.5rem",maxWidth:"100vw",boxSizing:"border-box"},children:[r.jsx(A,{sx:{mb:1.5,px:{xs:.5,sm:0}},children:r.jsx(M,{variant:"h6",sx:{fontWeight:600,textAlign:"center",mb:1},children:"Warm-Up Phase"})}),r.jsx(jx,{type:"warmup",workoutType:Ir,defaultDuration:Ve.defaultWarmupDuration||5,onComplete:Kn,onSkip:fr})]})}if(ot==="cooldown"){const Pe=localStorage.getItem("goodlift_stretch_prefs"),Ve=Pe?JSON.parse(Pe):{defaultCooldownDuration:5};return r.jsxs("div",{className:"screen",style:{paddingBottom:"100px",padding:"0.5rem",maxWidth:"100vw",boxSizing:"border-box"},children:[r.jsx(A,{sx:{mb:1.5,px:{xs:.5,sm:0}},children:r.jsx(M,{variant:"h6",sx:{fontWeight:600,textAlign:"center",mb:1},children:"Cool-Down Phase"})}),r.jsx(jx,{type:"cooldown",workoutType:Ir,defaultDuration:Ve.defaultCooldownDuration||5,onComplete:Fa,onSkip:sc})]})}return ot==="complete"?r.jsx("div",{className:"screen",style:{paddingBottom:"100px",padding:"2rem",maxWidth:"100vw",boxSizing:"border-box",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"60vh"},children:r.jsxs(gt.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},style:{textAlign:"center"},children:[r.jsx(A,{component:"img",src:"/goodlift/goodlift-dog-celebration.svg",alt:"Celebration",sx:{width:{xs:100,sm:120},height:{xs:100,sm:120},mb:2,animation:Se?`${C7} 1.5s linear infinite`:"none"}}),r.jsx(M,{variant:"h4",sx:{fontWeight:600,mb:2},children:"Workout Complete!"}),r.jsxs(M,{variant:"body1",color:"text.secondary",sx:{mb:3},children:["Great job! You've completed your workout",!jn&&!Cs?" including warmup and cooldown phases":jn?Cs?"":" including cooldown phase":" including warmup phase","."]}),r.jsx(Ce,{variant:"contained",size:"large",onClick:rc,disabled:Se,sx:{mt:2,"&.Mui-disabled":{bgcolor:"primary.main",color:"white",opacity:.7}},children:Se?"Finishing...":"Finish Workout"})]})}):r.jsxs("div",{className:"screen",style:{padding:"0.5rem",maxWidth:"100vw",boxSizing:"border-box"},children:[r.jsxs(A,{sx:{mb:1.5,px:{xs:.5,sm:0}},children:[r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5,gap:1},children:[r.jsx(M,{variant:"body1",sx:{fontWeight:600,fontSize:{xs:"0.9rem",sm:"1.25rem"}},children:Z2(w)}),r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:{xs:.5,sm:1}},children:[r.jsxs(M,{variant:"body1",sx:{fontWeight:600,fontSize:{xs:"0.9rem",sm:"1.25rem"}},children:[v+1,"/",An.length]}),r.jsx(Ie,{onClick:Zr,disabled:P,size:"small",sx:{color:P?"warning.main":"action.active","&:hover":{color:"warning.main"},p:{xs:.5,sm:1}},"aria-label":"Save to favorites",children:P?r.jsx(pi,{sx:{fontSize:{xs:20,sm:24}}}):r.jsx(Vl,{sx:{fontSize:{xs:20,sm:24}}})})]})]}),r.jsx(ur,{variant:"determinate",value:v/An.length*100,sx:{height:{xs:6,sm:8},borderRadius:4,bgcolor:"rgba(138, 190, 185, 0.2)","& .MuiLinearProgress-bar":{bgcolor:"primary.main",borderRadius:4}}})]}),r.jsx("div",{className:"exercise-card-container",children:r.jsx(Pa,{mode:"wait",children:r.jsx(gt.form,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},onSubmit:Lo,children:r.jsxs(gt.div,{className:"exercise-card",initial:{scale:.95},animate:{scale:1},transition:{duration:.3},style:{display:"flex",flexDirection:qt?"row":"column",gap:qt?"0.5rem":void 0},children:[r.jsxs(A,{sx:{flex:1,display:"flex",flexDirection:"column",minWidth:0},children:[!qt&&r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:1,mb:2},children:[r.jsxs(A,{sx:{display:"flex",gap:1,alignItems:"center"},children:[r.jsx(Ie,{component:"a",href:`https://www.google.com/search?q=${encodeURIComponent(At+" form")}`,target:"_blank",rel:"noopener noreferrer",sx:{minWidth:{xs:"36px",sm:"44px"},minHeight:{xs:"36px",sm:"44px"},color:"primary.main",border:"2px solid",borderColor:"primary.main",borderRadius:"8px","&:hover":{backgroundColor:"rgba(19, 70, 134, 0.08)"}},"aria-label":`Search for ${At} form guide`,children:r.jsx(Hl,{sx:{fontSize:{xs:20,sm:24}}})}),r.jsx(Ie,{onClick:tt,sx:{minWidth:{xs:"36px",sm:"44px"},minHeight:{xs:"36px",sm:"44px"},color:"primary.main",border:"2px solid",borderColor:"primary.main",borderRadius:"8px","&:hover":{backgroundColor:"rgba(19, 70, 134, 0.08)"}},"aria-label":"Skip exercise",children:r.jsx(Co,{sx:{fontSize:{xs:20,sm:24}}})}),r.jsx(Ie,{onClick:()=>de(!0),sx:{minWidth:{xs:"36px",sm:"44px"},minHeight:{xs:"36px",sm:"44px"},color:"primary.main",border:"2px solid",borderColor:"primary.main",borderRadius:"8px","&:hover":{backgroundColor:"rgba(19, 70, 134, 0.08)"}},"aria-label":"Swap exercise",children:r.jsx(Nu,{sx:{fontSize:{xs:20,sm:24}}})}),r.jsx(Ne,{label:`Set ${Qn.setNumber} of ${Qn.totalSets}`,color:"primary",size:"medium",sx:{fontWeight:600,fontSize:{xs:"0.75rem",sm:"0.875rem"}}})]}),r.jsxs(A,{sx:{display:"flex",gap:1},children:[r.jsx(Ie,{onClick:cs,sx:{minWidth:{xs:"36px",sm:"44px"},minHeight:{xs:"36px",sm:"44px"},color:"info.main",border:"2px solid",borderColor:"info.main",borderRadius:"8px","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.08)"}},"aria-label":"Add extra sets",children:r.jsx(bw,{sx:{fontSize:{xs:20,sm:24}}})}),r.jsx(Ie,{onClick:hr,sx:{minWidth:{xs:"36px",sm:"44px"},minHeight:{xs:"36px",sm:"44px"},color:"rgb(237, 63, 39)",border:"2px solid rgb(237, 63, 39)",borderRadius:"8px","&:hover":{backgroundColor:"rgba(237, 63, 39, 0.08)"}},"aria-label":"End workout",children:r.jsx(rh,{sx:{fontSize:{xs:20,sm:24}}})})]})]}),r.jsxs(A,{sx:{mt:qt?1:.5,mb:qt?1:.5,px:{xs:1.5,sm:qt?2:3},display:qt?"grid":"flex",gridTemplateColumns:qt?"1.5fr 1fr":"none",gridTemplateRows:qt?"1fr":"none",flexDirection:qt?void 0:"column",alignItems:"center",gap:qt?2:.2,minHeight:qt?{sm:"calc(35vh - 80px)",md:"calc(40vh - 80px)"}:{xs:"60px",sm:"80px"},flex:qt?1:"none"},children:[r.jsx(A,{sx:{display:"flex",alignItems:"center",justifyContent:qt?"flex-start":"center",width:"100%",flexShrink:0},children:r.jsx(M,{ref:Qe,variant:"h3",component:"h2",sx:{fontWeight:700,fontSize:qt?{sm:"2.5rem !important",md:"3.5rem !important"}:He+" !important",color:"primary.main",textAlign:qt?"left":"center",lineHeight:"1.15 !important",width:"100%",wordBreak:"break-word",overflowWrap:"break-word",whiteSpace:"normal",display:"-webkit-box",WebkitLineClamp:qt?2:3,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:At})}),et&&r.jsx(A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:qt?"100%":"auto",minHeight:qt?{sm:"150px",md:"200px"}:0,flex:qt?1:"none"},children:r.jsx(A,{component:"img",src:et,alt:`${At} demonstration`,onError:Ks,sx:{maxWidth:"100%",maxHeight:qt?{sm:"calc(40vh - 100px)",md:"calc(45vh - 100px)"}:{xs:"150px",sm:"200px"},width:"auto",height:"auto",borderRadius:1,objectFit:"contain"},loading:"lazy"})})]}),!qt&&r.jsxs(r.Fragment,{children:[(k!==null||O!==null||H[At])&&r.jsxs(A,{sx:{mb:2,mt:1,px:2},children:[(k!==null||O!==null)&&r.jsx(gt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},children:r.jsxs(A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:.5},children:[r.jsxs(M,{variant:"body2",sx:{textAlign:"center",color:"text.secondary",fontWeight:500},children:["Target: ",k??""," lbs  ",O??""," reps"]}),r.jsx(Ie,{size:"small",onClick:ei,sx:{color:"primary.main",p:.25},"aria-label":"Change target reps",children:r.jsx(Wg,{sx:{fontSize:16}})})]})}),H[At]&&r.jsx(gt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.3},children:r.jsxs(M,{variant:"body2",sx:{textAlign:"center",color:"primary.main",fontWeight:600,mt:.25},children:["Last: ",H[At].weight," lbs  ",H[At].reps," reps"]})})]}),r.jsx(Pa,{children:F&&N&&r.jsx(gt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:r.jsx(kt,{severity:N.type==="excellent"?"success":"info",icon:r.jsx(qr,{}),action:N.suggestedWeight!==parseFloat(oe)&&r.jsx(Ce,{color:"inherit",size:"small",onClick:ze,sx:{minHeight:"44px"},children:"Apply"}),sx:{mb:2,minHeight:"44px"},children:N.message})})}),r.jsxs("div",{className:"input-row",children:[r.jsxs("div",{className:"input-group",children:[r.jsxs("label",{htmlFor:"weight-select",children:["Weight (lbs)",Ut&&" (N/A)"]}),r.jsxs(A,{sx:{display:"flex",gap:.5,alignItems:"center"},children:[r.jsx(Ie,{onClick:()=>pn(-2.5),disabled:Ut,size:"small",sx:{bgcolor:Ut?"action.disabledBackground":"action.hover",minWidth:"32px",minHeight:"32px",width:"32px",height:"32px",p:.5,"&:hover":{bgcolor:Ut?"action.disabledBackground":"action.selected"}},children:r.jsx(Hs,{sx:{fontSize:16}})}),r.jsx("input",{id:"weight-select",type:"tel",inputMode:"decimal",pattern:"[0-9]*([.,][0-9]+)?",step:"2.5",min:"0",max:"500",className:"exercise-input",value:oe,onChange:Pe=>ue(Pe.target.value),placeholder:"",disabled:Ut,"aria-label":"Weight in pounds",onFocus:Pe=>{Pe.target.select();const nt=Pe.target.getBoundingClientRect().bottom,Ct=window.innerHeight*.55;nt>Ct&&setTimeout(()=>{Pe.target.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{window.scrollBy({top:-80,behavior:"smooth"})},100)},300)},style:{width:"100%",minWidth:"50px",maxWidth:"70px",padding:"8px 4px",minHeight:"36px",borderRadius:"8px",border:"2px solid var(--color-border)",fontSize:"1rem",fontFamily:"var(--font-body)",backgroundColor:Ut?"var(--color-disabled)":"var(--color-surface)",color:Ut?"var(--color-text-disabled)":"var(--color-text)",cursor:Ut?"not-allowed":"text",opacity:Ut?.6:1,textAlign:"center"}}),r.jsx(Ie,{onClick:()=>pn(2.5),disabled:Ut,size:"small",sx:{bgcolor:Ut?"action.disabledBackground":"action.hover",minWidth:"32px",minHeight:"32px",width:"32px",height:"32px",p:.5,"&:hover":{bgcolor:Ut?"action.disabledBackground":"action.selected"}},children:r.jsx($n,{sx:{fontSize:16}})})]})]}),r.jsxs("div",{className:"input-group",children:[r.jsx("label",{htmlFor:"reps-select",children:"Reps"}),r.jsxs(A,{sx:{display:"flex",gap:.5,alignItems:"center"},children:[r.jsx(Ie,{onClick:()=>fe(-1),size:"small",sx:{bgcolor:"action.hover",minWidth:"32px",minHeight:"32px",width:"32px",height:"32px",p:.5,"&:hover":{bgcolor:"action.selected"}},children:r.jsx(Hs,{sx:{fontSize:16}})}),r.jsx("input",{id:"reps-select",type:"number",inputMode:"numeric",step:"1",min:"1",max:"20",className:"exercise-input",value:Te,onChange:Pe=>De(Pe.target.value),placeholder:"","aria-label":"Repetitions",onFocus:Pe=>{Pe.target.select();const nt=Pe.target.getBoundingClientRect().bottom,Ct=window.innerHeight*.55;nt>Ct&&setTimeout(()=>{Pe.target.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{window.scrollBy({top:-80,behavior:"smooth"})},100)},300)},style:{width:"100%",minWidth:"40px",maxWidth:"50px",padding:"8px 4px",minHeight:"36px",borderRadius:"8px",border:"2px solid var(--color-border)",fontSize:"1rem",fontFamily:"var(--font-body)",backgroundColor:"var(--color-surface)",color:"var(--color-text)",textAlign:"center"}}),r.jsx(Ie,{onClick:()=>fe(1),size:"small",sx:{bgcolor:"action.hover",minWidth:"32px",minHeight:"32px",width:"32px",height:"32px",p:.5,"&:hover":{bgcolor:"action.selected"}},children:r.jsx($n,{sx:{fontSize:16}})})]})]})]}),r.jsxs("div",{className:"workout-nav-buttons",children:[v>0&&r.jsxs("button",{type:"button",className:"back-btn",onClick:Xr,style:{minHeight:"44px"},children:[r.jsx(Ll,{sx:{fontSize:18,mr:.5}})," Back"]}),r.jsxs("button",{type:"submit",className:"next-btn",style:{minHeight:"44px"},children:["Next ",r.jsx(ih,{sx:{fontSize:18,ml:.5}})]})]})]}),qt&&r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap",justifyContent:"space-between",px:2,py:1.5,mt:1,bgcolor:"background.paper",borderRadius:2,border:"1px solid",borderColor:"divider"},children:[r.jsxs(A,{sx:{display:"flex",flexDirection:"column",minWidth:"fit-content",gap:.5},children:[(k!==null||O!==null)&&r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[r.jsxs(M,{variant:"body2",sx:{color:"text.secondary",fontWeight:600,fontSize:"0.85rem"},children:["Target: ",k??"","  ",O??""]}),r.jsx(Ie,{size:"small",onClick:ei,sx:{color:"primary.main",p:.25,minWidth:24,minHeight:24},"aria-label":"Change target reps",children:r.jsx(Wg,{sx:{fontSize:16}})})]}),H[At]&&r.jsxs(M,{variant:"body2",sx:{color:"primary.main",fontWeight:600,fontSize:"0.85rem"},children:["Last: ",H[At].weight,"  ",H[At].reps]})]}),r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:.75},children:[r.jsx(M,{variant:"body2",sx:{fontSize:"0.9rem",color:"text.secondary",fontWeight:600,minWidth:"50px"},children:"Weight:"}),r.jsx(Ie,{onClick:()=>pn(-2.5),disabled:Ut,size:"medium",sx:{bgcolor:Ut?"action.disabledBackground":"action.hover",minWidth:"40px",minHeight:"40px",width:"40px",height:"40px","&:hover":{bgcolor:Ut?"action.disabledBackground":"action.selected"}},children:r.jsx(Hs,{sx:{fontSize:20}})}),r.jsx("input",{type:"tel",inputMode:"decimal",value:oe,onChange:Pe=>ue(Pe.target.value),placeholder:"",disabled:Ut,"aria-label":"Weight",style:{width:"70px",padding:"10px 8px",minHeight:"40px",borderRadius:"8px",border:"2px solid var(--color-border)",fontSize:"1.1rem",fontWeight:600,textAlign:"center",backgroundColor:Ut?"var(--color-disabled)":"var(--color-surface)",color:Ut?"var(--color-text-disabled)":"var(--color-text)"}}),r.jsx(Ie,{onClick:()=>pn(2.5),disabled:Ut,size:"medium",sx:{bgcolor:Ut?"action.disabledBackground":"action.hover",minWidth:"40px",minHeight:"40px",width:"40px",height:"40px","&:hover":{bgcolor:Ut?"action.disabledBackground":"action.selected"}},children:r.jsx($n,{sx:{fontSize:20}})})]}),r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:.75},children:[r.jsx(M,{variant:"body2",sx:{fontSize:"0.9rem",color:"text.secondary",fontWeight:600,minWidth:"40px"},children:"Reps:"}),r.jsx(Ie,{onClick:()=>fe(-1),size:"medium",sx:{bgcolor:"action.hover",minWidth:"40px",minHeight:"40px",width:"40px",height:"40px","&:hover":{bgcolor:"action.selected"}},children:r.jsx(Hs,{sx:{fontSize:20}})}),r.jsx("input",{type:"number",inputMode:"numeric",value:Te,onChange:Pe=>De(Pe.target.value),placeholder:"","aria-label":"Reps",style:{width:"60px",padding:"10px 8px",minHeight:"40px",borderRadius:"8px",border:"2px solid var(--color-border)",fontSize:"1.1rem",fontWeight:600,textAlign:"center",backgroundColor:"var(--color-surface)",color:"var(--color-text)"}}),r.jsx(Ie,{onClick:()=>fe(1),size:"medium",sx:{bgcolor:"action.hover",minWidth:"40px",minHeight:"40px",width:"40px",height:"40px","&:hover":{bgcolor:"action.selected"}},children:r.jsx($n,{sx:{fontSize:20}})})]}),r.jsxs(A,{sx:{display:"flex",gap:1},children:[v>0&&r.jsxs(Ce,{type:"button",variant:"outlined",size:"medium",onClick:Xr,sx:{minHeight:"44px",fontSize:"0.95rem",px:2,fontWeight:600},children:[r.jsx(Ll,{sx:{fontSize:18,mr:.5}})," Back"]}),r.jsxs(Ce,{type:"submit",variant:"contained",size:"medium",sx:{minHeight:"44px",fontSize:"0.95rem",px:3,fontWeight:600},children:["Next ",r.jsx(ih,{sx:{fontSize:18,ml:.5}})]})]})]})]}),qt&&r.jsxs(A,{sx:{display:"flex",flexDirection:"column",gap:.5,pl:1,borderLeft:"1px solid",borderColor:"divider",alignItems:"center"},children:[r.jsx(Ne,{label:`${Qn.setNumber}/${Qn.totalSets}`,color:"primary",size:"small",sx:{fontWeight:600,fontSize:"0.65rem",mb:.5}}),r.jsx(Ie,{component:"a",href:`https://www.google.com/search?q=${encodeURIComponent(At+" form")}`,target:"_blank",rel:"noopener noreferrer",sx:{minWidth:"36px",minHeight:"36px",color:"primary.main",border:"2px solid",borderColor:"primary.main",borderRadius:"6px","&:hover":{backgroundColor:"rgba(19, 70, 134, 0.08)"}},"aria-label":`Search for ${At} form guide`,children:r.jsx(Hl,{sx:{fontSize:18}})}),r.jsx(Ie,{onClick:tt,sx:{minWidth:"36px",minHeight:"36px",color:"primary.main",border:"2px solid",borderColor:"primary.main",borderRadius:"6px","&:hover":{backgroundColor:"rgba(19, 70, 134, 0.08)"}},"aria-label":"Skip exercise",children:r.jsx(Co,{sx:{fontSize:18}})}),r.jsx(Ie,{onClick:()=>de(!0),sx:{minWidth:"36px",minHeight:"36px",color:"primary.main",border:"2px solid",borderColor:"primary.main",borderRadius:"6px","&:hover":{backgroundColor:"rgba(19, 70, 134, 0.08)"}},"aria-label":"Swap exercise",children:r.jsx(Nu,{sx:{fontSize:18}})}),r.jsx(Ie,{onClick:cs,sx:{minWidth:"36px",minHeight:"36px",color:"info.main",border:"2px solid",borderColor:"info.main",borderRadius:"6px","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.08)"}},"aria-label":"Add extra sets",children:r.jsx(bw,{sx:{fontSize:18}})}),r.jsx(A,{sx:{flexGrow:1}}),r.jsx(Ie,{onClick:hr,sx:{minWidth:"36px",minHeight:"36px",color:"rgb(237, 63, 39)",border:"2px solid rgb(237, 63, 39)",borderRadius:"6px","&:hover":{backgroundColor:"rgba(237, 63, 39, 0.08)"}},"aria-label":"End workout",children:r.jsx(rh,{sx:{fontSize:18}})})]})]})},v)})}),r.jsx(Or,{open:L,autoHideDuration:3e3,onClose:()=>z(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:r.jsx(kt,{severity:"success",onClose:()=>z(!1),children:q||"Workout saved to favorites!"})}),r.jsx(sD,{open:ne,onClose:()=>de(!1),currentExercise:Qn?.exercise,onSwap:mn}),r.jsx(rD,{open:K,onClose:()=>Z(!1),onOverride:pr,onSaveAsNew:Ts,originalWorkoutName:d,hasExistingWorkout:!!c}),r.jsxs(Et,{open:be,onClose:()=>ke(!1),children:[r.jsx(zt,{children:"Add Extra Sets"}),r.jsx(Dt,{children:r.jsx(M,{children:"Add an extra set for each exercise? This will extend the workout."})}),r.jsxs(Nt,{children:[r.jsx(Ce,{onClick:()=>ke(!1),children:"Cancel"}),r.jsx(Ce,{onClick:Jr,variant:"contained",color:"primary",children:"Add Sets"})]})]}),r.jsxs(Et,{open:me,onClose:()=>we(!1),children:[r.jsx(zt,{children:"Change Target Reps"}),r.jsx(Dt,{children:r.jsxs(A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,pt:1},children:[r.jsx(M,{variant:"body2",color:"text.secondary",children:"Changing target reps will adjust the weight automatically."}),r.jsx(dd,{value:J||is,onChange:Pe=>ge(Pe),showLabel:!0})]})}),r.jsxs(Nt,{children:[r.jsx(Ce,{onClick:()=>we(!1),children:"Cancel"}),r.jsx(Ce,{onClick:()=>us(J),variant:"contained",color:"primary",children:"Apply"})]})]}),r.jsxs(Et,{open:We,onClose:()=>_e(!1),"aria-labelledby":"end-workout-dialog-title",children:[r.jsx(zt,{id:"end-workout-dialog-title",children:"End Workout"}),r.jsx(Dt,{children:r.jsx(M,{children:"How would you like to end this workout?"})}),r.jsxs(Nt,{sx:{flexDirection:"column",gap:1,pb:2,px:2},children:[r.jsx(Ce,{fullWidth:!0,variant:"contained",color:"primary",onClick:_r,sx:{minHeight:"44px"},children:"End and Save as Partial"}),r.jsx(Ce,{fullWidth:!0,variant:"outlined",color:"error",onClick:bi,sx:{minHeight:"44px"},children:"End Without Saving"}),r.jsx(Ce,{fullWidth:!0,variant:"text",onClick:()=>_e(!1),sx:{minHeight:"44px"},children:"Cancel"})]})]})]})};iD.propTypes={workoutPlan:T.array.isRequired,onComplete:T.func.isRequired,onExit:T.func.isRequired,supersetConfig:T.arrayOf(T.number),setsPerSuperset:T.number,savedWorkoutId:T.string,savedWorkoutName:T.string,onSetComplete:T.func,onProgressUpdate:T.func,initialProgress:T.shape({currentStepIndex:T.number,workoutData:T.array,elapsedTime:T.number,currentPhase:T.string})};const b0="goodlift_active_session",T7=14400*1e3,k7=500,Cx={WORKOUT:"workout"},Rg=e=>{if(e)try{const t={...e,timestamp:Date.now()};localStorage.setItem(b0,JSON.stringify(t))}catch(t){console.error("[SessionPersistence] Error saving session state:",t)}},Au=()=>{try{const e=localStorage.getItem(b0);if(!e)return null;const t=JSON.parse(e);return t.timestamp&&Date.now()-t.timestamp>T7?(ed(),null):t}catch(e){return console.error("[SessionPersistence] Error loading session state:",e),null}},ed=()=>{try{localStorage.removeItem(b0)}catch(e){console.error("[SessionPersistence] Error clearing session state:",e)}},E7=()=>{const e=Au();return e!==null&&e.isActive===!0},D7=({sessionType:e=Cx.WORKOUT,sessionState:t=null,isActive:n=!1,onRestore:i=null,onStateChange:o=null}={})=>{const c=y.useRef(0),d=1e3,f=y.useCallback(()=>{if(!n||!t)return;const b=Date.now();b-c.current<d||(c.current=b,Rg({type:e,state:t,isActive:n}))},[e,t,n]),h=y.useCallback(()=>{if(document.hidden)n&&t&&(Rg({type:e,state:t,isActive:n,pausedAt:Date.now()}),o?.("hidden"));else{o?.("visible");const b=Au();b&&b.isActive&&i&&i(b)}},[e,t,n,i,o]),g=y.useCallback(()=>{n&&t&&Rg({type:e,state:t,isActive:n,pausedAt:Date.now()})},[e,t,n]),m=y.useCallback(b=>{if(b.persisted){const v=Au();v&&v.isActive&&i&&i(v)}},[i]);return y.useEffect(()=>(document.addEventListener("visibilitychange",h),window.addEventListener("beforeunload",g),window.addEventListener("pageshow",m),window.addEventListener("pagehide",g),()=>{document.removeEventListener("visibilitychange",h),window.removeEventListener("beforeunload",g),window.removeEventListener("pageshow",m),window.removeEventListener("pagehide",g)}),[h,g,m]),y.useEffect(()=>{if(!n)return;const b=setInterval(()=>{f()},5e3);return()=>clearInterval(b)},[n,f]),y.useEffect(()=>{n&&t&&f()},[n,t,f]),y.useEffect(()=>{if(!n){const b=setTimeout(()=>{ed()},k7);return()=>clearTimeout(b)}},[n]),{saveState:f,clearState:ed,loadState:Au,hasActiveSession:E7}},aD=({open:e,workoutPlan:t,onComplete:n,onExit:i,supersetConfig:o,setsPerSuperset:c})=>{const[d,f]=y.useState(!1),[h,g]=y.useState(Ar.isActive()),[m]=y.useState(Ar.isWakeLockSupported()),[b,v]=y.useState(0),[j,E]=y.useState(!1),[S,w]=y.useState(0),[C,k]=y.useState({currentStepIndex:0,workoutData:[],elapsedTime:0,currentPhase:"exercise"}),R=y.useMemo(()=>({workoutPlan:t,supersetConfig:o,setsPerSuperset:c,restDuration:b,restTimeRemaining:S,isResting:j,progress:C,isMinimized:d}),[t,o,c,b,S,j,C,d]),O=y.useCallback(H=>{if(!H||typeof H!="object"||!H.state)return;const $=H.state;typeof $.restDuration=="number"&&v($.restDuration),$.isResting&&typeof $.restTimeRemaining=="number"&&$.restTimeRemaining>0&&(w($.restTimeRemaining),E(!0)),$.progress&&typeof $.progress=="object"&&k(N=>({...N,...$.progress}))},[]);D7({sessionType:Cx.WORKOUT,sessionState:R,isActive:e,onRestore:O});const I=y.useCallback(H=>{k($=>({...$,...H}))},[]),P=y.useCallback(H=>{ed(),n(H)},[n]),W=y.useCallback(()=>{ed(),i()},[i]);y.useEffect(()=>{if(e){const H=Au();H?.type===Cx.WORKOUT&&H.isActive&&O(H)}},[e,O]),y.useEffect(()=>{const H=Ar.reacquireOnVisibilityChange();return()=>{H&&H.then($=>$&&$())}},[]),y.useEffect(()=>{let H=null;return j&&S>0&&(H=setInterval(()=>{w($=>$<=1?(E(!1),0):$-1)},1e3)),()=>{H&&clearInterval(H)}},[j,S]);const L=y.useCallback(()=>{b>0&&(w(b),E(!0))},[b]),z=y.useCallback(()=>{E(!1),w(0)},[]),q=()=>{f(!1)},B=async()=>{if(h)await Ar.releaseWakeLock(),g(!1);else{const H=await Ar.requestWakeLock();g(H)}},U=(H,$)=>{$!==null&&v($)},re=H=>{const $=Math.floor(H/60),N=H%60;return`${$}:${N.toString().padStart(2,"0")}`};return r.jsxs(r.Fragment,{children:[r.jsx(Pa,{children:d&&r.jsx(gt.div,{initial:{opacity:0,scale:.8,y:50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:50},style:{position:"fixed",bottom:"80px",right:"20px",zIndex:1400},children:r.jsx(Ie,{onClick:q,sx:{bgcolor:"primary.main",color:"white",width:56,height:56,boxShadow:3,"&:hover":{bgcolor:"primary.dark",transform:"scale(1.1)"},transition:"all 0.2s ease"},"aria-label":"Restore workout",children:r.jsx(HR,{})})})}),r.jsxs(Et,{open:e&&!d,fullScreen:!0,PaperProps:{sx:{bgcolor:"background.default",backgroundImage:"none"}},children:[r.jsxs(A,{sx:{position:"relative",top:0,zIndex:1100,bgcolor:"background.paper",borderBottom:"1px solid",borderColor:"divider",display:"flex",justifyContent:"center",alignItems:"center",py:1,px:1,gap:1,minHeight:"56px"},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(rd,{sx:{fontSize:18,color:"text.secondary"}}),r.jsxs(To,{value:b,exclusive:!0,onChange:U,size:"small","aria-label":"rest timer duration",children:[r.jsx(ss,{value:0,"aria-label":"rest timer off",sx:{py:.5,px:1.5,fontSize:"0.8rem",fontWeight:600},children:"Off"}),r.jsx(ss,{value:60,"aria-label":"60 seconds rest",sx:{py:.5,px:1.5,fontSize:"0.8rem",fontWeight:600},children:"60s"}),r.jsx(ss,{value:90,"aria-label":"90 seconds rest",sx:{py:.5,px:1.5,fontSize:"0.8rem",fontWeight:600},children:"90s"})]})]}),m&&r.jsx(A,{sx:{position:"absolute",right:"8px"},children:r.jsx(ar,{title:h?"Screen kept awake":"Allow screen sleep",children:r.jsx(Ie,{onClick:B,size:"small",sx:{color:h?"secondary.main":"text.secondary","&:hover":{bgcolor:h?"rgba(255, 140, 0, 0.08)":"action.hover"}},"aria-label":h?"Release wake lock":"Keep screen awake",children:h?r.jsx(pE,{size:20}):r.jsx(hE,{size:20})})})})]}),r.jsx(Pa,{children:j&&r.jsxs(gt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",zIndex:1200,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem"},children:[r.jsx(M,{variant:"h6",sx:{color:"white",mb:2,opacity:.8},children:"Rest Time"}),r.jsx(M,{variant:"h1",sx:{color:"white",fontWeight:700,fontSize:{xs:"5rem",sm:"7rem"},mb:3},children:re(S)}),r.jsx(A,{sx:{width:"80%",maxWidth:400,mb:4},children:r.jsx(ur,{variant:"determinate",value:(1-S/b)*100,sx:{height:8,borderRadius:4,bgcolor:"rgba(255, 255, 255, 0.2)","& .MuiLinearProgress-bar":{bgcolor:"primary.main",borderRadius:4}}})}),r.jsx(gt.button,{onClick:z,whileHover:{scale:1.05},whileTap:{scale:.95},style:{padding:"12px 32px",fontSize:"1rem",fontWeight:600,color:"white",backgroundColor:"transparent",border:"2px solid white",borderRadius:"8px",cursor:"pointer",opacity:.8},children:"Skip Rest"})]})}),r.jsx(Dt,{sx:{p:0,overflow:"auto",WebkitOverflowScrolling:"touch",maxHeight:"100vh"},children:r.jsx(iD,{workoutPlan:t,onComplete:P,onExit:W,supersetConfig:o,setsPerSuperset:c,onSetComplete:L,onProgressUpdate:I,initialProgress:C})})]})]})};aD.propTypes={open:T.bool.isRequired,workoutPlan:T.array.isRequired,onComplete:T.func.isRequired,onExit:T.func.isRequired,supersetConfig:T.arrayOf(T.number),setsPerSuperset:T.number};const oD=({value:e,onChange:t,availableExercises:n,label:i="Exercise",placeholder:o="Type to search and swap exercise...",size:c="small",fullWidth:d=!0,disabled:f=!1,sx:h={}})=>{const g=m=>{if(!m)return n;const b=m.toLowerCase().split(" ").filter(v=>v.length>0);return n.filter(v=>{const j=[v["Exercise Name"],v["Primary Muscle"]].join(" ").toLowerCase();return b.every(E=>j.includes(E))})};return r.jsx(jC,{fullWidth:d,size:c,options:n,value:e,onChange:t,disabled:f,getOptionLabel:m=>m["Exercise Name"]||m.name||"",filterOptions:(m,b)=>g(b.inputValue),isOptionEqualToValue:(m,b)=>(m["Exercise Name"]||m.name)===(b["Exercise Name"]||b.name),renderInput:m=>r.jsx(Je,{...m,label:i,placeholder:o}),renderOption:(m,b)=>{const{key:v,...j}=m;return r.jsx("li",{...j,children:r.jsxs(A,{children:[r.jsx(M,{variant:"body2",children:b["Exercise Name"]}),r.jsxs(M,{variant:"caption",color:"text.secondary",children:[b["Primary Muscle"],"  ",b.Equipment]})]})},v)},noOptionsText:"No exercises found. Try different search terms.",sx:h})};oD.propTypes={value:T.object,onChange:T.func.isRequired,availableExercises:T.array.isRequired,label:T.string,placeholder:T.string,size:T.string,fullWidth:T.bool,disabled:T.bool,sx:T.object};const v0=(e,t,n)=>!e||t===n?e:t==="lbs"&&n==="kg"?Math.round(e*.453592*10)/10:t==="kg"&&n==="lbs"?Math.round(e*2.20462*10)/10:e,lD=(e,t=30)=>{if(!e||e.length===0)return[];const n=new Date;return n.setDate(n.getDate()-t),e.filter(i=>new Date(i.date)>=n).sort((i,o)=>new Date(i.date)-new Date(o.date))},M7=(e,t=30)=>{if(!e||e.length<2)return{change:0,percentage:0,direction:"stable"};const n=lD(e,t);if(n.length<2)return{change:0,percentage:0,direction:"stable"};const i=n[0],o=n[n.length-1],c=v0(i.weight,i.unit,o.unit),f=o.weight-c,h=c!==0?f/c*100:0;let g="stable";return Math.abs(f)>.5&&(g=f>0?"up":"down"),{change:Math.round(f*10)/10,percentage:Math.round(h*10)/10,direction:g}},Hf=(e,t="lbs")=>e?`${Math.round(e*10)/10} ${t}`:`0 ${t}`,A7=(e,t="lbs")=>{if(!e||isNaN(e))return{valid:!1,error:"Please enter a valid weight"};const n=parseFloat(e);if(n<=0)return{valid:!1,error:"Weight must be greater than 0"};const i=t==="lbs"?50:20,o=t==="lbs"?1e3:450;return n<i||n>o?{valid:!1,error:`Weight must be between ${i} and ${o} ${t}`}:{valid:!0}},R7=(e,t=30,n="lbs")=>{const i=lD(e,t);if(i.length===0)return{labels:[],data:[]};const o=i.map(d=>new Date(d.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),c=i.map(d=>v0(d.weight,d.unit,n));return{labels:o,data:c}},P7=(e,t="lbs")=>{if(!e||e.length===0)return{min:0,max:0,average:0,current:0,entries:0};const n=e.map(h=>v0(h.weight,h.unit,t)),i=Math.min(...n),o=Math.max(...n),d=n.reduce((h,g)=>h+g,0)/n.length,f=n[n.length-1];return{min:Math.round(i*10)/10,max:Math.round(o*10)/10,average:Math.round(d*10)/10,current:Math.round(f*10)/10,entries:n.length}},cD=(e,t=45)=>{if(!e||e<=0||!t||t<=0)return null;if(e<=t)return 0;const n=(e-t)/2;return Math.round(n/2.5)*2.5},uD=y.createContext({}),S0=()=>y.useContext(uD),jl={units:"imperial",theme:"dark",notifications:!0,sounds:!0,warmupDuration:5,cooldownDuration:5,restTimerDefault:90,autoProgressionEnabled:!0,language:"en",pushNotificationsEnabled:!1,dailyWellnessTasksEnabled:!1,wellnessCategories:[],relationshipStatus:"All",morningNotificationTime:{hour:8,minute:0},followupNotificationTime:{hour:21,minute:0},enableFollowupNotifications:!0,showWellnessOnAppOpen:!1,barbellWeight:45},dD=({children:e})=>{const{currentUser:t,isGuest:n}=Ao(),[i,o]=y.useState(jl),[c,d]=y.useState(!0);y.useEffect(()=>{(async()=>{d(!0);try{if(t&&!n){const j=await Rs(t.uid);j?.preferences?o({...jl,...j.preferences}):o(jl)}else{const j=localStorage.getItem("goodlift_preferences");o(j?{...jl,...JSON.parse(j)}:jl)}}catch(j){console.error("Error loading preferences:",j),o(jl)}finally{d(!1)}})()},[t,n]);const f=y.useCallback(async v=>{try{o(v),t&&!n?await Zt(t.uid,{preferences:v}):localStorage.setItem("goodlift_preferences",JSON.stringify(v))}catch(j){console.error("Error saving preferences:",j)}},[t,n]),h=y.useCallback((v,j)=>{const E={...i,[v]:j};f(E)},[i,f]),g=y.useCallback((v,j)=>{if(!v)return 0;const E=i.units==="imperial"?"lbs":"kg";return j===E?v:j==="lbs"&&E==="kg"?Math.round(v*.453592*10)/10:j==="kg"&&E==="lbs"?Math.round(v*2.20462*10)/10:v},[i.units]),m=y.useCallback(()=>i.units==="imperial"?"lbs":"kg",[i.units]),b={preferences:i,loading:c,updatePreference:h,savePreferences:f,convertWeight:g,getDisplayUnit:m};return r.jsx(uD.Provider,{value:b,children:e})};dD.propTypes={children:T.node.isRequired};const w0=y.memo(({workout:e,workoutType:t,onStart:n,onCancel:i,onRandomizeExercise:o,isCustomizeMode:c=!1,supersetConfig:d=[2,2,2,2],setsPerSuperset:f=3})=>{const{preferences:h}=S0(),[g,m]=y.useState({}),[b,v]=y.useState(!0),[j,E]=y.useState(!1),[S,w]=y.useState(!1),[C,k]=y.useState(!1),[R,O]=y.useState({}),[I,P]=y.useState({open:!1,message:"",severity:"info"}),[W,L]=y.useState([]),[z,q]=y.useState(e),[B,U]=y.useState(f),[re,H]=y.useState(null),$=z.some(G=>G!==null&&typeof G.sets=="number");y.useEffect(()=>{(async()=>{try{const ve=await(await fetch(Oo)).json();L(ve)}catch(ae){console.error("Error loading exercises:",ae),L([])}})()},[]),y.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"}),(async()=>{const ae={};if(c){q(e),m({}),v(!1);return}const ve=e.filter(te=>te!==null);for(const te of ve){const ye=te["Exercise Name"],[Se,Y]=await Promise.all([bo(ye),ka(ye)]);ae[ye]={weight:Se??"",targetReps:Y?Ea(Y):is}}m(ae),q(e),v(!1)})()},[e,c,d]),y.useEffect(()=>{const G=async()=>{const ae=Object.keys(g),te=e.filter(ye=>ye!==null).filter(ye=>!ae.includes(ye["Exercise Name"]));if(te.length>0){const ye={...g};for(const Se of te){const Y=Se["Exercise Name"];if(!R[Y]){const[ce,Ae]=await Promise.all([bo(Y),ka(Y)]);ye[Y]={weight:ce??"",targetReps:Ae?Ea(Ae):is}}}m(ye)}};!b&&Object.keys(g).length>0&&G()},[e,b]);const N=(G,ae)=>{if(ae===""||/^\d*\.?\d*$/.test(ae)){const ve=ae===""?"":parseFloat(ae);m(te=>({...te,[G]:{...te[G],weight:ve}})),O(te=>({...te,[G]:{...te[G],weightCustomized:!0}}))}},V=(G,ae)=>{if(ae===""||ae===null||ae===void 0)return;const ve=parseFloat(ae);if(!isNaN(ve)&&ve>0){const te=oy(ve);if(te!==ve){m(Se=>({...Se,[G]:{...Se[G],weight:te}}));const ye=te<=35?"2.5 lb":"5 lb";P({open:!0,message:`Weight adjusted to ${te} lbs (nearest ${ye} increment)`,severity:"info"})}}},F=(G,ae)=>{const ve=g[G]||{weight:"",targetReps:is},te=ve.targetReps||is,ye=ve.weight;let Se=ye;if(ye&&ye>0&&te!==ae){const Y=ly(ye,te,ae);if(Y!==null){Se=Y;const ce=ae<te?"increased":"decreased";P({open:!0,message:`Weight ${ce} to ${Y} lbs for ${ae} reps`,severity:"info"})}}m(Y=>({...Y,[G]:{...Y[G],targetReps:ae,weight:Se}})),O(Y=>({...Y,[G]:{...Y[G],repsCustomized:!0,weightCustomized:Se!==ye}}))},X=y.useCallback((G,ae)=>{o&&o(G,ae)},[o]),oe=y.useCallback((G,ae)=>{if(!ae)return;q(te=>{const ye=[...te];return ye[G]=ae,ye});const ve=ae["Exercise Name"];R[ve]||bo(ve).then(te=>{ka(ve).then(ye=>{m(Se=>({...Se,[ve]:{weight:te??"",targetReps:ye?Ea(ye):is}}))})})},[R]),ue=async()=>{if(!j){E(!0);try{if(c&&z.some(ae=>ae===null)){P({open:!0,message:"Please select exercises for all slots before starting",severity:"warning"}),E(!1);return}for(const[G,ae]of Object.entries(g)){const ve=ae.weight===""?null:ae.weight,te=ae.targetReps===""?null:ae.targetReps;await $r(G,ve),await oh(G,te)}n(z,d,B)}catch(G){console.error("Error starting workout:",G),E(!1)}}},Te=()=>{try{const G=z.filter(ae=>ae!==null);yu({name:`${t.charAt(0).toUpperCase()+t.slice(1)} Body Workout`,type:t,exercises:G}),w(!0),k(!0)}catch(G){console.error("Error saving to favorites:",G)}},De=[];let ee=0;for(const G of d){const ae=[];for(let ve=0;ve<G&&ee<z.length;ve++)ae.push(z[ee]),ee++;ae.length>0&&De.push(ae)}return b?r.jsx(Kl,{}):r.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4},className:"screen",style:{maxWidth:"900px",margin:"0 auto",padding:"1rem",width:"100%",boxSizing:"border-box",overflowX:"hidden"},children:[r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:1,px:2,borderBottom:"1px solid",borderColor:"divider",mb:2},children:[r.jsx(A,{sx:{display:"flex",flexDirection:"column",gap:.5},children:r.jsxs(M,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.875rem"},children:[De.length," Supersets  ",z.filter(G=>G!==null).length," Exercises",!$&&`  ${B} Sets Each`]})}),r.jsx(Ie,{onClick:Te,disabled:S,size:"small",sx:{color:S?"warning.main":"action.active","&:hover":{color:"warning.main"}},"aria-label":"Save to favorites",children:S?r.jsx(pi,{}):r.jsx(vw,{})})]}),r.jsx(A,{sx:{mb:{xs:2,sm:3},px:{xs:.5,sm:0}},children:!$&&r.jsxs(A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1,mb:1},children:[r.jsx(M,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:"Sets per superset:"}),r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[r.jsx(Ie,{size:"small",onClick:()=>U(G=>Math.max(1,G-1)),disabled:B<=1,sx:{minWidth:"32px",minHeight:"32px",bgcolor:"action.hover","&:hover":{bgcolor:"action.selected"}},children:r.jsx(Hs,{fontSize:"small"})}),r.jsx(M,{variant:"h6",sx:{fontWeight:700,color:"primary.main",minWidth:"32px",textAlign:"center",fontSize:{xs:"1rem",sm:"1.25rem"}},children:B}),r.jsx(Ie,{size:"small",onClick:()=>U(G=>Math.min(10,G+1)),disabled:B>=10,sx:{minWidth:"32px",minHeight:"32px",bgcolor:"action.hover","&:hover":{bgcolor:"action.selected"}},children:r.jsx($n,{fontSize:"small"})})]})]})}),r.jsx(Le,{spacing:{xs:2,sm:3},sx:{px:{xs:.5,sm:0}},children:De.map((G,ae)=>r.jsx(gt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*ae,duration:.4},children:r.jsx(Ge,{sx:{bgcolor:"background.paper",border:"1px solid",borderColor:"divider",borderRadius:2,transition:"all 0.2s ease",maxWidth:"100%",boxSizing:"border-box",boxShadow:1,"&:hover":{boxShadow:2}},children:r.jsxs(at,{sx:{p:{xs:1.5,sm:2},"&:last-child":{pb:{xs:1.5,sm:2}}},children:[r.jsx(A,{sx:{display:"flex",alignItems:"center",gap:1,mb:1.5,pb:1,borderBottom:"1px solid",borderColor:"divider"},children:r.jsxs(M,{variant:"body2",sx:{color:"text.secondary",fontWeight:600,fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:["Superset ",ae+1]})}),r.jsx(Le,{spacing:{xs:1,sm:1.5},children:G.map((ve,te)=>{const ye=ve?ve["Exercise Name"]:null,Se=ye?g[ye]||{weight:"",targetReps:""}:{weight:"",targetReps:""},Y=De.slice(0,ae).reduce((Ae,ne)=>Ae+ne.length,0)+te,ce=String.fromCharCode(65+te);return r.jsxs(A,{sx:{position:"relative",p:{xs:1,sm:1.5},bgcolor:"background.default",borderRadius:1.5,transition:"all 0.2s ease",border:"1px solid",borderColor:re===Y?"primary.main":"transparent"},onFocus:()=>H(Y),onBlur:()=>H(null),children:[r.jsxs(A,{sx:{display:"flex",alignItems:"flex-start",gap:{xs:1,sm:1.5},mb:{xs:1,sm:1.5}},children:[r.jsx(M,{sx:{fontSize:{xs:"1rem",sm:"1.25rem"},color:"text.secondary",fontWeight:600,width:{xs:"24px",sm:"32px"},textAlign:"center",flexShrink:0},children:ce}),r.jsx(A,{sx:{flex:1,minWidth:0},children:r.jsx(A,{sx:{mb:.5},children:r.jsx(oD,{value:ve,onChange:(Ae,ne)=>{ne&&oe(Y,ne)},availableExercises:W,label:"Exercise",placeholder:c?"Type to search and select...":"Type to search and swap...",disabled:W.length===0})})})]}),ve&&r.jsxs(r.Fragment,{children:[r.jsxs(Le,{direction:"row",spacing:{xs:1,sm:1.5},sx:{pl:{xs:4,sm:5.5},flexWrap:{xs:"wrap",sm:"nowrap"},mb:{xs:1,sm:1.5},alignItems:"center"},children:[r.jsx(Je,{type:"tel",inputMode:"decimal",value:Se.weight===""?"":Se.weight,onChange:Ae=>N(ye,Ae.target.value),onBlur:Ae=>V(ye,Ae.target.value),onFocus:Ae=>Ae.target.select(),placeholder:ve.Equipment?.toLowerCase()==="bodyweight"?"N/A":"",size:"small",disabled:ve.Equipment?.toLowerCase()==="bodyweight",inputProps:{min:0,max:999,step:2.5,pattern:"[0-9]*([.,][0-9]+)?","aria-label":`Target weight in pounds for ${ye}`},InputProps:{endAdornment:r.jsx(hi,{position:"end",children:r.jsx(M,{variant:"caption",color:"text.secondary",children:"lbs"})})},sx:{width:{xs:90,sm:100},minWidth:{xs:90,sm:100},flex:"none","& .MuiInputBase-input":{textAlign:"center",pr:0},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"rgba(0, 0, 0, 0.38)",backgroundColor:"rgba(0, 0, 0, 0.04)"}}}),r.jsx(dd,{value:Se.targetReps||is,onChange:Ae=>F(ye,Ae),compact:!0,showLabel:!0})]}),ve.Equipment?.toLowerCase()==="barbell"&&Se.weight&&Se.weight>0&&r.jsx(M,{variant:"caption",color:"text.secondary",sx:{pl:{xs:4,sm:5.5},fontStyle:"italic",fontSize:{xs:"0.65rem",sm:"0.75rem"}},children:(()=>{const Ae=cD(Se.weight,h.barbellWeight||45);return Ae!==null&&Ae>=0?`${Ae} lbs per side`:""})()}),r.jsxs(A,{sx:{pl:{xs:4,sm:5.5},display:"flex",alignItems:"center",gap:.5,flexWrap:"wrap"},children:[r.jsx(M,{variant:"caption",sx:{color:"text.secondary",fontSize:{xs:"0.65rem",sm:"0.75rem"}},children:ve["Primary Muscle"]}),r.jsx(M,{variant:"caption",sx:{color:"text.disabled",fontSize:{xs:"0.65rem",sm:"0.75rem"}},children:""}),r.jsx(M,{variant:"caption",sx:{color:"text.secondary",fontSize:{xs:"0.65rem",sm:"0.75rem"}},children:ve.Equipment}),typeof ve.sets=="number"&&r.jsxs(r.Fragment,{children:[r.jsx(M,{variant:"caption",sx:{color:"text.disabled",fontSize:{xs:"0.65rem",sm:"0.75rem"}},children:""}),r.jsxs(M,{variant:"caption",sx:{color:"primary.main",fontWeight:600,fontSize:{xs:"0.65rem",sm:"0.75rem"}},children:[ve.sets," Set",ve.sets!==1?"s":""]})]}),o&&!c&&r.jsx(Ie,{size:"small",onClick:Ae=>{Ae.stopPropagation(),X(ve,Y)},sx:{color:"text.secondary",minWidth:"28px",minHeight:"28px",ml:.5,"&:hover":{color:"primary.main",backgroundColor:"action.hover"}},"aria-label":`Randomize ${ye}`,children:r.jsx(UR,{sx:{fontSize:{xs:16,sm:18}}})})]})]})]},te)})})]})})},ae))}),r.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:r.jsxs(Le,{direction:"row",spacing:2,sx:{mt:{xs:3,sm:4},px:{xs:.5,sm:0}},justifyContent:"center",children:[r.jsx(Ce,{variant:"outlined",size:"large",onClick:i,sx:{borderRadius:1.5,minWidth:{xs:"50px",sm:"60px"},px:{xs:1.5,sm:2},py:1,fontSize:{xs:"0.9rem",sm:"1rem"},fontWeight:600,borderColor:"divider",color:"text.secondary","&:hover":{borderColor:"text.secondary",bgcolor:"action.hover"}},children:"Cancel"}),r.jsx(Ce,{variant:"outlined",size:"large",startIcon:S?r.jsx(pi,{}):r.jsx(vw,{}),onClick:Te,disabled:S,sx:{borderRadius:1.5,flex:1,maxWidth:{xs:"110px",sm:"130px"},px:{xs:1.5,sm:2},py:1,fontSize:{xs:"0.85rem",sm:"0.95rem"},fontWeight:600,borderColor:S?"success.main":"warning.main",color:S?"success.main":"warning.main","&:hover":{borderColor:S?"success.dark":"warning.dark",bgcolor:"action.hover"},"&.Mui-disabled":{borderColor:"success.main",color:"success.main",opacity:.7}},children:S?"Saved!":"Save"}),r.jsx(Ce,{variant:"contained",size:"large",startIcon:r.jsx(Vi,{}),onClick:ue,disabled:j,sx:{borderRadius:1.5,flex:1,maxWidth:{xs:"120px",sm:"140px"},px:{xs:2,sm:3},py:1,fontSize:{xs:"0.9rem",sm:"1rem"},fontWeight:600,bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"},"&.Mui-disabled":{bgcolor:"primary.main",color:"white",opacity:.6}},children:j?"Starting...":"Begin"})]})}),r.jsx(Or,{open:C,autoHideDuration:3e3,onClose:()=>k(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:r.jsx(kt,{severity:"success",onClose:()=>k(!1),children:"Workout saved to favorites!"})}),r.jsx(Or,{open:I.open,autoHideDuration:4e3,onClose:()=>P({...I,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:r.jsx(kt,{severity:I.severity,onClose:()=>P({...I,open:!1}),children:I.message})})]})});w0.displayName="WorkoutPreview";w0.propTypes={workout:T.array.isRequired,workoutType:T.string.isRequired,onStart:T.func.isRequired,onCancel:T.func.isRequired,onRandomizeExercise:T.func,equipmentFilter:T.oneOfType([T.string,T.array]),isCustomizeMode:T.bool,supersetConfig:T.arrayOf(T.number),setsPerSuperset:T.number};const j0=(e=[])=>{if(!e||e.length===0)return{currentStreak:0,longestStreak:0};const t=1e3*60*60*24,n=(C,k)=>Math.floor((k-C)/t),i=[...e].sort((C,k)=>new Date(C.date)-new Date(k.date)),o=C=>(C.type||C.sessionType||"").toLowerCase()==="rest",c=C=>{const k=new Date(C);k.setHours(0,0,0,0);const R=k.getDay();return k.setDate(k.getDate()-R),k.getTime()},d=new Map;i.forEach(C=>{const k=new Date(C.date);k.setHours(0,0,0,0);const R=k.getTime();d.has(R)||d.set(R,[]),d.get(R).push(C)});const f=Array.from(new Set(i.map(C=>{const k=new Date(C.date);return k.setHours(0,0,0,0),k.getTime()}).filter(C=>!isNaN(C)))).sort((C,k)=>C-k);if(f.length===0)return{currentStreak:0,longestStreak:0};const h=new Date;h.setHours(0,0,0,0);const g=h.getTime(),m=C=>{const k=d.get(C)||[];return k.length>0&&k.every(R=>o(R))},b=(C,k)=>{const R=new Map;let O=C;for(;O<=k;){const I=c(O),P=d.has(O),W=m(O);if(!P||W){const z=R.get(I)||0;if(R.set(I,z+1),z+1>1)return!1}O+=t}return!0},v=C=>{if(f.length===0)return 0;const k=f[0],R=n(k,C)+1;for(let O=R;O>=1;O--){const I=C-(O-1)*t;if(!(I<k)&&b(I,C))return O}return 0},j=f[f.length-1],E=n(j,g);let S=0,w=0;E<=1&&(S=v(j));for(const C of f){const k=v(C);w=Math.max(w,k)}return{currentStreak:S,longestStreak:w}},fD=(e=[],t=null,n=30)=>{if(!e||e.length===0)return 0;const i=1e3*60*60*24,o=new Date;o.setHours(0,0,0,0);const c=e.some(E=>{const S=new Date(E.date);return S.setHours(0,0,0,0),S.getTime()===o.getTime()}),d=e.map(E=>new Date(E.date).getTime()),f=new Date(Math.min(...d));f.setHours(0,0,0,0);const h=new Date(o);if(c||h.setDate(h.getDate()-1),h.setHours(0,0,0,0),h<f)return 0;const g=Math.floor((h-f)/i)+1,m=g<n?g:n,b=new Date(h);b.setDate(b.getDate()-m+1),b.setHours(0,0,0,0);const v=new Set;e.forEach(E=>{const S=new Date(E.date);S.setHours(0,0,0,0),S>=b&&S<=h&&v.add(S.toDateString())});const j=v.size;return m===0?0:Math.min(100,Math.round(j/m*100))},hD=(e=[])=>{const t={};return e.forEach(n=>{n.exercises&&Object.entries(n.exercises).forEach(([i,o])=>{!o.sets||o.sets.length===0||o.sets.forEach(c=>{const d=c.weight||0,f=c.reps||0;if(d===0&&f===0)return;const h=d>0&&f>0?d*(1+f/30):0;(!t[i]||d>(t[i].maxWeight||0))&&(t[i]||(t[i]={}),d>(t[i].maxWeight||0)&&(t[i].maxWeight=d,t[i].maxWeightDate=n.date,t[i].maxWeightReps=f)),(!t[i]||f>(t[i].maxReps||0))&&(t[i]||(t[i]={}),f>(t[i].maxReps||0)&&(t[i].maxReps=f,t[i].maxRepsDate=n.date,t[i].maxRepsWeight=d)),(!t[i]||h>(t[i].estimatedOneRepMax||0))&&(t[i]||(t[i]={}),h>(t[i].estimatedOneRepMax||0)&&(t[i].estimatedOneRepMax=Math.round(h*10)/10,t[i].oneRepMaxDate=n.date))})})}),t},pD=(e,t={})=>{const n=[];if(!e||!e.exercises)return n;Object.entries(e.exercises).forEach(([o,c])=>{if(!c.sets||c.sets.length===0)return;const d=t[o]||{};c.sets.forEach(f=>{const h=f.weight||0,g=f.reps||0;if(h===0&&g===0)return;h>0&&h>(d.maxWeight||0)&&n.push({exerciseName:o,type:"weight",value:h,previousValue:d.maxWeight||0,reps:g}),g>0&&g>(d.maxReps||0)&&n.push({exerciseName:o,type:"reps",value:g,previousValue:d.maxReps||0,weight:h});const m=h>0&&g>0?h*(1+g/30):0;m>(d.estimatedOneRepMax||0)&&n.push({exerciseName:o,type:"oneRepMax",value:Math.round(m*10)/10,previousValue:d.estimatedOneRepMax||0})})});const i={};return n.forEach(o=>{const c=`${o.exerciseName}-${o.type}`;(!i[c]||o.value>i[c].value)&&(i[c]=o)}),Object.values(i)},mD=e=>[{days:7,badge:" Week Warrior",description:"7 day streak!"},{days:30,badge:" Monthly Master",description:"30 day streak!"},{days:90,badge:" Quarter Champion",description:"90 day streak!"},{days:180,badge:" Half Year Hero",description:"180 day streak!"},{days:365,badge:" Year Legend",description:"365 day streak!"}].filter(n=>e>=n.days),O7=Object.freeze(Object.defineProperty({__proto__:null,calculateAdherence:fD,calculateStreak:j0,detectNewPRs:pD,getPersonalRecords:hD,getStreakMilestones:mD},Symbol.toStringTag,{value:"Module"})),gD=({open:e,onClose:t,prData:n})=>{if(!n)return null;const i=()=>{const{exerciseName:o,type:c,value:d,previousValue:f}=n;return c==="weight"?`New ${o} PR!  ${d} lbs (previous: ${f} lbs)`:c==="reps"?`New ${o} Rep PR!  ${d} reps (previous: ${f} reps)`:c==="oneRepMax"?`New ${o} 1RM!  ${d} lbs (previous: ${f} lbs)`:`New ${o} PR! `};return r.jsx(Or,{open:e,autoHideDuration:4e3,onClose:t,anchorOrigin:{vertical:"top",horizontal:"center"},TransitionComponent:AC,children:r.jsx(kt,{onClose:t,severity:"success",variant:"filled",sx:{width:"100%",fontSize:"1rem","& .MuiAlert-icon":{fontSize:"2rem"}},icon:r.jsx(Ul,{}),children:i()})})};gD.propTypes={open:T.bool.isRequired,onClose:T.func.isRequired,prData:T.shape({exerciseName:T.string.isRequired,type:T.string.isRequired,value:T.number.isRequired,previousValue:T.number})};T.bool.isRequired,T.func.isRequired,T.shape({days:T.number.isRequired,badge:T.string.isRequired,description:T.string.isRequired});T.bool.isRequired,T.func.isRequired,T.shape({workoutsCompleted:T.number,totalVolume:T.number,totalTime:T.number,prsAchieved:T.number,topExercises:T.arrayOf(T.shape({name:T.string,count:T.number})),adherence:T.number});T.array,T.array,T.object,T.func,T.func,T.func;const I7=zx`
  from {
    transform: rotate(360deg);
  }
  to {
    transform: rotate(0deg);
  }
`,C0=y.memo(({workoutData:e,workoutPlan:t,onFinish:n,onExportCSV:i})=>{const[o,c]=y.useState(!1),[d,f]=y.useState(!1),[h,g]=y.useState([]),[m,b]=y.useState(0),[v,j]=y.useState(!1),[E,S]=y.useState(!1),[w,C]=y.useState(""),{isAutoAssignWeek:k,assignWorkoutToDay:R,weeklySchedule:O}=Po();y.useEffect(()=>{(async()=>{try{const z=await Kr(),q=hD(z.slice(1)),B=pD(e,q);B.length>0&&g(B)}catch(z){console.error("Error checking for PRs:",z)}})()},[e]),y.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),y.useEffect(()=>{(async()=>{if(k()&&e&&t)try{const z=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date().getDay()],q=Ca(e),B={sessionType:q,sessionName:`${q.charAt(0).toUpperCase()+q.slice(1)} Body Workout`,exercises:t,date:new Date().toISOString()};await R(z,B),C(`Automatically assigned to ${z}`),S(!0)}catch(z){console.error("Error auto-assigning workout:",z)}})()},[k,e,t,R]);const I=()=>{try{if(!t||t.length===0){alert("Cannot save workout: No exercise data available");return}const L=Ca(e);yu({name:`${L.charAt(0).toUpperCase()+L.slice(1)} Body Workout`,type:L,equipment:"all",exercises:t}),c(!0),f(!0)}catch(L){console.error("Error saving to favorites:",L),alert("Failed to save workout to favorites")}},P=()=>{j(!0)},W=async(L,z)=>{try{const q=Ca(e),B={sessionType:q,sessionName:`${q.charAt(0).toUpperCase()+q.slice(1)} Body Workout`,exercises:t,date:new Date().toISOString()};await R(L,B),C(`Workout assigned to ${L}`),S(!0)}catch(q){console.error("Error assigning workout:",q),C("Failed to assign workout"),S(!0)}};return r.jsxs(gt.div,{className:"screen completion-screen",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},style:{padding:"1rem",maxWidth:"900px",margin:"0 auto"},children:[r.jsxs(gt.div,{className:"completion-header",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring",stiffness:200},children:[r.jsx(A,{sx:{position:"relative"},children:r.jsx(Ie,{onClick:I,disabled:o,sx:{position:"absolute",top:0,right:0,color:o?"warning.main":"white","&:hover":{color:"warning.main"}},"aria-label":"Save to favorites",children:o?r.jsx(pi,{sx:{fontSize:32}}):r.jsx(Vl,{sx:{fontSize:32}})})}),r.jsx(A,{component:"img",src:"/goodlift/goodlift-dog-celebration.svg",alt:"Celebration",sx:{width:{xs:"80px",sm:"100px"},height:{xs:"80px",sm:"100px"},marginBottom:"1rem",animation:`${I7} 1.5s linear infinite`}}),r.jsx("h1",{children:"Workout Complete!"}),r.jsxs("p",{className:"completion-time",children:["Total Time: ",r.jsx("strong",{children:Z2(e.duration)})]})]}),r.jsxs("div",{className:"workout-summary-container",children:[r.jsx(M,{variant:"h4",component:"h2",sx:{fontWeight:700,mb:3,textAlign:"center",color:"text.primary"},children:"Workout Summary"}),r.jsx(Le,{spacing:2,children:Object.entries(e.exercises).map(([L,z],q)=>r.jsx(gt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3+q*.1},children:r.jsx(Ge,{sx:{borderRadius:3,transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 24px rgba(48, 86, 105, 0.15)"}},children:r.jsxs(at,{children:[r.jsx(M,{variant:"h6",component:"h3",sx:{color:"primary.main",fontWeight:600,mb:2,pb:1,borderBottom:"2px solid",borderColor:"rgba(138, 190, 185, 0.2)"},children:L}),r.jsx(Le,{spacing:1,children:z.sets.map((B,U)=>r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:1.5,bgcolor:"rgba(183, 229, 205, 0.3)",borderRadius:2,transition:"all 0.2s ease","&:hover":{bgcolor:"primary.main",color:"white","& .MuiChip-root":{bgcolor:"white",color:"primary.main"}}},children:[r.jsx(Ne,{label:`Set ${B.set}`,size:"small",sx:{fontWeight:600,minWidth:60}}),r.jsxs(M,{sx:{fontWeight:600,fontSize:"1rem"},children:[B.weight," lbs  ",B.reps," reps"]})]},U))})]})})},L))})]}),r.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:r.jsxs(Le,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mt:4},children:[!k()&&r.jsx(Ce,{variant:"outlined",size:"large",startIcon:r.jsx(zu,{}),onClick:P,sx:{flex:1,borderRadius:2,py:1.5,fontSize:"1rem",fontWeight:600,borderColor:"info.main",color:"info.main","&:hover":{borderColor:"info.dark",bgcolor:"rgba(33, 150, 243, 0.1)"}},children:"Assign to Day"}),r.jsx(Ce,{variant:"outlined",size:"large",startIcon:r.jsx(RC,{}),onClick:i,sx:{flex:1,borderRadius:2,py:1.5,fontSize:"1rem",fontWeight:600,borderColor:"secondary.main",color:"secondary.main","&:hover":{borderColor:"secondary.dark",bgcolor:"rgba(193, 120, 90, 0.1)"}},children:"Download CSV"}),r.jsx(Ce,{variant:"contained",size:"large",startIcon:r.jsx($R,{}),onClick:n,sx:{flex:1,borderRadius:2,py:1.5,fontSize:"1rem",fontWeight:600,bgcolor:"primary.main","&:hover":{bgcolor:"primary.dark"}},children:"Finish"})]})}),r.jsx(Or,{open:d,autoHideDuration:3e3,onClose:()=>f(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:r.jsx(kt,{severity:"success",onClose:()=>f(!1),children:"Workout saved to favorites!"})}),r.jsx(Or,{open:E,autoHideDuration:3e3,onClose:()=>S(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:r.jsx(kt,{severity:"success",onClose:()=>S(!1),children:w})}),r.jsx(g0,{open:v,onClose:()=>j(!1),onAssign:W,workoutData:e,currentSchedule:O}),h.length>0&&m<h.length&&r.jsx(gD,{open:!0,onClose:()=>b(L=>L+1),prData:h[m]})]})});C0.displayName="CompletionScreen";C0.propTypes={workoutData:T.object.isRequired,workoutPlan:T.array,onFinish:T.func.isRequired,onExportCSV:T.func.isRequired};const Es=[{id:"first-workout",name:"First Steps",description:"Complete your first workout",icon:"",tier:"bronze",condition:{type:"workoutCount",value:1}},{id:"dedicated-5",name:"Getting Started",description:"Complete 5 workouts",icon:"",tier:"bronze",condition:{type:"workoutCount",value:5}},{id:"dedicated-10",name:"Committed",description:"Complete 10 workouts",icon:"",tier:"silver",condition:{type:"workoutCount",value:10}},{id:"dedicated-25",name:"Athlete",description:"Complete 25 workouts",icon:"",tier:"silver",condition:{type:"workoutCount",value:25}},{id:"dedicated-50",name:"Beast Mode",description:"Complete 50 workouts",icon:"",tier:"gold",condition:{type:"workoutCount",value:50}},{id:"dedicated-100",name:"Centurion",description:"Complete 100 workouts",icon:"",tier:"gold",condition:{type:"workoutCount",value:100}},{id:"dedicated-150",name:"Elite Athlete",description:"Complete 150 workouts",icon:"",tier:"gold",condition:{type:"workoutCount",value:150}},{id:"dedicated-200",name:"Relentless",description:"Complete 200 workouts",icon:"",tier:"platinum",condition:{type:"workoutCount",value:200}},{id:"dedicated-250",name:"Iron Legend",description:"Complete 250 workouts",icon:"",tier:"platinum",condition:{type:"workoutCount",value:250}},{id:"dedicated-500",name:"Hall of Fame",description:"Complete 500 workouts",icon:"",tier:"platinum",condition:{type:"workoutCount",value:500}},{id:"streak-3",name:"Consistency",description:"Maintain a 3-day workout streak",icon:"",tier:"bronze",condition:{type:"streak",value:3}},{id:"streak-7",name:"Week Warrior",description:"Maintain a 7-day workout streak",icon:"",tier:"silver",condition:{type:"streak",value:7}},{id:"streak-14",name:"Fortnight Fighter",description:"Maintain a 14-day workout streak",icon:"",tier:"silver",condition:{type:"streak",value:14}},{id:"streak-30",name:"Monthly Master",description:"Maintain a 30-day workout streak",icon:"",tier:"gold",condition:{type:"streak",value:30}},{id:"streak-60",name:"Unbreakable",description:"Maintain a 60-day workout streak",icon:"",tier:"gold",condition:{type:"streak",value:60}},{id:"streak-100",name:"Iron Will",description:"Maintain a 100-day workout streak",icon:"",tier:"platinum",condition:{type:"streak",value:100}},{id:"first-pr",name:"New Heights",description:"Achieve your first personal record",icon:"",tier:"bronze",condition:{type:"prCount",value:1}},{id:"pr-5",name:"Record Breaker",description:"Achieve 5 personal records",icon:"",tier:"silver",condition:{type:"prCount",value:5}},{id:"pr-10",name:"Powerhouse",description:"Achieve 10 personal records",icon:"",tier:"gold",condition:{type:"prCount",value:10}},{id:"pr-25",name:"Peak Performance",description:"Achieve 25 personal records",icon:"",tier:"platinum",condition:{type:"prCount",value:25}},{id:"volume-10k",name:"Moving Iron",description:"Lift 10,000 lbs total volume",icon:"",tier:"bronze",condition:{type:"totalVolume",value:1e4}},{id:"volume-50k",name:"Heavy Lifter",description:"Lift 50,000 lbs total volume",icon:"",tier:"silver",condition:{type:"totalVolume",value:5e4}},{id:"volume-100k",name:"Tonnage Master",description:"Lift 100,000 lbs total volume",icon:"",tier:"gold",condition:{type:"totalVolume",value:1e5}},{id:"volume-250k",name:"Moving Mountains",description:"Lift 250,000 lbs total volume",icon:"",tier:"platinum",condition:{type:"totalVolume",value:25e4}},{id:"time-1h",name:"First Hour",description:"Complete 1 hour of total workout time",icon:"",tier:"bronze",condition:{type:"totalTime",value:3600}},{id:"time-10h",name:"Time Investment",description:"Complete 10 hours of total workout time",icon:"",tier:"silver",condition:{type:"totalTime",value:36e3}},{id:"time-50h",name:"Dedicated",description:"Complete 50 hours of total workout time",icon:"",tier:"gold",condition:{type:"totalTime",value:18e4}},{id:"time-100h",name:"Time Master",description:"Complete 100 hours of total workout time",icon:"",tier:"platinum",condition:{type:"totalTime",value:36e4}},{id:"early-bird",name:"Early Bird",description:"Complete a workout before 7 AM",icon:"",tier:"bronze",condition:{type:"special",value:"earlyMorning"}},{id:"morning-person",name:"Morning Person",description:"Complete 10 workouts in the morning (7 AM - 12 PM)",icon:"",tier:"silver",condition:{type:"special",value:"morningWorkouts",count:10}},{id:"afternoon-warrior",name:"Afternoon Warrior",description:"Complete 10 workouts in the afternoon (12 PM - 5 PM)",icon:"",tier:"silver",condition:{type:"special",value:"afternoonWorkouts",count:10}},{id:"evening-grinder",name:"Evening Grinder",description:"Complete 10 workouts in the evening (5 PM - 10 PM)",icon:"",tier:"silver",condition:{type:"special",value:"eveningWorkouts",count:10}},{id:"night-owl",name:"Night Owl",description:"Complete a workout after 10 PM",icon:"",tier:"bronze",condition:{type:"special",value:"lateNight"}},{id:"consecutive-3",name:"Back to Back",description:"Complete 3 consecutive workouts within an hour of each other",icon:"",tier:"bronze",condition:{type:"special",value:"consecutiveWorkouts",count:3}},{id:"consecutive-5",name:"Chain Reaction",description:"Complete 5 consecutive workouts within an hour of each other",icon:"",tier:"silver",condition:{type:"special",value:"consecutiveWorkouts",count:5}},{id:"consecutive-10",name:"Unstoppable",description:"Complete 10 consecutive workouts within an hour of each other",icon:"",tier:"gold",condition:{type:"special",value:"consecutiveWorkouts",count:10}},{id:"weekend-warrior",name:"Weekend Warrior",description:"Complete 10 weekend workouts",icon:"",tier:"silver",condition:{type:"special",value:"weekendWorkouts",count:10}},{id:"variety-seeker",name:"Variety Seeker",description:"Complete all workout types (Full Body, Upper, Lower, Push, Pull, Legs)",icon:"",tier:"gold",condition:{type:"special",value:"allWorkoutTypes"}},{id:"wellness-first",name:"Wellness Beginner",description:"Complete your first wellness task",icon:"",tier:"bronze",condition:{type:"wellnessTaskCount",value:1}},{id:"wellness-10",name:"Wellness Explorer",description:"Complete 10 wellness tasks",icon:"",tier:"bronze",condition:{type:"wellnessTaskCount",value:10}},{id:"wellness-25",name:"Wellness Enthusiast",description:"Complete 25 wellness tasks",icon:"",tier:"silver",condition:{type:"wellnessTaskCount",value:25}},{id:"wellness-50",name:"Wellness Champion",description:"Complete 50 wellness tasks",icon:"",tier:"gold",condition:{type:"wellnessTaskCount",value:50}},{id:"wellness-100",name:"Wellness Master",description:"Complete 100 wellness tasks",icon:"",tier:"platinum",condition:{type:"wellnessTaskCount",value:100}},{id:"strength-10",name:"Iron Starter",description:"Complete 10 strength workouts",icon:"",tier:"bronze",condition:{type:"strengthWorkoutCount",value:10}},{id:"strength-50",name:"Iron Regular",description:"Complete 50 strength workouts",icon:"",tier:"silver",condition:{type:"strengthWorkoutCount",value:50}},{id:"strength-100",name:"Iron Warrior",description:"Complete 100 strength workouts",icon:"",tier:"gold",condition:{type:"strengthWorkoutCount",value:100}},{id:"strength-250",name:"Iron Master",description:"Complete 250 strength workouts",icon:"",tier:"platinum",condition:{type:"strengthWorkoutCount",value:250}},{id:"cardio-10",name:"Cardio Starter",description:"Complete 10 cardio workouts",icon:"",tier:"bronze",condition:{type:"cardioWorkoutCount",value:10}},{id:"cardio-50",name:"Cardio Enthusiast",description:"Complete 50 cardio workouts",icon:"",tier:"silver",condition:{type:"cardioWorkoutCount",value:50}},{id:"cardio-100",name:"Cardio Champion",description:"Complete 100 cardio workouts",icon:"",tier:"gold",condition:{type:"cardioWorkoutCount",value:100}},{id:"cardio-250",name:"Cardio Legend",description:"Complete 250 cardio workouts",icon:"",tier:"platinum",condition:{type:"cardioWorkoutCount",value:250}},{id:"yoga-10",name:"Flexibility Starter",description:"Complete 10 yoga or stretching workouts",icon:"",tier:"bronze",condition:{type:"yogaWorkoutCount",value:10}},{id:"yoga-50",name:"Flexibility Enthusiast",description:"Complete 50 yoga or stretching workouts",icon:"",tier:"silver",condition:{type:"yogaWorkoutCount",value:50}},{id:"yoga-100",name:"Flexibility Master",description:"Complete 100 yoga or stretching workouts",icon:"",tier:"gold",condition:{type:"yogaWorkoutCount",value:100}},{id:"yoga-250",name:"Zen Master",description:"Complete 250 yoga or stretching workouts",icon:"",tier:"platinum",condition:{type:"yogaWorkoutCount",value:250}},{id:"strength-week-1",name:"Strong Week",description:"Complete 3+ strength workouts in a single week",icon:"",tier:"bronze",condition:{type:"strengthWeekStreak",value:1}},{id:"strength-week-3",name:"Strength Streak",description:"Complete 3+ strength workouts per week for 3 consecutive weeks",icon:"",tier:"silver",condition:{type:"strengthWeekStreak",value:3}},{id:"strength-week-5",name:"Strength Warrior",description:"Complete 3+ strength workouts per week for 5 consecutive weeks",icon:"",tier:"gold",condition:{type:"strengthWeekStreak",value:5}},{id:"strength-week-10",name:"Strength Legend",description:"Complete 3+ strength workouts per week for 10 consecutive weeks",icon:"",tier:"platinum",condition:{type:"strengthWeekStreak",value:10}}],Kh={bronze:{color:"#CD7F32",gradient:"linear-gradient(135deg, #CD7F32 0%, #B87333 100%)",textColor:"#fff"},silver:{color:"#C0C0C0",gradient:"linear-gradient(135deg, #C0C0C0 0%, #A8A8A8 100%)",textColor:"#333"},gold:{color:"#FFD700",gradient:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",textColor:"#333"},platinum:{color:"#E5E4E2",gradient:"linear-gradient(135deg, #E5E4E2 0%, #B0B0B0 100%)",textColor:"#333"}},W7=["full","upper","lower","push","pull","legs","core","strength"],_7=["cardio","hiit"],z7=["yoga","stretch","mobility","flexibility"],xD=e=>e?W7.includes(e.toLowerCase()):!1,N7=e=>e?_7.includes(e.toLowerCase()):!1,L7=e=>e?z7.includes(e.toLowerCase()):!1,T0=e=>!e||!Array.isArray(e)?0:e.filter(t=>xD(t.type)).length,k0=e=>!e||!Array.isArray(e)?0:e.filter(t=>N7(t.type)).length,E0=e=>!e||!Array.isArray(e)?0:e.filter(t=>L7(t.type)).length,F7=e=>{const t=new Date(e),n=t.getDay(),i=n===0?6:n-1;return t.setDate(t.getDate()-i),t.setHours(0,0,0,0),t},D0=e=>{if(!e||!Array.isArray(e)||e.length===0)return 0;const t=e.filter(d=>xD(d.type));if(t.length===0)return 0;const n=new Map;t.forEach(d=>{const f=new Date(d.date),g=F7(f).toISOString();n.set(g,(n.get(g)||0)+1)});const i=Array.from(n.entries()).filter(([,d])=>d>=3).map(([d])=>new Date(d)).sort((d,f)=>f-d);if(i.length===0)return 0;let o=1;const c=10080*60*1e3;for(let d=0;d<i.length-1;d++){const f=i[d].getTime(),h=i[d+1].getTime();if(f-h===c)o++;else break}return o},Ru=(e,t,n=[])=>{const{condition:i}=e;switch(i.type){case"workoutCount":return(t.totalWorkouts||0)>=i.value;case"streak":return(t.currentStreak||0)>=i.value;case"prCount":return(t.totalPRs||0)>=i.value;case"totalVolume":return(t.totalVolume||0)>=i.value;case"totalTime":return(t.totalTime||0)>=i.value;case"wellnessTaskCount":return(t.completedWellnessTasks||0)>=i.value;case"strengthWorkoutCount":return T0(n)>=i.value;case"cardioWorkoutCount":return k0(n)>=i.value;case"yogaWorkoutCount":return E0(n)>=i.value;case"strengthWeekStreak":return D0(n)>=i.value;case"special":return B7(i,t,n);default:return!1}},B7=(e,t,n)=>{switch(e.value){case"earlyMorning":return n.some(i=>new Date(i.date).getHours()<7);case"morningWorkouts":return n.filter(o=>{const c=new Date(o.date).getHours();return c>=7&&c<12}).length>=(e.count||10);case"afternoonWorkouts":return n.filter(o=>{const c=new Date(o.date).getHours();return c>=12&&c<17}).length>=(e.count||10);case"eveningWorkouts":return n.filter(o=>{const c=new Date(o.date).getHours();return c>=17&&c<22}).length>=(e.count||10);case"lateNight":return n.some(i=>new Date(i.date).getHours()>=22);case"consecutiveWorkouts":{const i=[...n].sort((d,f)=>new Date(d.date)-new Date(f.date));let o=0,c=1;for(let d=1;d<i.length;d++){const f=new Date(i[d-1].date);(new Date(i[d].date)-f)/(1e3*60*60)<=1?(c++,o=Math.max(o,c)):c=1}return o>=(e.count||3)}case"weekendWorkouts":return n.filter(o=>{const c=new Date(o.date).getDay();return c===0||c===6}).length>=(e.count||10);case"allWorkoutTypes":{const i=["full","upper","lower","push","pull","legs"],o=new Set(n.map(c=>c.type?.toLowerCase()).filter(Boolean));return i.every(c=>o.has(c))}default:return!1}},Uf=(e,t,n=[])=>{const o=[...e].sort((h,g)=>h.condition.value-g.condition.value).find(h=>!Ru(h,t,n));if(!o)return null;const{condition:c}=o;let d=0;switch(c.type){case"workoutCount":d=t.totalWorkouts||0;break;case"streak":d=t.currentStreak||0;break;case"prCount":d=t.totalPRs||0;break;case"totalVolume":d=t.totalVolume||0;break;case"totalTime":d=t.totalTime||0;break;case"strengthWorkoutCount":d=T0(n);break;case"cardioWorkoutCount":d=k0(n);break;case"yogaWorkoutCount":d=E0(n);break;case"strengthWeekStreak":d=D0(n);break;default:d=0}const f=Math.min(d/c.value*100,100);return{achievement:o,current:d,target:c.value,progress:f}},V7=(e,t=[])=>Es.filter(n=>Ru(n,e,t)),H7=(e,t,n=[])=>{const i=V7(e,t),o=Math.max(0,(t?.length||0)-1),c=t?.slice(1)||[],d=T0(c),f=k0(c),h=E0(c),g=D0(c);return i.filter(m=>{if(n.includes(m.id))return!1;if(m.condition.type==="workoutCount"){const b=m.condition.value;if(o>=b)return!1}if(m.condition.type==="strengthWorkoutCount"){const b=m.condition.value;if(d>=b)return!1}if(m.condition.type==="cardioWorkoutCount"){const b=m.condition.value;if(f>=b)return!1}if(m.condition.type==="yogaWorkoutCount"){const b=m.condition.value;if(h>=b)return!1}if(m.condition.type==="strengthWeekStreak"){const b=m.condition.value;if(g>=b)return!1}return!0})},U7=e=>{const t={bronze:10,silver:25,gold:50,platinum:100};return e.reduce((n,i)=>n+(t[i.tier]||0),0)},$7=e=>{const n=Math.floor(e/100)+1,i=e%100,o=100-i;return{level:n,currentPoints:i,pointsToNext:o,totalPoints:e}},yD=({achievement:e,unlocked:t,onClick:n})=>{const i=Kh[e.tier];return r.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:r.jsx(Ge,{onClick:n,sx:{height:"100%",cursor:"pointer",position:"relative",background:t?i.gradient:"linear-gradient(135deg, #424242 0%, #303030 100%)",color:t?i.textColor:"#888",transition:"opacity 0.15s ease","&:hover":{opacity:.9},"&:active":{opacity:.8}},children:r.jsxs(at,{sx:{textAlign:"center",p:2},children:[!t&&r.jsx(A,{sx:{position:"absolute",top:8,right:8,color:"rgba(255, 255, 255, 0.5)"},children:r.jsx(PC,{fontSize:"small"})}),r.jsx(M,{variant:"h2",sx:{fontSize:"3rem",mb:1,filter:t?"none":"grayscale(100%)",opacity:t?1:.4},children:e.icon}),r.jsx(M,{variant:"subtitle1",sx:{fontWeight:700,mb:.5,fontSize:"0.95rem"},children:e.name}),r.jsx(Ne,{label:e.tier.toUpperCase(),size:"small",sx:{fontSize:"0.65rem",height:20,fontWeight:600,bgcolor:t?"rgba(255, 255, 255, 0.3)":"rgba(255, 255, 255, 0.1)"}})]})})})};yD.propTypes={achievement:T.object.isRequired,unlocked:T.bool.isRequired,onClick:T.func.isRequired};const bD=({achievement:e,unlocked:t,onClose:n,onShare:i})=>{if(!e)return null;const o=Kh[e.tier];return r.jsxs(Et,{open:!!e,onClose:n,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3}},children:[r.jsx(zt,{sx:{textAlign:"center",pb:1},children:r.jsx(Ie,{onClick:n,sx:{position:"absolute",right:8,top:8},children:r.jsx(Yr,{})})}),r.jsxs(Dt,{sx:{textAlign:"center",pt:0},children:[r.jsx(A,{sx:{width:120,height:120,borderRadius:"50%",background:t?o.gradient:"linear-gradient(135deg, #424242 0%, #303030 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",filter:t?"none":"grayscale(100%)",opacity:t?1:.6},children:r.jsx(M,{variant:"h1",sx:{fontSize:"4rem"},children:e.icon})}),!t&&r.jsx(Ne,{icon:r.jsx(PC,{}),label:"LOCKED",color:"default",sx:{mb:2}}),t&&r.jsx(Ne,{icon:r.jsx(Ul,{}),label:"UNLOCKED",color:"success",sx:{mb:2}}),r.jsx(M,{variant:"h5",sx:{fontWeight:700,mb:1},children:e.name}),r.jsx(Ne,{label:e.tier.toUpperCase(),size:"small",sx:{mb:2,fontWeight:600,background:o.gradient,color:o.textColor}}),r.jsx(M,{variant:"body1",color:"text.secondary",sx:{mb:2},children:e.description}),r.jsx(A,{sx:{p:2,borderRadius:2,bgcolor:"action.hover"},children:r.jsx(M,{variant:"body2",color:"text.secondary",children:q7(e.condition)})})]}),r.jsxs(Nt,{sx:{justifyContent:"center",pb:3,px:3},children:[t&&i&&r.jsx(Ce,{variant:"contained",startIcon:r.jsx(OC,{}),onClick:()=>i(e),fullWidth:!0,children:"Share Achievement"}),!t&&r.jsx(Ce,{variant:"outlined",onClick:n,fullWidth:!0,children:"Close"})]})]})};bD.propTypes={achievement:T.object,unlocked:T.bool,onClose:T.func.isRequired,onShare:T.func};const hu=({title:e,icon:t,progressInfo:n})=>{if(!n)return r.jsx(Ge,{sx:{height:"100%"},children:r.jsx(at,{children:r.jsxs(Le,{spacing:1,children:[r.jsxs(Le,{direction:"row",alignItems:"center",spacing:1,children:[t,r.jsx(M,{variant:"h6",sx:{fontWeight:600,fontSize:"1rem"},children:e})]}),r.jsx(M,{variant:"body2",color:"text.secondary",children:"All achievements unlocked! "})]})})});const{achievement:i,current:o,target:c,progress:d}=n;return r.jsx(Ge,{sx:{height:"100%"},children:r.jsx(at,{children:r.jsxs(Le,{spacing:2,children:[r.jsxs(Le,{direction:"row",alignItems:"center",spacing:1,children:[t,r.jsx(M,{variant:"h6",sx:{fontWeight:600,fontSize:"1rem"},children:e})]}),r.jsxs(A,{children:[r.jsxs(Le,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:1},children:[r.jsx(M,{variant:"body2",sx:{fontWeight:600},children:i.name}),r.jsxs(M,{variant:"body2",color:"text.secondary",children:[iC(o,i.condition.type)," / ",iC(c,i.condition.type)]})]}),r.jsx(ur,{variant:"determinate",value:d,sx:{height:8,borderRadius:4,bgcolor:"action.hover","& .MuiLinearProgress-bar":{background:Kh[i.tier].gradient,borderRadius:4}}}),r.jsxs(M,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:[Math.round(d),"% complete"]})]})]})})})};hu.propTypes={title:T.string.isRequired,icon:T.element.isRequired,progressInfo:T.object};const vD=({userStats:e,workoutHistory:t=[]})=>{const[n,i]=y.useState(null),[o,c]=y.useState(!1),[d,f]=y.useState(0),h=Es.filter(P=>Ru(P,e,t)),g=U7(h),m=$7(g),b={workout:Es.filter(P=>P.condition.type==="workoutCount"),streak:Es.filter(P=>P.condition.type==="streak"),pr:Es.filter(P=>P.condition.type==="prCount"),volume:Es.filter(P=>P.condition.type==="totalVolume"),time:Es.filter(P=>P.condition.type==="totalTime"),special:Es.filter(P=>P.condition.type==="special"),strength:Es.filter(P=>P.condition.type==="strengthWorkoutCount"),cardio:Es.filter(P=>P.condition.type==="cardioWorkoutCount"),yoga:Es.filter(P=>P.condition.type==="yogaWorkoutCount"),strengthStreak:Es.filter(P=>P.condition.type==="strengthWeekStreak"),wellness:Es.filter(P=>P.condition.type==="wellnessTaskCount")},v=[{label:"All",key:"all"},{label:"Workouts",key:"workout"},{label:"Strength",key:"strength"},{label:"Cardio",key:"cardio"},{label:"Yoga",key:"yoga"},{label:"Streaks",key:"streak"},{label:"Strength Streaks",key:"strengthStreak"},{label:"PRs",key:"pr"},{label:"Volume",key:"volume"},{label:"Time",key:"time"},{label:"Wellness",key:"wellness"},{label:"Special",key:"special"}],j=v[d].key,E=j==="all"?Es:b[j],S=Uf(b.workout,e,t),w=Uf(b.streak,e,t),C=Uf(b.pr,e,t),k=Uf(b.volume,e,t),R=P=>{i(P),c(Ru(P,e,t))},O=async P=>{const W=`I just unlocked the "${P.name}" achievement in GoodLift! ${P.icon}

${P.description}`;if(navigator.share)try{await navigator.share({title:"GoodLift Achievement",text:W})}catch(L){L.name!=="AbortError"&&(console.error("Error sharing:",L),I(W))}else I(W)},I=P=>{navigator.clipboard.writeText(P).then(()=>{alert("Achievement text copied to clipboard!")})};return r.jsxs(A,{sx:{p:{xs:1,sm:2,md:3}},children:[r.jsxs(A,{sx:{mb:4,textAlign:"center"},children:[r.jsx(M,{variant:"h4",sx:{fontWeight:700,mb:1},children:"Achievements"}),r.jsxs(Le,{direction:"row",spacing:2,justifyContent:"center",alignItems:"center",sx:{mb:2},children:[r.jsx(Ne,{icon:r.jsx(Ul,{}),label:`Level ${m.level}`,color:"primary",sx:{fontSize:"1rem",fontWeight:600,height:36}}),r.jsx(Ne,{label:`${h.length} / ${Es.length} Unlocked`,variant:"outlined",sx:{fontSize:"0.9rem",height:36}})]}),r.jsxs(A,{sx:{maxWidth:400,margin:"0 auto"},children:[r.jsxs(Le,{direction:"row",justifyContent:"space-between",sx:{mb:1},children:[r.jsxs(M,{variant:"caption",color:"text.secondary",children:[m.currentPoints," / 100 points"]}),r.jsxs(M,{variant:"caption",color:"text.secondary",children:[m.pointsToNext," to Level ",m.level+1]})]}),r.jsx(ur,{variant:"determinate",value:m.currentPoints/100*100,sx:{height:10,borderRadius:5,bgcolor:"action.hover","& .MuiLinearProgress-bar":{borderRadius:5}}})]})]}),r.jsxs(Kt,{container:!0,spacing:{xs:1,sm:2},sx:{mb:4},children:[r.jsx(Kt,{item:!0,xs:6,sm:6,md:3,children:r.jsx(hu,{title:"Workouts",icon:r.jsx(Nn,{color:"primary"}),progressInfo:S})}),r.jsx(Kt,{item:!0,xs:6,sm:6,md:3,children:r.jsx(hu,{title:"Streak",icon:r.jsx(_g,{sx:{color:"#FF6B35"}}),progressInfo:w})}),r.jsx(Kt,{item:!0,xs:6,sm:6,md:3,children:r.jsx(hu,{title:"Personal Records",icon:r.jsx(qr,{color:"success"}),progressInfo:C})}),r.jsx(Kt,{item:!0,xs:6,sm:6,md:3,children:r.jsx(hu,{title:"Volume",icon:r.jsx(Ul,{sx:{color:"#FFD700"}}),progressInfo:k})})]}),r.jsx(A,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:r.jsx(Wa,{value:d,onChange:(P,W)=>f(W),variant:"scrollable",scrollButtons:"auto",children:v.map(P=>r.jsx(ws,{label:P.label},P.key))})}),r.jsx(Kt,{container:!0,spacing:{xs:1,sm:2},children:E.map(P=>{const W=Ru(P,e,t);return r.jsx(Kt,{item:!0,xs:6,sm:4,md:3,lg:2,children:r.jsx(yD,{achievement:P,unlocked:W,onClick:()=>R(P)})},P.id)})}),r.jsx(bD,{achievement:n,unlocked:o,onClose:()=>i(null),onShare:O})]})};vD.propTypes={userStats:T.shape({totalWorkouts:T.number,currentStreak:T.number,totalPRs:T.number,totalVolume:T.number,totalTime:T.number}).isRequired,workoutHistory:T.array};const q7=e=>{switch(e.type){case"workoutCount":return`Complete ${e.value} workout${e.value!==1?"s":""}`;case"streak":return`Maintain a ${e.value}-day workout streak`;case"prCount":return`Achieve ${e.value} personal record${e.value!==1?"s":""}`;case"totalVolume":return`Lift ${e.value.toLocaleString()} lbs total volume`;case"totalTime":{const t=Math.floor(e.value/3600);return`Complete ${t} hour${t!==1?"s":""} of total workout time`}case"strengthWorkoutCount":return`Complete ${e.value} strength workout${e.value!==1?"s":""}`;case"cardioWorkoutCount":return`Complete ${e.value} cardio workout${e.value!==1?"s":""}`;case"yogaWorkoutCount":return`Complete ${e.value} yoga or stretching workout${e.value!==1?"s":""}`;case"strengthWeekStreak":return`Complete 3+ strength workouts per week for ${e.value} consecutive week${e.value!==1?"s":""}`;case"wellnessTaskCount":return`Complete ${e.value} wellness task${e.value!==1?"s":""}`;case"special":return e.value;default:return""}},iC=(e,t)=>{switch(t){case"totalVolume":return`${e.toLocaleString()} lbs`;case"totalTime":{const n=Math.floor(e/3600),i=Math.floor(e%3600/60);return n>0?`${n}h ${i}m`:`${i}m`}default:return e}};var aC=(function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e)return(e.deviceXDPI||1)/(e.logicalXDPI||1)}return 1})(),Pu={toTextLines:function(e){var t=[],n;for(e=[].concat(e);e.length;)n=e.pop(),typeof n=="string"?t.unshift.apply(t,n.split(`
`)):Array.isArray(n)?e.push.apply(e,n):xu(e)||t.unshift(""+n);return t},textSize:function(e,t,n){var i=[].concat(t),o=i.length,c=e.font,d=0,f;for(e.font=n.string,f=0;f<o;++f)d=Math.max(e.measureText(i[f]).width,d);return e.font=c,{height:o*n.lineHeight,width:d}},bound:function(e,t,n){return Math.max(e,Math.min(t,n))},arrayDiff:function(e,t){var n=e.slice(),i=[],o,c,d,f;for(o=0,d=t.length;o<d;++o)f=t[o],c=n.indexOf(f),c===-1?i.push([f,1]):n.splice(c,1);for(o=0,d=n.length;o<d;++o)i.push([n[o],-1]);return i},rasterize:function(e){return Math.round(e*aC)/aC}};function Pg(e,t){var n=t.x,i=t.y;if(n===null)return{x:0,y:-1};if(i===null)return{x:1,y:0};var o=e.x-n,c=e.y-i,d=Math.sqrt(o*o+c*c);return{x:d?o/d:0,y:d?c/d:-1}}function Y7(e,t,n,i,o){switch(o){case"center":n=i=0;break;case"bottom":n=0,i=1;break;case"right":n=1,i=0;break;case"left":n=-1,i=0;break;case"top":n=0,i=-1;break;case"start":n=-n,i=-i;break;case"end":break;default:o*=Math.PI/180,n=Math.cos(o),i=Math.sin(o);break}return{x:e,y:t,vx:n,vy:i}}var G7=0,SD=1,wD=2,jD=4,CD=8;function $f(e,t,n){var i=G7;return e<n.left?i|=SD:e>n.right&&(i|=wD),t<n.top?i|=CD:t>n.bottom&&(i|=jD),i}function Q7(e,t){for(var n=e.x0,i=e.y0,o=e.x1,c=e.y1,d=$f(n,i,t),f=$f(o,c,t),h,g,m;!(!(d|f)||d&f);)h=d||f,h&CD?(g=n+(o-n)*(t.top-i)/(c-i),m=t.top):h&jD?(g=n+(o-n)*(t.bottom-i)/(c-i),m=t.bottom):h&wD?(m=i+(c-i)*(t.right-n)/(o-n),g=t.right):h&SD&&(m=i+(c-i)*(t.left-n)/(o-n),g=t.left),h===d?(n=g,i=m,d=$f(n,i,t)):(o=g,c=m,f=$f(o,c,t));return{x0:n,x1:o,y0:i,y1:c}}function qf(e,t){var n=t.anchor,i=e,o,c;return t.clamp&&(i=Q7(i,t.area)),n==="start"?(o=i.x0,c=i.y0):n==="end"?(o=i.x1,c=i.y1):(o=(i.x0+i.x1)/2,c=(i.y0+i.y1)/2),Y7(o,c,e.vx,e.vy,t.align)}var Yf={arc:function(e,t){var n=(e.startAngle+e.endAngle)/2,i=Math.cos(n),o=Math.sin(n),c=e.innerRadius,d=e.outerRadius;return qf({x0:e.x+i*c,y0:e.y+o*c,x1:e.x+i*d,y1:e.y+o*d,vx:i,vy:o},t)},point:function(e,t){var n=Pg(e,t.origin),i=n.x*e.options.radius,o=n.y*e.options.radius;return qf({x0:e.x-i,y0:e.y-o,x1:e.x+i,y1:e.y+o,vx:n.x,vy:n.y},t)},bar:function(e,t){var n=Pg(e,t.origin),i=e.x,o=e.y,c=0,d=0;return e.horizontal?(i=Math.min(e.x,e.base),c=Math.abs(e.base-e.x)):(o=Math.min(e.y,e.base),d=Math.abs(e.base-e.y)),qf({x0:i,y0:o+d,x1:i+c,y1:o,vx:n.x,vy:n.y},t)},fallback:function(e,t){var n=Pg(e,t.origin);return qf({x0:e.x,y0:e.y,x1:e.x+(e.width||0),y1:e.y+(e.height||0),vx:n.x,vy:n.y},t)}},Li=Pu.rasterize;function K7(e){var t=e.borderWidth||0,n=e.padding,i=e.size.height,o=e.size.width,c=-o/2,d=-i/2;return{frame:{x:c-n.left-t,y:d-n.top-t,w:o+n.width+t*2,h:i+n.height+t*2},text:{x:c,y:d,w:o,h:i}}}function X7(e,t){var n=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!n)return null;if(n.xCenter!==void 0&&n.yCenter!==void 0)return{x:n.xCenter,y:n.yCenter};var i=n.getBasePixel();return e.horizontal?{x:i,y:null}:{x:null,y:i}}function Z7(e){return e instanceof LP?Yf.arc:e instanceof BC?Yf.point:e instanceof FP?Yf.bar:Yf.fallback}function J7(e,t,n,i,o,c){var d=Math.PI/2;if(c){var f=Math.min(c,o/2,i/2),h=t+f,g=n+f,m=t+i-f,b=n+o-f;e.moveTo(t,g),h<m&&g<b?(e.arc(h,g,f,-Math.PI,-d),e.arc(m,g,f,-d,0),e.arc(m,b,f,0,d),e.arc(h,b,f,d,Math.PI)):h<m?(e.moveTo(h,n),e.arc(m,g,f,-d,d),e.arc(h,g,f,d,Math.PI+d)):g<b?(e.arc(h,g,f,-Math.PI,0),e.arc(h,b,f,0,Math.PI)):e.arc(h,g,f,-Math.PI,Math.PI),e.closePath(),e.moveTo(t,n)}else e.rect(t,n,i,o)}function e$(e,t,n){var i=n.backgroundColor,o=n.borderColor,c=n.borderWidth;!i&&(!o||!c)||(e.beginPath(),J7(e,Li(t.x)+c/2,Li(t.y)+c/2,Li(t.w)-c,Li(t.h)-c,n.borderRadius),e.closePath(),i&&(e.fillStyle=i,e.fill()),o&&c&&(e.strokeStyle=o,e.lineWidth=c,e.lineJoin="miter",e.stroke()))}function t$(e,t,n){var i=n.lineHeight,o=e.w,c=e.x,d=e.y+i/2;return t==="center"?c+=o/2:(t==="end"||t==="right")&&(c+=o),{h:i,w:o,x:c,y:d}}function n$(e,t,n){var i=e.shadowBlur,o=n.stroked,c=Li(n.x),d=Li(n.y),f=Li(n.w);o&&e.strokeText(t,c,d,f),n.filled&&(i&&o&&(e.shadowBlur=0),e.fillText(t,c,d,f),i&&o&&(e.shadowBlur=i))}function s$(e,t,n,i){var o=i.textAlign,c=i.color,d=!!c,f=i.font,h=t.length,g=i.textStrokeColor,m=i.textStrokeWidth,b=g&&m,v;if(!(!h||!d&&!b))for(n=t$(n,o,f),e.font=f.string,e.textAlign=o,e.textBaseline="middle",e.shadowBlur=i.textShadowBlur,e.shadowColor=i.textShadowColor,d&&(e.fillStyle=c),b&&(e.lineJoin="round",e.lineWidth=m,e.strokeStyle=g),v=0,h=t.length;v<h;++v)n$(e,t[v],{stroked:b,filled:d,w:n.w,x:n.x,y:n.y+n.h*v})}var TD=function(e,t,n,i){var o=this;o._config=e,o._index=i,o._model=null,o._rects=null,o._ctx=t,o._el=n};Lu(TD.prototype,{_modelize:function(e,t,n,i){var o=this,c=o._index,d=_P(ts([n.font,{}],i,c)),f=ts([n.color,zP.color],i,c);return{align:ts([n.align,"center"],i,c),anchor:ts([n.anchor,"center"],i,c),area:i.chart.chartArea,backgroundColor:ts([n.backgroundColor,null],i,c),borderColor:ts([n.borderColor,null],i,c),borderRadius:ts([n.borderRadius,0],i,c),borderWidth:ts([n.borderWidth,0],i,c),clamp:ts([n.clamp,!1],i,c),clip:ts([n.clip,!1],i,c),color:f,display:e,font:d,lines:t,offset:ts([n.offset,4],i,c),opacity:ts([n.opacity,1],i,c),origin:X7(o._el,i),padding:NP(ts([n.padding,4],i,c)),positioner:Z7(o._el),rotation:ts([n.rotation,0],i,c)*(Math.PI/180),size:Pu.textSize(o._ctx,t,d),textAlign:ts([n.textAlign,"start"],i,c),textShadowBlur:ts([n.textShadowBlur,0],i,c),textShadowColor:ts([n.textShadowColor,f],i,c),textStrokeColor:ts([n.textStrokeColor,f],i,c),textStrokeWidth:ts([n.textStrokeWidth,0],i,c)}},update:function(e){var t=this,n=null,i=null,o=t._index,c=t._config,d,f,h,g=ts([c.display,!0],e,o);g&&(d=e.dataset.data[o],f=WP(FC(c.formatter,[d,e]),d),h=xu(f)?[]:Pu.toTextLines(f),h.length&&(n=t._modelize(g,h,c,e),i=K7(n))),t._model=n,t._rects=i},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(e,t){var n=this,i=e.ctx,o=n._model,c=n._rects,d;this.visible()&&(i.save(),o.clip&&(d=o.area,i.beginPath(),i.rect(d.left,d.top,d.right-d.left,d.bottom-d.top),i.clip()),i.globalAlpha=Pu.bound(0,o.opacity,1),i.translate(Li(t.x),Li(t.y)),i.rotate(o.rotation),e$(i,c.frame,o),s$(i,o.lines,c.text,o),i.restore())}});var r$=Number.MIN_SAFE_INTEGER||-9007199254740991,i$=Number.MAX_SAFE_INTEGER||9007199254740991;function lu(e,t,n){var i=Math.cos(n),o=Math.sin(n),c=t.x,d=t.y;return{x:c+i*(e.x-c)-o*(e.y-d),y:d+o*(e.x-c)+i*(e.y-d)}}function oC(e,t){var n=i$,i=r$,o=t.origin,c,d,f,h,g;for(c=0;c<e.length;++c)d=e[c],f=d.x-o.x,h=d.y-o.y,g=t.vx*f+t.vy*h,n=Math.min(n,g),i=Math.max(i,g);return{min:n,max:i}}function Gf(e,t){var n=t.x-e.x,i=t.y-e.y,o=Math.sqrt(n*n+i*i);return{vx:(t.x-e.x)/o,vy:(t.y-e.y)/o,origin:e,ln:o}}var kD=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};Lu(kD.prototype,{center:function(){var e=this._rect;return{x:e.x+e.w/2,y:e.y+e.h/2}},update:function(e,t,n){this._rotation=n,this._rect={x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}},contains:function(e){var t=this,n=1,i=t._rect;return e=lu(e,t.center(),-t._rotation),!(e.x<i.x-n||e.y<i.y-n||e.x>i.x+i.w+n*2||e.y>i.y+i.h+n*2)},intersects:function(e){var t=this._points(),n=e._points(),i=[Gf(t[0],t[1]),Gf(t[0],t[3])],o,c,d;for(this._rotation!==e._rotation&&i.push(Gf(n[0],n[1]),Gf(n[0],n[3])),o=0;o<i.length;++o)if(c=oC(t,i[o]),d=oC(n,i[o]),c.max<d.min||d.max<c.min)return!1;return!0},_points:function(){var e=this,t=e._rect,n=e._rotation,i=e.center();return[lu({x:t.x,y:t.y},i,n),lu({x:t.x+t.w,y:t.y},i,n),lu({x:t.x+t.w,y:t.y+t.h},i,n),lu({x:t.x,y:t.y+t.h},i,n)]}});function ED(e,t,n){var i=t.positioner(e,t),o=i.vx,c=i.vy;if(!o&&!c)return{x:i.x,y:i.y};var d=n.w,f=n.h,h=t.rotation,g=Math.abs(d/2*Math.cos(h))+Math.abs(f/2*Math.sin(h)),m=Math.abs(d/2*Math.sin(h))+Math.abs(f/2*Math.cos(h)),b=1/Math.max(Math.abs(o),Math.abs(c));return g*=o*b,m*=c*b,g+=t.offset*o,m+=t.offset*c,{x:i.x+g,y:i.y+m}}function a$(e,t){var n,i,o,c;for(n=e.length-1;n>=0;--n)for(o=e[n].$layout,i=n-1;i>=0&&o._visible;--i)c=e[i].$layout,c._visible&&o._box.intersects(c._box)&&t(o,c);return e}function o$(e){var t,n,i,o,c,d,f;for(t=0,n=e.length;t<n;++t)i=e[t],o=i.$layout,o._visible&&(f=new Proxy(i._el,{get:(h,g)=>h.getProps([g],!0)[g]}),c=i.geometry(),d=ED(f,i.model(),c),o._box.update(d,c,i.rotation()));return a$(e,function(h,g){var m=h._hidable,b=g._hidable;m&&b||b?g._visible=!1:m&&(h._visible=!1)})}var Ou={prepare:function(e){var t=[],n,i,o,c,d;for(n=0,o=e.length;n<o;++n)for(i=0,c=e[n].length;i<c;++i)d=e[n][i],t.push(d),d.$layout={_box:new kD,_hidable:!1,_visible:!0,_set:n,_idx:d._index};return t.sort(function(f,h){var g=f.$layout,m=h.$layout;return g._idx===m._idx?m._set-g._set:m._idx-g._idx}),this.update(t),t},update:function(e){var t=!1,n,i,o,c,d;for(n=0,i=e.length;n<i;++n)o=e[n],c=o.model(),d=o.$layout,d._hidable=c&&c.display==="auto",d._visible=o.visible(),t|=d._hidable;t&&o$(e)},lookup:function(e,t){var n,i;for(n=e.length-1;n>=0;--n)if(i=e[n].$layout,i&&i._visible&&i._box.contains(t))return e[n];return null},draw:function(e,t){var n,i,o,c,d,f;for(n=0,i=t.length;n<i;++n)o=t[n],c=o.$layout,c._visible&&(d=o.geometry(),f=ED(o._el,o.model(),d),c._box.update(f,d,o.rotation()),o.draw(e,f))}},l$=function(e){if(xu(e))return null;var t=e,n,i,o;if(OP(e))if(!xu(e.label))t=e.label;else if(!xu(e.r))t=e.r;else for(t="",n=Object.keys(e),o=0,i=n.length;o<i;++o)t+=(o!==0?", ":"")+n[o]+": "+e[n[o]];return""+t},c$={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:l$,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},Vs="$datalabels",DD="$default";function u$(e,t){var n=e.datalabels,i={},o=[],c,d;return n===!1?null:(n===!0&&(n={}),t=Lu({},[t,n]),c=t.labels||{},d=Object.keys(c),delete t.labels,d.length?d.forEach(function(f){c[f]&&o.push(Lu({},[t,c[f],{_key:f}]))}):o.push(t),i=o.reduce(function(f,h){return IP(h.listeners||{},function(g,m){f[m]=f[m]||{},f[m][h._key||DD]=g}),delete h.listeners,f},{}),{labels:o,listeners:i})}function Tx(e,t,n,i){if(t){var o=n.$context,c=n.$groups,d;t[c._set]&&(d=t[c._set][c._key],d&&FC(d,[o,i])===!0&&(e[Vs]._dirty=!0,n.update(o)))}}function d$(e,t,n,i,o){var c,d;!n&&!i||(n?i?n!==i&&(d=c=!0):d=!0:c=!0,d&&Tx(e,t.leave,n,o),c&&Tx(e,t.enter,i,o))}function f$(e,t){var n=e[Vs],i=n._listeners,o,c;if(!(!i.enter&&!i.leave)){if(t.type==="mousemove")c=Ou.lookup(n._labels,t);else if(t.type!=="mouseout")return;o=n._hovered,n._hovered=c,d$(e,i,o,c,t)}}function h$(e,t){var n=e[Vs],i=n._listeners.click,o=i&&Ou.lookup(n._labels,t);o&&Tx(e,i,o,t)}var p$={id:"datalabels",defaults:c$,beforeInit:function(e){e[Vs]={_actives:[]}},beforeUpdate:function(e){var t=e[Vs];t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(e,t,n){var i=t.index,o=e[Vs],c=o._datasets[i]=[],d=e.isDatasetVisible(i),f=e.data.datasets[i],h=u$(f,n),g=t.meta.data||[],m=e.ctx,b,v,j,E,S,w,C,k;for(m.save(),b=0,j=g.length;b<j;++b)if(C=g[b],C[Vs]=[],d&&C&&e.getDataVisibility(b)&&!C.skip)for(v=0,E=h.labels.length;v<E;++v)S=h.labels[v],w=S._key,k=new TD(S,m,C,b),k.$groups={_set:i,_key:w||DD},k.$context={active:!1,chart:e,dataIndex:b,dataset:f,datasetIndex:i},k.update(k.$context),C[Vs].push(k),c.push(k);m.restore(),Lu(o._listeners,h.listeners,{merger:function(R,O,I){O[R]=O[R]||{},O[R][t.index]=I[R],o._listened=!0}})},afterUpdate:function(e){e[Vs]._labels=Ou.prepare(e[Vs]._datasets)},afterDatasetsDraw:function(e){Ou.draw(e,e[Vs]._labels)},beforeEvent:function(e,t){if(e[Vs]._listened){var n=t.event;switch(n.type){case"mousemove":case"mouseout":f$(e,n);break;case"click":h$(e,n);break}}},afterEvent:function(e){var t=e[Vs],n=t._actives,i=t._actives=e.getActiveElements(),o=Pu.arrayDiff(n,i),c,d,f,h,g,m,b;for(c=0,d=o.length;c<d;++c)if(g=o[c],g[1])for(b=g[0].element[Vs]||[],f=0,h=b.length;f<h;++f)m=b[f],m.$context.active=g[1]===1,m.update(m.$context);(t._dirty||o.length)&&(Ou.update(t._labels),e.render()),delete t._dirty}};const m$=e=>{if(!e||e.length===0)return 100;const t=Math.max(...e.filter(i=>typeof i=="number"&&!isNaN(i)));if(t<=0||!isFinite(t))return 100;const n=t+50;return Math.ceil(n/50)*50},MD=(e,t,n=.9)=>{if(typeof e!="number"||typeof t!="number")return"top";const i=t*n;return e>=i?"bottom":"top"},g$=(e,t,n=.9)=>MD(e,t,n)==="bottom"?"start":"end";BP.register(VP,HP,BC,UP,$P,qP,YP,GP,p$);const AD=({weightHistory:e,currentWeight:t,currentUnit:n,targetWeight:i,onAddWeight:o})=>{const[c,d]=y.useState(""),[f,h]=y.useState(n||"lbs"),[g,m]=y.useState(null),[b,v]=y.useState(!1);y.useEffect(()=>{h(n||"lbs")},[n]);const j=()=>{m(null);const P=A7(c,f);if(!P.valid){m(P.error);return}o(parseFloat(c),f),d(""),v(!1)},E=M7(e,30),S=P7(e,f),w=R7(e,30,f),C=w.data.length>0?m$(w.data):100;let k;if(i&&w.data.length>0){const P=Math.min(...w.data);k=Math.min(i,P)-5}const R={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:P=>`${P.parsed.y} ${f}`}},datalabels:{display:!0,color:"rgb(25, 118, 210)",font:{size:10,weight:"bold"},align:P=>{const W=P.dataset.data[P.dataIndex];return MD(W,C)},anchor:P=>{const W=P.dataset.data[P.dataIndex];return g$(W,C)},offset:4,formatter:P=>P>0?`${P}`:""}},scales:{y:{beginAtZero:!1,min:k,max:C,ticks:{callback:P=>`${P} ${f}`}}}},O={labels:w.labels,datasets:[{label:"Weight",data:w.data,borderColor:"rgb(25, 118, 210)",backgroundColor:"rgba(25, 118, 210, 0.1)",fill:!0,tension:.4}]},I=()=>E.direction==="up"?r.jsx(qr,{color:"warning"}):E.direction==="down"?r.jsx(_x,{color:"success"}):r.jsx(qR,{color:"info"});return r.jsx(Ge,{sx:{borderRadius:2},children:r.jsxs(at,{children:[r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[r.jsx(M,{variant:"h6",fontWeight:600,children:"Weight Tracking"}),r.jsx(Ie,{color:"primary",onClick:()=>v(!b),size:"small",children:r.jsx($n,{})})]}),t&&r.jsxs(A,{sx:{mb:3},children:[r.jsx(M,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Current Weight"}),r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:2},children:[r.jsx(M,{variant:"h4",fontWeight:700,children:Hf(t,f)}),E.direction!=="stable"&&r.jsx(Ne,{icon:I(),label:`${E.change>0?"+":""}${E.change} ${f}`,size:"small",color:E.direction==="up"?"warning":"success"})]}),r.jsx(M,{variant:"caption",color:"text.secondary",children:E.direction!=="stable"?`${Math.abs(E.percentage)}% ${E.direction==="up"?"increase":"decrease"} in last 30 days`:"No significant change in last 30 days"})]}),b&&r.jsxs(A,{sx:{mb:3,p:2,bgcolor:"action.hover",borderRadius:2},children:[r.jsx(M,{variant:"body2",fontWeight:600,gutterBottom:!0,children:"Add Weight Entry"}),g&&r.jsx(kt,{severity:"error",sx:{mb:2},children:g}),r.jsxs(Le,{direction:"row",spacing:2,alignItems:"flex-start",children:[r.jsx(Je,{label:"Weight",type:"number",value:c===""?"":c,onChange:P=>{d(P.target.value),m(null)},size:"small",sx:{flex:1},inputProps:{step:.1,min:0}}),r.jsxs(Xt,{size:"small",sx:{minWidth:80},children:[r.jsx(En,{children:"Unit"}),r.jsxs(cn,{value:f,onChange:P=>h(P.target.value),label:"Unit",children:[r.jsx(Be,{value:"lbs",children:"lbs"}),r.jsx(Be,{value:"kg",children:"kg"})]})]}),r.jsx(Ce,{variant:"contained",onClick:j,disabled:!c,size:"small",sx:{minWidth:80},children:"Add"})]})]}),w.data.length>0?r.jsxs(A,{sx:{height:250,mb:2},children:[r.jsx(M,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Last 30 Days"}),r.jsx(QP,{data:O,options:R})]}):r.jsx(kt,{severity:"info",sx:{mb:2},children:"No weight history yet. Add your first weight entry to start tracking!"}),S.entries>0&&r.jsxs(A,{sx:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:2,pt:2,borderTop:1,borderColor:"divider"},children:[r.jsxs(A,{children:[r.jsx(M,{variant:"caption",color:"text.secondary",children:"Minimum"}),r.jsx(M,{variant:"body2",fontWeight:600,children:Hf(S.min,f)})]}),r.jsxs(A,{children:[r.jsx(M,{variant:"caption",color:"text.secondary",children:"Average"}),r.jsx(M,{variant:"body2",fontWeight:600,children:Hf(S.average,f)})]}),r.jsxs(A,{children:[r.jsx(M,{variant:"caption",color:"text.secondary",children:"Maximum"}),r.jsx(M,{variant:"body2",fontWeight:600,children:Hf(S.max,f)})]})]})]})})};AD.propTypes={weightHistory:T.arrayOf(T.shape({weight:T.number.isRequired,unit:T.string.isRequired,date:T.string.isRequired})).isRequired,currentWeight:T.number,currentUnit:T.string,targetWeight:T.number,onAddWeight:T.func.isRequired};const lC=["running","cycling","swimming","general"],RD=({workoutHistory:e=[],onDayClick:t})=>{const n=Ia(),i=cr(n.breakpoints.down("sm")),[o,c]=y.useState(new Date),d=()=>{const S=fT(o),w=dT(o),C=Qr(S),k=pT(w),R=[];let O=C;for(;O<=k;)R.push(O),O=cd(O,1);return R},f=S=>e.filter(w=>{const C=new Date(w.date);return Vg(C,S)}),h=S=>{if(!S)return!1;const w=S.toLowerCase();return["upper","lower","full","push","pull","legs","strength","hypertrophy"].includes(w)},g=S=>{if(!S||S.length===0)return null;if(S.length===1){const k=S[0];return k.type?.toLowerCase()||k.workoutType?.toLowerCase()||"strength"}const w=S.find(k=>{const R=k.type?.toLowerCase()||k.workoutType?.toLowerCase();return h(R)});if(w)return w.type?.toLowerCase()||w.workoutType?.toLowerCase()||"strength";const C=S.reduce((k,R)=>{const O=R.duration||0,I=k.duration||0;return O>I?R:k},S[0]);return C.type?.toLowerCase()||C.workoutType?.toLowerCase()||"strength"},m=S=>{if(!S)return"X";const w=S.toLowerCase();return lC.includes(w)?"C":{upper:"UP",lower:"LO",full:"FL",push:"PS",pull:"PL",legs:"LG",yoga:"Y",hiit:"H",cardio:"C"}[w]||"X"},b=S=>{if(!S)return"primary.main";const w=S.toLowerCase();return w==="cardio"||w==="hiit"||lC.includes(w)?"error.main":w==="stretch"||w==="active_recovery"||w==="yoga"||w==="mobility"?"secondary.main":w==="rest"?"action.disabled":"primary.main"},v=d(),j=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],E=new Date;return r.jsx(Ge,{sx:{borderRadius:3,overflow:"hidden"},children:r.jsxs(at,{sx:{p:{xs:2,sm:3},width:"100%",maxWidth:"100%",boxSizing:"border-box"},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[r.jsx(Ie,{onClick:()=>c(dW(o)),size:i?"small":"medium",children:r.jsx(sh,{})}),r.jsx(M,{variant:"h6",sx:{fontWeight:600,fontSize:{xs:"1.1rem",sm:"1.25rem"}},children:Ug(o,"MMMM yyyy")}),r.jsx(Ie,{onClick:()=>c(Oh(o,1)),size:i?"small":"medium",children:r.jsx(ii,{})})]}),r.jsx(A,{sx:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:{xs:.25,sm:.5},mb:.5},children:j.map(S=>r.jsx(A,{sx:{textAlign:"center",py:{xs:.5,sm:1},fontWeight:700,color:"text.primary",fontSize:{xs:"0.7rem",sm:"0.875rem"},opacity:.8},children:i?S.charAt(0):S},S))}),r.jsx(A,{sx:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:0,border:1,borderColor:"divider",borderRadius:1,overflow:"hidden"},children:v.map((S,w)=>{const C=CT(S,o),k=Vg(S,E),R=f(S),O=R.length>0,I=g(R),P=O&&h(I),W=Math.ceil(v.length/7),L=Math.floor(w/7)===W-1,z=Math.floor(w/7)===0,q=w%7===0,B=w%7===6,U=z&&q,re=z&&B,H=L&&q,$=L&&B,N=ci(n.palette.primary.main,.12),V=ci(n.palette.primary.main,.18),F=ci(n.palette.primary.main,.2),X=ci(n.palette.primary.main,.28),oe=()=>P?n.palette.mode==="dark"?V:N:k?"action.selected":"transparent",ue=()=>U?"4px 0 0 0":re?"0 4px 0 0":H?"0 0 0 4px":$?"0 0 4px 0":0;return r.jsxs(A,{onClick:()=>O&&t?.(S,R[0]),sx:{aspectRatio:"1",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:ue(),cursor:O?"pointer":"default",bgcolor:oe(),opacity:C?1:.3,borderRight:1,borderBottom:L?0:1,borderColor:"divider",...k&&{outline:"2px solid",outlineColor:"primary.main",outlineOffset:-2,zIndex:1},transition:"all 0.2s ease",minHeight:{xs:40,sm:52},maxHeight:{xs:44,sm:60},position:"relative",padding:{xs:"3px 2px",sm:"6px 4px"},"&:hover":O?{bgcolor:P?n.palette.mode==="dark"?X:F:"action.hover",transform:"scale(1.02)",boxShadow:1,zIndex:2}:{},"&:nth-of-type(7n)":{borderRight:0}},children:[r.jsx(M,{variant:"body2",sx:{fontWeight:k?700:500,color:"text.primary",fontSize:{xs:"0.7rem",sm:"0.875rem"},position:"absolute",top:{xs:3,sm:6},left:"50%",transform:"translateX(-50%)"},children:Ug(S,"d")}),O&&r.jsx(M,{sx:{fontSize:{xs:"0.65rem",sm:"0.75rem"},fontWeight:900,color:b(I),lineHeight:1,textShadow:"0 1px 2px rgba(0,0,0,0.1)",marginTop:"auto",marginBottom:{xs:"1px",sm:"4px"},letterSpacing:"0.5px"},children:m(I)}),R.length>1&&r.jsx(YR,{sx:{position:"absolute",top:{xs:0,sm:1},right:{xs:0,sm:1},fontSize:{xs:"0.6rem",sm:"0.75rem"},color:"text.secondary",opacity:.7}})]},w)})}),r.jsxs(A,{sx:{display:"flex",gap:{xs:1,sm:2},mt:3,flexWrap:"nowrap",justifyContent:"center",overflowX:"auto"},children:[r.jsx(Ne,{label:"Strength",size:"small",sx:{bgcolor:"primary.light",fontSize:{xs:"0.7rem",sm:"0.8125rem"},height:{xs:24,sm:32}}}),r.jsx(Ne,{label:"Yoga",size:"small",sx:{bgcolor:"secondary.light",fontSize:{xs:"0.7rem",sm:"0.8125rem"},height:{xs:24,sm:32}}}),r.jsx(Ne,{label:"Cardio",size:"small",sx:{bgcolor:"error.light",fontSize:{xs:"0.7rem",sm:"0.8125rem"},height:{xs:24,sm:32}}}),r.jsx(Ne,{label:"Rest",size:"small",sx:{bgcolor:"action.disabledBackground",fontSize:{xs:"0.7rem",sm:"0.8125rem"},height:{xs:24,sm:32}}})]})]})})};RD.propTypes={workoutHistory:T.array,onDayClick:T.func};const M0=y.memo(({activities:e=[],onDelete:t,onEdit:n,maxVisible:i=10,showLoadMore:o=!0})=>{const[c,d]=y.useState(null),[f,h]=y.useState(i),g=S=>{d(c===S?null:S)},m=S=>({strength:r.jsx(Nn,{fontSize:"small"}),cardio:r.jsx(Ui,{fontSize:"small"}),hiit:r.jsx(Ui,{fontSize:"small"}),stretch:r.jsx(gi,{fontSize:"small"})})[S]||r.jsx(Nn,{fontSize:"small"}),b=S=>({strength:"primary",cardio:"info",hiit:"error",stretch:"warning"})[S]||"default",v=S=>S.charAt(0).toUpperCase()+S.slice(1),j=S=>{if(S.exercises){if(Array.isArray(S.exercises))return S.exercises.length;if(typeof S.exercises=="object")return Object.keys(S.exercises).length}return 0},E=e.slice(0,f);return e.length===0?r.jsx(Ge,{sx:{width:"100%",borderRadius:3},children:r.jsx(at,{children:r.jsx(M,{variant:"body2",color:"text.secondary",align:"center",children:"No activities yet. Start your first workout!"})})}):r.jsxs(A,{sx:{width:"100%"},children:[r.jsx(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:1,px:2,borderBottom:"1px solid",borderColor:"divider",mb:2},children:r.jsxs(A,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[r.jsx(M,{variant:"h6",sx:{fontSize:"1.1rem",fontWeight:700},children:"Activity Log"}),r.jsx(M,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.875rem"},children:"Your workout history"})]})}),r.jsx(wn,{sx:{p:0},children:E.map((S,w)=>{const C=c===w,k=j(S),R=S.type||"strength";return r.jsx(Ge,{sx:{mb:1,borderRadius:2,boxShadow:"0 2px 8px rgba(19, 70, 134, 0.06)",transition:"box-shadow 0.2s","&:hover":{boxShadow:"0 4px 16px rgba(19, 70, 134, 0.12)"}},children:r.jsxs(it,{sx:{display:"flex",flexDirection:"column",alignItems:"stretch",p:1.5,cursor:"pointer"},onClick:()=>g(w),children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1,flex:1},children:[r.jsx(A,{sx:{color:`${b(R)}.main`},children:m(R)}),r.jsxs(A,{sx:{flex:1},children:[r.jsxs(M,{variant:"body2",sx:{fontWeight:600,color:"text.primary"},children:[S.sessionName||v(R),S.isPartial&&r.jsx(Ne,{label:"Partial",size:"small",sx:{ml:1,height:"18px",fontSize:"0.7rem"}})]}),S.sessionName&&r.jsx(M,{variant:"caption",sx:{color:"text.secondary",fontSize:"0.65rem"},children:v(R)}),r.jsxs(Le,{direction:"row",spacing:1,sx:{mt:.5},children:[r.jsx(M,{variant:"caption",sx:{color:"text.secondary",fontSize:"0.7rem"},children:b7(S.date)}),r.jsx(M,{variant:"caption",sx:{color:"text.secondary",fontSize:"0.7rem"},children:""}),r.jsx(M,{variant:"caption",sx:{color:"text.secondary",fontSize:"0.7rem"},children:J2(S.duration)}),k>0&&r.jsxs(r.Fragment,{children:[r.jsx(M,{variant:"caption",sx:{color:"text.secondary",fontSize:"0.7rem"},children:""}),r.jsxs(M,{variant:"caption",sx:{color:"text.secondary",fontSize:"0.7rem"},children:[k," exercises"]})]})]})]})]}),r.jsx(Ie,{size:"small",onClick:O=>{O.stopPropagation(),g(w)},children:C?r.jsx(Nx,{}):r.jsx(sd,{})})]}),r.jsx(Nl,{in:C,timeout:"auto",unmountOnExit:!0,children:r.jsxs(A,{sx:{mt:2,pt:2,borderTop:"1px solid",borderColor:"divider"},children:[S.exercises&&typeof S.exercises=="object"&&r.jsxs(A,{sx:{mb:2},children:[r.jsx(M,{variant:"caption",sx:{fontWeight:600,color:"text.secondary"},children:"Exercises:"}),r.jsx(wn,{dense:!0,sx:{mt:.5},children:Object.entries(S.exercises).map(([O,I],P)=>r.jsxs(it,{sx:{py:.5,px:1,flexDirection:"column",alignItems:"flex-start"},children:[r.jsxs(M,{variant:"caption",sx:{color:"text.primary"},children:[O,": ",I.sets?.length||0," sets"]}),I.formNotes&&r.jsxs(M,{variant:"caption",sx:{color:"text.secondary",fontStyle:"italic",mt:.5},children:["Form: ",I.formNotes]})]},P))})]}),S.notes&&r.jsxs(A,{sx:{mb:2,p:1.5,bgcolor:"action.hover",borderRadius:1},children:[r.jsx(M,{variant:"caption",sx:{fontWeight:600,color:"text.secondary",display:"block",mb:.5},children:"Notes:"}),r.jsx(M,{variant:"caption",sx:{color:"text.primary"},children:S.notes})]}),r.jsxs(Le,{direction:"row",spacing:1,children:[n&&r.jsx(Ce,{size:"small",startIcon:r.jsx(Da,{}),onClick:O=>{O.stopPropagation(),n(w)},variant:"outlined",children:"Edit"}),t&&r.jsx(Ce,{size:"small",startIcon:r.jsx(jo,{}),onClick:O=>{O.stopPropagation(),t(w)},variant:"outlined",color:"error",children:"Delete"})]})]})})]})},w)})}),o&&f<e.length&&r.jsx(A,{sx:{display:"flex",justifyContent:"center",mt:2},children:r.jsxs(Ce,{variant:"outlined",onClick:()=>h(S=>S+i),children:["Load More (",e.length-f," remaining)"]})})]})});M0.displayName="ActivitiesList";M0.propTypes={activities:T.arrayOf(T.shape({date:T.string,type:T.string,duration:T.number,sessionName:T.string,exercises:T.oneOfType([T.array,T.object]),isPartial:T.bool})).isRequired,onDelete:T.func,onEdit:T.func,maxVisible:T.number,showLoadMore:T.bool};const Ls={STRENGTH:"strength",CARDIO:"cardio",YOGA:"yoga",REST:"rest"},Sa={FULL:"full",UPPER:"upper",PUSH:"push",PULL:"pull",LEGS:"legs",CORE:"core"},PD=({open:e,onClose:t,activity:n,onSave:i})=>{const[o,c]=y.useState({date:new Date,duration:"",notes:"",sessionName:"",sessionType:Ls.STRENGTH,workoutType:Sa.FULL,numExercises:"",setsPerExercise:""});y.useEffect(()=>{if(n&&e){const g=n.duration?Math.round(n.duration/60):"";c({date:new Date(n.date),duration:g,notes:n.notes||"",sessionName:n.sessionName||"",sessionType:n.sessionType||Ls.STRENGTH,workoutType:n.type||Sa.FULL,numExercises:n.numExercises||"",setsPerExercise:n.setsPerExercise||""})}},[n,e]);const d=(g,m)=>{c(b=>({...b,[g]:m}))},f=()=>{const g=o.duration?parseFloat(o.duration)*60:0,m={...n,date:o.date.getTime(),duration:g,notes:o.notes.trim(),sessionName:o.sessionName.trim(),sessionType:o.sessionType,type:o.sessionType===Ls.STRENGTH?o.workoutType:o.sessionType,numExercises:o.sessionType===Ls.STRENGTH&&parseInt(o.numExercises)||void 0,setsPerExercise:o.sessionType===Ls.STRENGTH&&parseInt(o.setsPerExercise)||void 0};i(m),t()},h=()=>!(!o.date||o.sessionType!==Ls.REST&&(!o.duration||parseFloat(o.duration)<=0)||o.sessionType===Ls.STRENGTH&&(!o.numExercises||parseInt(o.numExercises)<=0||!o.setsPerExercise||parseInt(o.setsPerExercise)<=0));return r.jsx(Hh,{dateAdapter:t0,children:r.jsxs(Et,{open:e,onClose:t,maxWidth:"sm",fullWidth:!0,children:[r.jsx(zt,{children:"Edit Activity"}),r.jsx(Dt,{children:r.jsxs(Le,{spacing:2,sx:{mt:1},children:[r.jsx(jh,{label:"Date",value:o.date,onChange:g=>d("date",g),slotProps:{textField:{fullWidth:!0}}}),r.jsxs(Xt,{fullWidth:!0,children:[r.jsx(En,{children:"Session Type"}),r.jsxs(cn,{value:o.sessionType,label:"Session Type",onChange:g=>d("sessionType",g.target.value),children:[r.jsx(Be,{value:Ls.STRENGTH,children:"Strength"}),r.jsx(Be,{value:Ls.CARDIO,children:"Cardio"}),r.jsx(Be,{value:Ls.YOGA,children:"Yoga"}),r.jsx(Be,{value:Ls.REST,children:"Rest Day"})]})]}),o.sessionType===Ls.STRENGTH&&r.jsxs(Xt,{fullWidth:!0,children:[r.jsx(En,{children:"Workout Type"}),r.jsxs(cn,{value:o.workoutType,label:"Workout Type",onChange:g=>d("workoutType",g.target.value),children:[r.jsx(Be,{value:Sa.FULL,children:"Full Body"}),r.jsx(Be,{value:Sa.UPPER,children:"Upper Body"}),r.jsx(Be,{value:Sa.PUSH,children:"Push"}),r.jsx(Be,{value:Sa.PULL,children:"Pull"}),r.jsx(Be,{value:Sa.LEGS,children:"Legs"}),r.jsx(Be,{value:Sa.CORE,children:"Core"})]})]}),o.sessionType!==Ls.REST&&r.jsx(Je,{fullWidth:!0,type:"number",label:"Duration (minutes)",placeholder:"e.g., 45",value:o.duration===""?"":o.duration,onChange:g=>d("duration",g.target.value),variant:"outlined",inputProps:{min:0,step:1}}),o.sessionType===Ls.STRENGTH&&r.jsxs(r.Fragment,{children:[r.jsx(Je,{fullWidth:!0,type:"number",label:"Number of Exercises",placeholder:"e.g., 6",value:o.numExercises===""?"":o.numExercises,onChange:g=>d("numExercises",g.target.value),variant:"outlined",inputProps:{min:1,step:1}}),r.jsx(Je,{fullWidth:!0,type:"number",label:"Sets per Exercise",placeholder:"e.g., 3",value:o.setsPerExercise===""?"":o.setsPerExercise,onChange:g=>d("setsPerExercise",g.target.value),variant:"outlined",inputProps:{min:1,step:1}})]}),r.jsx(Je,{fullWidth:!0,label:"Session Name (optional)",placeholder:"e.g., Morning workout, Leg day, etc.",value:o.sessionName,onChange:g=>d("sessionName",g.target.value),variant:"outlined"}),r.jsx(Je,{fullWidth:!0,multiline:!0,rows:4,label:"Notes (optional)",placeholder:"Add any notes about your session...",value:o.notes,onChange:g=>d("notes",g.target.value),variant:"outlined"})]})}),r.jsxs(Nt,{children:[r.jsx(Ce,{onClick:t,children:"Cancel"}),r.jsx(Ce,{onClick:f,variant:"contained",disabled:!h(),children:"Save"})]})]})})};PD.propTypes={open:T.bool.isRequired,onClose:T.func.isRequired,activity:T.object,onSave:T.func.isRequired};const OD=y.memo(({currentStreak:e=0,longestStreak:t=0})=>{const n=mD(e),i=n.length>0?n[n.length-1]:null,[o,c]=y.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsx(Ge,{sx:{borderRadius:3,boxShadow:"0 4px 16px rgba(19, 70, 134, 0.08)",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:r.jsx(at,{sx:{p:2.5},children:r.jsxs(Le,{spacing:2,children:[r.jsxs(A,{sx:{textAlign:"center"},children:[r.jsx(A,{sx:{fontSize:"3rem",mb:1},children:""}),r.jsx(M,{variant:"h3",sx:{fontWeight:700,mb:.5},children:e}),r.jsxs(A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:.5},children:[r.jsx(M,{variant:"body2",sx:{opacity:.9},children:"Day Streak"}),r.jsx(Ie,{size:"small",onClick:()=>c(!0),sx:{color:"white",opacity:.9,"&:hover":{opacity:1,bgcolor:"rgba(255, 255, 255, 0.1)"}},children:r.jsx(Hl,{fontSize:"small"})})]})]}),n.length>0&&r.jsxs(A,{children:[r.jsx(M,{variant:"caption",sx:{opacity:.8,display:"block",textAlign:"center",mb:1},children:"Milestones Achieved"}),r.jsx(Le,{direction:"row",spacing:1,sx:{justifyContent:"center",flexWrap:"wrap",gap:1},children:n.map((d,f)=>r.jsx(ar,{title:d.description,children:r.jsx(Ne,{label:`${d.days} days`,size:"small",sx:{bgcolor:"rgba(255, 255, 255, 0.2)",color:"white",fontWeight:600,"&:hover":{bgcolor:"rgba(255, 255, 255, 0.3)"}},icon:r.jsx(A,{component:"span",sx:{fontSize:"1rem",ml:.5},children:d.badge.split(" ")[0]})})},f))})]}),i&&r.jsx(A,{sx:{p:1.5,borderRadius:2,bgcolor:"rgba(255, 255, 255, 0.15)",textAlign:"center"},children:r.jsx(M,{variant:"body2",sx:{opacity:.9},children:i.badge})}),t>e&&r.jsx(A,{sx:{textAlign:"center",pt:1,borderTop:"1px solid rgba(255, 255, 255, 0.2)"},children:r.jsxs(M,{variant:"caption",sx:{opacity:.8},children:["Personal Best: ",t," days"]})})]})})}),r.jsxs(Et,{open:o,onClose:()=>c(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3}},children:[r.jsx(zt,{children:r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(GR,{color:"warning"}),r.jsx(M,{variant:"h6",sx:{fontWeight:600},children:"How Streaks Work"})]})}),r.jsx(Dt,{children:r.jsxs(Le,{spacing:2,children:[r.jsxs(M,{variant:"body1",children:["Your streak counts ",r.jsx("strong",{children:"consecutive days"})," with at least one workout session."]}),r.jsxs(A,{children:[r.jsx(M,{variant:"subtitle2",sx:{fontWeight:600,mb:.5},children:" Crossing Week Boundaries"}),r.jsx(M,{variant:"body2",color:"text.secondary",children:"Streaks continue seamlessly from Saturday to Sunday. Each day with a session adds 1 day to your streak, regardless of which week it falls in."})]}),r.jsxs(A,{children:[r.jsx(M,{variant:"subtitle2",sx:{fontWeight:600,mb:.5},children:" Strength Training Requirement"}),r.jsx(M,{variant:"body2",color:"text.secondary",children:'For a streak to stay "alive," each week (Sunday-Saturday) that contains streak days must have at least 1 strength training session.'})]}),r.jsxs(A,{children:[r.jsx(M,{variant:"subtitle2",sx:{fontWeight:600,mb:.5},children:" What Counts as Strength Training?"}),r.jsx(M,{variant:"body2",color:"text.secondary",children:"Full body, upper/lower body, push/pull/legs workouts, and any workout with resistance exercises."})]}),r.jsxs(A,{children:[r.jsx(M,{variant:"subtitle2",sx:{fontWeight:600,mb:.5},children:" When Streaks Break"}),r.jsxs(M,{variant:"body2",color:"text.secondary",children:[" Missing a day (no workout session)",r.jsx("br",{})," A week in your streak has no strength training sessions",r.jsx("br",{})," Last workout was more than 1 day ago"]})]}),r.jsxs(A,{children:[r.jsx(M,{variant:"subtitle2",sx:{fontWeight:600,mb:.5},children:" Example"}),r.jsx(M,{variant:"body2",color:"text.secondary",children:"If you work out Saturday (strength)  Sunday (cardio)  Monday (strength)  Tuesday (cardio)  Wednesday (strength)  Thursday (cardio), that's a 6-day streak!"})]})]})}),r.jsx(Nt,{sx:{px:3,pb:2},children:r.jsx(Ce,{onClick:()=>c(!1),variant:"contained",fullWidth:!0,children:"Got it!"})})]})]})});OD.displayName="StreakDisplay";OD.propTypes={currentStreak:T.number,longestStreak:T.number};const ID=y.memo(({adherence:e=0,completedWorkouts:t=0,plannedWorkouts:n=0})=>{const i=()=>e>=80?"success.main":e>=60?"warning.main":"error.main",o=()=>e>=80?"Excellent! ":e>=60?"Good progress! ":"Keep going! ";return r.jsx(Ge,{sx:{borderRadius:3,boxShadow:"0 4px 16px rgba(19, 70, 134, 0.08)"},children:r.jsx(at,{sx:{p:2.5},children:r.jsxs(Le,{spacing:2,children:[r.jsxs(Le,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(Bl,{sx:{color:i()}}),r.jsx(M,{variant:"h6",sx:{fontWeight:600},children:"Adherence"})]}),r.jsxs(M,{variant:"h4",sx:{fontWeight:700,color:i()},children:[e,"%"]})]}),r.jsx(A,{children:r.jsx(ur,{variant:"determinate",value:e,sx:{height:12,borderRadius:6,bgcolor:"action.hover","& .MuiLinearProgress-bar":{bgcolor:i(),borderRadius:6}}})}),r.jsxs(Le,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(M,{variant:"body2",color:"text.secondary",children:[t," of ",n," workouts completed"]}),r.jsx(M,{variant:"body2",sx:{fontWeight:600,color:i()},children:o()})]})]})})})});ID.displayName="AdherenceDisplay";ID.propTypes={adherence:T.number,completedWorkouts:T.number,plannedWorkouts:T.number};const WD=y.memo(({totalVolume:e=0,volumeChange:t=0})=>{const n=t>=0;return r.jsx(Ge,{sx:{borderRadius:3,boxShadow:"0 4px 16px rgba(19, 70, 134, 0.08)"},children:r.jsx(at,{sx:{p:2.5},children:r.jsxs(Le,{spacing:2,children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(qr,{sx:{color:"primary.main"}}),r.jsx(M,{variant:"h6",sx:{fontWeight:600},children:"Total Volume"})]}),r.jsxs(A,{children:[r.jsx(M,{variant:"h3",sx:{fontWeight:700,color:"primary.main"},children:e.toLocaleString()}),r.jsx(M,{variant:"body2",color:"text.secondary",children:"lbs lifted (last 30 days)"})]}),t!==0&&r.jsxs(A,{sx:{p:1.5,borderRadius:2,bgcolor:n?"success.light":"error.light",display:"flex",alignItems:"center",justifyContent:"center",gap:.5},children:[r.jsxs(M,{variant:"body2",sx:{fontWeight:600,color:n?"success.dark":"error.dark"},children:[n?"":""," ",Math.abs(t),"%"]}),r.jsx(M,{variant:"caption",sx:{color:n?"success.dark":"error.dark"},children:"vs. previous 30 days"})]})]})})})});WD.displayName="VolumeTrendDisplay";WD.propTypes={totalVolume:T.number,volumeChange:T.number};const kx=e=>{const t=new Date(e);t.setHours(0,0,0,0);const i=t.getDay();return t.setDate(t.getDate()-i),t},x$=e=>{const t=kx(e),n=new Date(t);return n.setDate(n.getDate()+6),n.setHours(23,59,59,999),n},cC=(e,t)=>{const n=e.toLocaleDateString("en-US",{month:"short"}),i=e.getDate(),o=t.toLocaleDateString("en-US",{month:"short"}),c=t.getDate(),d=t.getFullYear();return n===o?`${n} ${i} - ${c}, ${d}`:`${n} ${i} - ${o} ${c}, ${d}`},y$=(e,t,n,i)=>{const o=e.filter(f=>{const h=new Date(f.date);return h>=n&&h<=i}),c=ay(),d={};return c.forEach(f=>{d[f]={primary:0,secondary:0}}),o.forEach(f=>{f.exercises&&Object.entries(f.exercises).forEach(([h,g])=>{if(!g.sets||g.sets.length===0)return;const m=g.sets.length,b=t[h];if(!b)return;const v=b["Primary Muscle"]||"",j=b["Secondary Muscles"]||"",E=hh(v);d[E]&&(d[E].primary+=m),MW(j).forEach(w=>{w!==E&&d[w]&&(d[w].secondary+=m)})})}),d},_D=({workoutHistory:e=[]})=>{const[t,n]=y.useState({}),[i,o]=y.useState(!0),[c,d]=y.useState(0);y.useEffect(()=>{(async()=>{try{const O=await(await fetch(Oo)).json(),I={};O.forEach(P=>{I[P["Exercise Name"]]=P}),n(I)}catch(R){console.error("Error loading exercises database:",R)}finally{o(!1)}})()},[]);const{weekStart:f,weekEnd:h,isCurrentWeek:g}=y.useMemo(()=>{const R=kx(new Date),O=new Date(R);O.setDate(O.getDate()+c*7);const I=kx(O),P=x$(O);return{weekStart:I,weekEnd:P,isCurrentWeek:c===0}},[c]),m=y.useMemo(()=>y$(e,t,f,h),[e,t,f,h]),v=ay().map(k=>[k,m[k]]).filter(([,k])=>k&&(k.primary>0||k.secondary>0)),j=Math.max(...Object.values(m).map(k=>k.primary),1),E=Math.max(...Object.values(m).map(k=>k.secondary),1),S=y.useMemo(()=>{if(e.length===0)return!1;const k=e.reduce((R,O)=>{const I=new Date(O.date);return!R||I<R?I:R},null);return k&&k<f},[e,f]),w=()=>{d(k=>k-1)},C=()=>{c<0&&d(k=>k+1)};return i?r.jsx(Ge,{sx:{bgcolor:"background.paper"},children:r.jsxs(at,{sx:{p:2},children:[r.jsxs(M,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[r.jsx(Nn,{})," Muscle Volume Tracker"]}),r.jsx(M,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:1},children:"Loading..."})]})}):v.length===0?r.jsx(Ge,{sx:{bgcolor:"background.paper"},children:r.jsxs(at,{sx:{p:2},children:[r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[r.jsxs(M,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(Nn,{})," Muscle Volume Tracker"]}),r.jsxs(A,{sx:{display:"flex",gap:.5},children:[r.jsx(Ie,{size:"small",onClick:w,disabled:!S,children:r.jsx(sh,{})}),r.jsx(Ie,{size:"small",onClick:C,disabled:g,children:r.jsx(ii,{})})]})]}),r.jsx(M,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:cC(f,h)}),r.jsx(M,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:1},children:"No workout data for this week. Start logging workouts to see your muscle volume breakdown!"})]})}):r.jsx(Ge,{sx:{bgcolor:"background.paper"},children:r.jsx(at,{sx:{p:2},children:r.jsxs(Le,{spacing:1.5,children:[r.jsxs(A,{children:[r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs(M,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(Nn,{})," Muscle Volume Tracker"]}),r.jsxs(A,{sx:{display:"flex",gap:.5},children:[r.jsx(Ie,{size:"small",onClick:w,disabled:!S,children:r.jsx(sh,{})}),r.jsx(Ie,{size:"small",onClick:C,disabled:g,children:r.jsx(ii,{})})]})]}),r.jsx(M,{variant:"caption",color:"text.secondary",children:cC(f,h)})]}),r.jsx(Le,{spacing:1,children:v.map(([k,R])=>{const O=R.primary+R.secondary,I=j>0?R.primary/j*100:0,P=E>0?R.secondary/E*100:0;return r.jsx(A,{sx:{p:1.5,borderRadius:1,border:"1px solid",borderColor:"divider",bgcolor:"background.default"},children:r.jsxs(Le,{direction:"row",spacing:2,alignItems:"center",children:[r.jsx(M,{variant:"body2",sx:{fontWeight:600,minWidth:90},children:k}),r.jsx(A,{sx:{flex:1},children:r.jsxs(Le,{spacing:.5,children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(M,{variant:"caption",color:"text.secondary",sx:{minWidth:28},children:"Pri"}),r.jsx(ur,{variant:"determinate",value:I,sx:{flex:1,height:6,borderRadius:3,bgcolor:"action.hover","& .MuiLinearProgress-bar":{borderRadius:3,background:"linear-gradient(90deg, #2196F3 0%, #21CBF3 100%)"}}}),r.jsx(M,{variant:"caption",sx:{fontWeight:600,color:"primary.main",minWidth:30,textAlign:"right"},children:R.primary})]}),r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(M,{variant:"caption",color:"text.secondary",sx:{minWidth:28},children:"Sec"}),r.jsx(ur,{variant:"determinate",value:P,sx:{flex:1,height:6,borderRadius:3,bgcolor:"action.hover","& .MuiLinearProgress-bar":{borderRadius:3,background:"linear-gradient(90deg, #9C27B0 0%, #E91E63 100%)"}}}),r.jsx(M,{variant:"caption",sx:{fontWeight:600,color:"secondary.main",minWidth:30,textAlign:"right"},children:R.secondary})]})]})}),r.jsx(M,{variant:"body2",sx:{fontWeight:700,minWidth:45,textAlign:"right"},children:O})]})},k)})})]})})})};_D.propTypes={workoutHistory:T.arrayOf(T.object)};const zD=y.createContext({}),A0=()=>y.useContext(zD),Cl={displayName:"",email:"",avatar:null,currentWeight:null,targetWeight:null,weightHistory:[],bio:"",goals:"",memberSince:null,weightUnit:"lbs"},ND=({children:e})=>{const{currentUser:t,isGuest:n}=Ao(),[i,o]=y.useState(Cl),[c,d]=y.useState({totalWorkouts:0,currentStreak:0,longestStreak:0,favoriteExercise:"",totalVolume:0,totalPRs:0,completedWellnessTasks:0}),[f,h]=y.useState(!0),g=y.useCallback(async()=>{try{const[C,k,R,O]=await Promise.all([Kr(),ld(),Ah(),Rh()]),I=[...C,...k,...R,...O],P=I.length,W=j0(I),L=W.currentStreak,z=W.longestStreak,q={};C.forEach(V=>{V.exercises&&Object.keys(V.exercises).forEach(F=>{q[F]=(q[F]||0)+1})});const B=Object.entries(q).sort((V,F)=>F[1]-V[1])[0]?.[0]||"";let U=0;C.forEach(V=>{V.exercises&&Object.values(V.exercises).forEach(F=>{F.sets?.forEach(X=>{X.weight&&X.reps&&(U+=X.weight*X.reps)})})});const re=localStorage.getItem("goodlift_total_prs")?parseInt(localStorage.getItem("goodlift_total_prs")):0,H=t?.uid?`wellness_completed_${t.uid}`:"wellness_completed_guest",$=localStorage.getItem(H),N=$?JSON.parse($).length:0;return{totalWorkouts:P,currentStreak:L,longestStreak:z,favoriteExercise:B,totalVolume:U,totalPRs:re,completedWellnessTasks:N}}catch(C){return console.error("Error calculating stats:",C),{totalWorkouts:0,currentStreak:0,longestStreak:0,favoriteExercise:"",totalVolume:0,totalPRs:0,completedWellnessTasks:0}}},[t]);y.useEffect(()=>{t!==void 0&&(async()=>{h(!0);try{if(t&&!n){const k=await Rs(t.uid);if(k?.profile)o({...Cl,...k.profile,email:t.email});else{const R={...Cl,displayName:t.displayName||"",email:t.email,memberSince:new Date().toISOString()};o(R),await Zt(t.uid,{profile:R})}if(k?.stats)d(k.stats);else{const R=await g();d(R)}}else{const k=localStorage.getItem("goodlift_user_profile");o(k?{...Cl,...JSON.parse(k)}:{...Cl,displayName:"Guest User",memberSince:new Date().toISOString()});const R=await g();d(R)}}catch(k){console.error("Error loading profile:",k),o(Cl)}finally{h(!1)}})()},[t,n,g]);const m=y.useCallback(async C=>{try{o(C),t&&!n?await Zt(t.uid,{profile:C}):localStorage.setItem("goodlift_user_profile",JSON.stringify(C))}catch(k){throw console.error("Error saving profile:",k),k}},[t,n]),b=y.useCallback((C,k)=>{const R={...i,[C]:k};return m(R)},[i,m]),v=y.useCallback(async(C,k="lbs")=>{const R={weight:C,unit:k,date:new Date().toISOString()},O=[...i.weightHistory,R],I={...i,currentWeight:C,weightUnit:k,weightHistory:O};await m(I)},[i,m]),j=y.useCallback(()=>{if(!i.displayName)return"?";const C=i.displayName.trim().split(" ");return C.length===1?C[0].charAt(0).toUpperCase():(C[0].charAt(0)+C[C.length-1].charAt(0)).toUpperCase()},[i.displayName]),E=y.useCallback(()=>{let C=0,k=7;return i.displayName&&C++,i.avatar&&C++,i.currentWeight&&C++,i.bio&&C++,i.goals&&C++,i.weightHistory.length>0&&C++,i.email&&C++,Math.round(C/k*100)},[i]),S=y.useCallback(async()=>{const C=await g();d(C),t&&!n&&await Zt(t.uid,{stats:C})},[g,t,n]),w={profile:i,stats:c,loading:f,saveProfile:m,updateProfile:b,addWeightEntry:v,getInitials:j,getProfileCompletion:E,refreshStats:S};return r.jsx(zD.Provider,{value:w,children:e})};ND.propTypes={children:T.node.isRequired};const LD=()=>{const[e,t]=y.useState(!0),[n,i]=y.useState([]),[o,c]=y.useState([]),[d,f]=y.useState([]),[h,g]=y.useState(!1),[m,b]=y.useState(""),[v,j]=y.useState(0),[E,S]=y.useState(!1),[w,C]=y.useState(!1),k=cr(`(min-width: ${Xl.desktop}px)`),[R,O]=y.useState("all"),[I,P]=y.useState(null),[W,L]=y.useState(null),{profile:z,addWeightEntry:q}=A0(),[B,U]=y.useState({currentStreak:0,longestStreak:0}),[re,H]=y.useState(0),[$,N]=y.useState({}),[V,F]=y.useState({personalRecords:0,totalWorkouts:0,averageDuration:0,strengthSessions:0,cardioSessions:0,yogaSessions:0}),[X,oe]=y.useState(!1),[ue,Te]=y.useState(!1),[De,ee]=y.useState(null),[G,ae]=y.useState({open:!1,message:"",severity:"success"}),ve=()=>{switch(R){case"7days":return 7;case"30days":return 30;case"3months":return 90;case"year":return 365;case"custom":return null;case"all":return null;default:return null}},te=()=>{const Z=ve();if(R==="custom"&&I&&W){const ke=new Date(I);ke.setHours(0,0,0,0);const me=new Date(W);return me.setHours(23,59,59,999),n.filter(we=>{const J=new Date(we.date);return J>=ke&&J<=me})}if(!Z)return n;const be=new Date;return be.setDate(be.getDate()-Z),be.setHours(0,0,0,0),n.filter(ke=>{const me=new Date(ke.date);return me.setHours(0,0,0,0),me>=be})},ye=Z=>{let be=0,ke=0,me=0,we=0,J=0;const ge={};Z.forEach(Re=>{Re.type==="rest"||Re.sessionType==="rest"?we++:Re.type==="cardio"||Re.type==="hiit"||Re.cardioType?ke++:Re.type==="yoga"||Re.type==="stretch"||Re.type==="mobility"||Re.yogaType?me++:(Re.type==="strength"||Re.type==="full"||Re.type==="upper"||Re.type==="lower"||Re.type==="push"||Re.type==="pull"||Re.type==="legs"||Re.exercises&&Object.keys(Re.exercises).length>0)&&be++;const Fe=Re.duration||0;J+=Fe,Re.exercises&&Object.entries(Re.exercises).forEach(([Qe,He])=>{!He.sets||He.sets.length===0||He.sets.forEach(Ze=>{const et=Ze.weight||0,xt=Ze.reps||0;et===0&&xt===0||(!ge[Qe]||et>ge[Qe].weight)&&(ge[Qe]={weight:et,reps:xt,date:Re.date})})})});const We=Z.length-we,_e=We>0?Math.round(J/We):0;return{personalRecords:Object.keys(ge).length,totalWorkouts:We,averageDuration:_e,strengthSessions:be,cardioSessions:ke,yogaSessions:me}},Se=async()=>{t(!0);try{const[Z,be,ke,me,we]=await Promise.all([Kr(),ld(),Ah(),Rh(),od()]),J=[...Z,...be,...ke,...me];i(J),N(we);const ge=j0(J);U(ge);const We=fD(J,null,30);H(We);const _e=await mo.syncPinnedExercisesWithHistory(Z);c(_e);try{const Qe=(await(await fetch(Oo)).json()).map(He=>He["Exercise Name"]).sort();f(Qe)}catch(Re){console.error("Error loading exercises:",Re);const Fe=mo.getUniqueExercises(Z);f(Fe)}}catch(Z){console.error("Error loading progress data:",Z)}finally{t(!1)}};y.useEffect(()=>{Se()},[]),y.useEffect(()=>{if(n.length>0||R||I||W){const Z=te(),be=ye(Z);F(be)}},[n,R,I,W]);const Y=async Z=>{await mo.removePinnedExercise(Z),c(o.filter(be=>be.exerciseName!==Z))},ce=async Z=>{await mo.addPinnedExercise(Z,"weight")&&(c([...o,{exerciseName:Z,trackingMode:"weight"}]),g(!1),b(""))},Ae=Z=>{ee(Z),oe(!0)},ne=Z=>{ee(Z),Te(!0)},de=async()=>{try{await vO(De),ae({open:!0,message:"Activity deleted successfully",severity:"success"}),Te(!1),ee(null),await Se()}catch(Z){console.error("Error deleting activity:",Z),ae({open:!0,message:"Failed to delete activity",severity:"error"})}},K=async Z=>{try{await SO(De,Z),ae({open:!0,message:"Activity updated successfully",severity:"success"}),oe(!1),ee(null),await Se()}catch(be){console.error("Error updating activity:",be),ae({open:!0,message:"Failed to update activity",severity:"error"})}};return e?r.jsx(Kl,{}):r.jsx(A,{sx:{width:"100%",minHeight:"100vh",overflowX:"hidden"},children:r.jsxs(A,{sx:{maxWidth:k?"1600px":"1400px",margin:"0 auto",p:{xs:1.5,sm:2,md:3,lg:4},pt:{xs:.5,sm:1,md:2},pb:{xs:"80px",md:3},width:"100%",boxSizing:"border-box"},children:[r.jsx(A,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:r.jsxs(Wa,{value:v,onChange:(Z,be)=>j(be),variant:"fullWidth",sx:{maxWidth:{xs:"100%",sm:500},margin:"0 auto","& .MuiTab-root":{minHeight:44,transition:"color 0.3s ease",fontSize:"0.85rem","&.Mui-selected":{color:v===0?"primary.main":"warning.main"}},"& .MuiTabs-indicator":{height:2,borderRadius:"2px 2px 0 0",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",backgroundColor:v===0?"primary.main":"warning.main"}},children:[r.jsx(ws,{icon:r.jsx(Sw,{sx:{fontSize:"1.1rem"}}),iconPosition:"start",label:"Statistics",sx:{minHeight:44}}),r.jsx(ws,{icon:r.jsx(Ul,{sx:{fontSize:"1.1rem"}}),iconPosition:"start",label:"Achievements",sx:{minHeight:44}})]})}),v===0&&r.jsxs(Le,{spacing:2,children:[r.jsx(A,{children:r.jsx(RD,{workoutHistory:n})}),r.jsx(A,{sx:{display:"flex",justifyContent:"flex-end"},children:r.jsx(Ce,{startIcon:r.jsx(zg,{}),onClick:()=>S(!0),variant:"outlined",size:"small",sx:{textTransform:"none",borderRadius:2},children:R==="all"?"All Time":R==="7days"?"7 Days":R==="30days"?"30 Days":R==="3months"?"3 Months":R==="year"?"Year":R==="custom"?"Custom":"Filter"})}),r.jsxs(A,{sx:{display:k?"grid":"block",gridTemplateColumns:k?"1fr 1fr":"1fr",gap:2},children:[r.jsx(Ge,{sx:{bgcolor:"background.paper",boxShadow:3,border:"2px solid #FF6B35",mb:k?0:2},children:r.jsx(at,{sx:{p:2.5},children:r.jsxs(Le,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:2},children:[r.jsx(_g,{sx:{fontSize:48,color:"#FF6B35"}}),r.jsxs(A,{children:[r.jsx(M,{variant:"h2",sx:{fontWeight:700,color:"#FF6B35",lineHeight:1},children:B.currentStreak}),r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[r.jsx(M,{variant:"body1",color:"text.secondary",sx:{fontWeight:600},children:"Day Streak"}),r.jsx(Ie,{size:"small",onClick:()=>C(!0),sx:{padding:.5,color:"text.secondary","&:hover":{color:"primary.main"}},children:r.jsx(Hl,{sx:{fontSize:16}})})]})]})]}),r.jsxs(A,{sx:{textAlign:"right"},children:[r.jsx(M,{variant:"caption",color:"text.secondary",children:"Longest"}),r.jsx(M,{variant:"h5",sx:{fontWeight:700,color:"primary.main"},children:B.longestStreak})]})]})})}),r.jsx(Ge,{sx:{bgcolor:"background.paper"},children:r.jsx(at,{sx:{p:2},children:r.jsxs(Le,{spacing:1.5,children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(Sw,{sx:{color:"secondary.main"}}),r.jsx(M,{variant:"body1",sx:{fontWeight:600},children:"Adherence"})]}),r.jsxs(M,{variant:"h4",sx:{fontWeight:700,color:"secondary.main"},children:[re,"%"]})]}),r.jsx(ur,{variant:"determinate",value:re,sx:{height:12,borderRadius:6,bgcolor:"action.hover","& .MuiLinearProgress-bar":{borderRadius:6,background:"linear-gradient(90deg, #4CAF50 0%, #8BC34A 100%)"}}}),r.jsx(M,{variant:"caption",color:"text.secondary",children:"Days with sessions (last 30 days or since first session)"})]})})})]}),n.length>0&&r.jsx(_D,{workoutHistory:n}),n.length>0&&r.jsx(Ge,{sx:{bgcolor:"background.paper"},children:r.jsxs(at,{children:[r.jsxs(Le,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:2},children:[r.jsxs(M,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(qr,{})," Progressive Overload"]}),o.length<10&&r.jsx(Ce,{size:"small",startIcon:r.jsx($n,{}),onClick:()=>g(!0),sx:{color:"secondary.main"},children:"Track Exercise"})]}),o.length===0?r.jsxs(A,{sx:{textAlign:"center",py:4},children:[r.jsx(M,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Track your favorite exercises to see your progress over time"}),r.jsx(Ce,{variant:"contained",startIcon:r.jsx($n,{}),onClick:()=>g(!0),children:"Add Exercise"})]}):r.jsx(Le,{spacing:2,children:o.map(Z=>{const be=Z.trackingMode||"weight",ke=mo.getExerciseProgression(n,Z.exerciseName,be),me=ke.length>0?ke[0].value:0,we=be==="reps"?Z.lastReps!==void 0?Z.lastReps:ke.length>0?ke[ke.length-1].value:0:Z.lastWeight!==void 0?Z.lastWeight:ke.length>0?ke[ke.length-1].value:0,J=we>me?"up":we<me?"down":"same",ge=be==="reps"?"reps":"lbs";return r.jsxs(A,{sx:{p:2,borderRadius:2,border:"1px solid",borderColor:"divider",bgcolor:"background.default"},children:[r.jsxs(Le,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",sx:{mb:1.5},children:[r.jsx(M,{variant:"body1",sx:{fontWeight:600,flex:1},children:Z.exerciseName}),r.jsx(Ie,{onClick:()=>Y(Z.exerciseName),size:"small",sx:{color:"text.secondary"},children:r.jsx(Yr,{sx:{fontSize:18}})})]}),ke.length>0||Z.lastWeight!==void 0||Z.lastReps!==void 0?r.jsxs(Le,{direction:"row",alignItems:"center",spacing:2,sx:{justifyContent:"center",py:1},children:[r.jsxs(A,{sx:{textAlign:"center"},children:[r.jsx(M,{variant:"caption",color:"text.secondary",children:"Starting"}),r.jsxs(M,{variant:"h5",sx:{fontWeight:700,color:"primary.main"},children:[me," ",ge]})]}),r.jsxs(A,{sx:{display:"flex",alignItems:"center",px:2},children:[J==="up"&&r.jsx(qr,{sx:{fontSize:40,color:"success.main"}}),J==="down"&&r.jsx(_x,{sx:{fontSize:40,color:"error.main"}}),J==="same"&&r.jsx(Hs,{sx:{fontSize:40,color:"text.secondary"}})]}),r.jsxs(A,{sx:{textAlign:"center"},children:[r.jsx(M,{variant:"caption",color:"text.secondary",children:"Current"}),r.jsxs(M,{variant:"h5",sx:{fontWeight:700,color:"secondary.main"},children:[we," ",ge]})]})]}):r.jsx(M,{variant:"caption",color:"text.secondary",sx:{display:"block",textAlign:"center",py:2},children:"No data available"})]},Z.exerciseName)})})]})}),r.jsx(Ge,{sx:{bgcolor:"background.paper"},children:r.jsxs(at,{sx:{p:3},children:[r.jsx(M,{variant:"h6",sx:{mb:3,fontWeight:600},children:"Workout Summary"}),r.jsxs(Le,{spacing:2.5,children:[r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[r.jsx(Nn,{sx:{fontSize:28,color:"primary.main"}}),r.jsx(M,{variant:"body1",sx:{fontWeight:500},children:"Total Workouts"})]}),r.jsx(M,{variant:"h5",sx:{fontWeight:700,color:"primary.main"},children:V.totalWorkouts})]}),r.jsx(ln,{}),r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[r.jsx(Nn,{sx:{fontSize:28,color:"error.main"}}),r.jsx(M,{variant:"body1",sx:{fontWeight:500},children:"Total Strength"})]}),r.jsx(M,{variant:"h5",sx:{fontWeight:700,color:"error.main"},children:V.strengthSessions})]}),r.jsx(ln,{}),r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[r.jsx(Ui,{sx:{fontSize:28,color:"success.main"}}),r.jsx(M,{variant:"body1",sx:{fontWeight:500},children:"Total Cardio"})]}),r.jsx(M,{variant:"h5",sx:{fontWeight:700,color:"success.main"},children:V.cardioSessions})]}),r.jsx(ln,{}),r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[r.jsx(gi,{sx:{fontSize:28,color:"secondary.main"}}),r.jsx(M,{variant:"body1",sx:{fontWeight:500},children:"Total Yoga"})]}),r.jsx(M,{variant:"h5",sx:{fontWeight:700,color:"secondary.main"},children:V.yogaSessions})]})]})]})}),r.jsx(AD,{weightHistory:z.weightHistory||[],currentWeight:z.currentWeight,currentUnit:z.weightUnit||"lbs",targetWeight:z.targetWeight,onAddWeight:q}),n.length>0&&r.jsxs(A,{children:[r.jsxs(M,{variant:"h6",sx:{fontWeight:600,color:"text.primary",display:"flex",alignItems:"center",gap:1,mb:2},children:[r.jsx(qr,{})," Recent Activity"]}),r.jsx(M0,{activities:n,onEdit:Ae,onDelete:ne,maxVisible:10,showLoadMore:!0})]})]}),v===1&&r.jsx(vD,{userStats:$,workoutHistory:n}),r.jsxs(Et,{open:h,onClose:()=>{g(!1),b("")},maxWidth:"xs",fullWidth:!0,children:[r.jsx(zt,{children:"Add Exercise to Track"}),r.jsxs(Dt,{children:[r.jsx(Je,{fullWidth:!0,placeholder:"Search exercises...",value:m,onChange:Z=>b(Z.target.value),variant:"outlined",size:"small",sx:{mb:2,mt:1}}),r.jsx(wn,{sx:{maxHeight:400,overflow:"auto"},children:d.filter(Z=>!o.some(be=>be.exerciseName===Z)).filter(Z=>Z.toLowerCase().includes(m.toLowerCase())).map(Z=>r.jsx(it,{disablePadding:!0,children:r.jsx(Ur,{onClick:()=>ce(Z),children:r.jsx(St,{primary:Z})})},Z))})]}),r.jsx(Nt,{children:r.jsx(Ce,{onClick:()=>{g(!1),b("")},children:"Cancel"})})]}),r.jsxs(Et,{open:E,onClose:()=>S(!1),maxWidth:"xs",fullWidth:!0,children:[r.jsx(zt,{children:"Time Frame Filter"}),r.jsx(Dt,{children:r.jsxs(Le,{spacing:2,sx:{mt:1},children:[r.jsxs(To,{value:R,exclusive:!0,onChange:(Z,be)=>{be!==null&&O(be)},orientation:"vertical",fullWidth:!0,children:[r.jsx(ss,{value:"all",children:"All Time"}),r.jsx(ss,{value:"7days",children:"Last 7 Days"}),r.jsx(ss,{value:"30days",children:"Last 30 Days"}),r.jsx(ss,{value:"3months",children:"Last 3 Months"}),r.jsx(ss,{value:"year",children:"Last Year"}),r.jsx(ss,{value:"custom",children:"Custom Range"})]}),R==="custom"&&r.jsx(Hh,{dateAdapter:t0,children:r.jsxs(Le,{spacing:2,children:[r.jsx(jh,{label:"Start Date",value:I,onChange:Z=>P(Z),slotProps:{textField:{fullWidth:!0}}}),r.jsx(jh,{label:"End Date",value:W,onChange:Z=>L(Z),slotProps:{textField:{fullWidth:!0}}})]})})]})}),r.jsxs(Nt,{children:[r.jsx(Ce,{onClick:()=>{O("all"),P(null),L(null)},children:"Clear Filters"}),r.jsx(Ce,{onClick:()=>S(!1),variant:"contained",children:"Apply"})]})]}),r.jsx(PD,{open:X,onClose:()=>{oe(!1),ee(null)},activity:De!==null?n[De]:null,onSave:K}),r.jsxs(Et,{open:ue,onClose:()=>{Te(!1),ee(null)},children:[r.jsx(zt,{children:"Delete Activity?"}),r.jsx(Dt,{children:r.jsx(M,{children:"Are you sure you want to delete this activity? This action cannot be undone."})}),r.jsxs(Nt,{children:[r.jsx(Ce,{onClick:()=>{Te(!1),ee(null)},children:"Cancel"}),r.jsx(Ce,{onClick:de,color:"error",variant:"contained",children:"Delete"})]})]}),r.jsxs(Et,{open:w,onClose:()=>C(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsxs(zt,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(_g,{sx:{color:"#FF6B35"}}),"How Streaks Work"]}),r.jsx(Dt,{children:r.jsxs(Le,{spacing:2,sx:{mt:1},children:[r.jsxs(A,{children:[r.jsx(M,{variant:"subtitle2",sx:{fontWeight:600,mb:.5},children:" Consecutive Days"}),r.jsx(M,{variant:"body2",color:"text.secondary",children:"Your streak counts consecutive calendar days where you logged at least one session (any type - strength, cardio, yoga, etc.)."})]}),r.jsxs(A,{children:[r.jsx(M,{variant:"subtitle2",sx:{fontWeight:600,mb:.5},children:" Rest Day Logic"}),r.jsxs(M,{variant:"body2",color:"text.secondary",component:"div",children:["To maintain your streak, complete weeks (Sun-Sat) need:",r.jsx(A,{component:"ul",sx:{mt:.5,mb:0,pl:2},children:r.jsxs("li",{children:[r.jsx("strong",{children:"At least 3 strength training sessions"})," per week"]})}),"Incomplete weeks (weeks where your streak doesn't cover all 7 days from Sunday to Saturday) don't have this strength training requirement."]})]}),r.jsxs(A,{children:[r.jsx(M,{variant:"subtitle2",sx:{fontWeight:600,mb:.5},children:" What Counts as Strength Training?"}),r.jsx(M,{variant:"body2",color:"text.secondary",children:"Full body, upper body, lower body, push, pull, legs, or any workout with resistance exercises."})]}),r.jsxs(A,{children:[r.jsx(M,{variant:"subtitle2",sx:{fontWeight:600,mb:.5},children:" How Streaks Are Counted"}),r.jsx(M,{variant:"body2",color:"text.secondary",children:"Each consecutive day with logged sessions adds 1 to your streak. The calendar shows all logged sessions that contribute to your streak."})]}),r.jsxs(A,{children:[r.jsx(M,{variant:"subtitle2",sx:{fontWeight:600,mb:.5},children:" When Streaks Break"}),r.jsxs(M,{variant:"body2",color:"text.secondary",children:["Your streak breaks if you:",r.jsxs(A,{component:"ul",sx:{mt:.5,mb:0,pl:2},children:[r.jsx("li",{children:"Miss a full day without logging any session"}),r.jsx("li",{children:"Have a complete week (Sun-Sat) with fewer than 3 strength sessions"})]})]})]}),r.jsx(A,{sx:{p:1.5,bgcolor:"info.light",borderRadius:1},children:r.jsxs(M,{variant:"body2",sx:{fontStyle:"italic"},children:[r.jsx("strong",{children:"Tip:"})," Your streak is active if you worked out today or yesterday. Keep it going!"]})})]})}),r.jsx(Nt,{children:r.jsx(Ce,{onClick:()=>C(!1),variant:"contained",children:"Got it"})})]}),r.jsx(Or,{open:G.open,autoHideDuration:6e3,onClose:()=>ae({...G,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:r.jsx(kt,{onClose:()=>ae({...G,open:!1}),severity:G.severity,sx:{width:"100%"},children:G.message})})]})})};LD.propTypes={};const b$=()=>{const[e,t]=y.useState(!0),[n,i]=y.useState(""),[o,c]=y.useState(""),[d,f]=y.useState(""),[h,g]=y.useState(!1),{login:m,signup:b}=Ao();return{isLogin:e,email:n,setEmail:i,password:o,setPassword:c,error:d,loading:h,handleSubmit:async E=>{if(E.preventDefault(),!n||!o){f("Please fill in all fields");return}if(o.length<6){f("Password must be at least 6 characters");return}try{f(""),g(!0),e?await m(n,o):await b(n,o)}catch(S){console.error("Auth error:",S.code||"Unknown error"),S.code==="auth/user-not-found"||S.code==="auth/wrong-password"?f("Invalid email or password"):S.code==="auth/email-already-in-use"?f("Email already in use"):S.code==="auth/invalid-email"?f("Invalid email address"):S.code==="auth/weak-password"?f("Password is too weak"):f(`Failed to ${e?"log in":"sign up"}. Please try again.`)}finally{g(!1)}},toggleMode:()=>{t(!e),f(""),i(""),c("")}}},v$=()=>{const{isLogin:e,email:t,setEmail:n,password:i,setPassword:o,error:c,loading:d,handleSubmit:f,toggleMode:h}=b$(),{continueAsGuest:g}=Ao();return r.jsx(A,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:m=>m.palette.background.default,p:2},children:r.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:r.jsx(Ge,{sx:{maxWidth:440,width:"100%",borderRadius:4,boxShadow:"0 8px 32px rgba(19, 70, 134, 0.2)"},children:r.jsxs(at,{sx:{p:4},children:[r.jsxs(A,{sx:{textAlign:"center",mb:4},children:[r.jsx(gt.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},style:{marginBottom:"1rem"},children:r.jsx("img",{src:"/goodlift/goodlift-logo.svg",alt:"GoodLift",style:{height:"80px",width:"auto"}})}),r.jsx(Pa,{mode:"wait",children:r.jsxs(gt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.3},children:[r.jsx(M,{variant:"h5",sx:{fontWeight:600,mb:1},children:e?"Welcome Back":"Create Account"}),r.jsx(M,{variant:"body2",color:"text.secondary",children:e?"Log in to continue your fitness journey":"Sign up to start tracking your workouts"})]},e?"login":"signup")})]}),r.jsx(Pa,{mode:"wait",children:c&&r.jsx(gt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:r.jsx(kt,{severity:"error",sx:{mb:3},children:c})})}),r.jsxs(A,{component:"form",onSubmit:f,children:[r.jsx(Je,{fullWidth:!0,label:"Email",type:"email",value:t,onChange:m=>n(m.target.value),disabled:d,required:!0,sx:{mb:2}}),r.jsx(Je,{fullWidth:!0,label:"Password",type:"password",value:i,onChange:m=>o(m.target.value),disabled:d,required:!0,sx:{mb:3}}),r.jsx(Ce,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:d,sx:{py:1.5,fontSize:"1.1rem",fontWeight:600,bgcolor:"primary.main","&:hover":{bgcolor:"primary.dark"}},children:d?"Please wait...":e?"Log In":"Sign Up"}),r.jsx(ln,{sx:{my:2},children:"OR"}),r.jsx(Ce,{fullWidth:!0,variant:"outlined",size:"large",disabled:d,onClick:g,sx:{py:1.5,fontSize:"1.1rem",fontWeight:600,borderColor:"secondary.main",color:"secondary.main","&:hover":{borderColor:"secondary.dark",bgcolor:"rgba(237, 63, 39, 0.05)"}},children:"Continue as Guest"}),r.jsx(A,{sx:{mt:3,pt:3,borderTop:"1px solid",borderColor:"divider",textAlign:"center"},children:r.jsxs(M,{variant:"body2",color:"text.secondary",children:[e?"Don't have an account? ":"Already have an account? ",r.jsx(Ce,{onClick:h,disabled:d,sx:{color:"primary.main",fontWeight:600,textDecoration:"underline","&:hover":{bgcolor:"transparent",textDecoration:"underline"}},children:e?"Sign Up":"Log In"})]})})]})]})})})})},Iu=[{name:"Neck Side Stretch",primaryMuscles:"Neck",secondaryMuscles:"Upper Back, Traps",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=v5I0J_6w6jw"},{name:"Neck Rotation",primaryMuscles:"Neck",secondaryMuscles:"Traps",type:"Dynamic",duration:60,youtubeLink:"https://www.youtube.com/watch?v=xfGKhRo5bpI"},{name:"Shoulder Cross-Body Stretch",primaryMuscles:"Delts, Rear Delts",secondaryMuscles:"Upper Back",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=b6H9SHC0H9Y"},{name:"Overhead Triceps Stretch",primaryMuscles:"Triceps",secondaryMuscles:"Delts, Lats",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=EQO_8NRkljo"},{name:"Arm Circles",primaryMuscles:"Delts",secondaryMuscles:"Upper Back, Chest",type:"Dynamic",duration:60,youtubeLink:"https://www.youtube.com/watch?v=Ue_PRcVBdm8"},{name:"Doorway Chest Stretch",primaryMuscles:"Chest",secondaryMuscles:"Front Delts",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=qGJABe9R2zQ"},{name:"Standing Chest Expansion",primaryMuscles:"Chest",secondaryMuscles:"Front Delts, Biceps",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=mvh5zHB-xkc"},{name:"Child's Pose",primaryMuscles:"Lower Back",secondaryMuscles:"Lats, Glutes",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=2MTIlxJ82vY",difficulty:"Beginner"},{name:"Cat-Cow Stretch",primaryMuscles:"Back, Core",secondaryMuscles:"Abs",type:"Dynamic",duration:60,youtubeLink:"https://www.youtube.com/watch?v=kqnua4rHVVA",difficulty:"Beginner"},{name:"Seated Spinal Twist",primaryMuscles:"Back, Obliques",secondaryMuscles:"Lower Back, Glutes",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=DGd7kJyPZjU",difficulty:"Beginner"},{name:"Hip Flexor Stretch (Lunge)",primaryMuscles:"Hip Flexors",secondaryMuscles:"Quads",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=hdW4IXXCzKE"},{name:"Pigeon Pose",primaryMuscles:"Glutes, Hip Flexors",secondaryMuscles:"Lower Back",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=0_zDd6kQ",difficulty:"Intermediate"},{name:"Figure 4 Stretch",primaryMuscles:"Glutes",secondaryMuscles:"Lower Back, Hip Flexors",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=JbyjNymZP8M"},{name:"Butterfly Stretch",primaryMuscles:"Inner Thighs, Groin",secondaryMuscles:"Hip Flexors",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=mJiSzM1X7m0"},{name:"Standing Quad Stretch",primaryMuscles:"Quads",secondaryMuscles:"Hip Flexors",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=kRHQDSuhYKE"},{name:"Lying Quad Stretch",primaryMuscles:"Quads",secondaryMuscles:"Hip Flexors",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=5Mn5g6W-BZk"},{name:"Standing Hamstring Stretch",primaryMuscles:"Hamstrings",secondaryMuscles:"Lower Back, Calves",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=BPmv-3EQk2c"},{name:"Seated Forward Fold",primaryMuscles:"Hamstrings, Lower Back",secondaryMuscles:"Calves",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=U21floGmwDs",difficulty:"Beginner"},{name:"Downward Dog",primaryMuscles:"Hamstrings, Calves",secondaryMuscles:"Back, Delts",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=gZJWYonQKxY",difficulty:"Beginner"},{name:"Wall Calf Stretch",primaryMuscles:"Calves",secondaryMuscles:"Hamstrings",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=hjCRc2jYKyY"},{name:"Standing Calf Raise Stretch",primaryMuscles:"Calves",secondaryMuscles:"",type:"Dynamic",duration:60,youtubeLink:"https://www.youtube.com/watch?v=V3E_fFrLZmE"},{name:"Cobra Stretch",primaryMuscles:"Abs",secondaryMuscles:"Hip Flexors, Chest",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=JDcdhTuycOI",difficulty:"Beginner"},{name:"Side Bend Stretch",primaryMuscles:"Obliques",secondaryMuscles:"Lats, Side Delts",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=y1bKLSIvR1A"},{name:"World's Greatest Stretch",primaryMuscles:"Hip Flexors, Hamstrings",secondaryMuscles:"Glutes, Back, Chest",type:"Dynamic",duration:60,youtubeLink:"https://www.youtube.com/watch?v=a25W3YHBXP4",difficulty:"Intermediate"},{name:"Thread the Needle",primaryMuscles:"Upper Back, Delts",secondaryMuscles:"Obliques, Lower Back",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=lVGgLfg3wQ8",difficulty:"Beginner"},{name:"Warrior I Pose",primaryMuscles:"Hip Flexors, Quads",secondaryMuscles:"Glutes, Core",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=VC4s_PmJBkA",difficulty:"Beginner"},{name:"Triangle Pose",primaryMuscles:"Hamstrings, Obliques",secondaryMuscles:"Inner Thighs, Back",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=2S-ozXfUL9g",difficulty:"Intermediate"},{name:"Happy Baby Pose",primaryMuscles:"Hip Flexors, Glutes",secondaryMuscles:"Lower Back, Inner Thighs",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=p28vdRmDuLg",difficulty:"Beginner"},{name:"Supine Spinal Twist",primaryMuscles:"Lower Back, Obliques",secondaryMuscles:"Glutes, Chest",type:"Static",duration:60,youtubeLink:"https://www.youtube.com/watch?v=DQBT3u-x7TE",difficulty:"Beginner"}],uC=e=>e.split(",").map(t=>t.trim()).filter(t=>t.length>0),Wu=e=>{const t=uC(e.primaryMuscles),n=uC(e.secondaryMuscles||"");return[...t,...n]},Og={NECK:["Neck","Traps"],SHOULDERS:["Delts","Front Delts","Rear Delts","Side Delts"],CHEST:["Chest","Upper Chest","Lower Chest"],BACK:["Back","Upper Back","Lower Back","Lats"],CORE:["Core","Abs","Obliques"],ARMS:["Biceps","Triceps","Forearms"],HIPS:["Hip Flexors","Glutes","Groin","Inner Thighs"],LEGS_UPPER:["Quads","Hamstrings"],LEGS_LOWER:["Calves"]},dC=(e,t)=>Wu(e).some(i=>t.some(o=>i.includes(o)||o.includes(i))),Ex=(e=10)=>{const t=[],n=new Set,i=Object.keys(Og);for(const o of i){if(t.length>=e)break;const c=Og[o],d=Iu.filter(f=>dC(f,c)&&!t.includes(f));if(d.length>0){const f=Math.floor(Math.random()*d.length);t.push(d[f]),n.add(o)}}for(;t.length<e;){const o=i.filter(c=>!n.has(c));if(o.length>0){const c=o[Math.floor(Math.random()*o.length)],d=Og[c],f=Iu.filter(h=>dC(h,d)&&!t.includes(h));if(f.length>0){const h=Math.floor(Math.random()*f.length);t.push(f[h]),n.add(c)}else n.add(c)}else{const c=Iu.filter(f=>!t.includes(f));if(c.length===0)break;const d=Math.floor(Math.random()*c.length);t.push(c[d])}}return Dx(t)},S$=(e,t=10)=>{if(!e||e.length===0)return Ex(t);const n=Iu.filter(c=>{const d=Wu(c);return e.some(f=>d.some(h=>h.includes(f)||f.includes(h)))});if(n.length===0)return console.warn("No stretches found for specified muscles, using full body selection"),Ex(t);if(n.length<=t)return Dx(n);const i=[],o=new Set;for(const c of e){if(i.length>=t)break;const d=n.filter(f=>i.includes(f)?!1:Wu(f).some(g=>g.includes(c)||c.includes(g)));if(d.length>0){const f=Math.floor(Math.random()*d.length);i.push(d[f]),Wu(d[f]).forEach(h=>o.add(h))}}for(;i.length<t;){const c=n.filter(f=>!i.includes(f));if(c.length===0)break;const d=Math.floor(Math.random()*c.length);i.push(c[d])}return Dx(i)},Dx=e=>{const t=[...e];for(let n=t.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[t[n],t[i]]=[t[i],t[n]]}return t},w$=()=>{const e=new Set;return Iu.forEach(t=>{Wu(t).forEach(n=>e.add(n))}),Array.from(e).sort()},FD=({onStartStretchSession:e})=>{const[t,n]=y.useState(null),[i,o]=y.useState([]),c=w$(),d=()=>{n("full")},f=()=>{n("custom")},h=v=>{o(j=>j.includes(v)?j.filter(E=>E!==v):[...j,v])},g=()=>{t==="full"?e("full",[]):t==="custom"&&e("custom",i)},m=()=>{n(null),o([])},b=t==="custom"&&i.length===0;return r.jsx(A,{sx:{maxWidth:"1200px",margin:"0 auto"},children:r.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[r.jsx(M,{variant:"h3",sx:{fontFamily:"'Montserrat', sans-serif",fontWeight:800,color:"primary.main",marginBottom:"0.5rem",textAlign:"center"},children:"Stretching"}),r.jsx(M,{variant:"body1",sx:{color:"text.secondary",marginBottom:"2rem",textAlign:"center"},children:"Improve flexibility and recovery with guided stretches"}),!t&&r.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:r.jsxs(Kt,{container:!0,spacing:3,sx:{marginTop:2},children:[r.jsx(Kt,{item:!0,xs:12,md:6,children:r.jsx(Ge,{onClick:d,sx:{cursor:"pointer",height:"100%",transition:"border-color 0.2s ease, opacity 0.15s ease","&:hover":{borderColor:"primary.main"},"&:active":{opacity:.8},border:"2px solid",borderColor:"divider"},children:r.jsxs(at,{sx:{padding:4},children:[r.jsx(A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:2},children:r.jsx(Nn,{sx:{fontSize:60,color:"primary.main"}})}),r.jsx(M,{variant:"h5",sx:{fontWeight:700,textAlign:"center",marginBottom:2,color:"primary.main"},children:"Full Body Stretch"}),r.jsx(M,{variant:"body2",sx:{textAlign:"center",marginBottom:2,color:"text.secondary"},children:"A balanced routine covering all major muscle groups for complete flexibility and recovery."}),r.jsxs(A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1,marginTop:2},children:[r.jsx(ww,{sx:{color:"secondary.main"}}),r.jsx(M,{variant:"h6",sx:{fontWeight:600,color:"secondary.main"},children:"~10 minutes"})]})]})})}),r.jsx(Kt,{item:!0,xs:12,md:6,children:r.jsx(Ge,{onClick:f,sx:{cursor:"pointer",height:"100%",transition:"border-color 0.2s ease, opacity 0.15s ease","&:hover":{borderColor:"info.main"},"&:active":{opacity:.8},border:"2px solid",borderColor:"divider"},children:r.jsxs(at,{sx:{padding:4},children:[r.jsx(A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:2},children:r.jsx(Nn,{sx:{fontSize:60,color:"info.main"}})}),r.jsx(M,{variant:"h5",sx:{fontWeight:700,textAlign:"center",marginBottom:2,color:"info.main"},children:"Custom Stretch"}),r.jsx(M,{variant:"body2",sx:{textAlign:"center",marginBottom:2,color:"text.secondary"},children:"Target specific muscle groups that need attention."}),r.jsxs(A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1,marginTop:2},children:[r.jsx(ww,{sx:{color:"secondary.main"}}),r.jsx(M,{variant:"h6",sx:{fontWeight:600,color:"secondary.main"},children:"~10 minutes"})]})]})})})]})}),t==="custom"&&r.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:r.jsxs(Ge,{sx:{marginTop:3,padding:3},children:[r.jsx(M,{variant:"h5",sx:{fontWeight:700,marginBottom:2,textAlign:"center",color:"primary.main"},children:"Select Muscle Groups"}),r.jsx(M,{variant:"body2",sx:{marginBottom:3,textAlign:"center",color:"text.secondary"},children:"Choose one or more muscle groups to focus on"}),r.jsx(QR,{children:r.jsx(Kt,{container:!0,spacing:2,children:c.map(v=>r.jsx(Kt,{item:!0,xs:6,sm:4,md:3,children:r.jsx(IC,{control:r.jsx(KR,{checked:i.includes(v),onChange:()=>h(v),color:"primary"}),label:v})},v))})})]})}),t==="full"&&r.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:r.jsxs(Ge,{sx:{marginTop:3,padding:3},children:[r.jsx(M,{variant:"h5",sx:{fontWeight:700,marginBottom:2,textAlign:"center",color:"primary.main"},children:"Full Body Stretch Session"}),r.jsxs(Le,{spacing:1,sx:{marginTop:2},children:[r.jsxs(M,{variant:"body1",children:[r.jsx("strong",{children:"Duration:"})," ~10 minutes"]}),r.jsxs(M,{variant:"body1",children:[r.jsx("strong",{children:"Focus:"})," All major muscle groups"]}),r.jsxs(M,{variant:"body1",children:[r.jsx("strong",{children:"Stretches:"})," 10 carefully selected stretches"]})]})]})}),t&&r.jsxs(A,{sx:{marginTop:4,display:"flex",justifyContent:"center",gap:2},children:[r.jsx(Ce,{variant:"outlined",size:"large",onClick:m,sx:{minWidth:"150px",padding:"12px 32px",fontSize:"1.1rem"},children:"Back"}),r.jsx(Ce,{variant:"contained",size:"large",startIcon:r.jsx(Vi,{}),onClick:g,disabled:b,sx:{minWidth:"200px",padding:"12px 32px",fontSize:"1.1rem",fontWeight:600},children:"Start Session"})]})]})})};FD.propTypes={onStartStretchSession:T.func.isRequired};class j${constructor(){this.isSupported="speechSynthesis"in window,this.isEnabled=this.loadTTSPreference(),this.currentUtterance=null}isTTSSupported(){return this.isSupported}loadTTSPreference(){try{const t=localStorage.getItem("ttsEnabled");return t===null?!0:t==="true"}catch{return!0}}saveTTSPreference(){try{localStorage.setItem("ttsEnabled",this.isEnabled.toString())}catch(t){console.warn("Could not save TTS preference",t)}}toggleTTS(){return this.isEnabled=!this.isEnabled,this.saveTTSPreference(),!this.isEnabled&&this.isSupported&&window.speechSynthesis.cancel(),this.isEnabled}setEnabled(t){this.isEnabled=t,this.saveTTSPreference(),!t&&this.isSupported&&window.speechSynthesis.cancel()}isEnabledState(){return this.isEnabled}speak(t,n={}){return new Promise((i,o)=>{if(!this.isSupported){console.warn("Speech Synthesis not supported in this browser"),o(new Error("Speech Synthesis not supported"));return}if(!this.isEnabled){i();return}window.speechSynthesis.cancel();const c=new SpeechSynthesisUtterance(t);c.rate=n.rate||1,c.pitch=n.pitch||1,c.volume=n.volume||1,c.lang=n.lang||"en-US";const d=window.speechSynthesis.getVoices();if(d.length>0){let f=d.find(h=>h.lang.startsWith("en")&&(h.name.toLowerCase().includes("female")||h.name.toLowerCase().includes("natural")||h.name.toLowerCase().includes("premium")||h.name.toLowerCase().includes("neural")));f||(f=d.find(h=>h.lang.startsWith("en")&&h.localService===!1)),f||(f=d.find(h=>h.lang.startsWith("en"))),f&&(c.voice=f)}c.onend=()=>{this.currentUtterance=null,i()},c.onerror=f=>{console.error("Speech synthesis error:",f),this.currentUtterance=null,o(f)},this.currentUtterance=c,window.speechSynthesis.speak(c)})}async announceExercise(t){try{await this.speak(t,{rate:.85,pitch:.95})}catch(n){console.warn("Could not announce exercise:",n)}}async announceMessage(t){try{await this.speak(t,{rate:1})}catch(n){console.warn("Could not announce message:",n)}}stop(){this.isSupported&&(window.speechSynthesis.cancel(),this.currentUtterance=null)}pause(){this.isSupported&&window.speechSynthesis.speaking&&window.speechSynthesis.pause()}resume(){this.isSupported&&window.speechSynthesis.paused&&window.speechSynthesis.resume()}isSpeaking(){return this.isSupported&&window.speechSynthesis.speaking}}const cu=new j$,BD=({stretches:e,onComplete:t,onExit:n})=>{const[i,o]=y.useState(0),[c,d]=y.useState(60),[f,h]=y.useState(!1),[g,m]=y.useState(cu.isEnabledState()),b=y.useRef(null),v=y.useRef(!1),j=e[i],E=(60-c)/60*100,S=(i*60+(60-c))/(e.length*60)*100;y.useEffect(()=>(Ar.requestWakeLock(),()=>{Ar.releaseWakeLock(),cu.stop()}),[]),y.useEffect(()=>{!v.current&&g&&(cu.announceExercise(j.name),v.current=!0)},[i,j.name,g]),y.useEffect(()=>(f?b.current&&clearInterval(b.current):b.current=setInterval(()=>{d(P=>P<=1?i<e.length-1?(o(W=>W+1),v.current=!1,on.playTransitionBeep(),60):(clearInterval(b.current),on.playCompletionFanfare(),setTimeout(()=>{t()},500),0):P-1)},1e3),()=>{b.current&&clearInterval(b.current)}),[f,i,e.length,t]);const w=()=>{h(P=>!P)},C=y.useCallback(()=>{i<e.length-1&&(o(P=>P+1),d(60),v.current=!1,on.playTransitionBeep())},[i,e.length]),k=y.useCallback(()=>{i>0&&(o(P=>P-1),d(60),v.current=!1,on.playTransitionBeep())},[i]),R=()=>{const P=cu.toggleTTS();m(P)},O=()=>{b.current&&clearInterval(b.current),cu.stop(),n()},I=P=>{const W=Math.floor(P/60),L=P%60;return`${W}:${L.toString().padStart(2,"0")}`};return r.jsxs(A,{sx:{maxWidth:"900px",margin:"0 auto",width:"100%",boxSizing:"border-box"},children:[r.jsxs(A,{sx:{marginBottom:3},children:[r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",marginBottom:1},children:[r.jsxs(M,{variant:"body2",sx:{fontWeight:600},children:["Stretch ",i+1," of ",e.length]}),r.jsxs(M,{variant:"body2",sx:{fontWeight:600},children:[Math.round(S),"% Complete"]})]}),r.jsx(ur,{variant:"determinate",value:S,sx:{height:8,borderRadius:4,backgroundColor:"rgba(19, 70, 134, 0.1)","& .MuiLinearProgress-bar":{backgroundColor:"primary.main"}}})]}),r.jsx(Pa,{mode:"wait",children:r.jsx(gt.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},children:r.jsx(Ge,{sx:{background:"linear-gradient(135deg, rgba(19, 70, 134, 0.05) 0%, rgba(237, 63, 39, 0.05) 100%)",boxShadow:4},children:r.jsxs(at,{sx:{padding:{xs:2,sm:3},width:"100%",boxSizing:"border-box"},children:[r.jsx(M,{variant:"h4",sx:{fontFamily:"'Montserrat', sans-serif",fontWeight:800,color:"primary.main",marginBottom:{xs:1,sm:2},textAlign:"center",fontSize:{xs:"1.5rem",sm:"2rem"}},children:j.name}),r.jsxs(A,{sx:{marginBottom:{xs:2,sm:3},textAlign:"center"},children:[r.jsx(M,{variant:"h1",sx:{fontFamily:"'Montserrat', sans-serif",fontWeight:800,color:f?"grey.500":"secondary.main",fontSize:{xs:"3rem",sm:"4rem",md:"5rem"},marginBottom:1,lineHeight:1},children:I(c)}),r.jsx(ur,{variant:"determinate",value:E,sx:{height:{xs:8,sm:12},borderRadius:6,backgroundColor:"rgba(237, 63, 39, 0.1)","& .MuiLinearProgress-bar":{backgroundColor:"secondary.main"}}})]}),r.jsxs(A,{sx:{marginBottom:{xs:2,sm:3}},children:[r.jsx(M,{variant:"subtitle2",sx:{fontWeight:600,marginBottom:.5,color:"primary.main",fontSize:{xs:"0.875rem",sm:"1rem"}},children:"Primary Muscles:"}),r.jsx(A,{sx:{display:"flex",flexWrap:"wrap",gap:.5,marginBottom:{xs:1,sm:2}},children:j.primaryMuscles.split(",").map((P,W)=>r.jsx(Ne,{label:P.trim(),color:"primary",size:"medium"},W))}),j.secondaryMuscles&&r.jsxs(r.Fragment,{children:[r.jsx(M,{variant:"subtitle2",sx:{fontWeight:600,marginBottom:.5,color:"text.secondary",fontSize:{xs:"0.875rem",sm:"1rem"}},children:"Secondary Muscles:"}),r.jsx(A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:j.secondaryMuscles.split(",").map((P,W)=>{const L=P.trim();return L?r.jsx(Ne,{label:L,variant:"outlined",size:"small"},W):null})})]})]}),j.youtubeLink&&r.jsx(Ce,{variant:"outlined",startIcon:r.jsx(XR,{}),onClick:()=>window.open(j.youtubeLink,"_blank"),fullWidth:!0,sx:{marginBottom:{xs:2,sm:3},fontSize:{xs:"0.875rem",sm:"1rem"}},children:"Watch Demonstration"}),r.jsxs(A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:{xs:1,sm:2},marginBottom:{xs:1,sm:2},flexWrap:"wrap"},children:[r.jsx(ar,{title:"Previous stretch",children:r.jsx("span",{children:r.jsx(Ie,{onClick:k,disabled:i===0,sx:{backgroundColor:"primary.main",color:"white","&:hover":{backgroundColor:"primary.dark"},"&:disabled":{backgroundColor:"grey.300",color:"grey.500"}},children:r.jsx(CC,{})})})}),r.jsx(ar,{title:f?"Resume":"Pause",children:r.jsx(Ie,{onClick:w,sx:{backgroundColor:"secondary.main",color:"white",width:{xs:56,sm:64},height:{xs:56,sm:64},"&:hover":{backgroundColor:"secondary.dark"}},children:f?r.jsx(Vi,{sx:{fontSize:{xs:32,sm:40}}}):r.jsx(Lx,{sx:{fontSize:{xs:32,sm:40}}})})}),r.jsx(ar,{title:"Next stretch",children:r.jsx("span",{children:r.jsx(Ie,{onClick:C,disabled:i===e.length-1,sx:{backgroundColor:"primary.main",color:"white","&:hover":{backgroundColor:"primary.dark"},"&:disabled":{backgroundColor:"grey.300",color:"grey.500"}},children:r.jsx(Co,{})})})})]}),r.jsxs(A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2},children:[r.jsx(ar,{title:g?"Voice announcements on":"Voice announcements off",children:r.jsx(Ie,{onClick:R,color:g?"primary":"default",children:g?r.jsx(WC,{}):r.jsx(ZR,{})})}),r.jsx(Ce,{variant:"outlined",color:"error",startIcon:r.jsx(TC,{}),onClick:O,sx:{minWidth:"120px"},children:"End Session"})]})]})})},i)})]})};BD.propTypes={stretches:T.arrayOf(T.shape({name:T.string.isRequired,primaryMuscles:T.string.isRequired,secondaryMuscles:T.string,youtubeLink:T.string})).isRequired,onComplete:T.func.isRequired,onExit:T.func.isRequired};const C$=()=>{const[e,t]=y.useState("selection"),[n,i]=y.useState([]),[o,c]=y.useState(""),[d,f]=y.useState(null),h=(v,j)=>{let E;v==="full"?E=Ex(10):E=S$(j,10),i(E),c(v),t("stretch-session")},g=async()=>{try{const v={id:`stretch_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,date:new Date().toISOString(),type:o,stretchesCompleted:n.length,stretches:n.map(j=>j.name),duration:n.length*60};await CO(v)}catch(v){console.error("Failed to save stretch session:",v)}f("stretch"),t("complete")},m=()=>{t("selection"),i([])},b=()=>{t("selection"),i([]),f(null)};return r.jsxs(r.Fragment,{children:[e==="selection"&&r.jsx(FD,{onStartStretchSession:h}),e==="stretch-session"&&n.length>0&&r.jsx(BD,{stretches:n,onComplete:g,onExit:m}),e==="complete"&&r.jsx(A,{sx:{padding:{xs:"2rem 1rem",sm:"2rem",md:"3rem"},maxWidth:"700px",margin:"0 auto",minHeight:"calc(100vh - 60px)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(gt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},style:{width:"100%"},children:r.jsx(Ge,{sx:{background:d==="stretch"?"linear-gradient(135deg, rgba(19, 70, 134, 0.05) 0%, rgba(76, 175, 80, 0.05) 100%)":"linear-gradient(135deg, rgba(19, 70, 134, 0.05) 0%, rgba(156, 39, 176, 0.05) 100%)",boxShadow:6},children:r.jsxs(at,{sx:{padding:{xs:3,sm:5},textAlign:"center"},children:[r.jsx(gt.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},children:r.jsx(Bl,{sx:{fontSize:100,color:d==="stretch"?"success.main":"#9c27b0",marginBottom:2}})}),r.jsx(M,{variant:"h3",sx:{fontFamily:"'Montserrat', sans-serif",fontWeight:800,color:"primary.main",marginBottom:2},children:"Session Complete!"}),r.jsx(M,{variant:"h6",sx:{color:"text.secondary",marginBottom:3},children:d==="stretch"?"Great job! You've completed your stretch session.":"Great job! You've completed your mobility session."}),d==="stretch"&&r.jsxs(r.Fragment,{children:[r.jsxs(M,{variant:"body1",sx:{marginBottom:1},children:[n.length," stretches completed"]}),r.jsxs(M,{variant:"body1",sx:{marginBottom:4},children:["~",n.length," minutes of stretching"]})]}),r.jsx(Ce,{variant:"contained",size:"large",onClick:b,sx:{minWidth:"200px",padding:"12px 32px",fontSize:"1.1rem",fontWeight:600},children:"Done"})]})})})})]})},VD=({title:e,subtitle:t,icon:n,action:i})=>r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:1,px:2,borderBottom:"1px solid",borderColor:"divider",mb:2},children:[r.jsxs(A,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[n&&r.jsx("span",{style:{fontSize:"1.2rem"},children:n}),r.jsx(M,{variant:"h6",sx:{fontSize:"1.1rem",fontWeight:700},children:e})]}),t&&r.jsx(M,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.875rem"},children:t})]}),i&&i]});VD.propTypes={title:T.string.isRequired,subtitle:T.string,icon:T.node,action:T.node};const T$={Chest:"Lats",Lats:"Chest",Quads:"Hamstrings",Hamstrings:"Quads",Biceps:"Triceps",Triceps:"Biceps",Shoulders:"Lats"},HD=()=>{const[e,t]=y.useState({}),[n,i]=y.useState([]),[o,c]=y.useState(!0),[d,f]=y.useState(null);y.useEffect(()=>{(async()=>{try{c(!0);const j=await fetch(Oo);if(!j.ok)throw new Error(`Failed to load exercises: ${j.status}`);const E=await j.json();i(E);const S=E.reduce((w,C)=>{const k=C["Primary Muscle"].split("(")[0].trim();return w[k]||(w[k]=[]),w[k].push(C),w},{});t(S),c(!1)}catch(j){console.error("Failed to load exercise data:",j),f(j.message),c(!1)}})()},[]);const h=y.useCallback((v,j,E=[],S="all")=>{let w=(e[v]||[]).filter(k=>!E.some(R=>R["Exercise Name"]===k["Exercise Name"]));if(S!=="all"){const k=Array.isArray(S)?S:[S];w=w.filter(R=>{const O=R.Equipment.toLowerCase();return k.some(I=>{const P=I.toLowerCase();return P==="cable machine"?O.includes("cable"):P==="dumbbells"?O.includes("dumbbell"):O.includes(P)})})}if(w.length<j)return console.warn(`Insufficient exercises for ${v}. Available: ${w.length}, Requested: ${j}`),w;const C=[...w];for(let k=C.length-1;k>0;k--){const R=Math.floor(Math.random()*(k+1));[C[k],C[R]]=[C[R],C[k]]}return C.slice(0,j)},[e]),g=y.useCallback((v,j="all",E=DT)=>{let S=[];switch(v){case"upper":{const w=Math.ceil(E*.375),C=Math.ceil(E*.375),k=Math.floor(E*.125),R=E-w-C-k;S.push(...h("Chest",w,S,j)),S.push(...h("Lats",C,S,j)),S.push(...h("Biceps",k,S,j)),S.push(...h("Triceps",R,S,j));break}case"lower":{const w=.375+Math.random()*.125,C=Math.ceil(E*w),k=Math.floor(E*.25)+Math.floor(Math.random()*2),R=E-C-k;S.push(...h("Quads",C,S,j)),S.push(...h("Hamstrings",k,S,j)),R>0&&S.push(...h("Core",R,S,j));break}case"full":{const w=Math.ceil(E*.25),C=Math.ceil(E*.25),k=Math.ceil(E*.25),R=Math.floor(E*.125)+Math.floor(Math.random()*2),O=E-w-C-k-R;S.push(...h("Chest",w,S,j)),S.push(...h("Lats",C,S,j)),S.push(...h("Quads",k,S,j)),S.push(...h("Hamstrings",R,S,j)),O>0&&S.push(...h("Core",O,S,j));break}case"push":{const w=Math.ceil(E*.375),C=Math.ceil(E*.375),k=E-w-C;S.push(...h("Chest",w,S,j)),S.push(...h("Delts",C,S,j)),S.push(...h("Triceps",k,S,j));break}case"pull":{const w=Math.ceil(E*.5),C=Math.ceil(E*.25),k=E-w-C;S.push(...h("Lats",w,S,j)),S.push(...h("Rear Delts",C,S,j)),S.push(...h("Biceps",k,S,j));break}case"legs":{const w=.375+Math.random()*.125,C=Math.ceil(E*w),k=Math.floor(E*.25)+Math.floor(Math.random()*2),R=E-C-k;S.push(...h("Quads",C,S,j)),S.push(...h("Hamstrings",k,S,j)),R>0&&S.push(...h("Core",R,S,j));break}case"core":S.push(...h("Core",E,S,j));break;default:console.warn(`Unknown workout type: ${v}`);break}for(;S.length<E&&S.length>0;){const w=Object.keys(e);if(w.length===0)break;const C=w[Math.floor(Math.random()*w.length)],k=h(C,1,S,j);if(k.length>0)S.push(k[0]);else break}return S.slice(0,E)},[e,h]),m=y.useCallback((v,j=[2,2,2,2])=>{const E=[],S=[...v];for(const w of j){if(S.length===0)break;const C=[];if(S.length>0){const k=S.shift();C.push(k);const R=k["Primary Muscle"].split("(")[0].trim(),O=T$[R];for(let I=1;I<w&&S.length>0;I++){let P=-1;I===1&&O&&(P=S.findIndex(L=>L["Primary Muscle"].includes(O))),P===-1&&(P=S.findIndex(L=>!C.some(z=>z["Primary Muscle"].includes(L["Primary Muscle"].split("(")[0].trim())))),P===-1&&(P=0);const W=S.splice(P,1)[0];C.push(W)}}E.push(...C)}return S.length>0&&E.push(...S),E},[]);return{generateWorkout:y.useCallback((v,j="all",E=[2,2,2,2])=>{if(Object.keys(e).length===0)return console.error("Exercise database is empty. Cannot generate workout."),[];const S=E.reduce((k,R)=>k+R,0),w=g(v,j,S);return m(w,E)},[e,g,m]),allExercises:n,exerciseDB:e,loading:o,error:d}},k$=()=>{const{allExercises:e,loading:t}=HD(),[n,i]=y.useState(""),[o,c]=y.useState("all"),[d,f]=y.useState("all"),[h,g]=y.useState("all"),[m,b]=y.useState(new Set),[v,j]=y.useState({}),[E,S]=y.useState({}),[w,C]=y.useState(!1);y.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"}),(async()=>{const q=new Set,B={},U={};await Promise.all(e.map(async re=>{const H=re["Exercise Name"];kO(H)&&q.add(H);const[$,N]=await Promise.all([bo(H),ka(H)]);B[H]=$??"",U[H]=N?Ea(N):is})),b(q),j(B),S(U)})()},[e]);const k=y.useMemo(()=>{const z=new Set;return e.forEach(q=>{const B=hh(q["Primary Muscle"]);z.add(B)}),["all",...Array.from(z).sort()]},[e]),R=y.useMemo(()=>{const z=new Set;return e.forEach(q=>{z.add(q.Equipment)}),["all",...Array.from(z).sort()]},[e]),O=y.useMemo(()=>{const z=new Set;return e.forEach(q=>{z.add(q["Exercise Type"])}),["all",...Array.from(z).sort()]},[e]),I=y.useMemo(()=>e.filter(z=>{const q=n===""||z["Exercise Name"].toLowerCase().includes(n.toLowerCase())||z["Primary Muscle"].toLowerCase().includes(n.toLowerCase())||z.Equipment.toLowerCase().includes(n.toLowerCase()),B=hh(z["Primary Muscle"]),U=o==="all"||B===o,re=d==="all"||z.Equipment===d,H=h==="all"||z["Exercise Type"]===h;return q&&U&&re&&H}),[e,n,o,d,h]),P=z=>{const q=TO(z);b(B=>{const U=new Set(B);return q?U.add(z):U.delete(z),U})},W=async(z,q)=>{if(q==="")j(B=>({...B,[z]:""})),await $r(z,null);else{const B=oy(Math.max(0,Number(q)));j(U=>({...U,[z]:B})),await $r(z,B)}},L=async(z,q)=>{const B=E[z]||is,U=v[z];let re=U;if(U&&U>0&&B!==q){const H=ly(U,B,q);H!==null&&(re=H,j($=>({...$,[z]:re})),await $r(z,re))}S(H=>({...H,[z]:q})),await oh(z,q)};return t?r.jsx(Kl,{}):r.jsxs(A,{sx:{width:"100%",minHeight:"100vh"},children:[r.jsx(VD,{title:"Exercise Database"}),r.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},style:{padding:"1rem",maxWidth:"1400px",margin:"0 auto"},children:I.length>0||n||o!=="all"||d!=="all"||h!=="all"?r.jsxs(A,{children:[r.jsxs(Us,{sx:{position:"sticky",top:0,zIndex:10,borderRadius:"8px 8px 0 0",boxShadow:"0 2px 8px rgba(19, 70, 134, 0.08)"},children:[r.jsx(A,{sx:{p:1.5,borderBottom:"1px solid",borderColor:"divider",bgcolor:"background.paper"},children:r.jsxs(Le,{direction:"row",spacing:1,alignItems:"center",children:[r.jsx(Je,{size:"small",placeholder:"Search exercises...",value:n,onChange:z=>i(z.target.value),InputProps:{startAdornment:r.jsx(hi,{position:"start",children:r.jsx(Bi,{fontSize:"small"})})},sx:{flex:1,"& .MuiOutlinedInput-root":{borderRadius:1,bgcolor:"background.default"},"& .MuiInputBase-input":{fontSize:"0.875rem"}}}),r.jsx(ar,{title:w?"Hide filters":"Show filters",children:r.jsx(Ie,{onClick:()=>C(!w),sx:{bgcolor:w?"primary.main":"background.default",color:w?"white":"text.primary","&:hover":{bgcolor:w?"primary.dark":"action.hover"}},children:r.jsx(zg,{})})}),r.jsxs(M,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",whiteSpace:"nowrap",minWidth:"fit-content"},children:[I.length," of ",e.length]})]})}),r.jsx(Nl,{in:w,children:r.jsx(A,{sx:{p:1.5,pt:1,bgcolor:"background.paper"},children:r.jsxs(Le,{direction:{xs:"column",sm:"row"},spacing:1,children:[r.jsxs(Xt,{size:"small",sx:{minWidth:{xs:"100%",sm:150}},children:[r.jsx(En,{children:"Muscle Group"}),r.jsxs(cn,{value:o,onChange:z=>c(z.target.value),label:"Muscle Group",sx:{fontSize:"0.875rem",bgcolor:"background.default"},children:[r.jsx(Be,{value:"all",children:"All Muscles"}),k.filter(z=>z!=="all").map(z=>r.jsx(Be,{value:z,children:z},z))]})]}),r.jsxs(Xt,{size:"small",sx:{minWidth:{xs:"100%",sm:150}},children:[r.jsx(En,{children:"Equipment"}),r.jsxs(cn,{value:d,onChange:z=>f(z.target.value),label:"Equipment",sx:{fontSize:"0.875rem",bgcolor:"background.default"},children:[r.jsx(Be,{value:"all",children:"All Equipment"}),R.filter(z=>z!=="all").map(z=>r.jsx(Be,{value:z,children:z},z))]})]}),r.jsxs(Xt,{size:"small",sx:{minWidth:{xs:"100%",sm:150}},children:[r.jsx(En,{children:"Exercise Type"}),r.jsxs(cn,{value:h,onChange:z=>g(z.target.value),label:"Exercise Type",sx:{fontSize:"0.875rem",bgcolor:"background.default"},children:[r.jsx(Be,{value:"all",children:"All Types"}),O.filter(z=>z!=="all").map(z=>r.jsx(Be,{value:z,children:z},z))]})]})]})})})]}),r.jsx(JR,{component:Us,sx:{borderRadius:"0 0 8px 8px",boxShadow:"0 2px 8px rgba(19, 70, 134, 0.08)",maxHeight:"calc(100vh - 250px)",overflow:"auto"},children:r.jsxs(eP,{stickyHeader:!0,size:"small",sx:{minWidth:{xs:300,sm:650}},children:[r.jsx(tP,{children:r.jsxs(jw,{children:[r.jsx(Cr,{sx:{fontWeight:600,bgcolor:"primary.main",color:"white",py:1.5},children:r.jsx(A,{sx:{display:"flex",alignItems:"center",gap:.5},children:r.jsx("span",{children:""})})}),r.jsx(Cr,{sx:{fontWeight:600,bgcolor:"primary.main",color:"white",py:1.5},children:"Exercise Name"}),r.jsx(Cr,{sx:{fontWeight:600,bgcolor:"primary.main",color:"white",py:1.5,display:{xs:"none",sm:"table-cell"}},children:"Type"}),r.jsx(Cr,{sx:{fontWeight:600,bgcolor:"primary.main",color:"white",py:1.5,display:{xs:"none",md:"table-cell"}},children:"Equipment"}),r.jsx(Cr,{sx:{fontWeight:600,bgcolor:"primary.main",color:"white",py:1.5,textAlign:"center"},children:"Target Weight (lbs)"}),r.jsx(Cr,{sx:{fontWeight:600,bgcolor:"primary.main",color:"white",py:1.5,textAlign:"center"},children:"Target Reps"})]})}),r.jsx(nP,{children:I.map((z,q)=>{const B=m.has(z["Exercise Name"]),U=z["Exercise Name"],re=v[U],H=E[U];return r.jsxs(jw,{sx:{"&:hover":{bgcolor:"rgba(138, 190, 185, 0.05)"},bgcolor:q%2===0?"background.paper":"rgba(0, 0, 0, 0.02)"},children:[r.jsx(Cr,{sx:{py:1},children:r.jsx(ar,{title:B?"Remove from favorites":"Add to favorites",children:r.jsx(Ie,{size:"small",onClick:()=>P(U),sx:{color:B?"rgb(237, 63, 39)":"action.disabled",p:.5},children:B?r.jsx(sP,{fontSize:"small"}):r.jsx(rP,{fontSize:"small"})})})}),r.jsx(Cr,{sx:{py:1},children:r.jsxs(A,{children:[r.jsx(M,{variant:"body2",sx:{fontWeight:600,fontSize:{xs:"0.75rem",sm:"0.875rem"},color:"primary.main"},children:U}),r.jsxs(M,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.65rem",sm:"0.75rem"},display:{xs:"block",sm:"none"}},children:[z["Exercise Type"],"  ",z.Equipment]})]})}),r.jsx(Cr,{sx:{py:1,display:{xs:"none",sm:"table-cell"}},children:r.jsx(Ne,{label:z["Exercise Type"],size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:22,borderColor:z["Exercise Type"]==="Compound"?"primary.main":"text.secondary",color:z["Exercise Type"]==="Compound"?"primary.main":"text.secondary"}})}),r.jsx(Cr,{sx:{py:1,display:{xs:"none",md:"table-cell"}},children:r.jsx(M,{variant:"body2",sx:{fontSize:"0.8rem"},children:z.Equipment})}),r.jsx(Cr,{sx:{py:1},children:r.jsx(Je,{type:"tel",inputMode:"decimal",size:"small",value:re===""?"":re,onChange:$=>W(U,$.target.value),onFocus:$=>$.target.select(),placeholder:"",inputProps:{min:0,step:5,pattern:"[0-9]*([.,][0-9]+)?","aria-label":`Target weight in pounds for ${U}`,style:{textAlign:"center",fontSize:"0.875rem",padding:"4px 8px"}},sx:{width:{xs:60,sm:70},"& .MuiOutlinedInput-root":{"& input":{textAlign:"center"}}}})}),r.jsx(Cr,{sx:{py:1},children:r.jsx(dd,{value:H||is,onChange:$=>L(U,$),compact:!0,showLabel:!1})})]},U)})})]})})]}):r.jsxs(Us,{sx:{borderRadius:2,boxShadow:"0 2px 8px rgba(19, 70, 134, 0.08)"},children:[r.jsxs(A,{sx:{p:2,borderBottom:"1px solid",borderColor:"divider"},children:[r.jsxs(Le,{direction:"row",spacing:1,alignItems:"center",sx:{mb:w?2:0},children:[r.jsx(Je,{size:"small",placeholder:"Search exercises...",value:n,onChange:z=>i(z.target.value),InputProps:{startAdornment:r.jsx(hi,{position:"start",children:r.jsx(Bi,{fontSize:"small"})})},sx:{flex:1,"& .MuiOutlinedInput-root":{borderRadius:1,bgcolor:"background.default"},"& .MuiInputBase-input":{fontSize:"0.875rem"}}}),r.jsx(ar,{title:w?"Hide filters":"Show filters",children:r.jsx(Ie,{onClick:()=>C(!w),sx:{bgcolor:w?"primary.main":"background.default",color:w?"white":"text.primary","&:hover":{bgcolor:w?"primary.dark":"action.hover"}},children:r.jsx(zg,{})})}),r.jsxs(M,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",whiteSpace:"nowrap"},children:["0 of ",e.length]})]}),r.jsx(Nl,{in:w,children:r.jsxs(Le,{direction:{xs:"column",sm:"row"},spacing:1,children:[r.jsxs(Xt,{size:"small",sx:{minWidth:{xs:"100%",sm:150}},children:[r.jsx(En,{children:"Muscle Group"}),r.jsxs(cn,{value:o,onChange:z=>c(z.target.value),label:"Muscle Group",sx:{fontSize:"0.875rem",bgcolor:"background.default"},children:[r.jsx(Be,{value:"all",children:"All Muscles"}),k.filter(z=>z!=="all").map(z=>r.jsx(Be,{value:z,children:z},z))]})]}),r.jsxs(Xt,{size:"small",sx:{minWidth:{xs:"100%",sm:150}},children:[r.jsx(En,{children:"Equipment"}),r.jsxs(cn,{value:d,onChange:z=>f(z.target.value),label:"Equipment",sx:{fontSize:"0.875rem",bgcolor:"background.default"},children:[r.jsx(Be,{value:"all",children:"All Equipment"}),R.filter(z=>z!=="all").map(z=>r.jsx(Be,{value:z,children:z},z))]})]}),r.jsxs(Xt,{size:"small",sx:{minWidth:{xs:"100%",sm:150}},children:[r.jsx(En,{children:"Exercise Type"}),r.jsxs(cn,{value:h,onChange:z=>g(z.target.value),label:"Exercise Type",sx:{fontSize:"0.875rem",bgcolor:"background.default"},children:[r.jsx(Be,{value:"all",children:"All Types"}),O.filter(z=>z!=="all").map(z=>r.jsx(Be,{value:z,children:z},z))]})]})]})})]}),r.jsxs(A,{sx:{textAlign:"center",py:8},children:[r.jsx(M,{variant:"h6",color:"text.secondary",children:"No exercises found"}),r.jsx(M,{variant:"body2",color:"text.secondary",children:"Try adjusting your search or filters"})]})]})})]})},UD=y.createContext(),$D=()=>{const e=y.useContext(UD);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e},qD=({children:e})=>{const[t,n]=y.useState(()=>{try{return localStorage.getItem("themeMode")==="dark"?"dark":"light"}catch{return"light"}});y.useEffect(()=>{try{localStorage.setItem("themeMode",t)}catch(d){console.warn("Could not save theme preference",d)}},[t]),y.useEffect(()=>{const d=document.documentElement;t==="dark"?(d.style.setProperty("--color-bg","#1a202c"),d.style.setProperty("--color-surface","#2d3748"),d.style.setProperty("--color-surface-elevated","#374151"),d.style.setProperty("--color-text","#f7fafc"),d.style.setProperty("--color-text-light","#a0aec0"),d.style.setProperty("--color-border","rgba(255, 255, 255, 0.08)"),d.style.setProperty("--color-primary","#1db584"),d.style.setProperty("--color-secondary","#f6ad55")):(d.style.setProperty("--color-bg","#ffffff"),d.style.setProperty("--color-surface","#f8fafc"),d.style.setProperty("--color-surface-elevated","#f8fafc"),d.style.setProperty("--color-text","#1a202c"),d.style.setProperty("--color-text-light","#718096"),d.style.setProperty("--color-border","rgba(0, 0, 0, 0.06)"),d.style.setProperty("--color-primary","#1db584"),d.style.setProperty("--color-secondary","#f6ad55"))},[t]);const i=()=>{n(d=>d==="dark"?"light":"dark")},o=y.useMemo(()=>iP({palette:t==="dark"?{mode:"dark",primary:{main:"#1db584",light:"#4fd1aa",dark:"#169b70",contrastText:"#ffffff"},secondary:{main:"#f6ad55",light:"#f8c77e",dark:"#dd9a4a",contrastText:"#1a202c"},background:{default:"#1a202c",paper:"#2d3748"},text:{primary:"#f7fafc",secondary:"#a0aec0"},divider:"rgba(255, 255, 255, 0.08)",success:{main:"#48bb78",light:"#68d391",dark:"#38a169"},warning:{main:"#f6ad55",light:"#f8c77e",dark:"#dd9a4a"},error:{main:"#fc8181",light:"#feb2b2",dark:"#e53e3e"},info:{main:"#63b3ed",light:"#90cdf4",dark:"#4299e1"}}:{mode:"light",primary:{main:"#1db584",light:"#4fd1aa",dark:"#169b70",contrastText:"#ffffff"},secondary:{main:"#f6ad55",light:"#f8c77e",dark:"#dd9a4a",contrastText:"#1a202c"},background:{default:"#ffffff",paper:"#f8fafc"},text:{primary:"#1a202c",secondary:"#718096"},divider:"rgba(0, 0, 0, 0.06)",success:{main:"#38a169",light:"#48bb78",dark:"#2f855a"},warning:{main:"#dd6b20",light:"#ed8936",dark:"#c05621"},error:{main:"#e53e3e",light:"#fc8181",dark:"#c53030"},info:{main:"#3182ce",light:"#4299e1",dark:"#2b6cb0"}},shape:{borderRadius:12},typography:{fontFamily:"'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif",h1:{fontFamily:"'Montserrat', sans-serif",fontWeight:700,letterSpacing:"-0.02em"},h2:{fontFamily:"'Montserrat', sans-serif",fontWeight:700,letterSpacing:"-0.01em"},h3:{fontFamily:"'Montserrat', sans-serif",fontWeight:600},h4:{fontFamily:"'Montserrat', sans-serif",fontWeight:600},h5:{fontFamily:"'Montserrat', sans-serif",fontWeight:600},h6:{fontFamily:"'Montserrat', sans-serif",fontWeight:600},button:{textTransform:"none",fontWeight:600}},components:{MuiCssBaseline:{styleOverrides:{body:{scrollbarWidth:"thin",scrollbarColor:t==="dark"?"rgba(255,255,255,0.2) transparent":"rgba(0,0,0,0.2) transparent"}}},MuiCard:{styleOverrides:{root:{backgroundImage:"none",borderRadius:16,border:t==="dark"?"1px solid rgba(255, 255, 255, 0.06)":"1px solid rgba(0, 0, 0, 0.04)",transition:"box-shadow 0.2s ease, border-color 0.2s ease"}},defaultProps:{elevation:0}},MuiPaper:{styleOverrides:{root:{backgroundImage:"none",borderRadius:16}},defaultProps:{elevation:0}},MuiButton:{styleOverrides:{root:{borderRadius:12,padding:"10px 24px",fontSize:"0.95rem",fontWeight:600,boxShadow:"none",textTransform:"none","&:hover":{boxShadow:"none"},"&:active":{boxShadow:"none"}},contained:{"&:hover":{transform:"translateY(-1px)"},"&:active":{transform:"translateY(0)"}},containedPrimary:{backgroundColor:"#1db584",color:"#ffffff","&:hover":{backgroundColor:"#169b70"}},containedSecondary:{backgroundColor:"#f6ad55",color:"#1a202c","&:hover":{backgroundColor:"#dd9a4a"}},outlined:{borderWidth:2,"&:hover":{borderWidth:2}}},defaultProps:{disableElevation:!0,disableRipple:!0}},MuiIconButton:{styleOverrides:{root:{borderRadius:12,transition:"background-color 0.2s ease"}},defaultProps:{disableRipple:!0}},MuiChip:{styleOverrides:{root:{borderRadius:8,fontWeight:500}}},MuiTab:{styleOverrides:{root:{textTransform:"none",fontWeight:600,"&.Mui-selected":{}}},defaultProps:{disableRipple:!0}},MuiTabs:{styleOverrides:{indicator:{height:3,borderRadius:"3px 3px 0 0"}}},MuiDialog:{styleOverrides:{paper:{borderRadius:20,padding:8}}},MuiDialogTitle:{styleOverrides:{root:{fontSize:"1.25rem",fontWeight:600}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:12}}}},MuiSelect:{styleOverrides:{root:{borderRadius:12}}},MuiLinearProgress:{styleOverrides:{root:{borderRadius:8,height:8},bar:{borderRadius:8}}},MuiAccordion:{styleOverrides:{root:{borderRadius:"16px !important","&:before":{display:"none"},"&.Mui-expanded":{margin:0}}},defaultProps:{elevation:0}},MuiToggleButton:{styleOverrides:{root:{borderRadius:10,textTransform:"none",fontWeight:500}}},MuiAlert:{styleOverrides:{root:{borderRadius:12}}},MuiSnackbar:{styleOverrides:{root:{"& .MuiSnackbarContent-root":{borderRadius:12}}}}}}),[t]),c={mode:t,toggleTheme:i,theme:o};return r.jsx(UD.Provider,{value:c,children:e})};qD.propTypes={children:T.node.isRequired};const E$=e=>!e||e.trim().length===0?{valid:!1,error:"Display name is required"}:e.trim().length<2?{valid:!1,error:"Display name must be at least 2 characters"}:e.trim().length>50?{valid:!1,error:"Display name must be less than 50 characters"}:/^[a-zA-Z0-9\s\-']+$/.test(e)?{valid:!0}:{valid:!1,error:"Display name contains invalid characters"},fC=(e,t=500)=>e?e.length>t?{valid:!1,error:`Text must be less than ${t} characters`}:{valid:!0}:{valid:!0},Ig=e=>e?e.replace(/<[^>]*>/g,"").trim().replace(/\s+/g," "):"",D$=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown",M$=(e,t)=>{const n={profile:e,stats:t,exportedAt:new Date().toISOString()};return JSON.stringify(n,null,2)},A$=(e,t)=>{const n=M$(e,t),i=new Blob([n],{type:"application/json"}),o=URL.createObjectURL(i),c=document.createElement("a");c.href=o,c.download=`goodlift-profile-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(o)},YD=({open:e,onClose:t,onConfirm:n,resetInfo:i})=>{const[o,c]=y.useState(""),[d,f]=y.useState(!1),[h,g]=y.useState(null),m=o.toLowerCase()==="reset",b=async()=>{f(!0),g(null);try{await n(),c(""),t()}catch(j){g(j.message||"Failed to reset data. Please try again.")}finally{f(!1)}},v=()=>{d||(c(""),g(null),t())};return r.jsxs(Et,{open:e,onClose:v,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[r.jsx(zt,{sx:{pb:1},children:r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(aP,{color:"warning"}),r.jsx(M,{variant:"h6",component:"span",children:"Reset Personal Data"})]})}),r.jsxs(Dt,{children:[r.jsxs(kt,{severity:"warning",sx:{mb:2},children:["This action will delete your workout data and statistics. You will have"," ",r.jsx("strong",{children:"30 days"})," to recover your data if you change your mind."]}),r.jsxs(M,{variant:"subtitle1",fontWeight:600,gutterBottom:!0,sx:{mt:2},children:[r.jsx(_C,{color:"error",sx:{verticalAlign:"middle",mr:.5}}),"The following will be deleted:"]}),r.jsxs(wn,{dense:!0,sx:{bgcolor:"background.paper",borderRadius:1,mb:2},children:[i.totalWorkouts>0&&r.jsxs(it,{children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(Nn,{fontSize:"small"})}),r.jsx(St,{primary:`${i.totalWorkouts} workout${i.totalWorkouts!==1?"s":""}`,secondary:"Complete workout history"})]}),i.totalHiitSessions>0&&r.jsxs(it,{children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(rd,{fontSize:"small"})}),r.jsx(St,{primary:`${i.totalHiitSessions} HIIT session${i.totalHiitSessions!==1?"s":""}`})]}),i.totalCardioSessions>0&&r.jsxs(it,{children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(Ui,{fontSize:"small"})}),r.jsx(St,{primary:`${i.totalCardioSessions} cardio session${i.totalCardioSessions!==1?"s":""}`})]}),i.totalStretchSessions>0&&r.jsxs(it,{children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(gi,{fontSize:"small"})}),r.jsx(St,{primary:`${i.totalStretchSessions} stretch session${i.totalStretchSessions!==1?"s":""}`})]}),i.totalPlans>0&&r.jsxs(it,{children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(_u,{fontSize:"small"})}),r.jsx(St,{primary:`${i.totalPlans} workout plan${i.totalPlans!==1?"s":""}`})]}),i.totalFavoriteWorkouts>0&&r.jsxs(it,{children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(pi,{fontSize:"small"})}),r.jsx(St,{primary:`${i.totalFavoriteWorkouts} favorite workout${i.totalFavoriteWorkouts!==1?"s":""}`})]}),i.totalPinnedExercises>0&&r.jsxs(it,{children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(oP,{fontSize:"small"})}),r.jsx(St,{primary:`${i.totalPinnedExercises} pinned exercise${i.totalPinnedExercises!==1?"s":""}`})]}),r.jsx(it,{children:r.jsx(St,{primary:"All statistics and achievements",secondary:"Streaks, PRs, total volume, etc."})}),r.jsx(it,{children:r.jsx(St,{primary:"Exercise weights and target reps",secondary:"Saved progress tracking data"})})]}),r.jsx(ln,{sx:{my:2}}),r.jsxs(M,{variant:"subtitle1",fontWeight:600,gutterBottom:!0,children:[r.jsx(Bl,{color:"success",sx:{verticalAlign:"middle",mr:.5}}),"The following will be preserved:"]}),r.jsxs(wn,{dense:!0,sx:{bgcolor:"background.paper",borderRadius:1,mb:2},children:[r.jsx(it,{children:r.jsx(St,{primary:"Login credentials and authentication"})}),r.jsx(it,{children:r.jsx(St,{primary:"Profile information (name, email, avatar)"})}),r.jsx(it,{children:r.jsx(St,{primary:"App preferences and settings"})})]}),r.jsx(kt,{severity:"info",sx:{mb:2},children:'Your data will be backed up for 30 days. Use the "Recover Data" option to restore it within this period.'}),h&&r.jsx(kt,{severity:"error",sx:{mb:2},children:h}),r.jsxs(A,{sx:{mt:2},children:[r.jsxs(M,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["To confirm, type ",r.jsx("strong",{children:"RESET"})," below:"]}),r.jsx(Je,{fullWidth:!0,size:"small",value:o,onChange:j=>c(j.target.value),placeholder:"Type RESET to confirm",disabled:d,autoComplete:"off",sx:{mt:1}})]})]}),r.jsxs(Nt,{sx:{px:3,pb:2},children:[r.jsx(Ce,{onClick:v,disabled:d,children:"Cancel"}),r.jsx(Ce,{variant:"contained",color:"error",onClick:b,disabled:!m||d,startIcon:d?r.jsx(Ma,{size:20}):null,children:d?"Resetting...":"Reset Data"})]})]})};YD.propTypes={open:T.bool.isRequired,onClose:T.func.isRequired,onConfirm:T.func.isRequired,resetInfo:T.shape({totalWorkouts:T.number.isRequired,totalHiitSessions:T.number.isRequired,totalCardioSessions:T.number.isRequired,totalStretchSessions:T.number.isRequired,totalPlans:T.number.isRequired,totalFavoriteWorkouts:T.number.isRequired,totalFavoriteExercises:T.number.isRequired,totalPinnedExercises:T.number.isRequired,hasData:T.bool.isRequired}).isRequired};const GD=({open:e,onClose:t,onRecover:n,backup:i})=>{const[o,c]=y.useState(!1),[d,f]=y.useState(null);if(!i)return null;const h=new Date(i.timestamp),g=new Date(i.expiresAt),m=Math.ceil((i.expiresAt-Date.now())/(1e3*60*60*24)),b=m<=7,v=(i.data.workoutHistory||[]).length,j=(i.data.hiitSessions||[]).length,E=(i.data.cardioSessions||[]).length,S=(i.data.stretchSessions||[]).length,w=(i.data.workoutPlans||[]).length,C=(i.data.favoriteWorkouts||[]).length,k=async()=>{c(!0),f(null);try{await n(),t()}catch(O){f(O.message||"Failed to recover data. Please try again.")}finally{c(!1)}},R=()=>{o||(f(null),t())};return r.jsxs(Et,{open:e,onClose:R,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[r.jsx(zt,{sx:{pb:1},children:r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(Ng,{color:"primary"}),r.jsx(M,{variant:"h6",component:"span",children:"Recover Your Data"})]})}),r.jsxs(Dt,{children:[r.jsxs(kt,{severity:b?"warning":"info",sx:{mb:2},icon:r.jsx(lP,{}),children:[r.jsxs(M,{variant:"body2",children:[r.jsx("strong",{children:"Backup created:"})," ",h.toLocaleString()]}),r.jsxs(M,{variant:"body2",children:[r.jsx("strong",{children:"Expires:"})," ",g.toLocaleDateString()," ",r.jsx(Ne,{label:`${m} day${m!==1?"s":""} remaining`,size:"small",color:b?"warning":"default",sx:{ml:1}})]})]}),r.jsx(M,{variant:"subtitle1",fontWeight:600,gutterBottom:!0,children:"Your backup contains:"}),r.jsxs(wn,{dense:!0,sx:{bgcolor:"background.paper",borderRadius:1,mb:2},children:[v>0&&r.jsxs(it,{children:[r.jsx(Nn,{fontSize:"small",sx:{mr:2,color:"text.secondary"}}),r.jsx(St,{primary:`${v} workout${v!==1?"s":""}`})]}),j>0&&r.jsxs(it,{children:[r.jsx(rd,{fontSize:"small",sx:{mr:2,color:"text.secondary"}}),r.jsx(St,{primary:`${j} HIIT session${j!==1?"s":""}`})]}),E>0&&r.jsxs(it,{children:[r.jsx(Ui,{fontSize:"small",sx:{mr:2,color:"text.secondary"}}),r.jsx(St,{primary:`${E} cardio session${E!==1?"s":""}`})]}),S>0&&r.jsxs(it,{children:[r.jsx(gi,{fontSize:"small",sx:{mr:2,color:"text.secondary"}}),r.jsx(St,{primary:`${S} stretch session${S!==1?"s":""}`})]}),w>0&&r.jsxs(it,{children:[r.jsx(_u,{fontSize:"small",sx:{mr:2,color:"text.secondary"}}),r.jsx(St,{primary:`${w} workout plan${w!==1?"s":""}`})]}),C>0&&r.jsxs(it,{children:[r.jsx(pi,{fontSize:"small",sx:{mr:2,color:"text.secondary"}}),r.jsx(St,{primary:`${C} favorite workout${C!==1?"s":""}`})]}),r.jsx(it,{children:r.jsx(St,{primary:"All statistics and achievements",secondary:"Including streaks, PRs, and total volume"})}),r.jsx(it,{children:r.jsx(St,{primary:"Exercise weights and target reps",secondary:"Your saved progress tracking data"})})]}),r.jsx(kt,{severity:"warning",sx:{mb:2},children:r.jsxs(M,{variant:"body2",children:[r.jsx("strong",{children:"Warning:"})," Recovering this backup will replace your current data. Any workouts or progress you've logged since the reset will be lost."]})}),d&&r.jsx(kt,{severity:"error",sx:{mb:2},children:d})]}),r.jsxs(Nt,{sx:{px:3,pb:2},children:[r.jsx(Ce,{onClick:R,disabled:o,children:"Cancel"}),r.jsx(Ce,{variant:"contained",color:"primary",onClick:k,disabled:o,startIcon:o?r.jsx(Ma,{size:20}):r.jsx(Ng,{}),children:o?"Recovering...":"Recover Data"})]})]})};GD.propTypes={open:T.bool.isRequired,onClose:T.func.isRequired,onRecover:T.func.isRequired,backup:T.shape({timestamp:T.number.isRequired,expiresAt:T.number.isRequired,data:T.object.isRequired})};const R$=["Communication","Mental Health","Learning","Volunteering","New Experiences","Physical","Nature","Personal Growth","Creativity","Seeking Connection","Media","Maintenance"],P$={categories:R$},O$=()=>P$.categories,R0="goodlift_data_backup",P0="goodlift_guest_data_backup",I$=30,W$=I$*24*60*60*1e3,QD=()=>{const e={};return $e()?(e.workoutHistory=Mt("workout_history")||[],e.userStats=Mt("user_stats")||null,e.exerciseWeights=Mt("exercise_weights")||{},e.exerciseTargetReps=Mt("exercise_target_reps")||{},e.hiitSessions=Mt("hiit_sessions")||[],e.cardioSessions=Mt("cardio_sessions")||[],e.stretchSessions=Mt("stretch_sessions")||[],e.workoutPlans=Mt("workout_plans")||[],e.activePlan=Mt("active_plan")||null,e.favoriteWorkouts=Mt("favorite_workouts")||[],e.favoriteExercises=Mt("favorite_exercises")||[],e.pinnedExercises=Mt("pinned_exercises")||[],e.unlockedAchievements=Mt("unlocked_achievements")||[],e.totalPRs=Mt("total_prs")||0,e.totalVolume=Mt("total_volume")||0):Object.entries({workoutHistory:"goodlift_workout_history",userStats:"goodlift_user_stats",exerciseWeights:"goodlift_exercise_weights",exerciseTargetReps:"goodlift_exercise_target_reps",hiitSessions:"goodlift_hiit_sessions",cardioSessions:"goodlift_cardio_sessions",stretchSessions:"goodlift_stretch_sessions",workoutPlans:"goodlift_workout_plans",activePlan:"goodlift_active_plan",favoriteWorkouts:"goodlift_favorite_workouts",favoriteExercises:"goodlift_favorite_exercises",pinnedExercises:"goodlift_pinned_exercises",unlockedAchievements:"goodlift_unlocked_achievements",totalPRs:"goodlift_total_prs",totalVolume:"goodlift_total_volume"}).forEach(([n,i])=>{try{const o=localStorage.getItem(i);o?e[n]=JSON.parse(o):e[n]=null}catch(o){console.error(`Error reading ${i}:`,o),e[n]=null}}),e},_$=()=>{$e()?(mt("workout_history",[]),mt("user_stats",{totalWorkouts:0,totalTime:0,totalHiitTime:0,totalCardioTime:0,totalStretchTime:0,currentStreak:0,longestStreak:0,totalPRs:0,totalVolume:0}),mt("exercise_weights",{}),mt("exercise_target_reps",{}),mt("hiit_sessions",[]),mt("cardio_sessions",[]),mt("stretch_sessions",[]),mt("workout_plans",[]),mt("active_plan",null),mt("favorite_workouts",[]),mt("favorite_exercises",[]),mt("pinned_exercises",[]),mt("unlocked_achievements",[]),mt("total_prs",0),mt("total_volume",0)):["goodlift_workout_history","goodlift_user_stats","goodlift_exercise_weights","goodlift_exercise_target_reps","goodlift_hiit_sessions","goodlift_cardio_sessions","goodlift_stretch_sessions","goodlift_workout_plans","goodlift_active_plan","goodlift_favorite_workouts","goodlift_favorite_exercises","goodlift_pinned_exercises","goodlift_unlocked_achievements","goodlift_total_prs","goodlift_total_volume"].forEach(t=>{try{t==="goodlift_user_stats"?localStorage.setItem(t,JSON.stringify({totalWorkouts:0,totalTime:0,totalHiitTime:0,totalCardioTime:0,totalStretchTime:0,currentStreak:0,longestStreak:0,totalPRs:0,totalVolume:0})):t==="goodlift_exercise_weights"||t==="goodlift_exercise_target_reps"?localStorage.setItem(t,JSON.stringify({})):t==="goodlift_active_plan"?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify([]))}catch(n){console.error(`Error clearing ${t}:`,n)}})},z$=e=>{if(!e||!e.data)throw new Error("Invalid backup data");const{data:t}=e;if($e())Object.entries(t).forEach(([n,i])=>{i!=null&&mt(n.replace(/([A-Z])/g,"_$1").toLowerCase(),i)});else{const n={workoutHistory:"goodlift_workout_history",userStats:"goodlift_user_stats",exerciseWeights:"goodlift_exercise_weights",exerciseTargetReps:"goodlift_exercise_target_reps",hiitSessions:"goodlift_hiit_sessions",cardioSessions:"goodlift_cardio_sessions",stretchSessions:"goodlift_stretch_sessions",workoutPlans:"goodlift_workout_plans",activePlan:"goodlift_active_plan",favoriteWorkouts:"goodlift_favorite_workouts",favoriteExercises:"goodlift_favorite_exercises",pinnedExercises:"goodlift_pinned_exercises",unlockedAchievements:"goodlift_unlocked_achievements",totalPRs:"goodlift_total_prs",totalVolume:"goodlift_total_volume"};Object.entries(t).forEach(([i,o])=>{const c=n[i];if(c&&o!==null&&o!==void 0)try{localStorage.setItem(c,JSON.stringify(o))}catch(d){console.error(`Error restoring ${c}:`,d)}})}},N$=async()=>{try{const t={data:QD(),timestamp:Date.now(),expiresAt:Date.now()+W$,version:1},n=$e()?P0:R0;localStorage.setItem(n,JSON.stringify(t));const i=Mo();if(i&&!$e())try{await Zt(i,{dataBackup:t})}catch(o){console.error("Error saving backup to Firebase:",o)}return t}catch(e){throw console.error("Error creating backup:",e),e}},Th=async()=>{try{const e=Mo();if(e&&!$e())try{const o=await Rs(e);if(o?.dataBackup)return o.dataBackup.expiresAt>Date.now()?o.dataBackup:(await Mx(),null)}catch(o){console.error("Error loading backup from Firebase:",o)}const t=$e()?P0:R0,n=localStorage.getItem(t);if(!n)return null;const i=JSON.parse(n);return i.expiresAt<=Date.now()?(await Mx(),null):i}catch(e){return console.error("Error getting backup:",e),null}},Mx=async()=>{try{const e=$e()?P0:R0;localStorage.removeItem(e);const t=Mo();if(t&&!$e())try{await Zt(t,{dataBackup:null})}catch(n){console.error("Error deleting backup from Firebase:",n)}}catch(e){throw console.error("Error deleting backup:",e),e}},L$=async()=>{try{const e=await N$();_$();const t=Mo();if(t&&!$e())try{await Zt(t,{workoutHistory:[],userStats:{totalWorkouts:0,totalTime:0,totalHiitTime:0,totalCardioTime:0,totalStretchTime:0,currentStreak:0,longestStreak:0,totalPRs:0,totalVolume:0},exerciseWeights:{},exerciseTargetReps:{},hiitSessions:[],cardioSessions:[],stretchSessions:[],workoutPlans:[],activePlanId:null})}catch(n){console.error("Error syncing reset to Firebase:",n)}return{success:!0,backup:e,message:"Data reset successfully. You have 30 days to recover your data."}}catch(e){return console.error("Error resetting user data:",e),{success:!1,message:"Failed to reset data. Please try again.",error:e}}},F$=async()=>{try{const e=await Th();if(!e)return{success:!1,message:"No backup found or backup has expired."};z$(e);const t=Mo();if(t&&!$e())try{await Zt(t,e.data)}catch(n){console.error("Error syncing recovered data to Firebase:",n)}return await Mx(),{success:!0,message:"Data recovered successfully!"}}catch(e){return console.error("Error recovering user data:",e),{success:!1,message:"Failed to recover data. Please try again.",error:e}}},KD=async()=>{try{return await Th()===null}catch(e){return console.error("Error cleaning up expired backups:",e),!1}},Qf=()=>{const e=QD(),t=(e.workoutHistory||[]).length,n=(e.hiitSessions||[]).length,i=(e.cardioSessions||[]).length,o=(e.stretchSessions||[]).length,c=(e.workoutPlans||[]).length,d=(e.favoriteWorkouts||[]).length,f=(e.favoriteExercises||[]).length,h=(e.pinnedExercises||[]).length;return{totalWorkouts:t,totalHiitSessions:n,totalCardioSessions:i,totalStretchSessions:o,totalPlans:c,totalFavoriteWorkouts:d,totalFavoriteExercises:f,totalPinnedExercises:h,hasData:t>0||n>0||i>0||o>0||c>0||d>0}},XD=({onNavigate:e})=>{const{mode:t,toggleTheme:n}=$D(),{preferences:i,updatePreference:o}=S0(),{profile:c,stats:d}=A0(),{isGuest:f}=Ao(),h=cr(`(min-width: ${Xl.desktop}px)`),{resetWeekCycle:g}=Po(),[m,b]=y.useState(()=>{try{const ne=localStorage.getItem("audioVolume");return ne?parseFloat(ne):.3}catch{return .3}}),[v,j]=y.useState(on.isMutedState()),[E,S]=y.useState(!1),[w,C]=y.useState(!1),[k,R]=y.useState(!1),[O,I]=y.useState(null),[P,W]=y.useState(null),[L,z]=y.useState(!1),[q,B]=y.useState(""),[U,re]=y.useState("success"),[H]=y.useState(()=>O$()),[$,N]=y.useState(()=>{try{const ne=localStorage.getItem("goodlift_stretch_prefs");return ne?JSON.parse(ne):{showWarmup:!0,showCooldown:!0,defaultWarmupDuration:5,defaultCooldownDuration:5}}catch{return{showWarmup:!0,showCooldown:!0,defaultWarmupDuration:5,defaultCooldownDuration:5}}});y.useEffect(()=>{try{localStorage.setItem("audioVolume",m.toString())}catch(ne){console.warn("Could not save volume preference",ne)}},[m]),y.useEffect(()=>{try{localStorage.setItem("goodlift_stretch_prefs",JSON.stringify($))}catch(ne){console.warn("Could not save stretch preferences",ne)}},[$]),y.useEffect(()=>{(async()=>{await KD();const de=await Th();I(de),W(Qf())})()},[]);const V=(ne,de)=>{b(de),de>0&&v&&(on.setMuted(!1),j(!1)),de===0&&!v&&(on.setMuted(!0),j(!0))},F=()=>{n(),v||on.playTransitionBeep()},X=()=>{m>0&&!v&&on.playBeep(800,200,m)},oe=(ne,de)=>{N(K=>({...K,[ne]:de}))},ue=()=>{A$(c,d)},Te=()=>{W(Qf()),S(!0)},De=()=>{S(!1)},ee=async()=>{const ne=await L$();ne.success?(I(ne.backup),W(Qf()),B(ne.message),re("success"),z(!0),setTimeout(()=>{window.location.reload()},2e3)):(B(ne.message),re("error"),z(!0))},G=async()=>{const ne=await Th();I(ne),C(!0)},ae=()=>{C(!1)},ve=async()=>{const ne=await F$();ne.success?(I(null),W(Qf()),B(ne.message),re("success"),z(!0),setTimeout(()=>{window.location.reload()},2e3)):(B(ne.message),re("error"),z(!0))},te=()=>{z(!1)},ye=ne=>{e&&e(ne)},Se=()=>{R(!0)},Y=()=>{R(!1)},ce=async()=>{R(!1);try{await g(),B("Week cycle reset to Week 1. Automatic workout assignment re-enabled."),re("success"),z(!0)}catch(ne){console.error("Error resetting week cycle:",ne),B("Failed to reset week cycle"),re("error"),z(!0)}},Ae=ne=>{const de=i.wellnessCategories||[],K=de.includes(ne)?de.filter(Z=>Z!==ne):[...de,ne];o("wellnessCategories",K)};return r.jsxs(A,{sx:{minHeight:"100vh",padding:{xs:1.5,sm:2,md:3,lg:4},paddingTop:{xs:.5,sm:1,md:2},paddingBottom:{xs:"80px",sm:3,md:4},background:ne=>ne.palette.background.default,overflowX:"hidden",width:"100%",boxSizing:"border-box"},children:[r.jsxs(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[r.jsx(A,{sx:{display:"flex",justifyContent:"center",mb:1.5},children:r.jsx("img",{src:"/goodlift/goodlift-logo.svg",alt:"GoodLift",style:{height:"40px",width:"auto"}})}),r.jsx(A,{sx:{maxWidth:h?"900px":"600px",margin:"0 auto"},children:r.jsxs(A,{sx:{display:h?"grid":"block",gridTemplateColumns:h?"repeat(2, 1fr)":"1fr",gap:1.5},children:[r.jsx(Ge,{sx:{borderRadius:2,boxShadow:0},children:r.jsxs(at,{sx:{p:0},children:[r.jsx(M,{variant:"overline",sx:{px:2,pt:1.5,pb:.5,display:"block",fontWeight:700,color:"text.secondary",letterSpacing:"0.1em",fontSize:"0.7rem"},children:"User Profile"}),r.jsx(wn,{sx:{py:0},children:r.jsx(it,{disablePadding:!0,children:r.jsxs(Ur,{onClick:()=>ye("profile"),sx:{py:1},children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(cP,{sx:{color:"primary.main"}})}),r.jsx(St,{primary:"Profile Information",primaryTypographyProps:{fontWeight:500}}),r.jsx(ii,{sx:{color:"text.secondary"}})]})})})]})}),r.jsx(Ge,{sx:{borderRadius:2,boxShadow:0},children:r.jsxs(at,{sx:{p:0},children:[r.jsx(M,{variant:"overline",sx:{px:2,pt:1.5,pb:.5,display:"block",fontWeight:700,color:"text.secondary",letterSpacing:"0.1em",fontSize:"0.7rem"},children:"Exercise Database"}),r.jsx(wn,{sx:{py:0},children:r.jsx(it,{disablePadding:!0,children:r.jsxs(Ur,{onClick:()=>ye("exercise-list"),sx:{py:1},children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(uP,{sx:{color:"primary.main"}})}),r.jsx(St,{primary:"Browse Exercises",primaryTypographyProps:{fontWeight:500}}),r.jsx(ii,{sx:{color:"text.secondary"}})]})})})]})}),r.jsx(Ge,{sx:{borderRadius:2,boxShadow:0},children:r.jsxs(at,{sx:{p:0},children:[r.jsx(M,{variant:"overline",sx:{px:2,pt:1.5,pb:.5,display:"block",fontWeight:700,color:"text.secondary",letterSpacing:"0.1em",fontSize:"0.7rem"},children:"Workout Scheduling"}),r.jsxs(wn,{sx:{py:0},children:[r.jsx(it,{disablePadding:!0,children:r.jsxs(Ur,{onClick:()=>ye("edit-weekly-schedule"),sx:{py:1},children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(Da,{sx:{color:"primary.main"}})}),r.jsx(St,{primary:"Edit Weekly Schedule",primaryTypographyProps:{fontWeight:500}}),r.jsx(ii,{sx:{color:"text.secondary"}})]})}),r.jsx(ln,{component:"li"}),r.jsx(it,{disablePadding:!0,children:r.jsxs(Ur,{onClick:Se,sx:{py:1},children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(_u,{sx:{color:"primary.main"}})}),r.jsx(St,{primary:"Reset Week Counter",primaryTypographyProps:{fontWeight:500}}),r.jsx(ii,{sx:{color:"text.secondary"}})]})})]})]})}),r.jsx(Ge,{sx:{borderRadius:2,boxShadow:0},children:r.jsxs(at,{sx:{p:0},children:[r.jsx(M,{variant:"overline",sx:{px:2,pt:1.5,pb:.5,display:"block",fontWeight:700,color:"text.secondary",letterSpacing:"0.1em",fontSize:"0.7rem"},children:"App Preferences"}),r.jsxs(wn,{sx:{py:0},children:[r.jsxs(it,{sx:{flexDirection:"column",alignItems:"flex-start",py:1.5},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",width:"100%",mb:.5},children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(dP,{sx:{color:"primary.main"}})}),r.jsx(M,{variant:"body2",fontWeight:500,children:"Unit System"})]}),r.jsx(Xt,{size:"small",sx:{ml:5,minWidth:160},children:r.jsxs(cn,{value:i.units,onChange:ne=>o("units",ne.target.value),children:[r.jsx(Be,{value:"imperial",children:"Imperial (lbs, in)"}),r.jsx(Be,{value:"metric",children:"Metric (kg, cm)"})]})})]}),r.jsx(ln,{component:"li"}),r.jsxs(it,{sx:{flexDirection:"column",alignItems:"flex-start",py:1.5},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",width:"100%",mb:.5},children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(Nn,{sx:{color:"primary.main"}})}),r.jsx(M,{variant:"body2",fontWeight:500,children:"Barbell Weight"})]}),r.jsx(Xt,{size:"small",sx:{ml:5,minWidth:160},children:r.jsx(cn,{value:i.barbellWeight||45,onChange:ne=>o("barbellWeight",ne.target.value),children:Array.from({length:5},(ne,de)=>25+de*5).map(ne=>r.jsxs(Be,{value:ne,children:[ne," lbs"]},ne))})})]}),r.jsx(ln,{component:"li"}),r.jsxs(it,{sx:{py:1},children:[r.jsx(kn,{sx:{minWidth:40},children:t==="dark"?r.jsx(fP,{sx:{color:"primary.main"}}):r.jsx(hP,{sx:{color:"primary.main"}})}),r.jsx(St,{primary:"Theme",primaryTypographyProps:{fontWeight:500}}),r.jsx(Gc,{checked:t==="light",onChange:F,color:"primary"})]}),r.jsx(ln,{component:"li"}),r.jsxs(it,{sx:{flexDirection:"column",alignItems:"flex-start",py:1.5},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",width:"100%",mb:.5},children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(WC,{sx:{color:"primary.main"}})}),r.jsx(M,{variant:"body2",fontWeight:500,children:"Sound Effects"})]}),r.jsx(A,{sx:{ml:5,width:"calc(100% - 40px)"},children:r.jsx(kC,{value:m,onChange:V,onChangeCommitted:X,min:0,max:1,step:.1,valueLabelDisplay:"auto",valueLabelFormat:ne=>`${Math.round(ne*100)}%`,sx:{width:180,"& .MuiSlider-thumb":{width:16,height:16},"& .MuiSlider-track":{height:4},"& .MuiSlider-rail":{height:4}}})})]}),r.jsx(ln,{component:"li"}),r.jsxs(it,{sx:{flexDirection:"column",alignItems:"flex-start",py:1.5},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between"},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center"},children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(gi,{sx:{color:"primary.main"}})}),r.jsx(M,{variant:"body2",fontWeight:500,children:"Warmup Reminders"})]}),r.jsx(Gc,{checked:$.showWarmup,onChange:ne=>oe("showWarmup",ne.target.checked),color:"primary"})]}),$.showWarmup&&r.jsx(Xt,{size:"small",sx:{ml:5,mt:.5,minWidth:160},children:r.jsxs(cn,{value:$.defaultWarmupDuration,onChange:ne=>oe("defaultWarmupDuration",ne.target.value),children:[r.jsx(Be,{value:5,children:"5 minutes"}),r.jsx(Be,{value:7,children:"7 minutes"}),r.jsx(Be,{value:10,children:"10 minutes"})]})})]}),r.jsx(ln,{component:"li"}),r.jsxs(it,{sx:{flexDirection:"column",alignItems:"flex-start",py:1.5},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between"},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center"},children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(Nn,{sx:{color:"primary.main"}})}),r.jsx(M,{variant:"body2",fontWeight:500,children:"Cooldown Reminders"})]}),r.jsx(Gc,{checked:$.showCooldown,onChange:ne=>oe("showCooldown",ne.target.checked),color:"primary"})]}),$.showCooldown&&r.jsx(Xt,{size:"small",sx:{ml:5,mt:.5,minWidth:160},children:r.jsxs(cn,{value:$.defaultCooldownDuration,onChange:ne=>oe("defaultCooldownDuration",ne.target.value),children:[r.jsx(Be,{value:5,children:"5 minutes"}),r.jsx(Be,{value:7,children:"7 minutes"}),r.jsx(Be,{value:10,children:"10 minutes"})]})})]})]})]})}),r.jsx(Ge,{sx:{borderRadius:2,boxShadow:0},children:r.jsxs(at,{sx:{p:0},children:[r.jsx(M,{variant:"overline",sx:{px:2,pt:1.5,pb:.5,display:"block",fontWeight:700,color:"text.secondary",letterSpacing:"0.1em",fontSize:"0.7rem"},children:"Wellness & Notifications"}),r.jsxs(wn,{sx:{py:0},children:[r.jsx(it,{sx:{flexDirection:"column",alignItems:"flex-start",py:1.5},children:r.jsxs(A,{sx:{display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between"},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center"},children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(pP,{sx:{color:"primary.main"}})}),r.jsx(M,{variant:"body2",fontWeight:500,children:"Daily Wellness Tasks"})]}),r.jsx(Gc,{checked:i.dailyWellnessTasksEnabled||!1,onChange:ne=>o("dailyWellnessTasksEnabled",ne.target.checked),color:"primary"})]})}),r.jsx(ln,{component:"li"}),i.dailyWellnessTasksEnabled&&r.jsxs(r.Fragment,{children:[r.jsxs(it,{sx:{flexDirection:"column",alignItems:"flex-start",py:1.5},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",width:"100%",mb:.5},children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(mP,{sx:{color:"primary.main"}})}),r.jsx(M,{variant:"body2",fontWeight:500,children:"Relationship Status"})]}),r.jsx(Xt,{size:"small",sx:{ml:5,minWidth:160},children:r.jsxs(cn,{value:i.relationshipStatus||"All",onChange:ne=>o("relationshipStatus",ne.target.value),children:[r.jsx(Be,{value:"All",children:"All"}),r.jsx(Be,{value:"Single",children:"Single"}),r.jsx(Be,{value:"In Relationship",children:"In Relationship"})]})})]}),r.jsx(ln,{component:"li"}),r.jsxs(it,{sx:{flexDirection:"column",alignItems:"flex-start",py:1.5},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",width:"100%",mb:1},children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(gP,{sx:{color:"primary.main"}})}),r.jsx(M,{variant:"body2",fontWeight:500,children:"Wellness Categories"})]}),r.jsxs(A,{sx:{ml:5,width:"calc(100% - 40px)"},children:[r.jsx(M,{variant:"caption",color:"text.secondary",sx:{mb:1,display:"block"},children:"Select categories for personalized wellness tasks"}),r.jsx(Le,{spacing:.5,children:H.map(ne=>r.jsx(IC,{control:r.jsx(Gc,{size:"small",checked:(i.wellnessCategories||[]).includes(ne),onChange:()=>Ae(ne),color:"primary"}),label:r.jsx(M,{variant:"caption",children:ne}),sx:{m:0}},ne))})]})]}),r.jsx(ln,{component:"li"})]})]})]})}),r.jsx(Ge,{sx:{borderRadius:2,boxShadow:0},children:r.jsxs(at,{sx:{p:0},children:[r.jsx(M,{variant:"overline",sx:{px:2,pt:1.5,pb:.5,display:"block",fontWeight:700,color:"text.secondary",letterSpacing:"0.1em",fontSize:"0.7rem"},children:"Data & Privacy"}),r.jsxs(wn,{sx:{py:0},children:[r.jsx(it,{disablePadding:!0,children:r.jsxs(Ur,{onClick:ue,sx:{py:1},children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(RC,{sx:{color:"primary.main"}})}),r.jsx(St,{primary:"Export Data",primaryTypographyProps:{fontWeight:500}})]})}),r.jsx(ln,{component:"li"}),O&&r.jsxs(r.Fragment,{children:[r.jsx(it,{disablePadding:!0,children:r.jsxs(Ur,{onClick:G,sx:{py:1},children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(Ng,{sx:{color:"success.main"}})}),r.jsx(St,{primary:"Recover Data",primaryTypographyProps:{fontWeight:500}}),r.jsx(ii,{sx:{color:"text.secondary"}})]})}),r.jsx(ln,{component:"li"})]}),r.jsx(it,{disablePadding:!0,children:r.jsxs(Ur,{onClick:Te,disabled:!P?.hasData,sx:{py:1},children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(xP,{sx:{color:P?.hasData?"error.main":"text.disabled"}})}),r.jsx(St,{primary:"Reset Personal Data",primaryTypographyProps:{fontWeight:500}}),r.jsx(ii,{sx:{color:"text.secondary"}})]})}),r.jsx(ln,{component:"li"}),r.jsxs(it,{sx:{flexDirection:"column",alignItems:"flex-start",py:1.5},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",width:"100%",mb:.5},children:[r.jsx(kn,{sx:{minWidth:40},children:r.jsx(yP,{sx:{color:"primary.main"}})}),r.jsx(M,{variant:"body2",fontWeight:500,children:"Privacy"})]}),r.jsx(A,{sx:{ml:5,width:"calc(100% - 40px)"},children:f?r.jsx(kt,{severity:"info",sx:{py:.5,fontSize:"0.8rem"},children:"Create an account to access cloud sync and data privacy features"}):r.jsx(kt,{severity:"success",sx:{py:.5,fontSize:"0.8rem"},children:"Your data is securely stored in Firebase and synced across your devices"})})]})]})]})}),r.jsx(A,{sx:{mt:2,gridColumn:h?"1 / -1":"auto"},children:r.jsx(M,{variant:"body2",color:"text.secondary",sx:{textAlign:"center"},children:"Your preferences are saved automatically"})})]})})]}),P&&r.jsx(YD,{open:E,onClose:De,onConfirm:ee,resetInfo:P}),O&&r.jsx(GD,{open:w,onClose:ae,onRecover:ve,backup:O}),r.jsxs(Et,{open:k,onClose:Y,maxWidth:"xs",fullWidth:!0,children:[r.jsx(zt,{children:"Reset Week Counter?"}),r.jsx(Dt,{children:r.jsx(zC,{children:"Are you sure you want to reset the week counter back to Week 1? This will re-enable automatic workout assignment."})}),r.jsxs(Nt,{children:[r.jsx(Ce,{onClick:Y,color:"primary",children:"Cancel"}),r.jsx(Ce,{onClick:ce,color:"primary",variant:"contained",children:"Continue"})]})]}),r.jsx(Or,{open:L,autoHideDuration:6e3,onClose:te,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:r.jsx(kt,{onClose:te,severity:U,sx:{width:"100%"},children:q})})]})};XD.propTypes={onNavigate:T.func};const Kf=()=>"/goodlift/",ZD=[{id:"doggo-1",url:`${Kf()}avatars/doggo-1.jpeg`,label:"Percy"},{id:"doggo-2",url:`${Kf()}avatars/doggo-2.jpeg`,label:"Leo"},{id:"doggo-3",url:`${Kf()}avatars/doggo-3.jpeg`,label:"Monty"},{id:"doggo-4",url:`${Kf()}avatars/doggo-4.jpeg`,label:"Whiskey"}],B$=e=>e?e.startsWith("doggo-"):!1,hC=e=>{const t=ZD.find(n=>n.id===e);return t?t.url:null},JD=({open:e,onClose:t,onSelect:n,currentAvatar:i})=>{const[o,c]=y.useState(i),d=m=>{c(m)},f=()=>{o&&(n(o),t())},h=()=>{c(i),t()},g=m=>{const b=o===m.id;return r.jsx(Kt,{item:!0,xs:6,sm:3,children:r.jsxs(A,{onClick:()=>d(m.id),sx:{cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:1,p:1,borderRadius:2,border:2,borderColor:b?"primary.main":"transparent",bgcolor:b?"action.selected":"transparent",transition:"all 0.2s","&:hover":{bgcolor:"action.hover"}},children:[r.jsx(Lg,{src:m.url,sx:{width:80,height:80}}),r.jsx(M,{variant:"caption",color:"text.secondary",children:m.label})]})},m.id)};return r.jsxs(Et,{open:e,onClose:h,maxWidth:"sm",fullWidth:!0,children:[r.jsx(zt,{children:r.jsxs(A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsx(M,{variant:"h6",children:"Choose Dog Avatar"}),r.jsx(Ie,{onClick:h,size:"small",children:r.jsx(Yr,{})})]})}),r.jsx(Dt,{children:r.jsxs(A,{sx:{mt:2},children:[r.jsx(M,{variant:"body2",color:"text.secondary",gutterBottom:!0,sx:{mb:2},children:"Select a doggo as your avatar"}),r.jsx(Kt,{container:!0,spacing:2,children:ZD.map(m=>g(m))})]})}),r.jsxs(Nt,{sx:{p:2,pt:0},children:[r.jsx(Ce,{onClick:h,color:"inherit",children:"Cancel"}),r.jsx(Ce,{onClick:f,variant:"contained",disabled:!o,children:"Save"})]})]})};JD.propTypes={open:T.bool.isRequired,onClose:T.func.isRequired,onSelect:T.func.isRequired,currentAvatar:T.string};const V$=()=>{const{profile:e,stats:t,loading:n,saveProfile:i,updateProfile:o,getProfileCompletion:c}=A0(),[d,f]=y.useState(!1),[h,g]=y.useState(!1),[m,b]=y.useState(e),[v,j]=y.useState({}),[E,S]=y.useState(null);y.useEffect(()=>{b(e)},[e]);const w=()=>{f(!0),j({}),S(null)},C=()=>{f(!1),b(e),j({}),S(null)},k=async()=>{const W={},L=E$(m.displayName);L.valid||(W.displayName=L.error);const z=fC(m.bio,500);z.valid||(W.bio=z.error);const q=fC(m.goals,500);if(q.valid||(W.goals=q.error),Object.keys(W).length>0){j(W);return}try{const B={...m,displayName:Ig(m.displayName),bio:Ig(m.bio),goals:Ig(m.goals)};await i(B),f(!1),S(null)}catch(B){console.error("Error saving profile:",B),S("Failed to save profile. Please try again.")}},R=(W,L)=>{b({...m,[W]:L}),v[W]&&j({...v,[W]:null})},O=async W=>{try{await o("avatar",W),b({...m,avatar:W})}catch(L){console.error("Error updating avatar:",L),S("Failed to update avatar. Please try again.")}},I=()=>{if(e.avatar&&B$(e.avatar)){const z=hC(e.avatar);return r.jsx(Lg,{src:z,sx:{width:80,height:80}})}const L=hC("doggo-1");return r.jsx(Lg,{src:L,sx:{width:80,height:80}})},P=c();return n?r.jsx(Kl,{}):r.jsxs(A,{sx:{minHeight:"100vh",padding:{xs:1.5,sm:2,md:3},paddingTop:{xs:.5,sm:1,md:2},paddingBottom:{xs:"80px",sm:3,md:4},background:W=>W.palette.background.default},children:[r.jsxs(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[r.jsx(Ge,{sx:{mb:2,borderRadius:2},children:r.jsxs(at,{sx:{p:2},children:[r.jsxs(A,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2,mb:2},children:[r.jsxs(A,{sx:{position:"relative",alignSelf:{xs:"center",sm:"flex-start"}},children:[r.jsx(A,{sx:{borderRadius:"50%",overflow:"hidden",width:80,height:80,border:"2px solid",borderColor:"divider"},children:I()}),r.jsx(Ie,{onClick:()=>g(!0),size:"small",sx:{position:"absolute",bottom:-4,right:-4,bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"}},children:r.jsx(bP,{fontSize:"small"})})]}),r.jsxs(A,{sx:{flex:1},children:[d?r.jsx(Je,{fullWidth:!0,label:"Display Name",value:m.displayName,onChange:W=>R("displayName",W.target.value),error:!!v.displayName,helperText:v.displayName,sx:{mb:2}}):r.jsx(M,{variant:"h5",fontWeight:700,gutterBottom:!0,children:e.displayName||"Unknown User"}),r.jsx(M,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:e.email}),r.jsxs(M,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Member since ",D$(e.memberSince)]}),r.jsxs(A,{sx:{mt:2},children:[r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[r.jsx(M,{variant:"body2",fontWeight:600,children:"Profile Completion"}),r.jsxs(M,{variant:"body2",fontWeight:600,children:[P,"%"]})]}),r.jsx(ur,{variant:"determinate",value:P,sx:{height:8,borderRadius:4}})]})]}),r.jsx(A,{children:d?r.jsxs(Le,{direction:"row",spacing:1,children:[r.jsx(Ie,{color:"primary",onClick:k,children:r.jsx(Ni,{})}),r.jsx(Ie,{onClick:C,children:r.jsx(_C,{})})]}):r.jsx(Ie,{color:"primary",onClick:w,children:r.jsx(Da,{})})})]}),E&&r.jsx(kt,{severity:"error",sx:{mb:2},children:E}),r.jsxs(A,{sx:{mb:2},children:[r.jsx(M,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Bio"}),d?r.jsx(Je,{fullWidth:!0,multiline:!0,rows:3,value:m.bio,onChange:W=>R("bio",W.target.value),error:!!v.bio,helperText:v.bio||`${m.bio.length}/500`,placeholder:"Tell us about yourself..."}):r.jsx(M,{variant:"body2",color:"text.secondary",children:e.bio||"No bio yet"})]}),r.jsxs(A,{children:[r.jsx(M,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Fitness Goals"}),d?r.jsx(Je,{fullWidth:!0,multiline:!0,rows:3,value:m.goals,onChange:W=>R("goals",W.target.value),error:!!v.goals,helperText:v.goals||`${m.goals.length}/500`,placeholder:"What are your fitness goals?"}):r.jsx(M,{variant:"body2",color:"text.secondary",children:e.goals||"No goals set yet"})]}),r.jsxs(A,{sx:{mt:2},children:[r.jsx(M,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Target Weight"}),d?r.jsxs(Le,{direction:"row",spacing:2,alignItems:"flex-start",children:[r.jsx(Je,{type:"number",label:"Target Weight",value:m.targetWeight||"",onChange:W=>R("targetWeight",W.target.value?parseFloat(W.target.value):null),inputProps:{step:.1,min:0},sx:{flex:1,maxWidth:200}}),r.jsxs(Xt,{size:"small",sx:{minWidth:80},children:[r.jsx(En,{children:"Unit"}),r.jsxs(cn,{value:m.weightUnit||"lbs",onChange:W=>R("weightUnit",W.target.value),label:"Unit",children:[r.jsx(Be,{value:"lbs",children:"lbs"}),r.jsx(Be,{value:"kg",children:"kg"})]})]})]}):r.jsx(M,{variant:"body2",color:"text.secondary",children:e.targetWeight?`${e.targetWeight} ${e.weightUnit||"lbs"}`:"No target weight set"})]})]})}),r.jsxs(Kt,{container:!0,spacing:1.5,sx:{mb:2},children:[r.jsx(Kt,{item:!0,xs:6,sm:4,children:r.jsx(Ge,{children:r.jsxs(at,{sx:{p:1.5,"&:last-child":{pb:1.5}},children:[r.jsx(M,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"Total Workouts"}),r.jsx(M,{variant:"h5",fontWeight:700,children:t.totalWorkouts})]})})}),r.jsx(Kt,{item:!0,xs:6,sm:4,children:r.jsx(Ge,{children:r.jsxs(at,{sx:{p:1.5,"&:last-child":{pb:1.5}},children:[r.jsx(M,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"Current Streak"}),r.jsxs(A,{sx:{display:"flex",alignItems:"baseline",gap:.5},children:[r.jsx(M,{variant:"h5",fontWeight:700,color:"warning.main",children:t.currentStreak}),r.jsx(M,{variant:"caption",color:"text.secondary",children:"days"})]})]})})}),r.jsx(Kt,{item:!0,xs:6,sm:4,children:r.jsx(Ge,{children:r.jsxs(at,{sx:{p:1.5,"&:last-child":{pb:1.5}},children:[r.jsx(M,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"Longest Streak"}),r.jsxs(A,{sx:{display:"flex",alignItems:"baseline",gap:.5},children:[r.jsx(M,{variant:"h5",fontWeight:700,children:t.longestStreak}),r.jsx(M,{variant:"caption",color:"text.secondary",children:"days"})]})]})})}),r.jsx(Kt,{item:!0,xs:6,sm:4,children:r.jsx(Ge,{children:r.jsxs(at,{sx:{p:1.5,"&:last-child":{pb:1.5}},children:[r.jsx(M,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"Total PRs"}),r.jsx(M,{variant:"h5",fontWeight:700,color:"success.main",children:t.totalPRs})]})})}),r.jsx(Kt,{item:!0,xs:6,sm:4,children:r.jsx(Ge,{children:r.jsxs(at,{sx:{p:1.5,"&:last-child":{pb:1.5}},children:[r.jsx(M,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"Wellness Tasks"}),r.jsxs(A,{sx:{display:"flex",alignItems:"baseline",gap:.5},children:[r.jsx(M,{variant:"h5",fontWeight:700,color:"secondary.main",children:t.completedWellnessTasks||0}),r.jsx(M,{variant:"caption",color:"text.secondary",children:"done"})]})]})})}),r.jsx(Kt,{item:!0,xs:12,sm:8,children:r.jsx(Ge,{children:r.jsxs(at,{sx:{p:1.5,"&:last-child":{pb:1.5}},children:[r.jsx(M,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"Favorite Exercise"}),r.jsx(Ne,{label:t.favoriteExercise||"No data yet",color:"primary",size:"small"})]})})})]})]}),r.jsx(JD,{open:h,onClose:()=>g(!1),onSelect:O,currentAvatar:e.avatar})]})},Ax=({currentType:e,onChange:t,compact:n=!1})=>{const[i,o]=y.useState(!1),c={strength:[{value:"full",label:"Full Body",shortLabel:"Full"},{value:"upper",label:"Upper Body",shortLabel:"Upper"},{value:"lower",label:"Lower Body",shortLabel:"Lower"},{value:"push",label:"Push",shortLabel:"Push"},{value:"pull",label:"Pull",shortLabel:"Pull"},{value:"legs",label:"Legs",shortLabel:"Legs"},{value:"core",label:"Core",shortLabel:"Core"}],cardio:[{value:"cardio",label:"Cardio",shortLabel:"Cardio"},{value:"hiit",label:"HIIT",shortLabel:"HIIT"}],flexibility:[{value:"yoga",label:"Yoga",shortLabel:"Yoga"},{value:"mobility",label:"Mobility",shortLabel:"Mobility"},{value:"stretch",label:"Stretching",shortLabel:"Stretch"}],rest:[{value:"rest",label:"Rest Day",shortLabel:"Rest"}]},d=m=>({strength:r.jsx(Nn,{fontSize:"small"}),cardio:r.jsx(Ui,{fontSize:"small"}),flexibility:r.jsx(gi,{fontSize:"small"}),rest:r.jsx(Dh,{fontSize:"small"})})[m],h=(()=>{for(const[m,b]of Object.entries(c))if(b.some(v=>v.value===e))return m;return"strength"})(),g=(m,b)=>{b!==null&&b!==e&&t(b)};return n?r.jsxs(A,{children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",p:1.5,borderRadius:1,bgcolor:"background.paper",border:1,borderColor:"divider","&:hover":{bgcolor:"action.hover"}},onClick:()=>o(!i),children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[d(h),r.jsx(M,{variant:"body2",fontWeight:600,children:"Session Type:"}),r.jsx(Ne,{label:c[h].find(m=>m.value===e)?.label||e,size:"small",color:"primary"})]}),i?r.jsx(Nx,{}):r.jsx(sd,{})]}),r.jsx(Nl,{in:i,children:r.jsx(A,{sx:{pt:2},children:Object.entries(c).map(([m,b])=>r.jsxs(A,{sx:{mb:2},children:[r.jsxs(M,{variant:"caption",color:"text.secondary",sx:{display:"flex",alignItems:"center",gap:.5,mb:1},children:[d(m),m.charAt(0).toUpperCase()+m.slice(1)]}),r.jsx(To,{value:e,exclusive:!0,onChange:g,size:"small",fullWidth:!0,sx:{display:"flex",flexWrap:"wrap",gap:.5,"& .MuiToggleButton-root":{flex:"1 1 auto",minWidth:"fit-content"}},children:b.map(v=>r.jsx(ss,{value:v.value,children:v.shortLabel},v.value))})]},m))})})]}):r.jsxs(A,{children:[r.jsx(M,{variant:"subtitle2",sx:{mb:2,fontWeight:600},children:"Quick Toggle Session Type"}),r.jsx(Le,{spacing:2,children:Object.entries(c).map(([m,b])=>r.jsxs(A,{children:[r.jsxs(M,{variant:"caption",color:"text.secondary",sx:{display:"flex",alignItems:"center",gap:.5,mb:1},children:[d(m),m.charAt(0).toUpperCase()+m.slice(1)]}),r.jsx(To,{value:e,exclusive:!0,onChange:g,size:"small",fullWidth:!0,sx:{display:"flex",flexWrap:"wrap",gap:.5,"& .MuiToggleButton-root":{flex:{xs:"1 1 45%",sm:"1 1 auto"},minWidth:"fit-content"}},children:b.map(v=>r.jsx(ar,{title:v.label,arrow:!0,children:r.jsx(ss,{value:v.value,children:v.shortLabel})},v.value))})]},m))})]})};Ax.propTypes={currentType:T.string.isRequired,onChange:T.func.isRequired,compact:T.bool};const H$=e=>{const t=e.toLowerCase();return["full","upper","lower","push","pull","legs","core"].includes(t)?{sessionType:t,sessionName:pC(t),exercises:[],supersetConfig:[2,2,2,2],assignedDate:new Date().toISOString(),instructions:"Complete all exercises in each superset before moving to the next. Rest 60-90 seconds between supersets."}:["cardio","hiit","yoga","mobility","stretch"].includes(t)?{sessionType:t,sessionName:pC(t),timerConfig:{duration:U$(t),intensity:"moderate",notes:""},assignedDate:new Date().toISOString(),instructions:$$(t)}:t==="rest"?{sessionType:"rest",sessionName:"Rest Day",assignedDate:new Date().toISOString(),instructions:"Take a break and recover. Your body needs rest to grow stronger!"}:{sessionType:t,sessionName:t.charAt(0).toUpperCase()+t.slice(1),assignedDate:new Date().toISOString()}},pC=e=>({full:"Full Body",upper:"Upper Body",lower:"Lower Body",push:"Push",pull:"Pull",legs:"Legs",core:"Core",cardio:"Cardio",hiit:"HIIT",yoga:"Yoga",mobility:"Mobility",stretch:"Stretching",rest:"Rest Day"})[e]||e.charAt(0).toUpperCase()+e.slice(1),U$=e=>({cardio:30,hiit:20,yoga:45,mobility:20,stretch:15})[e]||30,$$=e=>({cardio:"Maintain a steady pace throughout the session. Focus on breathing and form.",hiit:"Alternate between high-intensity intervals and rest periods. Push yourself during work intervals.",yoga:"Flow through poses with controlled breathing. Focus on alignment and balance.",mobility:"Move through your full range of motion. Hold stretches for 30-60 seconds.",stretch:"Gently stretch each muscle group. Hold each stretch for 20-30 seconds without bouncing."})[e]||"Follow your workout plan and listen to your body.",uu=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],eM=({onNavigate:e})=>{const{weeklySchedule:t,assignWorkoutToDay:n,loading:i}=Po(),[o,c]=y.useState("Sunday"),[d,f]=y.useState({}),[h,g]=y.useState({}),[m,b]=y.useState([]),[v,j]=y.useState({open:!1,message:"",severity:"info"}),[E,S]=y.useState(!1),[w,C]=y.useState(null),[k,R]=y.useState(!1),[O,I]=y.useState(null),[P,W]=y.useState(null),[L,z]=y.useState([]);y.useEffect(()=>{(async()=>{try{const[ce,Ae]=await Promise.all([Mr(),fetch(Oo)]),ne=await Ae.json();b(ce||[]),z(ne)}catch(ce){console.error("Error loading data:",ce),b([]),z([])}})()},[]),y.useEffect(()=>{if(i)return;const Y={};for(const ce of uu)t[ce]?Y[ce]=JSON.parse(JSON.stringify(t[ce])):Y[ce]=null;f(Y)},[t,i]);const q=Y=>Y?Y.sessionType?.toLowerCase():null,B=Y=>Y?["full","upper","lower","push","pull","legs","core"].includes(Y):!1,U=Y=>Y?["cardio","hiit","yoga","mobility","stretch"].includes(Y):!1,re=Y=>Y==="rest",H=(Y,ce)=>{h[o]?(C(ce),S(!0)):c(ce)},$=()=>{S(!1),w&&(c(w),C(null))},N=()=>{S(!1),C(null)},V=(Y,ce)=>{const Ae=d[o];Ae&&(f(ne=>({...ne,[o]:{...Ae,timerConfig:{...Ae.timerConfig,[Y]:ce}}})),g(ne=>({...ne,[o]:!0})))},F=Y=>{const ce=d[o];if(B(Y)){if(ce)f(ne=>({...ne,[o]:{...ce,sessionType:Y,sessionName:`${Y.charAt(0).toUpperCase()+Y.slice(1)} Body Workout`}})),g(ne=>({...ne,[o]:!0})),j({open:!0,message:`Workout type changed to ${Y}`,severity:"success"});else{const ne={sessionType:Y,sessionName:`${Y.charAt(0).toUpperCase()+Y.slice(1)} Body Workout`,exercises:[],supersetConfig:[2,2,2,2]};f(de=>({...de,[o]:ne})),g(de=>({...de,[o]:!0})),j({open:!0,message:`Workout type set to ${Y}. Select a saved workout below to assign exercises.`,severity:"info"})}return}const Ae=H$(Y);f(ne=>({...ne,[o]:Ae})),g(ne=>({...ne,[o]:!0})),j({open:!0,message:`Session type changed to ${Ae.sessionName}`,severity:"success"})},X=async Y=>{if(Y==null||Y==="")return;const ce=m[Y];if(!ce)return;const Ae=d[o],ne=q(Ae),de={sessionType:ne||ce.type||"full",sessionName:ce.name||`${(ne||ce.type||"full").charAt(0).toUpperCase()+(ne||ce.type||"full").slice(1)} Body Workout`,exercises:ce.exercises,supersetConfig:ce.supersetConfig||[2,2,2,2]};f(K=>({...K,[o]:de})),g(K=>({...K,[o]:!0})),j({open:!0,message:`Loaded workout: ${ce.name}`,severity:"success"})},oe=()=>{const Y=d[o];if(!Y||!Y.exercises)return;const ce=m.findIndex(Ae=>Ae.exercises===Y.exercises||JSON.stringify(Ae.exercises)===JSON.stringify(Y.exercises));ce>=0?(I(m[ce]),W(ce),R(!0)):(I({name:Y.sessionName||"Custom Workout",type:Y.sessionType||"full",exercises:Y.exercises,supersetConfig:Y.supersetConfig||[2,2,2,2]}),W(null),R(!0))},ue=async Y=>{try{if(P!==null){await Su(P,Y);const ce=await Mr();b(ce||[]);const Ae=d[o];Ae&&(f(ne=>({...ne,[o]:{...Ae,exercises:Y.exercises,supersetConfig:Y.supersetConfig||[2,2,2,2],sessionName:Y.name}})),g(ne=>({...ne,[o]:!0}))),j({open:!0,message:"Workout updated successfully",severity:"success"})}R(!1),I(null),W(null)}catch(ce){console.error("Error saving workout:",ce),j({open:!0,message:"Failed to save workout changes",severity:"error"})}},Te=()=>{R(!1),I(null),W(null)},De=async()=>{try{const Y=[];for(const ce of uu){const Ae=d[ce];if(Ae){const ne=q(Ae);B(ne)&&(!Ae.exercises||Ae.exercises.length===0)&&Y.push(ce)}}if(Y.length>0){j({open:!0,message:`Please select a saved workout for strength sessions on: ${Y.join(", ")}`,severity:"error"});return}for(const ce of uu)if(h[ce]){const Ae=d[ce];if(Ae&&Ae.exercises&&Array.isArray(Ae.exercises)){const ne={};Ae.exercises.forEach(K=>{const Z=K.supersetGroup??0;ne[Z]=(ne[Z]||0)+1});const de=Object.keys(ne).sort((K,Z)=>parseInt(K)-parseInt(Z)).map(K=>ne[K]);Ae.supersetConfig=de.length>0?de:[2,2,2,2]}await n(ce,Ae)}g({}),j({open:!0,message:"All changes saved successfully!",severity:"success"})}catch(Y){console.error("Error saving changes:",Y),j({open:!0,message:"Failed to save changes. Please try again.",severity:"error"})}},ee=()=>{const Y={};uu.forEach(ce=>{t[ce]?Y[ce]=JSON.parse(JSON.stringify(t[ce])):Y[ce]=null}),f(Y),g({}),j({open:!0,message:"All changes discarded",severity:"info"})},G=d[o],ae=q(G),ve=B(ae),te=U(ae),ye=re(ae),Se=Object.values(h).some(Y=>Y);return i?r.jsx(Kl,{}):r.jsxs(A,{sx:{minHeight:"100vh",padding:{xs:2,sm:3},paddingBottom:{xs:"80px",sm:3},background:Y=>Y.palette.background.default},children:[r.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[r.jsxs(A,{sx:{mb:3,display:"flex",alignItems:"center",gap:2},children:[r.jsx(Ie,{onClick:()=>e?.("settings"),sx:{color:"primary.main"},children:r.jsx(Ll,{})}),r.jsxs(A,{sx:{flex:1},children:[r.jsx(M,{variant:"h4",sx:{fontWeight:700,color:"text.primary"},children:"Edit Weekly Schedule"}),r.jsx(M,{variant:"body2",color:"text.secondary",children:"Customize your workouts for each day of the week"})]}),Se&&r.jsx(Ne,{label:"Unsaved Changes",color:"warning",size:"small",sx:{display:{xs:"none",sm:"flex"}}})]}),r.jsx(Ge,{sx:{mb:3},children:r.jsx(Wa,{value:o,onChange:H,variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{minWidth:{xs:80,sm:100}}},children:uu.map(Y=>r.jsx(ws,{value:Y,label:r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[Y.substring(0,3),h[Y]&&r.jsx(A,{sx:{width:6,height:6,borderRadius:"50%",bgcolor:"warning.main"}})]})},Y))})}),r.jsxs(A,{sx:{maxWidth:900,mx:"auto"},children:[G&&r.jsx(Ge,{sx:{mb:3},children:r.jsxs(at,{children:[r.jsxs(M,{variant:"body2",color:"text.secondary",sx:{mb:2},children:[" This sets the ",r.jsx("strong",{children:"suggested workout type"})," for the day.",ve&&" For strength workouts, select a saved workout below to assign exercises."]}),r.jsx(Ax,{currentType:ae||"full",onChange:F,compact:!0})]})}),G&&ve&&r.jsx(Ge,{sx:{mb:3},children:r.jsxs(at,{children:[r.jsxs(Xt,{fullWidth:!0,children:[r.jsx(En,{shrink:!0,sx:{backgroundColor:Y=>Y.palette.background.paper,px:1},children:"Select Saved Workout"}),r.jsxs(cn,{value:"",label:"Select Saved Workout",onChange:Y=>X(Y.target.value),displayEmpty:!0,notched:!0,children:[r.jsx(Be,{value:"",disabled:!0,children:"Choose a workout to load exercises..."}),m.map((Y,ce)=>r.jsxs(Be,{value:ce,children:[Y.name||`${Y.type||"Custom"} Workout`," ","(",Y.exercises?.length||0," exercises)"]},ce))]})]}),m.length===0&&r.jsx(M,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:"No saved workouts available. Create one from the Work tab."})]})}),!G&&r.jsxs(Ge,{sx:{p:4,textAlign:"center"},children:[r.jsxs(M,{variant:"h6",color:"text.secondary",children:["No workout assigned for ",o]}),r.jsx(M,{variant:"body2",color:"text.secondary",sx:{mt:1,mb:2},children:"Select a workout type below to get started"}),r.jsx(kt,{severity:"info",sx:{mb:3,textAlign:"left"},children:r.jsxs(M,{variant:"body2",children:[" ",r.jsx("strong",{children:"Note:"})," Selecting a workout type sets the suggested type for the day. For strength workouts, you'll need to select a saved workout to assign specific exercises."]})}),r.jsx(A,{sx:{mt:3,maxWidth:600,mx:"auto"},children:r.jsx(Ax,{currentType:"full",onChange:F,compact:!1})})]}),ye&&r.jsxs(Ge,{sx:{p:6,textAlign:"center"},children:[r.jsx(Dh,{sx:{fontSize:80,color:"text.secondary",mb:2}}),r.jsx(M,{variant:"h4",sx:{fontWeight:700,color:"text.primary"},children:"Rest Day"}),r.jsx(M,{variant:"body1",color:"text.secondary",sx:{mt:2},children:"Take a break and recover. Your body needs rest to grow stronger!"})]}),te&&r.jsx(Ge,{children:r.jsxs(at,{children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[r.jsx(rd,{sx:{fontSize:40,color:"primary.main"}}),r.jsxs(A,{children:[r.jsx(M,{variant:"h5",sx:{fontWeight:700},children:"Timer Configuration"}),r.jsxs(M,{variant:"body2",color:"text.secondary",children:["Set duration for your ",G.sessionName||ae," session"]})]})]}),r.jsxs(Le,{spacing:3,children:[r.jsxs(Xt,{fullWidth:!0,children:[r.jsx(En,{children:"Duration (minutes)"}),r.jsxs(cn,{value:G.timerConfig?.duration||30,label:"Duration (minutes)",onChange:Y=>V("duration",Y.target.value),children:[r.jsx(Be,{value:15,children:"15 minutes"}),r.jsx(Be,{value:20,children:"20 minutes"}),r.jsx(Be,{value:30,children:"30 minutes"}),r.jsx(Be,{value:45,children:"45 minutes"}),r.jsx(Be,{value:60,children:"60 minutes"})]})]}),r.jsxs(Xt,{fullWidth:!0,children:[r.jsx(En,{children:"Intensity"}),r.jsxs(cn,{value:G.timerConfig?.intensity||"moderate",label:"Intensity",onChange:Y=>V("intensity",Y.target.value),children:[r.jsx(Be,{value:"light",children:"Light"}),r.jsx(Be,{value:"moderate",children:"Moderate"}),r.jsx(Be,{value:"vigorous",children:"Vigorous"})]})]}),r.jsx(Je,{label:"Notes (optional)",multiline:!0,rows:3,value:G.timerConfig?.notes||"",onChange:Y=>V("notes",Y.target.value),placeholder:"Add any notes or goals for this session..."})]})]})}),ve&&r.jsxs(Le,{spacing:3,children:[r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs(A,{children:[r.jsx(M,{variant:"h6",sx:{fontWeight:600},children:"Exercises"}),r.jsx(M,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:"Exercises from the selected saved workout"})]}),G.exercises&&G.exercises.length>0&&r.jsx(Ce,{variant:"outlined",startIcon:r.jsx(Da,{}),onClick:oe,size:"small",children:"Edit Workout"})]}),G.exercises&&G.exercises.length>0?G.exercises.map((Y,ce)=>r.jsx(Ge,{sx:{borderLeft:3,borderColor:"primary.main"},children:r.jsxs(at,{children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[r.jsx(M,{sx:{fontSize:"1.25rem",color:"primary.main",fontWeight:700,minWidth:"32px",textAlign:"center"},children:ce+1}),r.jsxs(A,{sx:{flex:1},children:[r.jsx(M,{variant:"h6",sx:{fontWeight:600},children:Y.name||Y.exerciseName||"Unnamed Exercise"}),Y.muscleGroup&&r.jsx(M,{variant:"body2",color:"text.secondary",children:Y.muscleGroup})]})]}),Y.sets&&Y.sets.length>0&&r.jsx(A,{sx:{pl:5,mt:2},children:r.jsxs(M,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:["Sets: ",Y.sets.length,"  ",Y.sets[0]?.reps||0," reps",Y.sets[0]?.weight>0?` @ ${Y.sets[0].weight} lbs`:""]})})]})},Y.id||ce)):r.jsx(Ge,{sx:{p:4,textAlign:"center"},children:r.jsx(M,{variant:"body1",color:"text.secondary",children:"No exercises in this workout. Select a saved workout above to assign exercises."})})]}),G&&!ye&&r.jsxs(A,{sx:{mt:4,display:"flex",gap:2,justifyContent:"center"},children:[r.jsx(Ce,{variant:"outlined",onClick:ee,disabled:!Se,children:"Discard Changes"}),r.jsx(Ce,{variant:"contained",startIcon:r.jsx(Ni,{}),onClick:De,disabled:!Se,children:"Save All Changes"})]})]})]}),r.jsxs(Et,{open:E,onClose:N,children:[r.jsx(zt,{children:"Unsaved Changes"}),r.jsx(Dt,{children:r.jsxs(zC,{children:["You have unsaved changes for ",o,`. These changes will be kept when you switch days, but they won't be saved until you click "Save All Changes".`]})}),r.jsxs(Nt,{children:[r.jsx(Ce,{onClick:N,children:"Cancel"}),r.jsx(Ce,{onClick:$,variant:"contained",children:"Continue"})]})]}),r.jsx(Or,{open:v.open,autoHideDuration:6e3,onClose:()=>j({...v,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:r.jsx(kt,{onClose:()=>j({...v,open:!1}),severity:v.severity,sx:{width:"100%"},children:v.message})}),r.jsx(cy,{open:k,onClose:Te,onSave:ue,exercises:L,existingWorkout:O})]})};eM.propTypes={onNavigate:T.func};const O0=y.memo(y.forwardRef(({weight:e="",reps:t="",lastWeight:n=null,lastReps:i=null,onWeightChange:o,onRepsChange:c,weightIncrement:d=2.5,repsIncrement:f=1,disabled:h=!1,isBarbell:g=!1,barbellWeight:m=45},b)=>{const v=w=>{const C=parseFloat(e)||0,k=Math.max(0,C+w);o(k)},j=w=>{const C=parseInt(t)||0,k=Math.max(0,C+w);c(k)},S=(()=>{if(n===null||i===null)return null;const w=parseFloat(e)||0,C=parseInt(t)||0;return w>n?"weight":w===n&&C>i?"reps":null})();return r.jsxs(A,{sx:{width:"100%"},children:[r.jsxs(Le,{direction:"row",spacing:1,sx:{mb:1},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[r.jsx(M,{variant:"caption",sx:{fontWeight:600,color:"text.secondary",whiteSpace:"nowrap"},children:"Weight:"}),r.jsx(Ie,{size:"small",onClick:()=>v(-d),disabled:h,sx:{border:"1px solid",borderColor:"divider",width:"28px",height:"28px",minWidth:"28px"},children:r.jsx(Hs,{sx:{fontSize:16}})}),r.jsx(Je,{type:"number",value:e===""?"":e,onChange:w=>o(w.target.value),disabled:h,inputMode:"decimal",inputRef:b,size:"small",sx:{width:"52px","& input":{textAlign:"center",padding:"6px 2px",fontSize:"0.9rem",fontWeight:600,MozAppearance:"textfield","&::-webkit-outer-spin-button, &::-webkit-inner-spin-button":{WebkitAppearance:"none",margin:0}}}}),r.jsx(Ie,{size:"small",onClick:()=>v(d),disabled:h,sx:{border:"1px solid",borderColor:"divider",width:"28px",height:"28px",minWidth:"28px"},children:r.jsx($n,{sx:{fontSize:16}})})]}),r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[r.jsx(M,{variant:"caption",sx:{fontWeight:600,color:"text.secondary",whiteSpace:"nowrap"},children:"Reps:"}),r.jsx(Ie,{size:"small",onClick:()=>j(-f),disabled:h,sx:{border:"1px solid",borderColor:"divider",width:"28px",height:"28px",minWidth:"28px"},children:r.jsx(Hs,{sx:{fontSize:16}})}),r.jsx(Je,{type:"number",value:t===""?"":t,onChange:w=>c(w.target.value),disabled:h,inputMode:"numeric",size:"small",sx:{width:"44px","& input":{textAlign:"center",padding:"6px 2px",fontSize:"0.9rem",fontWeight:600,MozAppearance:"textfield","&::-webkit-outer-spin-button, &::-webkit-inner-spin-button":{WebkitAppearance:"none",margin:0}}}}),r.jsx(Ie,{size:"small",onClick:()=>j(f),disabled:h,sx:{border:"1px solid",borderColor:"divider",width:"28px",height:"28px",minWidth:"28px"},children:r.jsx($n,{sx:{fontSize:16}})})]})]}),(n!==null||i!==null)&&r.jsxs(M,{variant:"caption",sx:{color:"text.secondary",display:"flex",alignItems:"center",gap:.5},children:["Last: ",n??"","  ",i??"",S==="weight"&&r.jsx("span",{style:{color:"green",fontWeight:600},children:" Weight"}),S==="reps"&&r.jsx("span",{style:{color:"green",fontWeight:600},children:" Reps"})]}),g&&e&&parseFloat(e)>0&&r.jsx(M,{variant:"caption",sx:{color:"text.secondary",fontStyle:"italic",display:"block",mt:.5},children:(()=>{const w=cD(parseFloat(e),m);return w!==null&&w>=0?`${w} lbs per side`:""})()})]})}));O0.displayName="ExerciseInputs";O0.propTypes={weight:T.oneOfType([T.string,T.number]),reps:T.oneOfType([T.string,T.number]),lastWeight:T.number,lastReps:T.number,onWeightChange:T.func.isRequired,onRepsChange:T.func.isRequired,weightIncrement:T.number,repsIncrement:T.number,disabled:T.bool,isBarbell:T.bool,barbellWeight:T.number};const q$=e=>e?.toLowerCase()==="barbell",I0=y.memo(({exerciseName:e,setNumber:t,totalSets:n,videoUrl:i,demoImage:o=null,lastWeight:c=null,lastReps:d=null,onSubmit:f,onBack:h,showBack:g=!1,suggestedWeight:m=null,suggestedReps:b=null,showSuggestions:v=!0,elapsedTime:j=null,currentStep:E=1,totalSteps:S=1,isFavorite:w=!1,onToggleFavorite:C=null,onSkip:k=null,onSwap:R=null,onPartialComplete:O=null,onExit:I=null,showPartialComplete:P=!1,equipment:W=null})=>{const L=Ia(),{preferences:z}=S0(),[q,B]=y.useState(c||""),[U,re]=y.useState(d||""),[H,$]=y.useState(!1),[N,V]=y.useState(!1),[F,X]=y.useState(o),[oe,ue]=y.useState(!1),[Te,De]=y.useState(!1),[ee,G]=y.useState(!1),ae=cr(L.breakpoints.up("sm")),ve=cr("(orientation: landscape)"),te=ae&&ve,ye="/goodlift/",Se=ye.endsWith("/")?`${ye}work-icon.svg`:`${ye}/work-icon.svg`,Y=we=>we?!we.includes("work-icon.svg"):!1;y.useEffect(()=>{Y(o)?X(o):X(null),ue(!1)},[o]);const ce=()=>{oe||(ue(!0),X(null))},Ae=()=>r.jsxs(A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",gap:1},children:[!Te&&r.jsx(A,{component:"img",src:Se,alt:"WorkTab Icon",onError:()=>De(!0),sx:{width:"100%",height:"100%",maxWidth:te?200:300,maxHeight:te?200:300,objectFit:"contain"}}),r.jsx(M,{variant:"caption",sx:{color:"text.secondary",fontSize:{xs:"0.7rem",sm:"0.8rem"},fontStyle:"italic"},children:"no demo image available"})]}),ne=we=>{we.preventDefault(),$(!0),setTimeout(()=>{f({weight:parseFloat(q)||0,reps:parseInt(U)||0}),$(!1),V(!1)},800)},de=()=>{m!==null&&B(m),b!==null&&re(b),V(!0)},K=()=>v&&!H&&!N&&(m!==null||b!==null),Z=we=>{const J=Math.floor(we/60),ge=we%60;return`${J}:${ge.toString().padStart(2,"0")}`},be=()=>{P?G(!0):I&&I()},ke=()=>{G(!1),O&&O()},me=()=>{G(!1),I&&I()};return r.jsxs(A,{className:"exercise-card",sx:{display:"flex",flexDirection:"column",height:{xs:"calc(100dvh - 140px)",sm:te?"calc(100dvh - 120px)":"calc(100dvh - 140px)",md:"calc(100dvh - 140px)"},p:{xs:2,sm:te?1:3},overflow:"hidden",containerType:"inline-size"},children:[te?r.jsxs(A,{sx:{display:"flex",flexDirection:"row",height:"100%",gap:2},children:[r.jsxs(A,{sx:{flex:1,display:"flex",flexDirection:"column",minWidth:0},children:[r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,flexShrink:0},children:[j!==null&&r.jsx(M,{variant:"body1",sx:{fontWeight:600,fontSize:"1rem"},children:Z(j)}),r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(Ne,{label:`Set ${t}/${n}`,color:"primary",size:"medium",sx:{fontWeight:600,fontSize:"0.85rem"}}),r.jsxs(M,{variant:"body1",sx:{fontWeight:600,fontSize:"1rem"},children:[E,"/",S]}),C&&r.jsx(Ie,{onClick:C,size:"small",sx:{color:w?"warning.main":"action.active",p:.5},"aria-label":"Toggle favorite",children:w?r.jsx(pi,{sx:{fontSize:22}}):r.jsx(Vl,{sx:{fontSize:22}})})]})]}),r.jsxs(A,{sx:{display:"grid",gridTemplateColumns:"1.5fr 1fr",gap:2,flex:1,minHeight:0,mb:1},children:[r.jsx(A,{sx:{display:"flex",alignItems:"center"},children:r.jsx(M,{component:"div",sx:{fontWeight:"700 !important",color:"primary.main",textAlign:"left",lineHeight:"1.15 !important",fontFamily:"'Montserrat', sans-serif !important",fontSize:{sm:"1.75rem !important",md:"2.25rem !important"},display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-word"},children:e})}),r.jsx(A,{sx:{width:"100%",height:{sm:"150px",md:"180px"},position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:F?r.jsx(A,{component:"img",src:F,alt:`${e} demonstration`,onError:ce,sx:{width:"100%",height:"100%",borderRadius:1,objectFit:"contain"},loading:"lazy"}):i?r.jsx("iframe",{src:i,style:{width:"100%",height:"100%",border:"none",borderRadius:"4px"},frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:`${e} video`}):r.jsx(A,{component:"img",src:Se,alt:"Exercise",onError:()=>De(!0),sx:{width:"60%",height:"60%",objectFit:"contain",opacity:.5}})})]}),H&&r.jsx(kt,{icon:r.jsx(Bl,{}),severity:"success",sx:{mb:.5,py:.25},children:"Set logged! Moving to next..."}),K()&&r.jsx(kt,{icon:r.jsx(qr,{}),severity:"info",sx:{mb:.5,py:.25,"& .MuiAlert-message":{width:"100%"}},children:r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[r.jsxs(M,{variant:"caption",sx:{mr:1},children:[" Try: ",m," lbs  ",b," reps"]}),r.jsxs(A,{sx:{display:"flex",gap:.5},children:[r.jsx(Ce,{size:"small",onClick:de,variant:"contained",sx:{minHeight:"28px",fontSize:"0.7rem"},children:"Accept"}),r.jsx(Ce,{size:"small",onClick:()=>V(!0),variant:"outlined",sx:{minHeight:"28px",fontSize:"0.7rem"},children:"Skip"})]})]})}),r.jsxs(A,{component:"form",onSubmit:ne,sx:{flexShrink:0,mt:1},children:[r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:1.5},children:[r.jsxs(M,{variant:"body2",sx:{fontWeight:600,color:"text.secondary",minWidth:"100px",fontSize:"0.95rem"},children:["Weight ",c!==null&&r.jsxs("span",{style:{color:L.palette.primary.main},children:["(",c,")"]}),":"]}),r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(Ie,{size:"medium",onClick:()=>B(Math.max(0,(parseFloat(q)||0)-2.5)),disabled:H,sx:{border:"2px solid",borderColor:"divider",width:"40px",height:"40px",minWidth:"40px"},children:r.jsx(Hs,{sx:{fontSize:20}})}),r.jsx(Je,{type:"number",value:q===""?"":q,onChange:we=>B(we.target.value),disabled:H,inputMode:"decimal",size:"small",sx:{width:"80px","& input":{textAlign:"center",padding:"10px 6px",fontSize:"1.1rem",fontWeight:600,MozAppearance:"textfield","&::-webkit-outer-spin-button, &::-webkit-inner-spin-button":{WebkitAppearance:"none",margin:0}}}}),r.jsx(Ie,{size:"medium",onClick:()=>B((parseFloat(q)||0)+2.5),disabled:H,sx:{border:"2px solid",borderColor:"divider",width:"40px",height:"40px",minWidth:"40px"},children:r.jsx($n,{sx:{fontSize:20}})})]})]}),r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[r.jsxs(M,{variant:"body2",sx:{fontWeight:600,color:"text.secondary",minWidth:"100px",fontSize:"0.95rem"},children:["Reps ",d!==null&&r.jsxs("span",{style:{color:L.palette.primary.main},children:["(",d,")"]}),":"]}),r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(Ie,{size:"medium",onClick:()=>re(Math.max(0,(parseInt(U)||0)-1)),disabled:H,sx:{border:"2px solid",borderColor:"divider",width:"40px",height:"40px",minWidth:"40px"},children:r.jsx(Hs,{sx:{fontSize:20}})}),r.jsx(Je,{type:"number",value:U===""?"":U,onChange:we=>re(we.target.value),disabled:H,inputMode:"numeric",size:"small",sx:{width:"70px","& input":{textAlign:"center",padding:"10px 6px",fontSize:"1.1rem",fontWeight:600,MozAppearance:"textfield","&::-webkit-outer-spin-button, &::-webkit-inner-spin-button":{WebkitAppearance:"none",margin:0}}}}),r.jsx(Ie,{size:"medium",onClick:()=>re((parseInt(U)||0)+1),disabled:H,sx:{border:"2px solid",borderColor:"divider",width:"40px",height:"40px",minWidth:"40px"},children:r.jsx($n,{sx:{fontSize:20}})})]})]}),r.jsxs(Le,{direction:"row",spacing:1.5,children:[g&&r.jsx(Ce,{type:"button",variant:"outlined",onClick:h,disabled:H,startIcon:r.jsx(Ll,{}),sx:{minHeight:"44px",fontSize:"0.95rem",fontWeight:600},children:"Back"}),r.jsx(Ce,{type:"submit",variant:"contained",fullWidth:!g,disabled:H,endIcon:r.jsx(ih,{}),sx:{minHeight:"44px",fontSize:"0.95rem",fontWeight:600},children:H?"Logging...":"Next"})]})]})]}),r.jsxs(A,{sx:{display:"flex",flexDirection:"column",gap:1,justifyContent:"flex-start",pt:1},children:[r.jsx(Ie,{component:"a",href:`https://www.google.com/search?q=${encodeURIComponent(e+" form")}`,target:"_blank",rel:"noopener noreferrer",sx:{minWidth:"44px",minHeight:"44px",color:"primary.main",border:"2px solid",borderColor:"primary.main",borderRadius:"8px","&:hover":{backgroundColor:L.palette.mode==="dark"?"rgba(29, 181, 132, 0.08)":"rgba(24, 160, 113, 0.08)"}},"aria-label":`Search for ${e} form guide`,children:r.jsx(Hl,{sx:{fontSize:22}})}),k&&r.jsx(Ie,{onClick:k,sx:{minWidth:"44px",minHeight:"44px",color:"primary.main",border:"2px solid",borderColor:"primary.main",borderRadius:"8px","&:hover":{backgroundColor:L.palette.mode==="dark"?"rgba(29, 181, 132, 0.08)":"rgba(24, 160, 113, 0.08)"}},"aria-label":"Skip exercise",children:r.jsx(Co,{sx:{fontSize:22}})}),R&&r.jsx(Ie,{onClick:R,sx:{minWidth:"44px",minHeight:"44px",color:"primary.main",border:"2px solid",borderColor:"primary.main",borderRadius:"8px","&:hover":{backgroundColor:L.palette.mode==="dark"?"rgba(29, 181, 132, 0.08)":"rgba(24, 160, 113, 0.08)"}},"aria-label":"Swap exercise",children:r.jsx(Nu,{sx:{fontSize:22}})}),I&&r.jsx(Ie,{onClick:be,sx:{minWidth:"44px",minHeight:"44px",color:"error.main",border:"2px solid",borderColor:"error.main",borderRadius:"8px","&:hover":{backgroundColor:"rgba(239, 83, 80, 0.08)"},mt:"auto"},"aria-label":"End workout",children:r.jsx(rh,{sx:{fontSize:22}})})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.3,flexShrink:0},children:[j!==null&&r.jsx(M,{variant:"body1",sx:{fontWeight:600,fontSize:{xs:"0.9rem",sm:"1.25rem"}},children:Z(j)}),r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(Ne,{label:`Set ${t} of ${n}`,color:"primary",size:"small",sx:{fontWeight:600,fontSize:{xs:"0.7rem",sm:"0.85rem"}}}),r.jsxs(M,{variant:"body1",sx:{fontWeight:600,fontSize:{xs:"0.9rem",sm:"1.25rem"}},children:[E,"/",S]}),C&&r.jsx(Ie,{onClick:C,size:"small",sx:{color:w?"warning.main":"action.active","&:hover":{color:"warning.main"},p:{xs:.5,sm:1}},"aria-label":"Toggle favorite",children:w?r.jsx(pi,{sx:{fontSize:{xs:20,sm:24}}}):r.jsx(Vl,{sx:{fontSize:{xs:20,sm:24}}})})]})]}),r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:1,mb:.3,flexShrink:0},children:[r.jsxs(A,{sx:{display:"flex",gap:1},children:[r.jsx(Ie,{component:"a",href:`https://www.google.com/search?q=${encodeURIComponent(e+" form")}`,target:"_blank",rel:"noopener noreferrer",sx:{minWidth:{xs:"36px",sm:"44px"},minHeight:{xs:"36px",sm:"44px"},color:"primary.main",border:"2px solid",borderColor:"primary.main",borderRadius:"8px","&:hover":{backgroundColor:L.palette.mode==="dark"?"rgba(29, 181, 132, 0.08)":"rgba(24, 160, 113, 0.08)"}},"aria-label":`Search for ${e} form guide`,children:r.jsx(Hl,{sx:{fontSize:{xs:20,sm:24}}})}),k&&r.jsx(Ie,{onClick:k,sx:{minWidth:{xs:"36px",sm:"44px"},minHeight:{xs:"36px",sm:"44px"},color:"primary.main",border:"2px solid",borderColor:"primary.main",borderRadius:"8px","&:hover":{backgroundColor:L.palette.mode==="dark"?"rgba(29, 181, 132, 0.08)":"rgba(24, 160, 113, 0.08)"}},"aria-label":"Skip exercise",children:r.jsx(Co,{sx:{fontSize:{xs:20,sm:24}}})}),R&&r.jsx(Ie,{onClick:R,sx:{minWidth:{xs:"36px",sm:"44px"},minHeight:{xs:"36px",sm:"44px"},color:"primary.main",border:"2px solid",borderColor:"primary.main",borderRadius:"8px","&:hover":{backgroundColor:L.palette.mode==="dark"?"rgba(29, 181, 132, 0.08)":"rgba(24, 160, 113, 0.08)"}},"aria-label":"Swap exercise",children:r.jsx(Nu,{sx:{fontSize:{xs:20,sm:24}}})})]}),r.jsx(A,{sx:{display:"flex",gap:1},children:I&&r.jsx(Ie,{onClick:be,sx:{minWidth:{xs:"36px",sm:"44px"},minHeight:{xs:"36px",sm:"44px"},color:"error.main",border:"2px solid",borderColor:"error.main",borderRadius:"8px","&:hover":{backgroundColor:(L.palette.mode==="dark","rgba(239, 83, 80, 0.08)")}},"aria-label":"End workout",children:r.jsx(rh,{sx:{fontSize:{xs:20,sm:24}}})})})]})]}),!te&&r.jsxs(A,{sx:{flexGrow:1,flexShrink:1,minHeight:0,display:te?"grid":"flex",gridTemplateColumns:te?"2fr 1fr":"none",gridTemplateRows:te?"1fr":"none",flexDirection:te?void 0:"column",gap:te?.5:.3,mb:.3},children:[!te&&r.jsxs(A,{sx:{flex:"1 1 auto",display:"flex",flexDirection:"column",minHeight:0,gap:.3},children:[r.jsx(A,{sx:{flexShrink:0},children:r.jsx(M,{component:"div",sx:{fontWeight:"700 !important",color:"primary.main",textAlign:"center",lineHeight:"1.2 !important",fontFamily:"'Montserrat', sans-serif !important",fontSize:{xs:"1.25rem !important",sm:"1.75rem !important",md:"2.5rem !important"},display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-word"},children:e})}),r.jsx(A,{sx:{flexGrow:1,flexShrink:1,position:"relative",minHeight:0,display:"flex",alignItems:"center",justifyContent:"center"},children:F?r.jsx(A,{component:"img",src:F,alt:`${e} demonstration`,onError:ce,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:2,objectFit:"contain"},loading:"lazy"}):i?r.jsx("iframe",{src:i,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",border:"none",borderRadius:"8px"},frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:`${e} video`}):Ae()})]}),!te&&r.jsxs(A,{sx:{flexShrink:0},children:[H&&r.jsx(kt,{icon:r.jsx(Bl,{}),severity:"success",sx:{mb:.3},children:"Set logged! Moving to next..."}),K()&&r.jsx(kt,{icon:r.jsx(qr,{}),severity:"info",sx:{mb:.3,"& .MuiAlert-message":{width:"100%"}},children:r.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[r.jsxs(M,{variant:"body2",sx:{mr:1,flexGrow:1},children:[" Try: ",m," lbs  ",b," reps",c!=null&&m>c&&" (w)",c!=null&&m===c&&b>d&&" (r)"]}),r.jsxs(A,{sx:{display:"flex",gap:1,flexShrink:0},children:[r.jsx(Ce,{size:"small",onClick:de,variant:"contained",children:"Accept"}),r.jsx(Ce,{size:"small",onClick:()=>V(!0),variant:"outlined",children:"Skip"})]})]})}),r.jsxs(A,{component:"form",onSubmit:ne,children:[r.jsx(A,{sx:{mb:2},children:r.jsx(O0,{weight:q,reps:U,lastWeight:c,lastReps:d,onWeightChange:B,onRepsChange:re,disabled:H,isBarbell:q$(W),barbellWeight:z.barbellWeight||45})}),r.jsxs(Le,{direction:"row",spacing:2,children:[g&&r.jsx(Ce,{type:"button",variant:"outlined",onClick:h,disabled:H,startIcon:r.jsx(Ll,{}),sx:{minHeight:"44px"},children:"Back"}),r.jsx(Ce,{type:"submit",variant:"contained",fullWidth:!g,disabled:H,endIcon:r.jsx(ih,{}),sx:{minHeight:"44px"},children:H?"Logging...":"Next"})]})]})]})]}),r.jsxs(Et,{open:ee,onClose:()=>G(!1),"aria-labelledby":"end-workout-dialog-title",children:[r.jsx(zt,{id:"end-workout-dialog-title",children:"End Workout"}),r.jsx(Dt,{children:r.jsx(M,{children:"How would you like to end this workout?"})}),r.jsxs(Nt,{sx:{flexDirection:"column",gap:1,pb:2,px:2},children:[r.jsx(Ce,{fullWidth:!0,variant:"contained",color:"primary",onClick:ke,sx:{minHeight:"44px"},children:"End and Save as Partial"}),r.jsx(Ce,{fullWidth:!0,variant:"outlined",color:"error",onClick:me,sx:{minHeight:"44px"},children:"End Without Saving"}),r.jsx(Ce,{fullWidth:!0,variant:"text",onClick:()=>G(!1),sx:{minHeight:"44px"},children:"Cancel"})]})]})]})});I0.displayName="ExerciseCard";I0.propTypes={exerciseName:T.string.isRequired,setNumber:T.number.isRequired,totalSets:T.number.isRequired,videoUrl:T.string,demoImage:T.string,lastWeight:T.number,lastReps:T.number,onSubmit:T.func.isRequired,onBack:T.func,showBack:T.bool,suggestedWeight:T.number,suggestedReps:T.number,showSuggestions:T.bool,elapsedTime:T.number,currentStep:T.number,totalSteps:T.number,isFavorite:T.bool,onToggleFavorite:T.func,onSkip:T.func,onSwap:T.func,onPartialComplete:T.func,onExit:T.func,showPartialComplete:T.bool,equipment:T.string};const du=()=>"/goodlift/",Rx=["back-squat","barbell-bench-press","barbell-bent-over-row","barbell-bicep-curl","barbell-bulgarian-split-squat","barbell-deadlift","barbell-declined-bench-press","barbell-hip-thrust","barbell-overhead-press","barbell-paused-bench-press","barbell-pullover","barbell-push-press","barbell-romanian-deadlift","barbell-shrugs","barbell-sumo-deadlift","barbell-upright-row","behind-neck-pulldown","bent-over-lateral-raise","bodyweight-bulgarian-split-squat","bodyweight-squat","burpee","close-grip-bench-press","close-grip-pulldown","dumbbell-bench-press","dumbbell-bent-over-row-single-arm","dumbbell-bent-over-row","dumbbell-concentration-curl","dumbbell-deadlift","dumbbell-declined-bench-press","dumbbell-fly","dumbbell-front-raise","dumbbell-goblet-squat","dumbbell-lateral-raise","dumbbell-pullover","dumbbell-romanian-deadlift","dumbbell-shoulder-press-2","dumbbell-shoulder-press","dumbbell-shrug","front-squat","good-morning","hammer-curl","incline-barbell-bench-press","incline-dumbbell-bench-press","incline-dumbbell-curl","incline-dumbbell-fly","jump-squat","kettlebell-swing","lat-pulldown","lunge","pull-up","push-up","reverse-grip-pulldown","rope-pulldown","seated-cable-row","slamball-squat","straight-arm-lat-pulldown","t-bar-row","trap-bar-deadlift","wall-sit"],Y$=e=>e.toLowerCase().trim().replace(/\s+/g," ").replace(/\s/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-+|-+$/g,""),G$=(e,t=!0,n=null)=>{if(n&&/^[a-zA-Z0-9-]+\.webp$/.test(n))return`${du()}demos/${n}`;const i=Y$(e);if(Rx.includes(i))return`${du()}demos/${i}.webp`;const o=K$(i);for(const d of o)if(Rx.includes(d))return`${du()}demos/${d}.webp`;const c=Q$(i);return c?`${du()}demos/${c}.webp`:t?`${du()}work-icon.svg`:null},Q$=e=>{const t=e.split("-").filter(o=>o.length>2);if(t.length===0)return null;let n=0,i=null;for(const o of Rx){const c=o.split("-");let d=0,f=0;for(const m of t)if(c.includes(m))d+=2,f++;else{const b=m.endsWith("s")?m.slice(0,-1):m,v=m.endsWith("s")?m:m+"s";(c.includes(b)||c.includes(v))&&(d+=1.5,f++)}t[0]&&c[0]===t[0]&&(d+=1);const h=Math.abs(t.length-c.length);d-=h*.3;const g=f/t.length;d>n&&g>=.7&&(n=d,i=o)}return n>=3?i:null},K$=e=>{const t=[];e.startsWith("dumbbell-incline-")?t.push(e.replace(/^dumbbell-incline-/,"incline-dumbbell-")):e.startsWith("incline-dumbbell-")&&t.push(e.replace(/^incline-dumbbell-/,"dumbbell-incline-")),e.startsWith("barbell-incline-")?t.push(e.replace(/^barbell-incline-/,"incline-barbell-")):e.startsWith("incline-barbell-")&&t.push(e.replace(/^incline-barbell-/,"barbell-incline-")),e.startsWith("dumbbell-decline-")?(t.push(e.replace(/^dumbbell-decline-/,"decline-dumbbell-")),t.push(e.replace("decline-","declined-"))):e.startsWith("decline-dumbbell-")&&t.push(e.replace(/^decline-dumbbell-/,"dumbbell-decline-")),e.startsWith("barbell-decline-")?(t.push(e.replace(/^barbell-decline-/,"decline-barbell-")),t.push(e.replace("decline-","declined-")),t.push(e.replace(/^barbell-decline-/,"barbell-declined-"))):e.startsWith("decline-barbell-")&&t.push(e.replace(/^decline-barbell-/,"barbell-decline-"));const n=["barbell","dumbbell","kettlebell","cable","bodyweight"];for(const i of n)if(e.startsWith(`${i}-`)){const o=e.replace(`${i}-`,"");t.push(o);for(const c of n)c!==i&&t.push(`${c}-${o}`)}if(e.startsWith("db-")?t.push(e.replace(/^db-/,"dumbbell-")):e.startsWith("dumbbell-")&&t.push(e.replace(/^dumbbell-/,"db-")),e.startsWith("bb-")?t.push(e.replace(/^bb-/,"barbell-")):e.startsWith("barbell-")&&t.push(e.replace(/^barbell-/,"bb-")),e.includes("close-grip-")?t.push(e.replace("close-grip-","close-")):e.startsWith("barbell-close-")&&t.push(e.replace("barbell-close-","close-")),e.includes("single-arm-")){const i=e.replace("single-arm-","");t.push(i),t.push(i+"-single-arm")}return e.includes("hammer-curl")&&(t.push(e.replace("hammer-curl","curl")),t.push("hammer-curl")),e.includes("concentration-curl")&&(t.push(e.replace("concentration-curl","curl")),t.push("concentration-curl")),e.includes("lunge")&&(t.push("lunge"),t.push("walking-lunge"),t.push("reverse-lunge")),e.includes("incline-")?t.push(e.replace("incline-","inclined-")):e.includes("inclined-")&&t.push(e.replace("inclined-","incline-")),e.includes("decline-")?t.push(e.replace("decline-","declined-")):e.includes("declined-")&&t.push(e.replace("declined-","decline-")),e.includes("shoulder-press")&&t.push(e.replace("shoulder-press","shoulder-press-2")),e==="squat"&&(t.push("bodyweight-squat"),t.push("back-squat")),t},X$=()=>{const[e,t]=y.useState(0),[n,i]=y.useState(!1),o="Dumbbell Incline Bench Press",d=G$(o,!0,"incline-dumbbell-bench-press.webp");y.useState(()=>{const j=setInterval(()=>{t(E=>E+1)},1e3);return()=>clearInterval(j)},[]);const f=j=>{console.log("Set logged:",j),alert(`Set logged: ${j.weight} lbs  ${j.reps} reps`)},h=()=>{alert("Skip exercise clicked")},g=()=>{alert("Swap exercise clicked")},m=()=>{alert("Partial complete clicked")},b=()=>{alert("Exit clicked")},v=()=>{i(!n)};return r.jsx(vP,{maxWidth:!1,disableGutters:!0,sx:{height:"100vh",overflow:"hidden"},children:r.jsxs(A,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[r.jsx(A,{sx:{position:"fixed",bottom:0,left:0,right:0,height:"60px",bgcolor:"primary.main",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:600},children:"Bottom Navigation (60px)"}),r.jsx(A,{sx:{flex:1,overflow:"auto",pb:"60px"},children:r.jsx(I0,{exerciseName:o,demoImage:d,setNumber:2,totalSets:3,lastWeight:65,lastReps:8,suggestedWeight:67.5,suggestedReps:8,showSuggestions:!0,onSubmit:f,showBack:!0,elapsedTime:e,currentStep:5,totalSteps:24,isFavorite:n,onToggleFavorite:v,onSkip:h,onSwap:g,onPartialComplete:m,onExit:b,showPartialComplete:!0})})]})})},tM=({open:e,onClose:t,userId:n})=>{const[i,o]=y.useState(!1),[c,d]=y.useState(null),f=async()=>{if(!n){d("No user ID provided");return}o(!0),d(null);try{const g=YC(),m=[];g.workout_history&&g.workout_history.length>0&&m.push(id(n,g.workout_history)),g.user_stats&&m.push(Mh(n,g.user_stats)),g.exercise_weights&&Object.keys(g.exercise_weights).length>0&&m.push(Hx(n,g.exercise_weights)),g.exercise_target_reps&&Object.keys(g.exercise_target_reps).length>0&&m.push(Ux(n,g.exercise_target_reps)),await Promise.all(m),Pw(),o(!1),t(!0)}catch(g){console.error("Error migrating guest data:",g),d("Failed to migrate data. Please try again."),o(!1)}},h=()=>{Pw(),t(!1)};return r.jsxs(Et,{open:e,onClose:i?void 0:()=>t(!1),maxWidth:"sm",fullWidth:!0,disableEscapeKeyDown:i,PaperProps:{sx:{borderRadius:2}},children:[r.jsx(zt,{sx:{pb:1},children:r.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(Cw,{sx:{color:"primary.main",fontSize:28}}),r.jsx(M,{variant:"h6",component:"span",sx:{fontWeight:600},children:"Save Your Guest Data?"})]})}),r.jsxs(Dt,{children:[r.jsx(M,{variant:"body1",sx:{mb:2},children:"You have workout data from your guest session. Would you like to transfer it to your new account?"}),r.jsx(M,{variant:"body2",sx:{color:"text.secondary"},children:"This will save your workout history, progress, and settings to the cloud."}),c&&r.jsx(M,{variant:"body2",sx:{color:"error.main",mt:2},children:c})]}),r.jsxs(Nt,{sx:{p:2,pt:0},children:[r.jsx(Ce,{onClick:h,disabled:i,variant:"text",sx:{color:"text.secondary"},children:"Skip"}),r.jsx(Ce,{onClick:f,disabled:i,variant:"contained",startIcon:i?r.jsx(Ma,{size:20,color:"inherit"}):r.jsx(Cw,{}),sx:{fontWeight:600},children:i?"Migrating...":"Save My Data"})]})]})};tM.propTypes={open:T.bool.isRequired,onClose:T.func.isRequired,userId:T.string};const nM=({color:e,delay:t,startX:n})=>{const i=["#FF6B6B","#4ECDC4","#FFD93D","#6BCB77","#4D96FF","#FF9F9F"],o=e||i[Math.floor(Math.random()*i.length)];return r.jsx(gt.div,{initial:{top:-20,left:`${n}%`,rotate:0,scale:1},animate:{top:"110vh",left:`${n+(Math.random()*20-10)}%`,rotate:Math.random()*720-360,scale:[1,1.2,.8]},transition:{duration:3+Math.random()*2,delay:t,ease:"easeOut"},style:{position:"fixed",width:Math.random()*10+5+"px",height:Math.random()*10+5+"px",backgroundColor:o,borderRadius:Math.random()>.5?"50%":"0%",zIndex:9999,pointerEvents:"none"}})};nM.propTypes={color:T.string,delay:T.number,startX:T.number};const sM=({active:e=!1,duration:t=3e3,intensity:n=50})=>{const[i,o]=y.useState([]);return y.useEffect(()=>{if(e){const c=Array.from({length:n},(f,h)=>({id:`confetti-${Date.now()}-${h}`,startX:Math.random()*100,delay:Math.random()*.5}));o(c);const d=setTimeout(()=>{o([])},t);return()=>clearTimeout(d)}},[e,t,n]),r.jsx(A,{sx:{position:"fixed",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:9999},children:r.jsx(Pa,{children:i.map(c=>r.jsx(nM,{startX:c.startX,delay:c.delay},c.id))})})};sM.propTypes={active:T.bool,duration:T.number,intensity:T.number};const rM=({open:e,onClose:t,achievement:n,onShare:i})=>{const[o,c]=y.useState(!1);if(y.useEffect(()=>{if(e&&n){c(!0);const g=setTimeout(()=>{c(!1)},3e3);return()=>clearTimeout(g)}},[e,n]),!n)return null;const d=Kh[n.tier],f=async()=>{const g=`I just unlocked the "${n.name}" achievement in GoodLift! ${n.icon}

${n.description}`;if(navigator.share)try{await navigator.share({title:"GoodLift Achievement",text:g})}catch(m){m.name!=="AbortError"&&(console.error("Error sharing:",m),h(g))}else h(g);i&&i(n)},h=g=>{navigator.clipboard.writeText(g).then(()=>{alert("Achievement text copied to clipboard!")})};return r.jsxs(r.Fragment,{children:[r.jsx(sM,{active:o}),r.jsxs(Et,{open:e,onClose:t,maxWidth:"sm",fullWidth:!0,TransitionComponent:AC,TransitionProps:{direction:"up"},PaperProps:{sx:{borderRadius:3,background:d.gradient,color:d.textColor,overflow:"visible"}},children:[r.jsxs(Dt,{sx:{textAlign:"center",py:4},children:[r.jsx(gt.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:260,damping:20,delay:.1},children:r.jsx(A,{sx:{width:100,height:100,borderRadius:"50%",bgcolor:"rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",border:"4px solid rgba(255, 255, 255, 0.3)"},children:r.jsx(Ul,{sx:{fontSize:"4rem",color:"rgba(255, 255, 255, 0.9)"}})})}),r.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:r.jsx(M,{variant:"h6",sx:{fontWeight:600,mb:2,opacity:.9,letterSpacing:"0.1em",textTransform:"uppercase"},children:"Achievement Unlocked!"})}),r.jsx(gt.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:15,delay:.5},children:r.jsx(M,{variant:"h1",sx:{fontSize:"5rem",mb:2},children:n.icon})}),r.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:r.jsx(M,{variant:"h4",sx:{fontWeight:700,mb:1},children:n.name})}),r.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},children:r.jsx(A,{sx:{display:"inline-block",px:2,py:.5,borderRadius:2,bgcolor:"rgba(255, 255, 255, 0.2)",mb:2},children:r.jsx(M,{variant:"caption",sx:{fontWeight:700,letterSpacing:"0.1em",textTransform:"uppercase"},children:n.tier})})}),r.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.1},children:r.jsx(M,{variant:"body1",sx:{opacity:.9,maxWidth:"80%",margin:"0 auto"},children:n.description})})]}),r.jsx(Nt,{sx:{justifyContent:"center",pb:3,px:3},children:r.jsxs(Le,{direction:{xs:"column",sm:"row"},spacing:2,sx:{width:"100%"},children:[r.jsx(Ce,{variant:"contained",onClick:t,fullWidth:!0,sx:{bgcolor:"rgba(255, 255, 255, 0.9)",color:"primary.main","&:hover":{bgcolor:"rgba(255, 255, 255, 1)"}},children:"Awesome!"}),r.jsx(Ce,{variant:"outlined",startIcon:r.jsx(OC,{}),onClick:f,fullWidth:!0,sx:{borderColor:"rgba(255, 255, 255, 0.5)",color:"rgba(255, 255, 255, 0.9)","&:hover":{borderColor:"rgba(255, 255, 255, 0.8)",bgcolor:"rgba(255, 255, 255, 0.1)"}},children:"Share"})]})})]})]})};rM.propTypes={open:T.bool.isRequired,onClose:T.func.isRequired,achievement:T.shape({id:T.string.isRequired,name:T.string.isRequired,description:T.string.isRequired,icon:T.string.isRequired,tier:T.string.isRequired}),onShare:T.func};const Z$=()=>{const[e,t]=y.useState(new Set);return y.useEffect(()=>{const n=async()=>{const o=Xx(),c=await KC(),d=new Set;c.forEach(h=>{h.exercises&&Array.isArray(h.exercises)&&h.exercises.forEach(g=>{g&&g["Exercise Name"]&&d.add(g["Exercise Name"])})});const f=new Set([...o,...d]);t(f)};n();const i=setInterval(n,3e4);return()=>clearInterval(i)},[]),e},Fi="v1.0.0-simplify-data-structure",iM="goodlift_migration_version",J$=()=>{try{return $e()?Mt("migration_version")===Fi:localStorage.getItem(iM)===Fi}catch(e){return console.error("Error checking migration status:",e),!1}},e9=()=>{try{$e()?mt("migration_version",Fi):localStorage.setItem(iM,Fi),console.log(`Migration ${Fi} completed successfully`)}catch(e){console.error("Error marking migration as completed:",e)}},ir=e=>{try{if($e())return Mt(e);{const t=localStorage.getItem(`goodlift_${e}`);return t?JSON.parse(t):null}}catch(t){return console.error(`Error getting data for ${e}:`,t),null}},Sd=(e,t)=>{try{$e()?mt(e,t):localStorage.setItem(`goodlift_${e}`,JSON.stringify(t))}catch(n){console.error(`Error setting data for ${e}:`,n)}},W0=e=>{try{$e()?mt(e,null):localStorage.removeItem(`goodlift_${e}`)}catch(t){console.error(`Error removing data for ${e}:`,t)}},t9=()=>{console.log("Step 1: Migrating workout history...");const e=ir("workout_history");if(!e||!Array.isArray(e)||e.length===0){console.log("No workout history to migrate");return}let t=0;const n=e.map(i=>{let o=!1;const c={...i};if(c.date&&typeof c.date=="number")c.date=new Date(c.date).toISOString(),o=!0;else if(c.date&&typeof c.date=="string")try{const d=new Date(c.date);isNaN(d.getTime())||(c.date=d.toISOString(),o=!0)}catch{console.warn("Invalid date in workout:",c.date)}return(c.duration===void 0||c.duration===null)&&(c.duration=0,o=!0),!c.type&&c.exercises?.length>0&&(c.type="Workout",o=!0),o&&t++,c});t>0?(Sd("workout_history",n),console.log(`Migrated ${t} workout entries`)):console.log("All workout entries already in correct format")},n9=()=>{console.log("Step 2: Archiving yoga sessions...");const e=ir("yoga_sessions");if(!e||Array.isArray(e)&&e.length===0){console.log("No yoga sessions to archive");return}const t={data:e,archivedAt:new Date().toISOString(),reason:"Yoga feature removed, replaced with stretching/mobility sessions"};Sd("archived_yoga_sessions",t),W0("yoga_sessions"),console.log(`Archived ${Array.isArray(e)?e.length:1} yoga session(s)`)},s9=()=>{console.log("Step 3: Archiving favorite workouts...");const e=ir("favorite_workouts");if(!e||Array.isArray(e)&&e.length===0){console.log("No favorite workouts to archive");return}const t={data:e,archivedAt:new Date().toISOString(),reason:"Favorite workouts replaced by workout plans feature"};Sd("archived_favorite_workouts",t),W0("favorite_workouts"),console.log(`Archived ${e.length} favorite workout(s)`)},r9=()=>{console.log("Step 4: Cleaning up user stats...");const e=ir("user_stats");if(!e){console.log("No user stats to clean up");return}let t=!1;"totalYogaTime"in e&&(delete e.totalYogaTime,t=!0,console.log("Removed totalYogaTime from user stats")),Object.entries({totalWorkouts:0,totalTime:0,totalHiitTime:0,totalCardioTime:0,totalStretchTime:0}).forEach(([i,o])=>{i in e||(e[i]=o,t=!0)}),t?(Sd("user_stats",e),console.log("Updated user stats structure")):console.log("User stats already clean")},i9=()=>{console.log("Step 5: Validating session data..."),["hiit_sessions","cardio_sessions","stretch_sessions"].forEach(t=>{const n=ir(t);if(!n||!Array.isArray(n)||n.length===0){console.log(`No ${t} to validate`);return}let i=0;const o=n.map(c=>{let d=!1;const f={...c};return f.id||(f.id=`${Date.now()}-${Math.random().toString(36).substring(2,11)}`,d=!0),f.date||(f.date=Date.now(),d=!0),typeof f.date=="number"&&(f.date=new Date(f.date).toISOString(),d=!0),(f.duration===void 0||f.duration===null)&&(f.duration=0,d=!0),d&&i++,f});i>0&&(Sd(t,o),console.log(`Validated ${i} ${t} entries`))})},a9=()=>{console.log("Step 6: Removing orphaned references...");const e=["yoga_settings","yoga_preferences","legacy_favorites"];let t=0;e.forEach(n=>{ir(n)!==null&&(W0(n),t++,console.log(`Removed orphaned key: ${n}`))}),console.log(t===0?"No orphaned references found":`Removed ${t} orphaned reference(s)`)},o9=()=>{const e={version:Fi,timestamp:new Date().toISOString(),summary:{workoutHistory:ir("workout_history")?.length||0,hiitSessions:ir("hiit_sessions")?.length||0,cardioSessions:ir("cardio_sessions")?.length||0,stretchSessions:ir("stretch_sessions")?.length||0,workoutPlans:ir("workout_plans")?.length||0,archivedYoga:ir("archived_yoga_sessions")?.data?.length||0,archivedFavoriteWorkouts:ir("archived_favorite_workouts")?.data?.length||0}};return console.log("Migration Report:",e),e},l9=()=>{if(console.log("=== Starting Data Structure Simplification Migration ==="),console.log(`Version: ${Fi}`),J$())return console.log("Migration already completed, skipping..."),{status:"skipped",reason:"Migration already completed",version:Fi};try{t9(),n9(),s9(),r9(),i9(),a9(),e9();const e=o9();return console.log("=== Migration Completed Successfully ==="),{status:"success",...e}}catch(e){return console.error("Migration failed:",e),{status:"failed",error:e.message,version:Fi}}};function c9(){const[e,t]=y.useState("home"),[n,i]=y.useState([]),[o,c]=y.useState("full"),[d,f]=y.useState(new Set(["all"])),[h,g]=y.useState([]),[m,b]=y.useState(null),[v]=y.useState(!1),[j,E]=y.useState(!1),[S,w]=y.useState({open:!1,message:"",severity:"info"}),[C,k]=y.useState(!1),[R,O]=y.useState(!1),[I,P]=y.useState(null),[W,L]=y.useState(!1),[z,q]=y.useState(!1),[B,U]=y.useState([2,2,2,2]),[re,H]=y.useState(3),{currentUser:$,isGuest:N,hasGuestData:V}=Ao(),F=cr(`(min-width: ${Xl.desktop}px)`),{generateWorkout:X,allExercises:oe,exerciseDB:ue}=HD(),Te=Z$();y.useEffect(()=>{(async()=>{try{console.log("Running data structure migration...");const we=l9();we.status==="success"?console.log("Migration completed:",we):we.status==="skipped"?console.log("Migration skipped:",we.reason):console.error("Migration failed:",we)}catch(we){console.error("Error running migration:",we)}})()},[]),y.useEffect(()=>{(async()=>{try{await KD()}catch(we){console.error("Error cleaning up expired backups:",we)}})()},[]),y.useEffect(()=>{k(N?yO():!1)},[N]),y.useEffect(()=>{$&&!N&&V&&O(!0)},[$,N,V]);const De=async me=>{if(O(!1),me||ah(),$&&$.uid)try{await QC($.uid)}catch(we){console.error("Error loading user data after migration:",we)}},ee=()=>{bO(),k(!1)};y.useEffect(()=>{const me=()=>{if(window.visualViewport){const J=window.visualViewport;document.documentElement.style.setProperty("--viewport-height",`${J.height}px`)}},we=()=>{setTimeout(()=>{window.scrollTo(0,0),me()},100)};return window.addEventListener("resize",me),window.addEventListener("orientationchange",we),window.visualViewport&&window.visualViewport.addEventListener("resize",me),me(),()=>{window.removeEventListener("resize",me),window.removeEventListener("orientationchange",we),window.visualViewport&&window.visualViewport.removeEventListener("resize",me)}},[]),y.useEffect(()=>{if(oe.length>0){const me=new Set;oe.forEach(we=>{const J=we.Equipment;J.includes("Cable")?me.add("Cable Machine"):J.includes("Dumbbell")?me.add("Dumbbells"):me.add(J)}),g(Array.from(me).sort())}},[oe]);const G=me=>{t(me)},ae=me=>{c(me)},ve=me=>{if(me instanceof Set)f(me);else{const we=new Set;we.add(me),f(we)}},te=(me,we,J=null,ge=[2,2,2,2])=>{U(ge);const We=J||X(me,we,ge);i(We),c(me),q(!1),E(!0),t("preview")},ye=(me,we,J=[2,2,2,2])=>{c(me),U(J);const ge=J.reduce((_e,Re)=>_e+Re,0),We=Array(ge).fill(null);i(We),q(!0),E(!0),t("preview")},Se=(me,we,J)=>{me&&i(me),we&&U(we),J!==void 0&&H(J),E(!1),q(!1),t("workout")},Y=()=>{E(!1),q(!1),t("home")},ce=y.useCallback((me,we)=>{if(!ue||Object.keys(ue).length===0){console.error("Exercise database not available"),w({open:!0,message:"Exercise database not loaded",severity:"error"});return}const J=me["Primary Muscle"],ge=me["Exercise Type"],We=me["Exercise Name"],_e=ue[J]||[];let Re=0;const Fe=3;let Qe=null;for(;Re<Fe&&!Qe;){Re++;let Ze=_e;const et=Array.from(d);et.includes("all")||(Ze=_e.filter(ot=>{const vt=ot.Equipment;return et.some(ft=>ft==="Cable Machine"?vt.includes("Cable"):ft==="Dumbbells"?vt.includes("Dumbbell"):vt.includes(ft))})),Ze=Ze.filter(ot=>ot["Exercise Type"]===ge);const xt=n.map(ot=>ot["Exercise Name"]);let yt=Ze.filter(ot=>ot["Exercise Name"]!==We&&!xt.includes(ot["Exercise Name"]));if(yt.length===0&&(yt=Ze.filter(ot=>ot["Exercise Name"]!==We)),yt.length===0)continue;const ct=[...yt];yt.forEach(ot=>{Te.has(ot["Exercise Name"])&&ct.push(ot)}),Qe=ct[Math.floor(Math.random()*ct.length)]}if(!Qe){w({open:!0,message:"No alternative exercises available",severity:"warning"});return}const He=[...n];He[we]=Qe,i(He)},[ue,n,d,Te]),Ae=y.useCallback((me,we)=>{if(we?.toLowerCase().includes("bodyweight")||we?.toLowerCase().includes("body weight"))return 0;const J=we.includes("Dumbbell")||we.includes("Kettlebell"),ge=we?.toLowerCase().includes("barbell");return Of.UPPER_BODY.includes(me)?ge?va.UPPER_BODY.BARBELL:va.UPPER_BODY.DUMBBELL:Of.LOWER_BODY.includes(me)?ge?va.LOWER_BODY.BARBELL:J?va.LOWER_BODY.DUMBBELL:5:2.5},[]),ne=y.useCallback((me,we)=>{if(we?.toLowerCase().includes("bodyweight")||we?.toLowerCase().includes("body weight"))return 0;const J=we.includes("Dumbbell")||we.includes("Kettlebell"),ge=we?.toLowerCase().includes("barbell");return Of.UPPER_BODY.includes(me)?ge?va.UPPER_BODY.BARBELL:va.UPPER_BODY.DUMBBELL:Of.LOWER_BODY.includes(me)?ge?va.LOWER_BODY.BARBELL:J?va.LOWER_BODY.DUMBBELL:5:2.5},[]),de=y.useCallback(async me=>{const we=[],J=[];let ge=0;for(const[Re,Fe]of Object.entries(me.exercises)){const Qe=Fe.sets[Fe.sets.length-1];for(const He of Fe.sets)He.weight>0&&He.reps>0&&(ge+=He.weight*He.reps);if(Qe?.weight>0){const He=await ka(Re);if(Fe.sets.every(et=>et.reps>=He)&&Fe.sets.length>=$w){const et=n.find(xt=>xt["Exercise Name"]===Re);if(et){const xt=et["Primary Muscle"].split("(")[0].trim(),yt=Ae(xt,et.Equipment);if(yt>0){const ct=Qe.weight+yt;await $r(Re,ct),we.push({exercise:Re,oldWeight:Qe.weight,newWeight:ct,increase:yt}),await RO()}}}else if(S7(Fe.sets,He,$w)){const xt=n.find(yt=>yt["Exercise Name"]===Re);if(xt){const yt=xt["Primary Muscle"].split("(")[0].trim(),ct=ne(yt,xt.Equipment);if(ct>0&&Qe.weight>ct){const ot=Qe.weight-ct;await $r(Re,ot),J.push({exercise:Re,oldWeight:Qe.weight,newWeight:ot,decrease:ct})}else await $r(Re,Qe.weight)}else await $r(Re,Qe.weight)}else await $r(Re,Qe.weight)}}if(ge>0&&await OO(ge),we.length>0){const Re=we.map(Fe=>`${Fe.exercise}: ${Fe.oldWeight}  ${Fe.newWeight} lbs (+${Fe.increase} lbs)`);w({open:!0,message:` Progressive Overload! You hit your target reps!

${Re.join(`
`)}`,severity:"success"})}else if(J.length>0){const Re=J.map(Fe=>`${Fe.exercise}: ${Fe.oldWeight}  ${Fe.newWeight} lbs (-${Fe.decrease} lbs)`);w({open:!0,message:` Weight adjusted for next session. Keep pushing!

${Re.join(`
`)}`,severity:"info"})}const We={...me,type:o};await Qx(We);const _e=await od();_e.totalWorkouts+=1,_e.totalTime+=me.duration,await Kx(_e);try{const Re=await XC(),Fe=await Kr(),Qe=H7(_e,Fe,Re);if(Qe.length>0){for(const He of Qe)await AO(He.id);P(Qe[0]),L(!0)}try{await mo.syncPinnedExercisesWithHistory(Fe)}catch(He){console.error("Error syncing pinned exercises after workout:",He)}}catch(Re){console.error("Error checking achievements:",Re)}b(We),t("completion")},[o,n,Ae,ne]),K=()=>{t("home")},Z=()=>{t("home")},be=()=>{if(!m)return;let we="data:text/csv;charset=utf-8,"+["Date","WorkoutType","Duration","Exercise","Set","Weight","Reps"].join(",")+`
`;for(const We in m.exercises)m.exercises[We].sets.forEach(Re=>{const Fe=[new Date(m.date).toLocaleString(),m.type,m.duration,We,Re.set,Re.weight,Re.reps];we+=Fe.join(",")+`
`});const J=encodeURI(we),ge=document.createElement("a");ge.setAttribute("href",J),ge.setAttribute("download",`GoodLift_Workout_${new Date(m.date).toISOString().split("T")[0]}.csv`),document.body.appendChild(ge),ge.click(),document.body.removeChild(ge)},{theme:ke}=$D();return $?r.jsxs(Tw,{theme:ke,children:[r.jsx(kw,{}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",minHeight:"100vh",marginLeft:F?"80px":"0"},children:[r.jsx(ET,{currentTab:e}),r.jsxs("div",{id:"app",style:{flex:1,marginTop:"48px",paddingBottom:F?"2rem":"80px"},children:[e==="home"&&r.jsx(X2,{onNavigate:G,loading:v,workoutType:o,selectedEquipment:d,equipmentOptions:h,onWorkoutTypeChange:ae,onEquipmentChange:ve,onStartWorkout:te,onCustomize:ye}),e==="preview"&&j&&r.jsx(w0,{workout:n,workoutType:o,onStart:Se,onCancel:Y,onRandomizeExercise:ce,equipmentFilter:Array.from(d),isCustomizeMode:z,supersetConfig:B,setsPerSuperset:re}),e==="workout"&&n.length>0&&r.jsx(aD,{open:!0,workoutPlan:n,onComplete:de,onExit:K,supersetConfig:B,setsPerSuperset:re}),e==="completion"&&m&&r.jsx(C0,{workoutData:m,workoutPlan:n,onFinish:Z,onExportCSV:be}),e==="progress"&&r.jsx(LD,{onNavigate:G,onStartWorkout:te}),(e==="cardio"||e==="hiit"||e==="timer")&&r.jsx($y,{onNavigate:G}),e==="log-activity"&&r.jsx(x0,{onNavigate:G}),(e==="stretch"||e==="mobility")&&r.jsx(C$,{}),e==="exercise-list"&&r.jsx(k$,{}),e==="settings"&&r.jsx(XD,{onNavigate:G}),e==="profile"&&r.jsx(V$,{}),e==="edit-weekly-schedule"&&r.jsx(eM,{onNavigate:G}),e==="exercise-card-demo"&&r.jsx(X$,{})]}),r.jsx(ry,{currentScreen:e,onNavigate:G}),r.jsx(tM,{open:R,onClose:De,userId:$?.uid}),r.jsx(rM,{open:W,onClose:()=>{L(!1),P(null)},achievement:I}),r.jsx(Or,{open:C,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{bottom:{xs:80,sm:24}},children:r.jsx(kt,{severity:"info",onClose:ee,action:r.jsx(Ce,{color:"inherit",size:"small",onClick:()=>t("progress"),sx:{fontWeight:600},children:"Sign Up"}),sx:{width:"100%",maxWidth:"600px","& .MuiAlert-message":{fontSize:"0.95rem",fontWeight:500}},children:"You're in guest mode. Sign up to save your data permanently!"})}),r.jsx(Or,{open:S.open,autoHideDuration:8e3,onClose:()=>w({...S,open:!1}),anchorOrigin:{vertical:"top",horizontal:"center"},children:r.jsx(kt,{onClose:()=>w({...S,open:!1}),severity:S.severity,sx:{whiteSpace:"pre-line","& .MuiAlert-message":{fontSize:"1rem",fontWeight:500}},children:S.message})})]})]}):r.jsxs(Tw,{theme:ke,children:[r.jsx(kw,{}),r.jsx(v$,{})]})}function u9(){return r.jsx(qD,{children:r.jsx(c9,{})})}var Xh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},d9={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},f9=class{#e=d9;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},Px=new f9;function h9(e){setTimeout(e,0)}var Zh=typeof window>"u"||"Deno"in globalThis;function Hr(){}function p9(e,t){return typeof e=="function"?e(t):e}function m9(e){return typeof e=="number"&&e>=0&&e!==1/0}function g9(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ox(e,t){return typeof e=="function"?e(t):e}function x9(e,t){return typeof e=="function"?e(t):e}function mC(e,t){const{type:n="all",exact:i,fetchStatus:o,predicate:c,queryKey:d,stale:f}=e;if(d){if(i){if(t.queryHash!==_0(d,t.options))return!1}else if(!nd(t.queryKey,d))return!1}if(n!=="all"){const h=t.isActive();if(n==="active"&&!h||n==="inactive"&&h)return!1}return!(typeof f=="boolean"&&t.isStale()!==f||o&&o!==t.state.fetchStatus||c&&!c(t))}function gC(e,t){const{exact:n,status:i,predicate:o,mutationKey:c}=e;if(c){if(!t.options.mutationKey)return!1;if(n){if(td(t.options.mutationKey)!==td(c))return!1}else if(!nd(t.options.mutationKey,c))return!1}return!(i&&t.state.status!==i||o&&!o(t))}function _0(e,t){return(t?.queryKeyHashFn||td)(e)}function td(e){return JSON.stringify(e,(t,n)=>Ix(n)?Object.keys(n).sort().reduce((i,o)=>(i[o]=n[o],i),{}):n)}function nd(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>nd(e[n],t[n])):!1}var y9=Object.prototype.hasOwnProperty;function aM(e,t){if(e===t)return e;const n=xC(e)&&xC(t);if(!n&&!(Ix(e)&&Ix(t)))return t;const o=(n?e:Object.keys(e)).length,c=n?t:Object.keys(t),d=c.length,f=n?new Array(d):{};let h=0;for(let g=0;g<d;g++){const m=n?g:c[g],b=e[m],v=t[m];if(b===v){f[m]=b,(n?g<o:y9.call(e,m))&&h++;continue}if(b===null||v===null||typeof b!="object"||typeof v!="object"){f[m]=v;continue}const j=aM(b,v);f[m]=j,j===b&&h++}return o===d&&h===o?e:f}function xC(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Ix(e){if(!yC(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!yC(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function yC(e){return Object.prototype.toString.call(e)==="[object Object]"}function b9(e){return new Promise(t=>{Px.setTimeout(t,e)})}function v9(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?aM(e,t):t}function S9(e,t,n=0){const i=[...e,t];return n&&i.length>n?i.slice(1):i}function w9(e,t,n=0){const i=[t,...e];return n&&i.length>n?i.slice(0,-1):i}var z0=Symbol();function oM(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===z0?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var j9=class extends Xh{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!Zh&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},lM=new j9;function C9(){let e,t;const n=new Promise((o,c)=>{e=o,t=c});n.status="pending",n.catch(()=>{});function i(o){Object.assign(n,o),delete n.resolve,delete n.reject}return n.resolve=o=>{i({status:"fulfilled",value:o}),e(o)},n.reject=o=>{i({status:"rejected",reason:o}),t(o)},n}var T9=h9;function k9(){let e=[],t=0,n=f=>{f()},i=f=>{f()},o=T9;const c=f=>{t?e.push(f):o(()=>{n(f)})},d=()=>{const f=e;e=[],f.length&&o(()=>{i(()=>{f.forEach(h=>{n(h)})})})};return{batch:f=>{let h;t++;try{h=f()}finally{t--,t||d()}return h},batchCalls:f=>(...h)=>{c(()=>{f(...h)})},schedule:c,setNotifyFunction:f=>{n=f},setBatchNotifyFunction:f=>{i=f},setScheduler:f=>{o=f}}}var Ms=k9(),E9=class extends Xh{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!Zh&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},kh=new E9;function D9(e){return Math.min(1e3*2**e,3e4)}function cM(e){return(e??"online")==="online"?kh.isOnline():!0}var Wx=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function uM(e){let t=!1,n=0,i;const o=C9(),c=()=>o.status!=="pending",d=S=>{if(!c()){const w=new Wx(S);v(w),e.onCancel?.(w)}},f=()=>{t=!0},h=()=>{t=!1},g=()=>lM.isFocused()&&(e.networkMode==="always"||kh.isOnline())&&e.canRun(),m=()=>cM(e.networkMode)&&e.canRun(),b=S=>{c()||(i?.(),o.resolve(S))},v=S=>{c()||(i?.(),o.reject(S))},j=()=>new Promise(S=>{i=w=>{(c()||g())&&S(w)},e.onPause?.()}).then(()=>{i=void 0,c()||e.onContinue?.()}),E=()=>{if(c())return;let S;const w=n===0?e.initialPromise:void 0;try{S=w??e.fn()}catch(C){S=Promise.reject(C)}Promise.resolve(S).then(b).catch(C=>{if(c())return;const k=e.retry??(Zh?0:3),R=e.retryDelay??D9,O=typeof R=="function"?R(n,C):R,I=k===!0||typeof k=="number"&&n<k||typeof k=="function"&&k(n,C);if(t||!I){v(C);return}n++,e.onFail?.(n,C),b9(O).then(()=>g()?void 0:j()).then(()=>{t?v(C):E()})})};return{promise:o,status:()=>o.status,cancel:d,continue:()=>(i?.(),o),cancelRetry:f,continueRetry:h,canStart:m,start:()=>(m()?E():j().then(E),o)}}var dM=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),m9(this.gcTime)&&(this.#e=Px.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Zh?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Px.clearTimeout(this.#e),this.#e=void 0)}},M9=class extends dM{#e;#t;#n;#r;#s;#a;#o;constructor(e){super(),this.#o=!1,this.#a=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.client,this.#n=this.#r.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=vC(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(e){if(this.options={...this.#a,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=vC(this.options);t.data!==void 0&&(this.setState(bC(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,t){const n=v9(this.state.data,e,this.options);return this.#i({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#i({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#s?.promise;return this.#s?.cancel(e),t?t.then(Hr).catch(Hr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>x9(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===z0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Ox(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!g9(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#s&&(this.#o?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(this.#o=!0,n.signal)})},o=()=>{const f=oM(this.options,t),g=(()=>{const m={client:this.#r,queryKey:this.queryKey,meta:this.meta};return i(m),m})();return this.#o=!1,this.options.persister?this.options.persister(f,g,this):f(g)},d=(()=>{const f={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:o};return i(f),f})();this.options.behavior?.onFetch(d,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==d.fetchOptions?.meta)&&this.#i({type:"fetch",meta:d.fetchOptions?.meta}),this.#s=uM({initialPromise:t?.initialPromise,fn:d.fetchFn,onCancel:f=>{f instanceof Wx&&f.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(f,h)=>{this.#i({type:"failed",failureCount:f,error:h})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0});try{const f=await this.#s.start();if(f===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(f),this.#n.config.onSuccess?.(f,this),this.#n.config.onSettled?.(f,this.state.error,this),f}catch(f){if(f instanceof Wx){if(f.silent)return this.#s.promise;if(f.revert){if(this.state.data===void 0)throw f;return this.state.data}}throw this.#i({type:"error",error:f}),this.#n.config.onError?.(f,this),this.#n.config.onSettled?.(this.state.data,f,this),f}finally{this.scheduleGc()}}#i(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...A9(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,...bC(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?i:void 0,i;case"error":const o=e.error;return{...n,error:o,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),Ms.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function A9(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:cM(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function bC(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function vC(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,i=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function SC(e){return{onFetch:(t,n)=>{const i=t.options,o=t.fetchOptions?.meta?.fetchMore?.direction,c=t.state.data?.pages||[],d=t.state.data?.pageParams||[];let f={pages:[],pageParams:[]},h=0;const g=async()=>{let m=!1;const b=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},v=oM(t.options,t.fetchOptions),j=async(E,S,w)=>{if(m)return Promise.reject();if(S==null&&E.pages.length)return Promise.resolve(E);const k=(()=>{const P={client:t.client,queryKey:t.queryKey,pageParam:S,direction:w?"backward":"forward",meta:t.options.meta};return b(P),P})(),R=await v(k),{maxPages:O}=t.options,I=w?w9:S9;return{pages:I(E.pages,R,O),pageParams:I(E.pageParams,S,O)}};if(o&&c.length){const E=o==="backward",S=E?R9:wC,w={pages:c,pageParams:d},C=S(i,w);f=await j(w,C,E)}else{const E=e??c.length;do{const S=h===0?d[0]??i.initialPageParam:wC(i,f);if(h>0&&S==null)break;f=await j(f,S),h++}while(h<E)}return f};t.options.persister?t.fetchFn=()=>t.options.persister?.(g,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=g}}}function wC(e,{pages:t,pageParams:n}){const i=t.length-1;return t.length>0?e.getNextPageParam(t[i],t,n[i],n):void 0}function R9(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var P9=class extends dM{#e;#t;#n;#r;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||O9(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#s({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=uM({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(c,d)=>{this.#s({type:"failed",failureCount:c,error:d})},onPause:()=>{this.#s({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const i=this.state.status==="pending",o=!this.#r.canStart();try{if(i)t();else{this.#s({type:"pending",variables:e,isPaused:o}),await this.#n.config.onMutate?.(e,this,n);const d=await this.options.onMutate?.(e,n);d!==this.state.context&&this.#s({type:"pending",context:d,variables:e,isPaused:o})}const c=await this.#r.start();return await this.#n.config.onSuccess?.(c,e,this.state.context,this,n),await this.options.onSuccess?.(c,e,this.state.context,n),await this.#n.config.onSettled?.(c,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(c,null,e,this.state.context,n),this.#s({type:"success",data:c}),c}catch(c){try{throw await this.#n.config.onError?.(c,e,this.state.context,this,n),await this.options.onError?.(c,e,this.state.context,n),await this.#n.config.onSettled?.(void 0,c,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,c,e,this.state.context,n),c}finally{this.#s({type:"error",error:c})}}finally{this.#n.runNext(this)}}#s(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Ms.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function O9(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var I9=class extends Xh{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,t,n){const i=new P9({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(t),state:n});return this.add(i),i}add(e){this.#e.add(e);const t=Xf(e);if(typeof t=="string"){const n=this.#t.get(t);n?n.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=Xf(e);if(typeof t=="string"){const n=this.#t.get(t);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Xf(e);if(typeof t=="string"){const i=this.#t.get(t)?.find(o=>o.state.status==="pending");return!i||i===e}else return!0}runNext(e){const t=Xf(e);return typeof t=="string"?this.#t.get(t)?.find(i=>i!==e&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ms.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(n=>gC(t,n))}findAll(e={}){return this.getAll().filter(t=>gC(e,t))}notify(e){Ms.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Ms.batch(()=>Promise.all(e.map(t=>t.continue().catch(Hr))))}};function Xf(e){return e.options.scope?.id}var W9=class extends Xh{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const i=t.queryKey,o=t.queryHash??_0(i,t);let c=this.get(o);return c||(c=new M9({client:e,queryKey:i,queryHash:o,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(c)),c}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ms.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>mC(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>mC(e,n)):t}notify(e){Ms.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Ms.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ms.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},_9=class{#e;#t;#n;#r;#s;#a;#o;#i;constructor(e={}){this.#e=e.queryCache||new W9,this.#t=e.mutationCache||new I9,this.#n=e.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=lM.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=kh.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#i?.(),this.#i=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#e.build(this,t),i=n.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Ox(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const i=n.data;return[t,i]})}setQueryData(e,t,n){const i=this.defaultQueryOptions({queryKey:e}),c=this.#e.get(i.queryHash)?.state.data,d=p9(t,c);if(d!==void 0)return this.#e.build(this,i).setData(d,{...n,manual:!0})}setQueriesData(e,t,n){return Ms.batch(()=>this.#e.findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Ms.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e;return Ms.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},i=Ms.batch(()=>this.#e.findAll(e).map(o=>o.cancel(n)));return Promise.all(i).then(Hr).catch(Hr)}invalidateQueries(e,t={}){return Ms.batch(()=>(this.#e.findAll(e).forEach(n=>{n.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},i=Ms.batch(()=>this.#e.findAll(e).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let c=o.fetch(void 0,n);return n.throwOnError||(c=c.catch(Hr)),o.state.fetchStatus==="paused"?Promise.resolve():c}));return Promise.all(i).then(Hr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(Ox(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Hr).catch(Hr)}fetchInfiniteQuery(e){return e.behavior=SC(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Hr).catch(Hr)}ensureInfiniteQueryData(e){return e.behavior=SC(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return kh.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,t){this.#r.set(td(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#r.values()],n={};return t.forEach(i=>{nd(e,i.queryKey)&&Object.assign(n,i.defaultOptions)}),n}setMutationDefaults(e,t){this.#s.set(td(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#s.values()],n={};return t.forEach(i=>{nd(e,i.mutationKey)&&Object.assign(n,i.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=_0(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===z0&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},z9=y.createContext(void 0),N9=({client:e,children:t})=>(y.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(z9.Provider,{value:e,children:t}));const L9=new _9;tO.createRoot(document.getElementById("root")).render(r.jsx(Ta.StrictMode,{children:r.jsx(N9,{client:L9,children:r.jsx(rT,{children:r.jsx(dD,{children:r.jsx(ND,{children:r.jsx(kT,{children:r.jsx(u9,{})})})})})})}))});export default F9();
